<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[é…ç½®Dockeré•œåƒåŠ é€Ÿå™¨2019]]></title>
    <url>%2F2019%2F05%2F29%2Fsetting-docker-mirror-2019%2F</url>
    <content type="text"><![CDATA[æœ‹å‹æé†’åšå®¢ä¸­çš„ä¸€ç¯‡è®¾ç½®Dockeré•œåƒåŠ é€Ÿå™¨çš„æ–‡ç«  é…ç½®Dockeré•œåƒåŠ é€Ÿå™¨ | ITèŒƒå„¿ ä¸­ä»‹ç»çš„æ–¹æ³•å¤ªè¿‡æ—¶äº†ï¼Œçœ‹è¿‡ä¹‹åæ‰å‘ç°é‚£ç¯‡æ–‡ç« æ˜¯2016å¹´çš„æ—¶å€™å†™çš„ã€‚æ‰€ä»¥èµ¶ç´§æ›´æ–°ä¸€ä¸‹ã€‚ åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå¹²è´§ã€‚ å®‰è£…ï¼å‡çº§Dockerå®¢æˆ·ç«¯æ¨èå®‰è£… 1.10.0 ä»¥ä¸Šç‰ˆæœ¬çš„Dockerå®¢æˆ·ç«¯ï¼Œå‚è€ƒDockerå®˜æ–¹æ–‡æ¡£ About Docker CE | Docker Documentation æˆ–æˆ‘çš„æ–‡ç«  Ubuntu16.04ä¸‹å®‰è£…Docker-CEç¤¾åŒºç‰ˆ | ITèŒƒå„¿ é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨æ‰“å¼€ é˜¿é‡Œäº‘æ§åˆ¶å° â€“ å·¦ä¾§å¯¼èˆªèœå• äº§å“ä¸æœåŠ¡ â€“ å¼¹æ€§è®¡ç®— â€“ å®¹å™¨é•œåƒæœåŠ¡ â€“ å·¦ä¾§å¯¼èˆªèœå• é•œåƒä¸­å¿ƒ â€“ é•œåƒåŠ é€Ÿå™¨ ã€‚å¯ä»¥çœ‹åˆ° â€œæ‚¨çš„åŠ é€Ÿå™¨åœ°å€â€ å³ https://xxxxxxx.mirror.aliyuncs.com ã€‚ æˆ–è€…ç›´æ¥æ‰“å¼€ é•œåƒåŠ é€Ÿå™¨é¡µé¢ ã€‚ æ³¨æ„ï¼Œéœ€è¦ç™»å½•é˜¿é‡Œäº‘è´¦å· é…ç½®é•œåƒåŠ é€Ÿå™¨è¿™é‡Œè¿˜æ˜¯ä»¥ Linux ç³»ç»Ÿä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿå¯ç›´æ¥å‚è€ƒä¸Šé¢åŠ é€Ÿå™¨é¡µé¢ä¸­çš„é…ç½®æ–¹æ³•ã€‚ é’ˆå¯¹Dockerå®¢æˆ·ç«¯ç‰ˆæœ¬å¤§äº 1.10.0 çš„ç”¨æˆ· æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶ /etc/docker/daemon.json æ¥ä½¿ç”¨åŠ é€Ÿå™¨12345678sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;&#123; &quot;registry-mirrors&quot;: [&quot;https://xxxxxxx.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker æ³¨æ„å°†å…¶ä¸­çš„ xxxxxxx ä¿®æ”¹ä¸ºè‡ªå·±é˜¿é‡Œäº‘è´¦æˆ·çš„ç»™å®šåœ°å€ã€‚ DaoCloadé•œåƒåŠ é€Ÿå™¨è®¿é—®DaoCloudå®˜æ–¹é•œåƒé¡µé¢ DaoCloud â€“ ä¼ä¸šçº§äº‘è®¡ç®—é¢†åŸŸçš„åˆ›æ–°é¢†å¯¼è€… ã€‚ DaoCloudçš„é•œåƒåŠ é€Ÿåœ°å€ï¼Œä¸éœ€è¦æ³¨å†Œå°±å¯ä»¥ä½¿ç”¨ é…ç½®é•œåƒåŠ é€Ÿå™¨Linux1curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io macOSDocker For Mac å³é”®ç‚¹å‡»æ¡Œé¢é¡¶æ çš„ docker å›¾æ ‡ï¼Œé€‰æ‹© Preferences ï¼Œåœ¨ Daemon æ ‡ç­¾ï¼ˆDocker 17.03 ä¹‹å‰ç‰ˆæœ¬ä¸º Advanced æ ‡ç­¾ï¼‰ä¸‹çš„ Registry mirrors åˆ—è¡¨ä¸­åŠ å…¥ä¸‹é¢çš„é•œåƒåœ°å€:1http://f1361db2.m.daocloud.io ç‚¹å‡» Apply &amp; Restart æŒ‰é’®ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚ WindowsDocker For Windows åœ¨æ¡Œé¢å³ä¸‹è§’çŠ¶æ€æ ä¸­å³é”® docker å›¾æ ‡ï¼Œä¿®æ”¹åœ¨ Docker Daemon æ ‡ç­¾é¡µä¸­çš„ json ï¼ŒæŠŠä¸‹é¢çš„åœ°å€:1http://f1361db2.m.daocloud.io åŠ åˆ°â€ registry-mirrorsâ€çš„æ•°ç»„é‡Œã€‚ç‚¹å‡» Apply ã€‚ ä»¥ä¸Šä¸¤ç§æ–¹æ³•ï¼Œçœ‹è‡ªå·±çš„éœ€æ±‚ä»»é€‰å…¶ä¸€é…ç½®ã€‚]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kuberneteså…¥é—¨ -- äºŒä¼˜åŒ–ä¸è¿›é˜¶]]></title>
    <url>%2F2019%2F05%2F17%2Fkubernetes-introduction-for-optimization-and-advancement%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†é€šè¿‡kubeadmæ¥é…ç½®Kubernetesé›†ç¾¤è¿è¡Œç¯å¢ƒã€‚é‚£åœ¨å¼€å§‹è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ä¹‹å‰ï¼Œè¿˜æ˜¯æ¥äº†è§£ä¸€äº›èƒ½å¤Ÿæé«˜æˆ‘ä»¬æ‰§è¡Œæ•ˆç‡çš„æŠ€å·§å§ï¼ kubectlå‘½ä»¤è‡ªåŠ¨è¡¥å…¨kubectl completionåœ¨ Master èŠ‚ç‚¹ä¸Šï¼Œæ‰§è¡Œ kubectl å‘½ä»¤æ—¶ï¼Œé»˜è®¤æ˜¯æ— æ³•ä½¿ç”¨è‡ªåŠ¨æç¤ºçš„åŠŸèƒ½ã€‚ä¹Ÿå°±å¯¼è‡´äº†æˆ‘ä»¬éœ€è¦æŠŠå‘½ä»¤æ•²å®Œæ•´æ‰å¯ä»¥ã€‚kubectl å·¥å…·æœ¬èº«å°±æ”¯æŒè‡ªåŠ¨è¡¥å…¨ï¼Œåªä¸è¿‡éœ€è¦è®¾ç½®ä¸€ä¸‹ã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ bash, åˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12$ echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc$ source ~/.bashrc å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ zsh,åˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12$ echo &quot;source &lt;(kubectl completion zsh)&quot; &gt;&gt; ~/.zshrc$ source ~/.zshrc æˆ–è€…ç›´æ¥ç¼–è¾‘ ~/.zshrc åŠ ä¸Š source &lt;(kubectl completion zsh) ä¸€è¡Œã€‚ Kube-promptï¼šäº¤äº’å¼ Kubernetes å®¢æˆ·ç«¯Kube-prompt å¯ä»¥è®©ä½ åœ¨å‘½ä»¤è¡Œä¸‹æ¥å—ä¸ Kubectl ç›¸åŒçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸éœ€è¦æä¾› Kubectl å‰ç¼€ã€‚Kube-prompt è¿˜æäº†äº¤äº’å¼ä¼šè¯ä¸‹çš„å‘½ä»¤æç¤ºã€è‡ªåŠ¨è¡¥å…¨ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®åœ°å€ï¼šc-bata/kube-prompt: An interactive kubernetes client featuring auto-complete. å®‰è£…ï¼š ç›´æ¥è®¿é—®åœ°å€ Releases Â· c-bata/kube-prompt ä¸‹è½½ç›¸åº”æ–‡ä»¶å¹¶è§£å‹åˆ°æœ¬åœ°ã€‚ç„¶åç»™ kube-prompt åŠ ä¸Šæ‰§è¡Œæƒé™å¹¶ç§»æ‡‚åˆ°ç³»ç»Ÿç›®å½•ï¼š 12$ chmod +x kube-prompt$ sudo mv ./kube-prompt /usr/local/bin/kube-prompt æ‰‹æŠŠæ‰‹æ•™ä½ æ‰“é€ é«˜æ•ˆçš„ Kubernetes å‘½ä»¤è¡Œç»ˆç«¯ - è¿ç»´ä¹‹ç¾ æ‰“é€ é«˜æ•ˆçš„Kuberneteså‘½ä»¤è¡Œç»ˆç«¯ - å®‹å‡€è¶…çš„åšå®¢|Cloud Native|äº‘åŸç”Ÿå¸ƒé“å¸ˆ é‡ç½® kubernetes initå¦‚æœéœ€è¦åœ¨ kubeadm init ä¸­åŠ å…¥ä¸€äº›å…¶ä»–çš„å‚æ•°é…ç½®ï¼Œé‚£ä¹ˆå¦‚ä½•é‡ç½®åˆšæ‰çš„æ“ä½œå‘¢ï¼Ÿ æ‰§è¡Œ kubeadm reset å‘½ä»¤å³å¯ï¼Œè¯¥å‘½ä»¤ä¼šå°†ä¸»æœºæ¢å¤åŸçŠ¶ï¼š 123[root@master ~]# kubeadm reset[reset] WARNING: changes made to this host by &apos;kubeadm init&apos; or &apos;kubeadm join&apos; will be reverted.[reset] are you sure you want to proceed? [y/N]: å¦‚ä½•ä»é›†ç¾¤ä¸­ç§»é™¤NodeèŠ‚ç‚¹å¦‚æœéœ€è¦ä»é›†ç¾¤ä¸­ç§»é™¤ node1 è¿™ä¸ªNodeæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š åœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š12# kubectl drain &lt;node1&gt; --delete-local-data --force --ignore-daemonsets# kubectl delete node &lt;node1&gt; åœ¨ node1 ä¸Šæ‰§è¡Œä»¥ä¸‹å‡ æ¡å‘½ä»¤:123456# kubeadm reset# ifconfig cni0 down# ip link delete cni0# ifconfig flannel.1 down# ip link delete flannel.1# rm -rf /var/lib/cni/ æ–°å¢NodeèŠ‚ç‚¹ä½†tokenè¿‡æœŸäº†é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetesç”Ÿæˆçš„tokenè¿‡æœŸæ—¶é—´æ˜¯24å°æ—¶ã€‚å¯ä»¥é€šè¿‡ kubeadm token list å‘½ä»¤æ¥æŸ¥çœ‹ï¼š123âœ ~ kubeadm token listTOKEN TTL EXPIRES USAGES DESCRIPTION EXTRA GROUPSrunell.pdp1y28g1dsayy1o 20h 2019-05-18T08:03:41+08:00 authentication,signing The default bootstrap token generated by &apos;kubeadm init&apos;. system:bootstrappers:kubeadm:default-node-token åœ¨ token è¿‡æœŸä¹‹åï¼Œå¦‚æœæƒ³è¦å¢åŠ æ–°çš„èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆæ–°çš„ token å€¼ï¼š1kubeadm token create æŸ¥çœ‹å¯†é’¥çš„ hash å€¼ï¼š1openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed &apos;s/^.* //&apos; åœ¨è¦æ–°å¢çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š1kubeadm join --token &lt;token&gt; &lt;master-ip&gt;:&lt;master-port&gt; --discovery-token-ca-cert-hash sha256:&lt;hash&gt; Creating a single master cluster with kubeadm - Kubernetes åœ¨å…¶ä»–ç”µè„‘ä¸Šä½¿ç”¨kubectlè¿œç¨‹ç®¡ç†åœ¨ç®¡ç†Kubernetesé›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬æ¯æ¬¡æ‰§è¡Œkubectlå‘½ä»¤éƒ½è¦ç™»å½•åˆ° Master èŠ‚ç‚¹ä¸Šæ“ä½œï¼Œæœ‰ä¸€äº›éº»çƒ¦ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è‡ªå·±çš„å¼€å‘ç”µè„‘ä¸Šé€šè¿‡å®‰è£…å•ç‹¬çš„ kubectl æ–‡ä»¶æ¥è¿›è¡Œè¿œç¨‹ç®¡ç†ã€‚ å®‰è£…kubectlä»¥MacOSä¸ºä¾‹ã€‚ äºŒè¿›åˆ¶æ–¹å¼å®‰è£…æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„kubectl:1curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/darwin/amd64/kubectl è¦ä¸‹è½½ç‰¹å®šç‰ˆæœ¬ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥è¯¢å¯ç”¨ç‰ˆæœ¬ï¼š1curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt ç„¶åé€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä¸‹è½½ï¼Œä»¥ v1.14.0 ç‰ˆæœ¬ä¸ºä¾‹ï¼š1curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.14.0/bin/darwin/amd64/kubectl ç„¶åï¼Œä¸ºå…¶èµ‹äºˆå¯æ‰§è¡Œæƒé™å¹¶æ”¾åˆ°ç³»ç»Ÿç›®å½•ä¸‹ï¼š123chmod +x ./kubectlsudo mv ./kubectl /usr/local/bin/kubectl éªŒè¯æ˜¯å¦å¯ç”¨ï¼š1kubectl version ä¸è¿‡ç”±äºâ€œç½‘ç»œåŸå› â€ï¼Œåœ°å€ https://storage.googleapis.com å¯èƒ½è®¿é—®ä¸åˆ°ã€‚ä¹Ÿå°±å¯¼è‡´ä¸Šé¢çš„ä¸‹è½½å‘½ä»¤ä¼šä¸€ç›´å¡ç€ä¸åŠ¨ã€‚ æˆ‘ä»¬åªèƒ½é€šè¿‡å»æŒ‡å®šçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½åœ°å€äº†ã€‚ æ‰¾åˆ° Kubernetesåœ¨ GitHubä¸Šçš„ä»“åº“åœ°å€å…¶ä¸­çš„ CHANGELOG.md æ–‡ä»¶ï¼škubernetes/CHANGELOG.md at master Â· kubernetes/kubernetes é€‰æ‹©æŒ‡å®šç‰ˆæœ¬ä¸‹çš„ Client Binaries ï¼š é€‰æ‹©æŒ‡å®šçš„æ–‡ä»¶ä¸‹è½½ï¼š ä¸‹è½½åˆ°æœ¬åœ°ï¼š1âœ wget https://dl.k8s.io/v1.14.1/kubernetes-client-darwin-amd64.tar.gz æ³¨ï¼šhttps://dl.k8s.io è¿™ä¸ªç½‘å€å¯èƒ½ä¹Ÿè®¿é—®ä¸åˆ°ï¼Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨ FQ å·¥å…·åæ“ä½œã€‚ å®‰è£…å¥½åè¿›è¡ŒéªŒè¯ï¼š123âœ kubectl versionClient Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;14&quot;, GitVersion:&quot;v1.14.1&quot;, GitCommit:&quot;b7394102d6ef778017f2ca4046abbaa23b88c290&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-04-08T17:11:31Z&quot;, GoVersion:&quot;go1.12.1&quot;, Compiler:&quot;gc&quot;, Platform:&quot;darwin/amd64&quot;&#125;The connection to the server localhost:8080 was refused - did you specify the right host or port? æ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚ é€šè¿‡homebrewå®‰è£…å¦‚æœè§‰å¾—ä¸Šé¢çš„æ–¹å¼å¤ªç¹çï¼Œè¿˜å¯ä»¥é€‰æ‹©ä½¿ç”¨ Homebrew æ¥å®‰è£…ï¼š123brew install kubernetes-clikubectl version å…¶ä»–ç³»ç»Ÿå…¶ä»–ç³»ç»Ÿå¯ç”¨çš„ kubectl é™¤äº†ä¸Šé¢çš„äºŒè¿›åˆ¶æ–¹å¼ï¼Œè¿˜å¯ä»¥åœ¨è¿™ä¸ªåœ°å€ä¸­ä¸‹è½½ï¼ˆæ— éœ€FQï¼‰ï¼š Index of /kubernetes/ è·å–æˆæƒæ–‡ä»¶è¦è¿æ¥åˆ°Kubernetesé›†ç¾¤ï¼Œè¿˜éœ€è¦æŒ‡å®šæˆæƒæ–‡ä»¶ã€‚åªéœ€å°† Master èŠ‚ç‚¹ä¸Šçš„æˆæƒæ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°çš„é»˜è®¤è·¯å¾„ $HOME/.kube ä¸­ã€‚ åˆ›å»º $HOME/.kube ç›®å½•:1âœ mkdir -p $HOME/.kube æ‰§è¡Œ scp å‘½ä»¤ï¼š1âœ scp root@192.168.5.28:/etc/kubernetes/admin.conf ~/.kube/config éªŒè¯èƒ½å¦æ­£å¸¸è¿æ¥åˆ°é›†ç¾¤ï¼š1234âœ kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster Ready master 5h52m v1.14.1node1 Ready &lt;none&gt; 4h48m v1.14.1 å› ä¸º kubectlé»˜è®¤çš„é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯ $HOME/.kube/config ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è®¾ç½®æˆè¿™ä¸ªã€‚å¦‚æœæ˜¯å…¶ä»–è·¯å¾„ï¼Œåˆ™éœ€è¦é€šè¿‡ --kubeconfig å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶ï¼š1kubectl --kubeconfig ./admin.conf get nodes å¯ç”¨è‡ªåŠ¨è¡¥å…¨è¿™é‡Œï¼Œä¾ç„¶éœ€è¦è®¾ç½®ä¸€ä¸‹ kubectl å‘½ä»¤çš„è‡ªåŠ¨è¡¥å…¨ï¼ˆzshï¼‰ï¼š12$ echo &quot;source &lt;(kubectl completion zsh)&quot; &gt;&gt; ~/.zshrc$ source ~/.zshrc Creating a single master cluster with kubeadm - Kubernetes å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯å‘½ä»¤ï¼škubectl cluster-info12345âœ ~ kubectl cluster-infoKubernetes master is running at https://192.168.5.28:6443KubeDNS is running at https://192.168.5.28:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxyTo further debug and diagnose cluster problems, use &apos;kubectl cluster-info dump&apos;. æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯å‘½ä»¤ï¼škubectl version123âœ ~ kubectl versionClient Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;14&quot;, GitVersion:&quot;v1.14.1&quot;, GitCommit:&quot;b7394102d6ef778017f2ca4046abbaa23b88c290&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-04-08T17:11:31Z&quot;, GoVersion:&quot;go1.12.1&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125;Server Version: version.Info&#123;Major:&quot;1&quot;, Minor:&quot;14&quot;, GitVersion:&quot;v1.14.1&quot;, GitCommit:&quot;b7394102d6ef778017f2ca4046abbaa23b88c290&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2019-04-08T17:02:58Z&quot;, GoVersion:&quot;go1.12.1&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;&#125; æŸ¥çœ‹é›†ç¾¤æ‰€æœ‰Podä¿¡æ¯: kubectl get pod --all-namespaces12345678910111213âœ ~ kubectl get pod --all-namespacesNAMESPACE NAME READY STATUS RESTARTS AGEkube-system coredns-fb8b8dccf-cm28l 1/1 Running 1 3h48mkube-system coredns-fb8b8dccf-lqh8n 1/1 Running 1 3h48mkube-system etcd-master 1/1 Running 1 3h47mkube-system kube-apiserver-master 1/1 Running 1 3h47mkube-system kube-controller-manager-master 1/1 Running 1 3h47mkube-system kube-flannel-ds-amd64-2rzqc 1/1 Running 1 3h16mkube-system kube-flannel-ds-amd64-thg6z 1/1 Running 1 165mkube-system kube-proxy-8x8f6 1/1 Running 1 108mkube-system kube-proxy-k54d5 1/1 Running 1 108mkube-system kube-scheduler-master 1/1 Running 1 3h48mâœ ~ æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚]]></content>
      <categories>
        <category>äº‘åŸç”Ÿç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
        <tag>äº‘åŸç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kuberneteså…¥é—¨ -- ä¸€ä½¿ç”¨kubeadméƒ¨ç½²Kubernetesé›†ç¾¤v1.14.1]]></title>
    <url>%2F2019%2F05%2F17%2Fkubernetes-introduction-for-install-by-kubeadm%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€æ¬¡é€šè¿‡kubeadmæ¥é…ç½®Kubernetesçš„ç¯å¢ƒä½¿ç”¨çš„è¿˜æ˜¯ v1.13 çš„ç‰ˆæœ¬ï¼Œæœ€è¿‘çœ‹åˆ°Kubernetesçš„ç¨³å®šç‰ˆæœ¬å·²ç»æ›´æ–°åˆ°äº† v1.14.1 ï¼Œæ‰€ä»¥å†³å®šé‡æ–°å®‰è£…ä¸€æ¬¡ï¼Œå¹¶æŠŠé…ç½®è¿‡ç¨‹å’Œé‡åˆ°çš„é—®é¢˜åŒæ—¶æ•´ç†ä¸€ä¸‹ã€‚ kubeadmæ˜¯Kuberneteså®˜æ–¹æä¾›çš„ç”¨äºå¿«é€Ÿå®‰è£…Kubernetesé›†ç¾¤çš„å·¥å…·ï¼Œä¼´éšKubernetesæ¯ä¸ªç‰ˆæœ¬çš„å‘å¸ƒéƒ½ä¼šåŒæ­¥æ›´æ–°ï¼Œkubeadmä¼šå¯¹é›†ç¾¤é…ç½®æ–¹é¢çš„ä¸€äº›å®è·µåšè°ƒæ•´ï¼Œé€šè¿‡å®éªŒkubeadmå¯ä»¥å­¦ä¹ åˆ°Kuberneteså®˜æ–¹åœ¨é›†ç¾¤é…ç½®ä¸Šä¸€äº›æ–°çš„æœ€ä½³å®è·µã€‚ ç³»ç»Ÿä¿¡æ¯ master ip : 192.168.5.28 node1 ip : 192.168.5.29 é…ç½®å‡ä¸ºï¼š2æ ¸2G ç³»ç»Ÿç¯å¢ƒé…ç½®æ³¨æ„ï¼šåœ¨ Master å’Œ Node èŠ‚ç‚¹å‡æ“ä½œ åˆ‡æ¢åˆ° root æƒé™1$ sudo - root æ›´æ”¹hostnamemaster123# hostname# hostnamectl set-hostname master# hostname node1123# hostname# hostnamectl set-hostname node1# hostname ä¿®æ”¹ hostsmasterç¼–è¾‘ /etc/hosts æ–‡ä»¶ï¼Œåœ¨åº•éƒ¨æ–°å¢ä¸‹é¢ä¸¤è¡Œï¼Œç„¶åé‡å¯ç³»ç»Ÿï¼š123456# vim /etc/hosts192.168.5.28 master192.168.5.29 node1reboot ç¦ç”¨é˜²ç«å¢™12# systemctl disable firewalld &amp;&amp; systemctl stop firewalld# systemctl status firewalld ç¦ç”¨SELinux12345# setenforce 0# vim /etc/selinux/config#SELINUX=enforcingSELINUX=disabled ç¦ç”¨swapæŸ¥çœ‹å½“å‰swapçŠ¶æ€ï¼š1234# free -m total used free shared buff/cache availableMem: 1466 142 1063 8 260 1151Swap: 3071 0 3071 ç¦ç”¨swap:1# swapoff -a ç¼–è¾‘ /etc/fstab æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰å¸¦æœ‰ swap çš„é‚£ä¸€è¡Œï¼š123# vim /etc/fstab#/dev/mapper/centos-swap swap swap defaults 0 0 æŸ¥çœ‹ï¼š1234# free -m total used free shared buff/cache availableMem: 1466 142 1063 8 260 1152Swap: 0 0 0 ä¿®æ”¹iptablesé…ç½®åˆ›å»º /etc/sysctl.d/k8s.conf æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š123net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1net.ipv4.ip_forward = 1 æ‰§è¡Œå‘½ä»¤ä½¿ä¿®æ”¹ç”Ÿæ•ˆ:12# modprobe br_netfilter# sysctl -p /etc/sysctl.d/k8s.conf kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶ç”±äºipvså·²ç»åŠ å…¥åˆ°äº†å†…æ ¸çš„ä¸»å¹²ï¼Œæ‰€ä»¥ä¸ºkube-proxyå¼€å¯ipvsçš„å‰æéœ€è¦åŠ è½½ä»¥ä¸‹çš„å†…æ ¸æ¨¡å—ï¼š12345ip_vsip_vs_rrip_vs_wrrip_vs_shnf_conntrack_ipv4 æ‰§è¡Œä»¥ä¸‹è„šæœ¬æ¥é…ç½®ï¼š 1234567891011cat &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF#!/bin/bashmodprobe -- ip_vsmodprobe -- ip_vs_rrmodprobe -- ip_vs_wrrmodprobe -- ip_vs_shmodprobe -- nf_conntrack_ipv4EOFchmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4 ä¿è¯ ipset å·²å®‰è£…ï¼ŒåŒæ—¶è¦ç®¡ç†ipvsï¼Œéœ€è¦å®‰è£…ipvsadm:1# yum install ipset ipvsadm å®‰è£…dockerçœç•¥ã€‚ ä¿®æ”¹docker cgroup driverä¸ºsystemdæ ¹æ®æ–‡æ¡£CRI installationä¸­çš„å†…å®¹ï¼Œå¯¹äºä½¿ç”¨systemdä½œä¸ºinit systemçš„Linuxçš„å‘è¡Œç‰ˆï¼Œä½¿ç”¨systemdä½œä¸ºdockerçš„cgroup driverå¯ä»¥ç¡®ä¿æœåŠ¡å™¨èŠ‚ç‚¹åœ¨èµ„æºç´§å¼ çš„æƒ…å†µæ›´åŠ ç¨³å®šï¼Œå› æ­¤è¿™é‡Œä¿®æ”¹å„ä¸ªèŠ‚ç‚¹ä¸Šdockerçš„cgroup driverä¸ºsystemdã€‚ æŸ¥çœ‹docerçš„cgroup:12# docker info |grep -i cgroupCgroup Driver: cgroupfs åˆ›å»ºæˆ–ä¿®æ”¹ /etc/docker/daemon.json123&#123; &quot;exec-opts&quot;:[&quot;native.cgroupdriver=systemd&quot;]&#125; é‡å¯docker:1# systemctl restart docker å†æ¬¡æŸ¥çœ‹cgroup:12# docker info |grep -i cgroupCgroup Driver: systemd ä½¿ç”¨kubeadméƒ¨ç½²Kuberneteså®‰è£…kubeadmå’Œkubeletéœ€è¦åœ¨å„ä¸ªèŠ‚ç‚¹åˆ†åˆ«é…ç½®åœ°å€æº123456789cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/enabled=1gpgcheck=1repo_gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF æ›´æ–°ç¼“å­˜ï¼š1# yum makecache fast MasterèŠ‚ç‚¹å®‰è£…åœ¨ Master èŠ‚ç‚¹ä¸Šå®‰è£… kubelet kubeadm kubectl:123456# yum install -y kubelet kubeadm kubectlInstalling: kubeadm 1.14.1-0 kubectl 1.14.1-0 kubelet 1.14.1-0 NodeèŠ‚ç‚¹å®‰è£…åœ¨ Node1 èŠ‚ç‚¹ä¸Šå®‰è£… kubelet kubeadm:1# yum install -y kubelet kubeadm kubectl åœ¨ node èŠ‚ç‚¹ä¸Šæ˜¯éå¿…éœ€çš„ã€‚ è®¾ç½® kubelet å¼€æœºå¯åŠ¨1# systemctl enable kubelet &amp;&amp; systemctl start kubelet æ­¤æ—¶å¦‚æœæŸ¥çœ‹ kubelet çš„çŠ¶æ€ï¼Œä¼šå‘ç° å¤„äº loaded çŠ¶æ€ï¼Œé”™è¯¯ç æ˜¯ 255:123456789# systemctl status kubeletâ— kubelet.service - kubelet: The Kubernetes Node Agent Loaded: loaded (/usr/lib/systemd/system/kubelet.service; enabled; vendor preset: disabled) Drop-In: /usr/lib/systemd/system/kubelet.service.d â””â”€10-kubeadm.conf Active: activating (auto-restart) (Result: exit-code) since Thu 2019-05-16 23:51:36 CST; 808ms ago Docs: https://kubernetes.io/docs/ Process: 4317 ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_CONFIG_ARGS $KUBELET_KUBEADM_ARGS $KUBELET_EXTRA_ARGS (code=exited, status=255) Main PID: 4317 (code=exited, status=255) æå‰è·å–é•œåƒå¯ä»¥é€šè¿‡å‘½ä»¤ kubeadm config images list æŸ¥çœ‹å½“å‰å¯ç”¨çš„æœ€æ–°é•œåƒç‰ˆæœ¬ä¿¡æ¯ã€‚ Kuberneteså¯åŠ¨æ—¶é»˜è®¤ä¼šä» k8s.gcr.io å»æ‹‰å–æ‰€éœ€çš„é•œåƒï¼Œä½†è¯¥åœ°å€åœ¨å›½å†…æ— æ³•è®¿é—®ï¼Œéœ€è¦æ›´æ¢ä¸ºå›½å†…å¯ç”¨çš„åœ°å€ã€‚ Azure ä¸­å›½ æä¾›äº† gcr.io åŠ k8s.gcr.io å®¹å™¨ä»“åº“çš„é•œåƒä»£ç†æœåŠ¡ã€‚ é•œåƒåœ°å€ï¼šdocker pull gcr.azk8s.cn/google_containers/&lt;imagename&gt;:&lt;version&gt; é»˜è®¤æƒ…å†µä¸‹æ— æ³•è®¿é—®è·å–æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä¼šæ ¹æ®ä½¿ç”¨çš„ kubeadm çš„ç‰ˆæœ¬ç»™å‡ºç›¸åº”ç‰ˆæœ¬ï¼š12345678910# kubeadm config images listI0517 00:03:01.427109 4857 version.go:96] could not fetch a Kubernetes version from the internet: unable to get URL &quot;https://dl.k8s.io/release/stable-1.txt&quot;: Get https://dl.k8s.io/release/stable-1.txt: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)I0517 00:03:01.427382 4857 version.go:97] falling back to the local client version: v1.14.1k8s.gcr.io/kube-apiserver:v1.14.1k8s.gcr.io/kube-controller-manager:v1.14.1k8s.gcr.io/kube-scheduler:v1.14.1k8s.gcr.io/kube-proxy:v1.14.1k8s.gcr.io/pause:3.1k8s.gcr.io/etcd:3.3.10k8s.gcr.io/coredns:1.3.1 ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šç‰ˆæœ¬ï¼š1kubeadm config images list --kubernetes-version=v1.14.1 ä¸‹è½½é•œåƒåœ¨ Master å’Œ Node èŠ‚ç‚¹å‡æ‰§è¡Œ åˆ›å»ºä¸€ä¸ªåä¸º kubeadm_pull.sh è„šæœ¬æ–‡ä»¶: 12345678# kubeadm_pull.shfor i in `kubeadm config images list`; do imageName=$&#123;i#k8s.gcr.io/&#125; docker pull gcr.azk8s.cn/google_containers/$imageName docker tag gcr.azk8s.cn/google_containers/$imageName k8s.gcr.io/$imageName docker rmi gcr.azk8s.cn/google_containers/$imageNamedone; åœ¨ç½‘ä¸Šä¹Ÿæ‰¾åˆ°ä¸€ä¸ªé˜¿é‡Œäº‘çš„åœ°å€æº registry.aliyuncs.com/google_containersï¼Œæ›¿æ¢è„šæœ¬ä¸­çš„ gcr.azk8s.cn/google_containers éƒ¨åˆ†å³å¯ã€‚ å¦å¤–ï¼Œå¦‚æœæƒ³ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ï¼Œå¯ä»¥å°†ç¬¬ä¸€è¡Œæ”¹ä¸º kubeadm config images list --kubernetes-version=v1.14.1 å³åŠ ä¸Šç‰ˆæœ¬çš„é™åˆ¶: 1--kubernetes-version=v1.14.1 ç„¶åæ‰§è¡Œï¼Œç­‰å¾…ä¸‹è½½ï¼š 1234# vim ./kubeadm_pull.sh# chmod +x ./kubeadm_pull.sh# ./kubeadm_pull.sh ä½¿ç”¨kubeadm initåˆå§‹åŒ–é›†ç¾¤kubeadm initåœ¨ Master èŠ‚ç‚¹æ‰§è¡Œ 1# kubeadm init --kubernetes-version=v1.14.1 --apiserver-advertise-address=192.168.5.28 --pod-network-cidr=10.244.0.0/16 å…¶ä¸­ï¼Œâ€“apiserver-advertise-addressè¿™æ˜¯ API server ç”¨æ¥å‘ŠçŸ¥é›†ç¾¤ä¸­å…¶å®ƒæˆå‘˜çš„åœ°å€ï¼Œè¿™ä¹Ÿæ˜¯åœ¨ init æµç¨‹çš„æ—¶å€™ç”¨æ¥æ„å»º kubeadm join å‘½ä»¤è¡Œçš„åœ°å€ã€‚ æ›´å¤šçš„é…ç½®å‚æ•°è¯´æ˜å¯è§ï¼škubeadm è®¾ç½®å·¥å…·å‚è€ƒæŒ‡å— | Kubernetes å½“çœ‹åˆ°è¾“å‡ºä¿¡æ¯ä¸­çš„ Your Kubernetes control-plane has initialized successfully! è¯´æ˜Kubernetesåˆå§‹åŒ–æˆåŠŸäº†ã€‚ åé¢çš„å‡ æ®µè¾“å‡ºæ¯”è¾ƒé‡è¦ã€‚ è¦ç®¡ç†é›†ç¾¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š12345To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config å®‰è£…æ”¯æŒçš„Podç½‘ç«™ç»„ä»¶ï¼š123You should now deploy a pod network to the cluster.Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ è¦å°†å…¶ä»–NodeèŠ‚ç‚¹åŠ å…¥åˆ°å½“å‰MasterèŠ‚ç‚¹çš„é›†ç¾¤ä¸­ï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1234Then you can join any number of worker nodes by running the following on each as root:kubeadm join 192.168.5.28:6443 --token runell.pdp1y28g1dsayy1o \ --discovery-token-ca-cert-hash sha256:349ee7b8a8f8a255065ebdbd1de2a98127f45fd190716af6a7a780e025f8cdfd ä¸Šé¢çš„ä¸‰æ­¥ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆå§‹åŒ–é›†ç¾¤è¦åšçš„ã€‚ æˆæƒç®¡ç†é›†ç¾¤å¦‚æœéœ€è¦ä½¿ç”¨Kubernetesé›†ç¾¤ï¼Œåˆ™é¦–å…ˆè¦æ‰§è¡Œä¸Šé¢çš„æˆæƒæ“ä½œï¼Œå¦åˆ™ä½ çœ‹åˆ°çš„å°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š12# kubectl get nodesThe connection to the server localhost:8080 was refused - did you specify the right host or port? åœ¨ Master èŠ‚ç‚¹ä¸Šæ“ä½œ å› ä¸ºæˆ‘å¸¸ç”¨çš„æ˜¯érootç”¨æˆ·ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€€å‡ºrootç”¨æˆ·æƒé™æ¥æ“ä½œã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä»–çš„ç³»ç»Ÿä¸Šæ¥ç®¡ç†é›†ç¾¤ï¼Œåªéœ€è¦å°† /etc/kubernetes/admin.conf æ‹·è´åˆ° $HOME/.kube/config ç›®å½•ä¸­å³å¯ã€‚ 123456789[root@master ~]# exitlogoutâœ ~ pwd/home/tigerâœ ~ mkdir -p $HOME/.kubeâœ ~ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config[sudo] tiger çš„å¯†ç ï¼šâœ ~ sudo chown $(id -u):$(id -g) $HOME/.kube/config æˆ‘ä»¬å¯ä»¥é€šè¿‡ kubectl get nodes æŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€:123âœ ~ kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster NotReady master 14m v1.14.1 master èŠ‚ç‚¹ å¤„äº NotReady çŠ¶æ€ï¼Œè¿˜éœ€è¦é…ç½®ç½‘ç»œã€‚ å®‰è£…ç½‘ç»œç»„ä»¶Kubernetesç³»ç»Ÿä¸ŠPodç½‘ç»œçš„å®ç°ä¾èµ–äºç¬¬ä¸‰æ–¹æ’ä»¶è¿›è¡Œï¼Œç®€å•æ˜“ç”¨çš„å®ç°æ˜¯ä¸ºCoreOSæä¾›çš„flannelé¡¹ç›®ã€‚ å®‰è£…æ–‡æ¡£ Creating a single master cluster with kubeadm - Kubernetes ä¸­çš„ä»‹ç»ï¼Œç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml ç”±äºä¸Šé¢æˆ‘æ˜¯åœ¨ tiger ç”¨æˆ·ä¸‹è®¾ç½®äº†æˆæƒï¼Œæ‰€ä»¥è¿™é‡Œå®‰è£… flannel å°±éœ€è¦åœ¨ tiger ç”¨æˆ·ä¸‹æ¥æ“ä½œï¼ˆä¸éœ€è¦sudoï¼‰ï¼Œæ‰§è¡Œç»“æœï¼š12345678910âœ ~ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.ymlclusterrole.rbac.authorization.k8s.io/flannel createdclusterrolebinding.rbac.authorization.k8s.io/flannel createdserviceaccount/flannel createdconfigmap/kube-flannel-cfg createddaemonset.extensions/kube-flannel-ds-amd64 createddaemonset.extensions/kube-flannel-ds-arm64 createddaemonset.extensions/kube-flannel-ds-arm createddaemonset.extensions/kube-flannel-ds-ppc64le createddaemonset.extensions/kube-flannel-ds-s390x created ä¹‹åï¼Œå†æ¬¡æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼š123âœ ~ kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster Ready master 35m v1.14.1 ç°åœ¨æ˜¯ Ready çŠ¶æ€äº†ã€‚ å¦‚æœæ˜¯ç”¨rootæƒé™æ“ä½œï¼Œç”±äºä¸Šé¢æ²¡æœ‰ä¸ºrootè´¦æˆ·æˆæƒï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š12unable to recognize &quot;https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml&quot;: Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refusedunable to recognize &quot;https://raw.githubusercontent.com/coreos/flannel/a70459be0084506e4ec919aa1c114638878db11b/Documentation/kube-flannel.yml&quot;: Get http://localhost:8080/api?timeout=32s: dial tcp [::1]:8080: connect: connection refused æ£€æŸ¥ Flannel çš„podçŠ¶æ€ï¼š123âœ ~ kubectl get pods -n kube-system -l app=flannelNAME READY STATUS RESTARTS AGEkube-flannel-ds-amd64-2rzqc 1/1 Running 0 6m51s éªŒè¯MasterèŠ‚ç‚¹ä¸Šç›¸å…³Podæ˜¯å¦æ­£å¸¸é€šè¿‡å‘½ä»¤ kubectl get pods --all-namespaces éªŒè¯masterèŠ‚ç‚¹ä¸Škubernetesé›†ç¾¤çš„ç›¸å…³Podæ˜¯å¦éƒ½æ­£å¸¸åˆ›å»ºå¹¶è¿è¡Œï¼š 12345678910âœ ~ kubectl get pods --all-namespacesNAMESPACE NAME READY STATUS RESTARTS AGEkube-system coredns-fb8b8dccf-cm28l 1/1 Running 0 40mkube-system coredns-fb8b8dccf-lqh8n 1/1 Running 0 40mkube-system etcd-master 1/1 Running 0 39mkube-system kube-apiserver-master 1/1 Running 0 39mkube-system kube-controller-manager-master 1/1 Running 0 39mkube-system kube-flannel-ds-amd64-2rzqc 1/1 Running 0 8m10skube-system kube-proxy-mb87m 1/1 Running 0 40mkube-system kube-scheduler-master 1/1 Running 0 40m å¦‚æœå‘ç°æœ‰çŠ¶æ€é”™è¯¯çš„Podï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ kubectl --namespace=kube-system describe pod &lt;pod_name&gt; æ¥æŸ¥çœ‹å…·ä½“é”™è¯¯åŸå› ã€‚ æŸ¥çœ‹é›†ç¾¤ä¸­å„ä¸ªç»„ä»¶çš„çŠ¶æ€ï¼š12345âœ ~ kubectl get csNAME STATUS MESSAGE ERRORscheduler Healthy okcontroller-manager Healthy oketcd-0 Healthy &#123;&quot;health&quot;:&quot;true&quot;&#125; è®¾ç½®MasterèŠ‚ç‚¹è°ƒåº¦PodKubeadm åœ¨ masterèŠ‚ç‚¹ä¸Šä¹Ÿå®‰è£…äº† kubeletï¼Œå‡ºäºå®‰å…¨è€ƒè™‘Podä¸ä¼šè¢«è°ƒåº¦åˆ°Master Nodeä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´Master Nodeä¸å‚ä¸å·¥ä½œè´Ÿè½½ã€‚è¿™æ˜¯å› ä¸ºmasterèŠ‚ç‚¹è¢«æ‰“ä¸Šäº† node-role.kubernetes.io/master:NoSchedule çš„æ ‡è®°ï¼š æŸ¥çœ‹MasterèŠ‚ç‚¹çš„ Taint kubectl describe node &lt;host_name&gt; | grep Taint:12âœ ~ kubectl describe node master | grep TaintTaints: node-role.kubernetes.io/master:NoSchedule å¦‚æœå¸Œæœ›åœ¨ Master èŠ‚ç‚¹ä¸Šä¹Ÿå¯ä»¥è¿è¡Œ Podï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆåˆ é™¤ Node çš„ Label â€œnode-role.kubernetes.io/masterâ€ï¼Œè®©MasterèŠ‚ç‚¹æˆä¸ºNodeèŠ‚ç‚¹ï¼‰ï¼š1234# å½“å‰åªæœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ --all æ¥æ‰§è¡Œkubectl taint nodes --all node-role.kubernetes.io/master-# æˆ–è€…æŒ‡å®šèŠ‚ç‚¹åç§°kubectl taint nodes &lt;host_name&gt; node-role.kubernetes.io/master- ç»“æœï¼š12âœ ~ kubectl taint nodes --all node-role.kubernetes.io/master-node/master untainted å¦å¤–ï¼Œå¦‚æœè¦æ¢å¤ç¦æ­¢masteréƒ¨ç½²Podï¼Œå¯ä»¥æ‰§è¡Œï¼š 1kubectl taint nodes &lt;host_name&gt; node-role.kubernetes.io/master:NoSchedule å‘Kubernetesé›†ç¾¤ä¸­æ·»åŠ NodeèŠ‚ç‚¹æ³¨æ„ï¼šåœ¨ Node èŠ‚ç‚¹ä¸Šæ“ä½œ æŒ‰ç…§ä¸Šé¢çš„ç¬¬ä¸‰æ­¥æ“ä½œï¼Œç›´æ¥åœ¨ Node èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å¿…é¡»ä»¥rootæƒé™æ¥æ‰§è¡Œï¼š 12kubeadm join 192.168.5.28:6443 --token runell.pdp1y28g1dsayy1o \ --discovery-token-ca-cert-hash sha256:349ee7b8a8f8a255065ebdbd1de2a98127f45fd190716af6a7a780e025f8cdfd è¾“å‡ºç»“æœï¼š12345678910111213141516[root@node1 ~]# kubeadm join 192.168.5.28:6443 --token runell.pdp1y28g1dsayy1o \&gt; --discovery-token-ca-cert-hash sha256:349ee7b8a8f8a255065ebdbd1de2a98127f45fd190716af6a7a780e025f8cdfd[preflight] Running pre-flight checks[preflight] Reading configuration from the cluster...[preflight] FYI: You can look at this config file with &apos;kubectl -n kube-system get cm kubeadm-config -oyaml&apos;[kubelet-start] Downloading configuration for the kubelet from the &quot;kubelet-config-1.14&quot; ConfigMap in the kube-system namespace[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;[kubelet-start] Activating the kubelet service[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...This node has joined the cluster:* Certificate signing request was sent to apiserver and a response was received.* The Kubelet was informed of the new secure connection details.Run &apos;kubectl get nodes&apos; on the control-plane to see this node join the cluster. æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€å›åˆ°ä¸»èŠ‚ç‚¹masterä¸Šï¼ŒæŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€ï¼š1234âœ ~ kubectl get nodesNAME STATUS ROLES AGE VERSIONmaster Ready master 65m v1.14.1node1 Ready &lt;none&gt; 77s v1.14.1 è‡³æ­¤ï¼Œnode1 èŠ‚ç‚¹é¡ºåˆ©æ·»åŠ åˆ°äº†é›†ç¾¤ä¸­ã€‚ kube-proxyå¼€å¯ipvsæ³¨æ„ï¼šåœ¨ Master èŠ‚ç‚¹ä¸‹æ“ä½œ é€šè¿‡å‘½ä»¤ ipvsadm -L -n æŸ¥çœ‹å½“å‰ipvsçŠ¶æ€ï¼š1234âœ ~ sudo ipvsadm -L -nIP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags -&gt; RemoteAddress:Port Forward Weight ActiveConn InActConn å‘ç°å¹¶æ²¡æœ‰ä½¿ç”¨ipvsã€‚ ä¿®æ”¹ ConfigMapçš„kube-system/kube-proxy ä¸­çš„ config.confï¼Œæ‰§è¡Œå‘½ä»¤ï¼š1âœ ~ kubectl edit cm kube-proxy -n kube-system æ‰¾åˆ°å…¶ä¸­çš„å¦‚ä¸‹éƒ¨åˆ†ï¼š12345... kind: KubeProxyConfiguration metricsBindAddress: 127.0.0.1:10249 mode: &quot;&quot;... å°† mode: &quot;&quot; æ”¹ä¸º mode: &quot;ipvs&quot;ã€‚ ä¹‹åé‡å¯å„ä¸ªèŠ‚ç‚¹ä¸Šçš„kube-proxy Pod:1kubectl get pod -n kube-system | grep kube-proxy | awk &apos;&#123;system(&quot;kubectl delete pod &quot;$1&quot; -n kube-system&quot;)&#125;&apos; ä¸Šé¢çš„å‘½ä»¤æ˜¯å°†åŸæœ‰ kube-proxy çš„ Pod åˆ é™¤ï¼Œç„¶åé‡æ–°åˆ›å»ºçš„ã€‚æ‰§è¡Œç»“æœï¼š12345678910âœ ~ kubectl get pod -n kube-system | grep kube-proxykube-proxy-d78m2 1/1 Running 0 55mkube-proxy-mb87m 1/1 Running 0 119mâœ ~ kubectl get pod -n kube-system | grep kube-proxy | awk &apos;&#123;system(&quot;kubectl delete pod &quot;$1&quot; -n kube-system&quot;)&#125;&apos;pod &quot;kube-proxy-d78m2&quot; deletedpod &quot;kube-proxy-mb87m&quot; deletedâœ ~ kubectl get pod -n kube-system | grep kube-proxykube-proxy-8x8f6 1/1 Running 0 10skube-proxy-k54d5 1/1 Running 0 3sâœ ~ æŸ¥çœ‹å…¶ä¸­ä¸€ä¸ª kube-proxy Pod çš„æ—¥å¿—è¾“å‡ºï¼š123456789101112âœ ~ kubectl logs kube-proxy-k54d5 -n kube-systemI0517 02:04:00.609209 1 server_others.go:177] Using ipvs Proxier.W0517 02:04:00.609514 1 proxier.go:381] IPVS scheduler not specified, use rr by defaultI0517 02:04:00.609660 1 server.go:555] Version: v1.14.1I0517 02:04:00.619582 1 conntrack.go:52] Setting nf_conntrack_max to 131072I0517 02:04:00.620296 1 config.go:202] Starting service config controllerI0517 02:04:00.620318 1 controller_utils.go:1027] Waiting for caches to sync for service config controllerI0517 02:04:00.620338 1 config.go:102] Starting endpoints config controllerI0517 02:04:00.621083 1 controller_utils.go:1027] Waiting for caches to sync for endpoints config controllerI0517 02:04:00.720469 1 controller_utils.go:1034] Caches are synced for service config controllerI0517 02:04:00.721541 1 controller_utils.go:1034] Caches are synced for endpoints config controllerâœ ~ æ—¥å¿—ä¸­æ‰“å°å‡ºäº† Using ipvs Proxier ï¼Œè¯´æ˜ipvsæ¨¡å¼å·²ç»å¼€å¯ã€‚ å†æ¬¡é€šè¿‡ ipvsadm -L -n å‘½ä»¤æŸ¥çœ‹ï¼š1234567891011121314151617âœ ~ sudo ipvsadm -L -n[sudo] password for tiger:IP Virtual Server version 1.2.1 (size=4096)Prot LocalAddress:Port Scheduler Flags -&gt; RemoteAddress:Port Forward Weight ActiveConn InActConnTCP 10.96.0.1:443 rr -&gt; 192.168.5.28:6443 Masq 1 0 0TCP 10.96.0.10:53 rr -&gt; 10.244.0.2:53 Masq 1 0 0 -&gt; 10.244.0.3:53 Masq 1 0 0TCP 10.96.0.10:9153 rr -&gt; 10.244.0.2:9153 Masq 1 0 0 -&gt; 10.244.0.3:9153 Masq 1 0 0UDP 10.96.0.10:53 rr -&gt; 10.244.0.2:53 Masq 1 0 0 -&gt; 10.244.0.3:53 Masq 1 0 0âœ ~ ä¹Ÿæ˜¾ç¤ºå‡ºäº†ç›¸åº”çš„é…ç½®ä¿¡æ¯ã€‚ è‡³æ­¤ï¼Œkubeadmé…ç½®Kubernetesé›†ç¾¤çš„æ“ä½œå°±å®Œæˆäº†ã€‚ ç›¸å…³å‚è€ƒ ä½¿ç”¨kubeadmå®‰è£…Kubernetes 1.14 - é’è›™å°ç™½ centos7.4 kubeadmå®‰è£…Kubernetes 1.14.1 é›†ç¾¤-éšè®°åƒç§‹-51CTOåšå®¢ Creating a single master cluster with kubeadm - Kubernetes]]></content>
      <categories>
        <category>äº‘åŸç”Ÿç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Kubernetes</tag>
        <tag>äº‘åŸç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[zshæ— æ³•æ›´æ¢ä¸»é¢˜]]></title>
    <url>%2F2019%2F05%2F15%2Fzsh-cannot-change-themes%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨çŸ¥ä¹ä¸Šå‘ç°ä¸€æ¬¾zshçš„ä¸»é¢˜ï¼Œæ„Ÿè§‰æ¯”è¾ƒå¥½çœ‹ï¼Œæ¨èç»™å¤§å®¶ã€‚ å¯èƒ½å¾ˆå¤šäººéƒ½ç”¨è¿‡ ys è¿™æ¬¾ä¸»é¢˜ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯å¾ˆå…¨ä¹Ÿå¾ˆæ¸…çˆ½ã€‚ä½†æ˜¯å¯¹äºæˆ‘æ¥è¯´ï¼Œä¸å¤ªå–œæ¬¢å®ƒçš„ä¸€ç‚¹å°±æ˜¯å‰é¢çš„ # user @ hostname in éƒ¨åˆ†ï¼Œæ„Ÿè§‰è¿™éƒ¨åˆ†å®Œå…¨æ²¡æœ‰æ˜¾ç¤ºçš„å¿…è¦ï¼ŒåŒæ—¶å¦‚æœè¿›å…¥çš„ç›®å½•æ¯”è¾ƒæ·±çš„è¯ï¼Œè¿˜ä¼šå¯¼è‡´æ˜¾ç¤ºçš„æç¤ºä¿¡æ¯å¾ˆé•¿ã€‚æ‰€ä»¥æˆ‘å°±ä¸€ç›´æ²¡æœ‰é€‰æ‹©è¿™æ¬¾ä¸»é¢˜ã€‚ å¶ç„¶çœ‹åˆ°ä¸€ä¸ªåä¸º astro çš„zshä¸»é¢˜ iplaces/astro-zsh-theme: Astro Theme for Oh My ZSHï¼Œæ˜¯åŸºäº ys ä¿®æ”¹è€Œæ¥çš„ã€‚æ²¡æƒ³åˆ°ä¹Ÿé‡åˆ°äº†å’Œæˆ‘æœ‰åŒæ ·æƒ³æ³•çš„åŒå­¦ï¼ˆps: åªä¸è¿‡äººå®¶å·²ç»æŠŠæƒ³æ³•å˜æˆäº†ç°å®ï¼Œè€Œæˆ‘å´â€¦ï¼‰ å› ä¸ºåŠ ä¸Šç”¨æˆ·åå’Œ machine ä¿¡æ¯ä¹‹åå¾ˆå®¹æ˜“åœ¨æ–‡ä»¶è·¯å¾„è¾ƒé•¿æ—¶å€™äº§ç”Ÿæ¢è¡Œï¼Œè€Œä¸”ç”¨æˆ·åå’Œ machine ä¿¡æ¯åœ¨æˆ‘ä»¬ä½¿ç”¨ iTerm çš„æ—¶å€™åŸºæœ¬ä¸Šç”¨å¤„å¾ˆå°æ‰€ä»¥æˆ‘ç›´æ¥æŠŠä»–ä»¬çœç•¥æ‰äº†ï¼Œçœ‹ç€æ¸…çˆ½ã€‚ ä¸»è¦çš„éƒ¨åˆ†å°±æ˜¯æ–‡ä»¶è·¯å¾„ã€git çŠ¶æ€ã€git hash å’Œæ—¶é—´ Astro ä¸»é¢˜çš„å®‰è£…æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥æŒ‰ç…§ç»™å‡ºçš„å‘½ä»¤æ“ä½œå³å¯ã€‚ æˆ‘ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯ spaceship è¿™æ¬¾ä¸»é¢˜ã€‚ è¦æƒ³ä¿®æ”¹zshçš„ä¸»é¢˜è®¾ç½®ï¼Œåªéœ€è¦å°† ~/.zshrc æ–‡ä»¶ä¸­çš„ ZSH_THEME=&quot;spaceship&quot; éƒ¨åˆ†ï¼Œæ”¹æˆç›¸åº”ä¸»é¢˜çš„åå­—å³å¯ã€‚ ä½†å½“æˆ‘å°†å…¶æ”¹æˆ ZSH_THEME=&quot;astro&quot; ä¹‹åï¼Œå´å‘ç° source ~/.zshrc æ— æ³•åˆ‡æ¢åˆ°æ–°çš„ä¸»é¢˜ï¼Œæ˜¾ç¤ºçš„è¿˜æ˜¯ä¹‹å‰çš„ spaceship çš„ä¸»é¢˜æ ·å¼ï¼š spaceship theme:123Leafney.github.io on î‚  hexo [â‡¡] is ğŸ“¦ v0.0.03.7.1 via â¬¢ v10.15.3âœ ç„¶åæˆ‘å» zsh çš„ github ä¸­æŸ¥è¯¢æ˜¯å¦æœ‰ç›¸å…³çš„ issuesã€‚å‘ç°å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯å°†ï¼š1234plugins=( git zsh-autosuggestions) æ”¹æˆåœ¨ä¸€è¡Œçš„æ–¹å¼ï¼š1plugins=(git zsh-autosuggestions) ä¸è¿‡è¿™ä¸ªæ–¹æ³•åœ¨æµ‹è¯•åæ— æ•ˆã€‚ ç„¶åæˆ‘åˆå°†å…¶å°è¯•æ›´æ”¹æˆå…¶ä»–çš„ä¸»é¢˜æ ·å¼ï¼Œå¦‚é»˜è®¤çš„ robbyrussellï¼Œç»“æœå‘ç°è¿˜æ˜¯ spaceship çš„ä¸»é¢˜æ ·å¼ã€‚é‚£ä¹ˆåˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šæ˜¯ spaceship è¿™ä¸ªä¸»é¢˜çš„é—®é¢˜äº†ï¼Œå¯èƒ½æ˜¯å½“åˆæˆ‘åœ¨é…ç½® spaceship ä¸»é¢˜æ—¶æœ‰ä»€ä¹ˆå…¨å±€è®¾ç½®ï¼Œå¯¼è‡´å®ƒæ¯æ¬¡ source æ—¶éƒ½ä¼šè¦†ç›–æ›´æ”¹çš„ä¸»é¢˜ã€‚ éšåï¼Œæˆ‘å» spaceship ä¸»é¢˜çš„å®˜æ–¹ç½‘ç«™ Home Â· Spaceship ZSH æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å…³çš„å…¨å±€è®¾ç½®ã€‚å‘ç°äº†ä¸‹é¢çš„ä¸€æ®µï¼š123# Set Spaceship ZSH as a promptautoload -U promptinit; promptinitprompt spaceship å½“æˆ‘æŠŠ ~/.zshrc ä¸­è¿™éƒ¨åˆ†æ³¨é‡Šæ‰ä¹‹åå†æ¬¡ sourceï¼Œå‘ç°æ–°çš„ä¸»é¢˜å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼š astro theme:12# ~/Project/Leafney.github.io [hexo â— (0673186)] [11:53:36]âœ hexo s -g æ›´æ¢æˆå…¶ä»–çš„ä¸»é¢˜ï¼Œä¹Ÿä¸€æ ·å¯ä»¥æ­£å¸¸åˆ‡æ¢ï¼šrobbyrussell theme:1âœ Leafney.github.io git:(hexo) hexo s -g è‡³äºä¸Šé¢è¿™æ®µå…³äº prompt çš„é…ç½®ï¼Œâ€œå’±ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œå’±ä¹Ÿä¸æ•¢é—®â€ã€‚ oh my zsh å“ªäº›ä¸»é¢˜æ¯”è¾ƒå¥½çœ‹ã€æœ‰ç‰¹ç‚¹ï¼Ÿ - æœ¨ç«¥çš„å›ç­” - çŸ¥ä¹ iplaces/astro-zsh-theme: Astro Theme for Oh My ZSH oh my zsh - oh-my-zsh not applying themes - Stack Overflow Home Â· Spaceship ZSH]]></content>
      <tags>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•æ·»åŠ URLåˆ°shadowsocksçš„åˆ—è¡¨è®©å…¶ä½¿ç”¨ä»£ç†è®¿é—®]]></title>
    <url>%2F2019%2F05%2F13%2Fss-add-urls-use-proxy%2F</url>
    <content type="text"><![CDATA[æ·»åŠ è‡ªå®šä¹‰ç½‘å€å¼€å¯ Shadowsockets çš„ è‡ªåŠ¨ä»£ç†æ¨¡å¼ ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸èƒ½æ­£å¸¸è®¿é—®åˆ° medium.com çš„ç«™ç‚¹ã€‚ é€‰æ‹© ç¼–è¾‘è‡ªåŠ¨æ¨¡å¼çš„PAC... é€‰é¡¹ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªåä¸º gfwlist.js çš„é…ç½®æ–‡ä»¶ï¼š æŒ‰ç…§è¯¥æ–‡ä»¶ä¸­å·²æœ‰URLçš„æ ¼å¼ï¼Œå°†æˆ‘ä»¬çš„ medium.com æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼š 1234567var rules = [ &quot;||medium.com&quot;, &quot;||altrec.com&quot;, &quot;||darpa.mil&quot;, ... ...&#125; ä¿å­˜ä¿®æ”¹ã€‚ ä¹‹åç›´æ¥åˆ·æ–°é¡µé¢å³å¯ï¼Œæ— éœ€é‡å¯ ss ï¼Œç«‹å³ç”Ÿæ•ˆäº†ã€‚ MAC ä¸‹ç‚¹å‡»â€œä» GFWList æ›´æ–° PACâ€ï¼Œæç¤ºâ€œ404â€é”™è¯¯ ç”±äºå¤ªä¹…æ²¡æ›´æ–°ï¼Œä¸” gfwlist.txt æ˜¯ hard code åœ¨ä»£ç é‡Œé¢çš„ï¼Œæ‰€ä»¥å‡çº§ GFWList ä¼šæŠ¥ 404 é”™è¯¯ã€‚ä¸»è¦æ˜¯å› ä¸ºåŸæ¥çš„ GFWList æ‰˜ç®¡åœ¨ Google Code ä¸Šï¼Œç°åœ¨æ‰˜ç®¡åœ¨ GitHub ä¸Šã€‚ æ‰€ä»¥ï¼Œå°±ä¸è¦å»ç®¡è¿™ä¸€é¡¹äº†ã€‚ ä¸èƒ½æ›´æ–° PAC æ–‡ä»¶ Â· Issue #212 Â· shadowsocks/shadowsocks-iOS shadowSocks ä» gwflistæ›´æ–° PAC æ—¶404 ä¸æ”¯æŒGoogle PlayæœåŠ¡ï¼Œæ— æ³•è¿è¡Œä½¿ç”¨ss-androidçš„æ‰«ç æ–¹å¼æ·»åŠ ssé…ç½®æ—¶ï¼Œæç¤ºè®¾å¤‡ä¸æ”¯æŒGoogle PlayæœåŠ¡ï¼Œæ— æ³•è¿è¡Œ ä¸è¦ä½¿ç”¨æ‰«ç åŠŸèƒ½ï¼Œæ‰‹åŠ¨è®¾ç½®æ·»åŠ å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ è®¾å¤‡ä¸æ”¯æŒGoogle PlayæœåŠ¡ï¼Œæ— æ³•è¿è¡Œ Â· Issue #2171 Â· shadowsocks/shadowsocks-android]]></content>
      <tags>
        <tag>Shadowsocks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢æ·»åŠ Gitalkè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2F2019%2F04%2F30%2Fhexo-add-gitalk-comment%2F</url>
    <content type="text"><![CDATA[ç»æœ‹å‹çš„æé†’ï¼Œæˆ‘å‘ç°æˆ‘çš„åšå®¢ä¸­çš„è¯„è®ºæ’ä»¶Gitmentå·²ç»ä¸èƒ½æ­£å¸¸ä½¿ç”¨äº†ã€‚ç®€å•çš„åˆ†æäº†ä¸€ä¸‹ï¼šå‘å¸ƒè¯„è®ºå†…å®¹å Gitment åŒºåŸŸå°±ä¼šä¸€ç›´æ˜¾ç¤º Logging in... çš„åŠ è½½é”™è¯¯ä¿¡æ¯ï¼ŒæŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œå‘ç°æ˜¯Gitmentæ’ä»¶ä¸­ä½¿ç”¨çš„ä¸€ä¸ªåŸŸå https://gh-oauth.imsun.net çš„Httpsè¯ä¹¦å·²ç»è¿‡æœŸäº†ã€‚ æŸ¥çœ‹äº†ä¸€ä¸‹è¯¥åŸŸåçš„è¯ä¹¦ï¼Œå‘ç°æ—©åœ¨ 2018å¹´9æœˆ14æ—¥ å°±åˆ°æœŸäº†ï¼Œå“ï¼Œæˆ‘è¯´ä¸ºä»€ä¹ˆæˆ‘çš„åšå®¢ä¸€ç›´æ²¡æœ‰äººè¯„è®ºå‘¢ï¼ŒåŸæ¥æ˜¯è¿™ä¸ªåŸå› ã€‚ é—®é¢˜æ˜¯æ‰¾åˆ°äº†ï¼Œä½†åšå®¢è¯„è®ºçš„åŠŸèƒ½å¯ä¸èƒ½å»æ‰ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„äº¤æµé—®é¢˜çš„åœ°æ–¹ã€‚ åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°äº†ä¸€æ¬¾åä¸º Gitalk çš„è¯„è®ºæ’ä»¶ï¼Œå’Œ Gitment åŠŸèƒ½å®ç°å·®ä¸å¤šã€‚çœ‹äº†çœ‹githubä¸­çš„issuesä¿¡æ¯ï¼Œå‘ç° Gitalk çš„æ´»è·ƒåº¦è¿˜æ˜¯å¾ˆé«˜çš„ã€‚ å› ä¸ºæˆ‘ç”¨çš„æ˜¯ Hexo çš„ Next ä¸»é¢˜ï¼Œå» Next çš„å®˜ç½‘ä¸­æ‰¾äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œå‘ç°å¹¶æ²¡æœ‰ç›´æ¥é›†æˆ Gitalk è¯„è®ºæ’ä»¶ã€‚é‚£çœ‹æ¥åªèƒ½è‡ªå·±æ”¹é€ äº†ã€‚ æƒ³æƒ³å½“æ—¶æˆ‘åŠ å…¥ Gitment è¯„è®ºæ’ä»¶æ—¶ï¼ŒNextä¸»é¢˜å·²ç»é›†æˆå¥½äº†ï¼Œæ‰€ä»¥åªè¦æ‰“å¼€å¹¶æ·»åŠ å¥½è‡ªå·±çš„ GitHub token ä¿¡æ¯ä¹‹åï¼Œå°±èƒ½æ­£å¸¸ä½¿ç”¨äº†ã€‚è€Œ Gitment å’Œ Gitalk éƒ½æ˜¯è¯„è®ºæ’ä»¶ï¼Œæ‰€ä»¥åªè¦æŒ‰ç…§ Gitmentçš„æ–¹å¼æ¥ä¿®æ”¹å³å¯ï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„ã€‚ åºŸè¯ä¸å¤šè¯´ï¼ŒGitalk ç”¨èµ·æ¥ã€‚ æç¤ºï¼šå»ºè®®å’Œæˆ‘ä¹‹å‰çš„æ–‡ç«  Hexoåšå®¢æ·»åŠ Gitmentè¯„è®ºç³»ç»Ÿ | ITèŒƒå„¿ ä¸€èµ·é£Ÿç”¨ï¼Œä½“éªŒæ›´å¥½å“Ÿï¼ï¼ï¼ ç¦ç”¨Gitmentå°† themes/next/_config.yml æ–‡ä»¶ä¸­çš„ gitment: enable:true æ”¹ä¸º falseã€‚å…³é—­ Gitment çš„è¯„è®ºæ’ä»¶ã€‚ ä½¿ç”¨Gitalkå…ˆç®€å•è¿‡ä¸€ä¸‹ Gitalk çš„æ–‡æ¡£ï¼šgitalk/gitalk: Gitalk is a modern comment component based on Github Issue and Preact. Gitalk çš„ä½¿ç”¨éå¸¸ç®€å•ï¼š å¯¼å…¥é“¾æ¥ æ·»åŠ å ä½æ ‡ç­¾ åˆå§‹åŒ–æ’ä»¶ è‡ªå®šä¹‰è®¾ç½® æ·»åŠ åˆå§‹åŒ–ä»£ç åœ¨ Next ä¸»é¢˜ä¸­ï¼Œç¬¬ä¸‰æ–¹çš„æ’ä»¶éƒ½æ”¾åœ¨äº† _third-party ç›®å½•ä¸‹ã€‚ åœ¨ themes/next/layout/third-party/comments ä¸­æ–°å»º gitalk.swig: 1234567891011121314151617181920212223&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;&gt; &lt;script src=&quot;https://unpkg.com/gitalk/dist/gitalk.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; var gitalk = new Gitalk(&#123; clientID: &apos;&#123;&#123; theme.gitalk.ClientID &#125;&#125;&apos;, clientSecret: &apos;&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;&apos;, repo: &apos;&#123;&#123; theme.gitalk.repo &#125;&#125;&apos;, owner: &apos;&#123;&#123; theme.gitalk.owner &#125;&#125;&apos;, admin: [&apos;&#123;&#123; theme.gitalk.adminUser &#125;&#125;&apos;], id:&apos;&#123;&#123; theme.gitalk.IdPrefix || gitalk &#125;&#125;_&#123;&#123; date(page.date, &quot;YYYYMMDDHHmmss&quot;) &#125;&#125;&apos;, labels: &apos;&#123;&#123; theme.gitalk.labels &#125;&#125;&apos;, perPage: &#123;&#123; theme.gitalk.perPage &#125;&#125;, pagerDirection: &apos;&#123;&#123; theme.gitalk.pagerDirection &#125;&#125;&apos;, createIssueManually: &#123;&#123; theme.gitalk.createIssueManually &#125;&#125;, distractionFreeMode: &#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125; &#125;) gitalk.render(&apos;gitalk-container&apos;) &lt;/script&gt;&#123;% endif %&#125; è½½å…¥æ’ä»¶åœ¨ themes/next/layout/third-party/comments ä¸­æ‰¾åˆ° index.swig æ–‡ä»¶ï¼Œæ–°å¢ gitalk.swig: 1&#123;% include &apos;gitalk.swig&apos; %&#125; æ·»åŠ å ä½æ ‡ç­¾åœ¨ themes/next/layout/_partials ä¸­ï¼Œæ‰¾åˆ° comments.swig æ–‡ä»¶ï¼Œè¿™é‡Œé¢æ˜¯æ‰€æœ‰æ”¯æŒçš„è¯„è®ºæ’ä»¶çš„å ä½ç¬¦æ‰€æ”¾çš„ä½ç½®ã€‚å°±æ‹¿ä¹‹å‰ä½¿ç”¨çš„ gitment æ¥è¯´ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ä»£ç ï¼š 123456789&#123;% elseif theme.gitment.enable %&#125; &lt;div class=&quot;comments&quot; id=&quot;comments&quot;&gt; &#123;% if theme.gitment.lazy %&#125; &lt;div onclick=&quot;showGitment()&quot; id=&quot;gitment-display-button&quot;&gt;&#123;&#123; __(&apos;gitmentbutton&apos;) &#125;&#125;&lt;/div&gt; &lt;div id=&quot;gitment-container&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt; &#123;% else %&#125; &lt;div id=&quot;gitment-container&quot;&gt;&lt;/div&gt; &#123;% endif %&#125; &lt;/div&gt; å…¶ä¸­çš„æ¯ä¸€ä¸ª1&#123;% elseif theme.xxxxx.enable %&#125; éƒ¨åˆ†ï¼Œè¡¨ç¤ºçš„å°±æ˜¯ä¸€ä¸ªè¯„è®ºæ’ä»¶åŠŸèƒ½ã€‚ å°†ä¸Šé¢ä»£ç æ®µç²¾ç®€ä¸€ä¸‹ï¼š 1234&#123;% elseif theme.gitment.enable %&#125; &lt;div class=&quot;comments&quot; id=&quot;comments&quot;&gt; &lt;div id=&quot;gitment-container&quot;&gt;&lt;/div&gt; &lt;/div&gt; å¯ä»¥å‘ç°ï¼š&lt;div id=&quot;gitment-container&quot;&gt;&lt;/div&gt; å°±æ˜¯è¯„è®ºæ¡†çš„å ä½æ ‡ç­¾äº†ã€‚ é‚£ä¹ˆä¾è‘«èŠ¦ç”»ç“¢ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç ç¨å¾®ä¿®æ”¹æˆ gitealk çš„å ä½æ ‡ç­¾ï¼š 1234&#123;% elseif theme.gitalk.enable %&#125; &lt;div class=&quot;comments&quot; id=&quot;comments&quot;&gt; &lt;div id=&quot;gitalk-container&quot;&gt;&lt;/div&gt; &lt;/div&gt; ç„¶åå°†å…¶åŠ å…¥åˆ°ä»»æ„ä¸¤ä¸ª1&#123;% elseif theme.xxxxx.enable %&#125; ä»£ç æ®µä¹‹é—´å³å¯ã€‚ è‡ªå®šä¹‰é…ç½®æ‰“å¼€ Next ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ themes/next/_config.yml ï¼ŒåŠ ä¸Šå¦‚ä¸‹å†…å®¹ï¼š 12345678910111213gitalk: enable: true ClientID: xxxxxx ClientSecret: xxxxxxxxxxxx repo: gitalk owner: xxxxx adminUser: xxxxx IdPrefix: gitalk labels: gitalk perPage: 10 pagerDirection: last createIssueManually: true distractionFreeMode: false å…¶ä¸­ï¼šrepo è¡¨ç¤ºå°† issues æäº¤åˆ°å“ªä¸ªä»“åº“ã€‚ IdPrefix æ˜¯æˆ‘è‡ªå®šä¹‰æ·»åŠ çš„å‚æ•°ï¼Œè¡¨ç¤ºID å€¼çš„å‰ç¼€ã€‚å…¶ä»–é¡¹å¯ç›´æ¥å‚è€ƒå®˜æ–¹çš„æ–‡æ¡£æ¥è¿›è¡Œä¿®æ”¹ï¼šgitalk/readme-cn.md at master Â· gitalk/gitalk é—®é¢˜è§£å†³i.concat(â€¦).join is not a functionæ‰§è¡Œ hexo s -g é¢„è§ˆåšå®¢ï¼Œå‘ç°è¯„è®ºéƒ¨åˆ†æŠ¥é”™ï¼š 1Error: i.concat(...).join is not a function è¿™ä¸ªé—®é¢˜æ˜¯ labels éƒ¨åˆ†çš„é—®é¢˜ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼å¤„ç†ï¼Œå°† labels ä¿®æ”¹ä¸ºï¼š 123&#123; labels: &apos;&#123;&#123; theme.gitalk.labels &#125;&#125;&apos;.split(&apos;,&apos;).filter(l =&gt; l),&#125; Error: u.concat(â€¦).join is not a function! Â· Issue #114 Â· gitalk/gitalk æœªæ‰¾åˆ°ç›¸å…³çš„ Issues è¿›è¡Œè¯„è®ºæ›´æ”¹ä¸º Gitalk ä¹‹åï¼Œå‘ç°ä¹‹å‰ä½¿ç”¨ Gitment å·²ç»åˆ›å»ºäº† issues çš„æ–‡ç« å´æç¤º æœªæ‰¾åˆ°ç›¸å…³çš„ Issues è¿›è¡Œè¯„è®º : åŸå› æ˜¯ï¼š Gitalk è¯„è®ºæ’ä»¶æ˜¯é€šè¿‡ issues çš„ labels æ¥æ ‡è¯†ä¸€ç¯‡æ–‡ç« çš„ã€‚å¦‚æœ labels ä¸­å­˜åœ¨ç›¸åº”æ–‡ç« çš„ label æ ‡ç­¾ï¼Œé‚£å°±è¯´æ˜è¯¥æ–‡ç« å·²ç»åˆå§‹åŒ–è¿‡äº†ã€‚ æ¯”å¦‚ æˆ‘ä¸€ç¯‡æ–‡ç« è®¾ç½®çš„ ID ä¸º itfanr_blog_20190426225702 ï¼Œé»˜è®¤çš„ labels ä¸º gitalkï¼Œé‚£ä¹ˆç›¸åº”çš„issueså¦‚ä¸‹ï¼š è¿™ä¸¤ä¸ªlabelä¸€èµ·æ¥æ ‡è¯†ä¸€ç¯‡æ–‡ç« ã€‚ å› ä¸ºä¸Šé¢æˆ‘å°†IDå€¼çš„æ ¼å¼è¿›è¡Œäº†ä¿®æ”¹ï¼š åŸæ¥: 1id: &apos;itfanr_blog_&#123;&#123; date(page.date, &quot;YYYYMMDDhhmmss&quot;) &#125;&#125;&apos;, ç°åœ¨ï¼š 1id:&apos;&#123;&#123; theme.gitalk.IdPrefix || gitalk &#125;&#125;_&#123;&#123; date(page.date, &quot;YYYYMMDDHHmmss&quot;) &#125;&#125;&apos;, å…¶ä¸­çš„æ—¶é—´æˆ³æ ¼å¼è¿›è¡Œäº†æ›´æ”¹ï¼Œä¹Ÿå°±å¯¼è‡´äº† labels ä¸åŒ¹é…è€Œæ‰¾ä¸åˆ°äº†ã€‚ ç”±äºæš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å¦‚ä½•æ‰¹é‡æ›´æ–° labels çš„æ–¹æ³•ï¼Œè€Œä¸€ä¸ªä¸€ä¸ªçš„æ‰‹åŠ¨æ›´æ”¹åˆå¤ªéº»çƒ¦äº†ã€‚æ‰€ä»¥æˆ‘å°±åˆ é™¤åŸæ¥çš„ issuesï¼Œé‡æ–°è¿›è¡Œåˆ›å»ºã€‚æ­¤æ—¶ï¼Œæˆ‘å‘ç° Gitalk ä¸€ä¸ªå¥½ç”¨çš„åœ°æ–¹æ˜¯ï¼Œå½“å°†é…ç½®é¡¹ createIssueManually è®¾ç½®ä¸º false æ—¶ï¼Œå¦‚æœå‘ç°æ˜¯ç®¡ç†å‘˜æµè§ˆæ–‡ç« ï¼Œä¼šè‡ªåŠ¨ä¸ºè¯¥æ–‡ç« åˆå§‹åŒ–è¯„è®ºåŠŸèƒ½ï¼Œéå¸¸æ–¹ä¾¿ã€‚ å¦å¤–ä¸€ä¸ªä¸»è¦çš„åŸå› æ˜¯ï¼šè¿™å‡ ä¸ªæœˆæˆ‘çš„åšå®¢ä¸€ç›´æ²¡æœ‰è¯„è®ºï¼Œæ‰€ä»¥å¥½å¤šéƒ½æ˜¯ç©ºçš„ issuesï¼Œåˆ é™¤é‡å»ºä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆçŠ¹è±«äº†ã€‚ å…³äºæ–‡ç« IDè¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ ID è¿™ä¸€é¡¹ã€‚ ä¾ç…§gitalkæ–‡æ¡£ä¸­çš„è§£é‡Šï¼Œè¯¥å€¼è¡¨ç¤ºå½“å‰é¡µé¢çš„å”¯ä¸€idï¼Œä¸”é•¿åº¦ä¸èƒ½è¶…è¿‡50ï¼š 1The unique id of the page. Length must less than 50. æ‰€ä»¥ï¼Œæˆ‘è¿™é‡Œè®¾ç½®ä¸ºäº† å‰ç¼€+æ–‡ç« createæ—¶é—´æˆ³çš„æ–¹å¼æ¥å®ç°å”¯ä¸€æ€§ã€‚ é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š IdPrefix æ¥è¡¨ç¤ºå‰ç¼€ï¼Œé»˜è®¤å€¼ä¸º gitalkã€‚ å¦‚æœä½ ä¸æƒ³ç”¨æ—¶é—´æˆ³çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ç« é“¾æ¥çš„MD5å€¼æ¥å®ç°å”¯ä¸€IDï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š åœ¨ä¸Šé¢ themes/next/layout/third-party/comments/gitalk.swig ä¸­æ·»åŠ å¯¹ md5.jsçš„å¼•ç”¨ï¼š 1&lt;script src=&quot;https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js&quot;&gt;&lt;/script&gt; ä¿®æ”¹IDéƒ¨åˆ†ä¸ºï¼š 1id: md5(location.pathname), å³å¯ã€‚ ä½†æ˜¯ï¼Œä¸å»ºè®®ç›´æ¥ä½¿ç”¨é»˜è®¤çš„ id: location.pathname, å³ æ–‡ç« é“¾æ¥ã€‚æœ‰æ—¶å€™æ–‡ç« æ ‡é¢˜å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå½“è¶…è¿‡50ä¸ªå­—ç¬¦ä¹‹åå°±ä¼šæäº¤å¤±è´¥ï¼Œè¿™ä¸ªæ˜¯ç”± GitHubä¸­çš„ Issues labels é™åˆ¶çš„ã€‚ ç›¸å…³å‚è€ƒ gitalk/gitalk: Gitalk is a modern comment component based on Github Issue and Preact. Hexoä¸­Gitalké…ç½®ä½¿ç”¨æ•™ç¨‹-å¯èƒ½æ˜¯ç›®å‰æœ€è¯¦ç»†çš„æ•™ç¨‹ | ioChenâ€™s Blog]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOSä¸­å®‰è£…pip]]></title>
    <url>%2F2019%2F04%2F26%2Fcentos-install-pip%2F</url>
    <content type="text"><![CDATA[ç›´æ¥æ‰§è¡Œ yum install python-pip ä¼šæŠ¥é”™:æ‰¾ä¸åˆ° python-pip å®‰è£…åŒ… éœ€è¦å…ˆå®‰è£… epel-release : 1$ yum -y install epel-release å†å®‰è£…: 1$ yum -y install python-pip å°†pipæ›´æ–°åˆ°æœ€æ–°: 1$ pip install --upgrade pip]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Shellå‘½ä»¤è‡ªåŠ¨è¡¥å…¨æ’ä»¶zsh-autosuggestions]]></title>
    <url>%2F2019%2F04%2F26%2Fshell-command-auto-completion-plug-in-zsh-autosuggestions%2F</url>
    <content type="text"><![CDATA[Talk is cheep , show you the code. InstallClone this repository into $ZSH_CUSTOM/plugins (by default ~/.oh-my-zsh/custom/plugins): 1git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions Add the plugin to the list of plugins for Oh My Zsh to load (inside ~/.zshrc): 1plugins=(zsh-autosuggestions) Start a new terminal session or run source ~/.zshrc. More: zsh-autosuggestions/INSTALL.md at master Â· zsh-users/zsh-autosuggestions Change default colorThis color can be changed by setting the ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE variable. For Example: You can edit your ~/.zshrc and change/add the variable ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=&#39;fg=value&#39; like ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE=&#39;fg=66&#39;. The number of colors is in any case limited to 256(i.e. the range 0 to 255). You can view the detailed colors from here: When the auto prompt appears, press â†’ key or Ctrl(Control) + f to enter the auto prompt command into the current terminal. linux - How to change zsh-autosuggestions color - Stack Overflow Z Shell colors! (Example)]]></content>
      <tags>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Puppeteeré…ç½®å°è®°]]></title>
    <url>%2F2019%2F04%2F10%2Fconfiguration-development-of-puppeteer%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é¡¹ç›®ä¸­éœ€è¦å®ç°åŠ¨æ€æ•°æ®çš„æŠ“å–ï¼Œä¹‹å‰åœ¨æŠ“å–åŠ¨æ€é¡µé¢çš„æ—¶å€™éƒ½æ˜¯é€šè¿‡ Phantomjs ã€Selenium ã€Chrome æˆ– Firefoxçš„ Headless æ¨¡å¼ç­‰æ–¹æ³•æ¥å®ç°ï¼Œè‡ªä» Google Chrome å›¢é˜Ÿæ¨å‡ºå®˜æ–¹çš„ Headless Chrome å·¥å…· Puppeteer ä¹‹åï¼Œä¼¼ä¹ä¹‹å‰ä½¿ç”¨çš„é‚£äº›å·¥å…·ä¸€ä¸‹éƒ½é»¯æ·¡äº†ã€‚ Puppeteer æ˜¯ä¸€ä¸ª Node ä»£ç åº“ï¼ŒåŸºäº DevTools åè®®ï¼Œæä¾›é«˜çº§ API è‡ªåŠ¨åŒ–æ§åˆ¶è°·æ­Œ Chrome æˆ– Chromium æµè§ˆå™¨ã€‚Puppeteer é»˜è®¤ä»¥ æ— ç•Œé¢æ–¹å¼ è¿è¡Œã€‚ å®‰è£… Puppeteer è¿‡ç¨‹ä¸­ä¼šä¸‹è½½å®Œæ•´ç‰ˆçš„è°·æ­ŒChromiumæµè§ˆå™¨åˆ° node_modules ç›®å½•ã€‚ ä» 1.7.0 ç‰ˆåï¼Œè°·æ­Œå‘å¸ƒäº†æ–°çš„ puppeteer-core å®‰è£…åŒ…ï¼Œé»˜è®¤ä¸å†è‡ªåŠ¨ä¸‹è½½è°·æ­ŒChromiumæµè§ˆå™¨ã€‚ puppeteer-core æ˜¯ Puppeteer çš„è½»é‡çº§ç‰ˆæœ¬ï¼Œå¤ç”¨æœ¬åœ°å·²å®‰è£…çš„æµè§ˆå™¨ï¼Œæˆ–è€…è¿æ¥åˆ°è¿œç¨‹æµè§ˆå™¨ã€‚ å®‰è£…yarnè¿™é‡Œæˆ‘ä½¿ç”¨ yarn æ¥ç®¡ç†ä¾èµ–åŒ…ã€‚ Mac12$ brew install yarn# ç”±äºåœ°å€æºçš„é—®é¢˜ï¼Œè¯¥å‘½ä»¤æ‰§è¡Œå¤±è´¥ 12$ sudo npm install -g yarn# ä½¿ç”¨è¿™æ¡å‘½ä»¤å®‰è£…æˆåŠŸ WinChocolatey æ˜¯ä¸€ä¸ªwindowsä¸‹çš„åŒ…ç®¡ç†å™¨ã€‚ 1choco install yarn Chocolatey - The package manager for Windows ä½¿ç”¨yarnæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯12$ yarn -v1.15.2 åˆå§‹åŒ–é¡¹ç›®1$ yarn init æ·»åŠ ä¸€ä¸ªä¾èµ–123$ yarn add [package]$ yarn add [package]@[version]$ yarn add [package]@[tag] å…¨å±€å®‰è£…ä¾èµ–1$ yarn global add [package] æ›´æ–°ä¸€ä¸ªä¾èµ–123$ yarn upgrade [package]$ yarn upgrade [package]@[version]$ yarn upgrade [package]@[tag] ç§»é™¤ä¸€ä¸ªä¾èµ–1$ yarn remove [package] å®‰è£…package.jsonä¸­æ‰€æœ‰çš„ä¾èµ–é¡¹123$ yarn# or:$ yarn install æŸ¥çœ‹yarné…ç½®1$ yarn config list æ›´æ”¹ registry12#å®‰è£…æ·˜å®é•œåƒ$ yarn config set registry &quot;https://registry.npm.taobao.org&quot; å®‰è£…Puppeteerä¿®æ”¹åœ°å€æºè¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯ puppeteer-coreã€‚ç”±äºå›½å†…ç½‘ç»œåŸå› ï¼Œéœ€è¦ä¿®æ”¹ä»“åº“æºåœ°å€ï¼š 12345$ npm config set registry &quot;https://registry.npm.taobao.org&quot;$ yarn config set registry &quot;https://registry.npm.taobao.org&quot;$ yarn add puppeteer-core é…ç½®Chromeè·¯å¾„ä½¿ç”¨ puppeteer-coreï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå·²å®‰è£…çš„Chromeæµè§ˆå™¨çš„å®‰è£…è·¯å¾„ã€‚ Macç”µè„‘ä¸ŠChromeæµè§ˆå™¨çš„çš„å®‰è£…è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ chrome:\\version æ¥æŸ¥çœ‹ã€‚ æˆ‘çš„ç”µè„‘ä¸Šçš„è·¯å¾„ä¸ºï¼š 1/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome Puppeteeré…ç½®æ— ç•Œé¢æ¨¡å¼Puppeteer é»˜è®¤ä½¿ç”¨ headless æ¨¡å¼è¿è¡Œï¼Œé€šè¿‡è®¾ç½® headless:false æ¥æ˜¾ç¤ºGUIç•Œé¢ï¼š 123const browser = await puppeteer.launch(&#123; headless: false&#125;); å…¶ä»–é…ç½®å‚æ•°å…¶ä»– puppeteer.launch() é…ç½®é¡¹ï¼š 123456789101112&#123; // è‹¥æ˜¯æ‰‹åŠ¨ä¸‹è½½çš„chromiuméœ€è¦æŒ‡å®šchromiumåœ°å€, é»˜è®¤å¼•ç”¨åœ°å€ä¸º `/é¡¹ç›®ç›®å½•/node_modules/puppeteer/.local-chromium/` executablePath: &apos;/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome&apos;, //è®¾ç½®è¶…æ—¶æ—¶é—´ timeout: 15000, //å¦‚æœæ˜¯è®¿é—®httpsé¡µé¢ æ­¤å±æ€§ä¼šå¿½ç•¥httpsé”™è¯¯ ignoreHTTPSErrors: true, // æ‰“å¼€å¼€å‘è€…å·¥å…·, å½“æ­¤å€¼ä¸ºtrueæ—¶, headlessæ€»ä¸ºfalse devtools: false, // å…³é—­headlessæ¨¡å¼, ä¸ä¼šæ‰“å¼€æµè§ˆå™¨ headless: false,&#125; æ²™ç®±ã€å…±äº«å†…å­˜123const browser = await puppeteer.launch(&#123; args: [&apos;--no-sandbox&apos;, &apos;--disable-dev-shm-usage&apos;]&#125;); --no-sandbox: å»æ²™ç®±è¿è¡Œ --disable-dev-shm-usage: é»˜è®¤æƒ…å†µä¸‹ï¼ŒDockerè¿è¡Œä¸€ä¸ª /dev/shm å…±äº«å†…å­˜ç©ºé—´ä¸º64MB çš„å®¹å™¨ã€‚è¿™é€šå¸¸å¯¹Chromeæ¥è¯´å¤ªå°ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´Chromeåœ¨æ¸²æŸ“å¤§é¡µé¢æ—¶å´©æºƒã€‚è¦ä¿®å¤ï¼Œå¿…é¡»è¿è¡Œå®¹å™¨ docker run --shm-size=1gb ä»¥å¢åŠ  /dev/shm çš„å®¹é‡ã€‚ä»Chrome 65å¼€å§‹ï¼Œä½¿ç”¨ --disable-dev-shm-usage æ ‡å¿—å¯åŠ¨æµè§ˆå™¨å³å¯ï¼Œè¿™å°†ä¼šå†™å…¥å…±äº«å†…å­˜æ–‡ä»¶ /tmp è€Œä¸æ˜¯ /dev/shm . Linuxæ²™ç®±ï¼šåœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸï¼Œæ²™ç®±(Sandbox)æ˜¯ä¸€ç§ç¨‹åºçš„éš”ç¦»è¿è¡Œæœºåˆ¶ï¼Œå…¶ç›®çš„æ˜¯é™åˆ¶ä¸å¯ä¿¡è¿›ç¨‹çš„æƒé™ã€‚æ²™ç®±æŠ€æœ¯ç»å¸¸è¢«ç”¨äºæ‰§è¡Œæœªç»æµ‹è¯•çš„æˆ–ä¸å¯ä¿¡çš„å®¢æˆ·ç¨‹åºã€‚ä¸ºäº†é¿å…ä¸å¯ä¿¡ç¨‹åºå¯èƒ½ç ´åå…¶å®ƒç¨‹åºçš„è¿è¡Œã€‚ å‚è€ƒ æˆªå›¾çš„è¯±æƒ‘ï¼šDockeréƒ¨ç½²Puppeteeré¡¹ç›® - æ˜é‡‘ è·³è½¬åˆ°æŒ‡å®šé¡µ1await page.goto(&apos;https://github.com/login&apos;); ç­‰å¾…12345# ç­‰å¾…æŒ‡å®šæ—¶é—´ ï¼Œsecondawait page.waitFor(2*1000);# ç­‰å¾…æŸå…ƒç´ æ˜¾ç¤ºawait page.waitForSelector(&apos;body.blog&apos;); è®¾ç½®è§†å›¾å¤§å°1await page.setViewport(&#123;width: 1280, height: 600&#125;) è¦æ³¨æ„ï¼šè¿™é‡Œçš„è§†å›¾å¤§å°æŒ‡çš„æ˜¯ç½‘é¡µé¡µé¢æ˜¾ç¤ºçš„å¤§å°ï¼Œå’Œæµè§ˆå™¨ç•Œé¢çš„å¤§å°æ˜¯ä¸¤ä¸ªæ¦‚å¿µã€‚ æˆªå±fullPage å¯ä»¥æ§åˆ¶æ˜¯å¦æˆªå–æ•´ä¸ªé¡µé¢: 1234await page.screenshot(&#123; path: &apos;jd.png&apos;, fullPage: true&#125;); è®¾ç½®UserAgent1await page.setUserAgent(&apos;Mozilla/5.0 (iPhone; CPU iPhone OS 9_0_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13A404 Safari/601.1&apos;) è·å–é¡µé¢å†…å®¹è¿”å›é¡µé¢çš„å®Œæ•´ html ä»£ç ï¼ŒåŒ…æ‹¬ doctype ï¼š 1page.content(); æ‹¦æˆªè¯·æ±‚é¡µé¢ä¸­çš„å›¾ç‰‡12345678910// æ‹¦æˆªè¯·æ±‚é¡µé¢ä¸­çš„å›¾ç‰‡await page.setRequestInterception(true);page.on(&apos;request&apos;, interceptedRequest =&gt; &#123; let url = interceptedRequest.url(); if (url.indexOf(&apos;.png&apos;) &gt; -1 || url.indexOf(&apos;.jpg&apos;) &gt; -1) &#123; interceptedRequest.abort(); &#125; else &#123; interceptedRequest.continue(); &#125;&#125;); å‚è€ƒ Puppeteerï¼šæ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œè¡Œä¸ºçš„åˆ©å™¨ Â· Issue #38 Â· chenxiaochun/blog è·³è½¬ç­‰å¾…é¡µé¢åŠ è½½å®Œæ¯•æœ‰æ—¶å€™ä½¿ç”¨ timeout:3000 è¿™æ ·çš„æ–¹å¼ï¼Œå¹¶ä¸èƒ½å®Œå…¨ç¡®å®šé¡µé¢èƒ½åœ¨ç›¸åº”çš„æ—¶é—´èŒƒå›´å†…åŠ è½½å®Œè€Œå¯¼è‡´å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‚æ•°æ¥å®ç°ï¼Œè€Œå°½é‡å°‘ç”¨ timeout è¿™ç§é™å®šæ€§çš„æ–¹å¼ï¼š 1await page.goto(&apos;https://discordbots.org&apos;, &#123;waitUntil: &apos;domcontentloaded&apos;&#125;); å‚è€ƒ UnhandledPromiseRejectionWarning on Navigation Timeout Exceeded Â· Issue #2482 Â· GoogleChrome/puppeteer getBoundingClientRect()getBoundingClientRect()ç”¨äºè·å¾—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„å·¦ï¼Œä¸Šï¼Œå³å’Œä¸‹åˆ†åˆ«ç›¸å¯¹æµè§ˆå™¨è§†çª—çš„ä½ç½®ã€‚ ä¸€ä¸ªä¾‹å­è¿™é‡Œï¼Œå®ç°äº†ä¸€ä¸ªç®€å•çš„é¡µé¢æˆªå±çš„åŠŸèƒ½ï¼š get_png.js: 123456789101112131415161718192021222324252627282930313233const puppeteer = require(&apos;puppeteer-core&apos;);const execPath = &apos;/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome&apos;;(async () =&gt; &#123; const browser = await puppeteer.launch(&#123; // å…³é—­headlessæ¨¡å¼, ä¼šæ‰“å¼€æµè§ˆå™¨ headless: false, executablePath: execPath, args: [&apos;--no-sandbox&apos;, &apos;--disable-dev-shm-usage&apos;], // è¶…æ—¶æ—¶é—´ timeout: 30000, &#125;); const page = await browser.newPage(); await page.setViewport(&#123; width: 1280, height: 800, // deviceScaleFactor: 1, // isMobile: true &#125;); await page.goto(&apos;https://www.cnblogs.com/&apos;, &#123; waitUntil: &apos;domcontentloaded&apos; &#125;); // wait for some seconds await page.waitFor(3000); let title = await page.title(); console.log(title); // æˆªå± await page.screenshot(&#123; path: &apos;test.png&apos;, fullPage: true &#125;); await browser.close();&#125;)(); æ‰§è¡Œ node get_png.js çœ‹æ•ˆæœã€‚ é‡åˆ°çš„é—®é¢˜ERR_NAME_RESOLUTION_FAILEDä½¿ç”¨ puppeteer æµ‹è¯•æ—¶æŠ¥é”™ï¼š 12345678910112019-04-07 19:41:50: received 122600732019-04-07 19:41:50: https://item.jd.com/12260073.html2019-04-07 19:41:56: the task data for 12260073 get result error: Error: net::ERR_NAME_RESOLUTION_FAILED at https://item.jd.com/12260073.html2019-04-07 19:41:56: at navigate (/app/node_modules/puppeteer-core/lib/FrameManager.js:101:37)2019-04-07 19:41:56: at processTicksAndRejections (internal/process/task_queues.js:86:5)2019-04-07 19:41:56: -- ASYNC --2019-04-07 19:41:56: at Frame.&lt;anonymous&gt; (/app/node_modules/puppeteer-core/lib/helper.js:110:27)2019-04-07 19:41:56: at Page.goto (/app/node_modules/puppeteer-core/lib/Page.js:656:49)2019-04-07 19:41:56: at Page.&lt;anonymous&gt; (/app/node_modules/puppeteer-core/lib/helper.js:111:23)2019-04-07 19:41:56: at Object.runPuppet (/app/src/puppet.js:51:16)2019-04-07 19:41:56: at processTicksAndRejections (internal/process/task_queues.js:86:5) æ‰¾åˆ°ä¸€ç§è¯´æ³•ï¼šè®¾ç½® UserAgent ï¼Œå¦‚ä¸‹ï¼š 12345678910111213(async function main() &#123; try &#123; const browser = await puppeteer.launch(&#123;headless: true&#125;); const page = await browser.newPage(); await page.setUserAgent(&apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3419.0 Safari/537.36&apos;); await page.goto(&apos;http://example.com&apos;); //your code await browser.close(); &#125; catch(e)&#123; console.log(e); &#125;&#125;)(); å‚è€ƒ page.goto() method generates Error: net::ERR_CONNECTION_RESET error Â· Issue #1477 Â· GoogleChrome/puppeteer ç»æµ‹è¯•è§‚å¯Ÿï¼Œæ·»åŠ äº† UserAgent è®¾ç½®åç¡®å®ä¸ä¼šæŠ¥é”™äº†ã€‚ Promiseä¸­çš„console.logåœ¨å‡½æ•°å†…æœ‰ console.log(&#39;æŒ‰f12,æˆ‘å‡ºç°åœ¨æµè§ˆå™¨çš„consoleä¸­ï¼Œå¹¶ä¸åœ¨nodeå‘½ä»¤è¡Œ&#39;) ä½ ä¼šå‘ç°nodeå‘½ä»¤è¡Œçœ‹ä¸åˆ°è¿™å¥è¯ï¼Œè€Œåœ¨Chromiumçš„consoleä¸­çœ‹è§ã€‚ 123456789const result = await page.$eval(selector, el =&gt; &#123; //å¦‚æœéœ€è¦èµ‹å€¼è¦è¿”å›Promise return new Promise(resolve =&gt; &#123; //...ä¸€æ³¢éªšæ“ä½œ //å¯ä»¥ç”¨Dom apiå•¦ reslove(obj) &#125;)&#125;);await iframe.$$eval(selector, el =&gt; &#123;...&#125;); åœ¨page.evaluateä¸­ç”¨consoleæ˜¯ä¸èƒ½åœ¨nodeå‘½ä»¤è¡Œæ‰“å°å‡ºæ¥çš„ï¼Œä¸è¿‡æœ‰äº†ç›‘å¬äº‹ä»¶å°±å¯ä»¥æ”¹å˜è¿™ä¸ªè§„åˆ™äº†ã€‚ä¹Ÿå¯ä»¥åœ¨ç›‘å¬äº‹ä»¶é‡Œé¢åšå®¹é”™å¤„ç†ã€‚ å¦‚ä¸‹çš„æ–¹å¼å®ç°ç›‘å¬äº‹ä»¶ï¼š 123page.on(&apos;console&apos;, msg =&gt; &#123; console.log(msg);&#125;); å‚è€ƒ æˆ‘å¸¸ç”¨çš„puppeteerçˆ¬è™«api - æ˜é‡‘ Dockeré•œåƒä¸ºäº†éƒ¨ç½²çš„æ–¹ä¾¿ï¼Œæˆ‘å®ç°äº† puppeteer ç¯å¢ƒçš„Dockeré•œåƒï¼Œå…·ä½“å¯æŸ¥çœ‹ï¼š leafney/alpine-puppeteer: Alpine Docker Puppeteer Environment ç›¸å…³å‚è€ƒ Puppeteer v1.14.0 æˆªå›¾çš„è¯±æƒ‘ï¼šDockeréƒ¨ç½²Puppeteeré¡¹ç›® - æ˜é‡‘ å€¼çš„å‚è€ƒ çˆ¬è™«åˆ©å™¨ Puppeteer å®æˆ˜ - æ˜é‡‘ puppeteeråˆä½“éªŒ - æ˜é‡‘ ã€Œè¯‘ã€å¦‚ä½•ç”¨ Node.Js å’Œ Puppeteer çˆ¬å–ç½‘é¡µ - æ˜é‡‘ æ‰‹åŠ¨ä¸‹è½½ Chromeï¼Œè§£å†³ puppeteer æ— æ³•ä½¿ç”¨é—®é¢˜ - ç®€ä¹¦]]></content>
      <tags>
        <tag>æ•°æ®æŠ“å–</tag>
        <tag>Puppeteer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡Dockeréƒ¨ç½²Nodejsé¡¹ç›®äº§ç”Ÿçš„ä¸€äº›æ€è€ƒ]]></title>
    <url>%2F2019%2F04%2F08%2Fdeploying-nodejs-applications-with-docker%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘é‡åˆ°åŠ¨æ€é¡µé¢æ•°æ®æŠ“å–çš„éœ€æ±‚ï¼Œæ‰€ä»¥æœ‰åœ¨ç ”ç©¶ Puppeteer çš„ä½¿ç”¨æ–¹æ³•ã€‚ä¸è¿‡ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ Nodejsï¼Œæ‰€ä»¥ä¹Ÿæ˜¯é€šè¿‡ç½‘ä¸Šçš„å‡ ç¯‡æ•™ç¨‹åœ¨ä¸æ–­çš„æ‘¸ç´¢å’Œæµ‹è¯•ä¸­ä¸€ç‚¹ç‚¹äº†è§£ã€‚ ä¹Ÿå¯ä»¥è¯´æ˜¯è‡ªå·±ä¹ æƒ¯äº†ä½†å‡¡é‡åˆ°ä¸€ä¸ªé¡¹ç›®éƒ½æƒ³è¦æŠŠå®ƒDockerå®¹å™¨åŒ–æ¥ä¾¿äºåç»­çš„æ“ä½œï¼Œä¹Ÿå°±é¡ºä¾¿ç ”ç©¶äº†ä¸€ä¸‹Nodejsé¡¹ç›®çš„DockeråŒ–éƒ¨ç½²ã€‚ æœŸé—´ä¸€äº›å°çš„æ€è€ƒï¼Œéšæ‰‹è®°å½•ä¸€ä¸‹ã€‚ ç¬¬ä¸€ç‰ˆDockerfileä»ç½‘ä¸Šæœç´¢äº†ä¸€äº›é€šè¿‡dockeréƒ¨ç½²nodejsé¡¹ç›®çš„æ–‡ç« ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†çš„ Dockerfile æ–‡ä»¶å†™æ³•éƒ½å¦‚ä¸‹é¢çš„æ–¹å¼ï¼š 1234567891011121314151617181920212223242526272829FROM node:11-alpineLABEL maintainer=&quot;leafney &lt;babycoolzx@126.com&gt;&quot;# è®¾ç½®å›½å†…é˜¿é‡Œäº‘é•œåƒç«™ã€å®‰è£…chromium 68ã€æ–‡æ³‰é©¿å…è´¹ä¸­æ–‡å­—ä½“ç­‰ä¾èµ–åº“RUN echo &quot;https://mirrors.aliyun.com/alpine/v3.9/main/&quot; &gt; /etc/apk/repositories &amp;&amp; \ echo &quot;https://mirrors.aliyun.com/alpine/v3.9/community/&quot; &gt;&gt; /etc/apk/repositories &amp;&amp; \ echo &quot;https://mirrors.aliyun.com/alpine/edge/testing/&quot; &gt;&gt; /etc/apk/repositories &amp;&amp; \ apk -U --no-cache update &amp;&amp; \ apk -U --no-cache --allow-untrusted add tzdata chromium ttf-freefont wqy-zenhei ca-certificates &amp;&amp; \ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone &amp;&amp; \ mkdir -p /logs &amp;&amp; \ rm -rf /var/cache/apk/*WORKDIR /app# å¤åˆ¶å®¿ä¸»æœºå½“å‰è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°dockerçš„å·¥ä½œç›®å½•COPY . /appRUN npm config set registry &apos;https://registry.npm.taobao.org&apos; &amp;&amp; \ yarn config set registry &apos;https://registry.npm.taobao.org&apos; &amp;&amp; \ yarn global add pm2 &amp;&amp; \ yarn install &amp;&amp; \ yarn cache cleanVOLUME [&quot;/logs&quot;]# Start pm2.json process fileCMD [&quot;pm2-runtime&quot;, &quot;start&quot;, &quot;ecosystem.config.js&quot;] ä¸€èˆ¬çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 123456|-- node_app -- src -- index.js -- package.json -- ecosystem.config.js -- Dockerfile æŒ‰ç…§ä¸Šé¢çš„ Dockerfile æ–‡ä»¶æ“ä½œæ­¥éª¤ï¼Œå…¶ä¸­å…³é”®çš„ä¸€æ­¥ï¼š 12# å¤åˆ¶å®¿ä¸»æœºå½“å‰è·¯å¾„ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ°dockerçš„å·¥ä½œç›®å½•COPY . /app è¡¨ç¤ºå°† node_app é¡¹ç›®ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°äº†Dockeré•œåƒä¸­ï¼Œç„¶åæ‰§è¡Œ yarn install æ¥å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…ï¼Œæœ€åé€šè¿‡ pm2 å¯åŠ¨é¡¹ç›®ã€‚ä¹‹ååŸºäºè¯¥é•œåƒæ¥æ„å»ºå®¹å™¨ç›´æ¥è¿è¡Œå³å¯ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“æˆ‘çš„é¡¹ç›®ä»£ç æœ‰æ›´æ–°åéœ€è¦é‡æ–°ä¸Šçº¿æ–°ç‰ˆæœ¬æ—¶ï¼Œè¦å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ æŒ‰ç…§ä¸Šé¢çš„ Dockerfile ï¼Œæ“ä½œæ­¥éª¤åº”è¯¥æ˜¯ï¼š åœæ­¢å®¹å™¨ï¼Œåˆ é™¤å®¹å™¨ ä»gitæ‹‰å–æœ€æ–°é¡¹ç›®ä»£ç  é‡æ–° docker build é•œåƒï¼ŒåŒæ—¶æŠŠä»£ç æ‰“åŒ…åˆ°é•œåƒä¸­ é€šè¿‡æ–°é•œåƒåˆ›å»ºå®¹å™¨ï¼Œå¹¶å¯åŠ¨å®¹å™¨è¿è¡Œ è¿‡ç¨‹ä¼¼ä¹å¾ˆç®€å•ï¼Œä½†ç»†æƒ³ä¸€ä¸‹ï¼Œæ¯æ¬¡ä¸€æœ‰ä»£ç æ›´æ–°ï¼Œéƒ½éœ€è¦é‡æ–°æ¥æ„å»ºé•œåƒã€‚é‚£å¦‚æœæ¯æ¬¡çš„æ›´æ–°éƒ½æ˜¯ä¸€äº›æ¯”è¾ƒå°çš„æ”¹åŠ¨å‘¢ï¼Ÿç›¸æ¯”ä¹‹ä¸‹é‡æ–°æ„å»ºé•œåƒæ‰€è€—è´¹çš„æ—¶é—´å°±æ¯”è¾ƒé•¿äº†ã€‚ æ›´ä¸¥é‡çš„æ˜¯ï¼Œæ¯ä¸€æ¬¡é‡æ–°æ„å»ºé•œåƒï¼Œä¹‹å‰å¯ç”¨çš„é•œåƒå°±ç›´æ¥ä½œåºŸäº†ï¼Œå¦‚æœä¸åŠæ—¶åˆ é™¤ï¼Œä¼šå ç”¨å¾ˆå¤§çš„ç¡¬ç›˜ç©ºé—´ã€‚ åŸºäºä»¥ä¸Šè¯¸å¤šçš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥è€ƒè™‘å¦‚ä½•ä¼˜åŒ–ï¼Ÿ ç¬¬äºŒç‰ˆDockerfileé‚£ä¹ˆï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œç†æƒ³çŠ¶æ€çš„æ“ä½œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š åœæ­¢å®¹å™¨ ä»gitæ‹‰å–æœ€æ–°é¡¹ç›®ä»£ç  é‡å¯å®¹å™¨ Thatâ€™t all! å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ æ“ä½œéå¸¸çš„ç®€å•æ˜äº†ï¼Œé‚£çœ‹ä¸€ä¸‹å¦‚ä½•ä¿®æ”¹ä¸Šé¢ç¬¬ä¸€ç‰ˆçš„ Dockerfile æ–‡ä»¶å§ï¼š 12345678910111213141516171819202122232425FROM node:11-alpineLABEL maintainer=&quot;leafney &lt;babycoolzx@126.com&gt;&quot;# åœ¨å›½å†…ç”±äºç½‘ç»œåŸå› ï¼Œè½¯ä»¶ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥åŠ å…¥äº†å›½å†…çš„è½¯ä»¶æºä»¥åŠ é€Ÿæ„å»º# è®¾ç½®å›½å†…é˜¿é‡Œäº‘é•œåƒç«™ï¼Œå®‰è£…chromiumã€æ–‡æ³‰é©¿å…è´¹ä¸­æ–‡å­—ä½“ç­‰ä¾èµ–åº“ï¼Œé…ç½®npmå’Œyarnçš„taobaoä»“åº“RUN echo &quot;https://mirrors.aliyun.com/alpine/v3.9/main/&quot; &gt; /etc/apk/repositories &amp;&amp; \ echo &quot;https://mirrors.aliyun.com/alpine/v3.9/community/&quot; &gt;&gt; /etc/apk/repositories &amp;&amp; \ echo &quot;https://mirrors.aliyun.com/alpine/edge/testing/&quot; &gt;&gt; /etc/apk/repositories &amp;&amp; \ apk add -U --no-cache --allow-untrusted tzdata chromium ttf-freefont wqy-zenhei ca-certificates &amp;&amp; \ mkdir -p /app /logs &amp;&amp; \ npm config set registry &apos;https://registry.npm.taobao.org&apos; &amp;&amp; \ yarn config set registry &apos;https://registry.npm.taobao.org&apos; &amp;&amp; \ yarn global add pm2 &amp;&amp; \ yarn cache clean &amp;&amp; \ rm -rf /var/cache/apk/*COPY ./startup.sh /usr/local/bin/RUN chmod +x usr/local/bin/startup.shWORKDIR /appVOLUME [&quot;/app&quot;]EXPOSE 8000CMD [ &quot;startup.sh&quot; ] startup.sh : 12345678910111213141516171819#!/bin/shset -eWDir=/appif [ &quot;$(ls -A $&#123;WDir&#125;)&quot; ]; then echo &quot;[i] ***** dir /app have files,so start init. *****&quot; echo &quot;[i] ***** yarn install *****&quot; yarn install echo &quot;[i] ***** pm2 start *****&quot; pm2-runtime start ecosystem.config.jselse echo &quot;[e] ***** dir /app is empty,so can not run. *****&quot; echo &quot;[i] ***** Please copy project files to VOLUME for /app and then restart docker container *****&quot; nodefi æ€»ä½“æ¥è¯´ï¼Œæ”¹åŠ¨çš„æ€è·¯å°±æ˜¯ï¼šå°†ä¸éœ€è¦å˜åŒ–çš„é‚£äº›æ“ä½œæ‰“åŒ…è¿›dockeré•œåƒä¸­ï¼Œè€Œéœ€è¦ç»å¸¸æ”¹åŠ¨çš„æ“ä½œå¦‚ æ›´æ–°é¡¹ç›®ä»£ç ï¼Œæ‰§è¡Œ yarn install å®‰è£…æ–°çš„ä¾èµ–åŒ…ç­‰ï¼Œéƒ½æ”¾åˆ° startup.sh ä¸­ã€‚è€Œå¯¹äºæ›´å¤æ‚çš„æ“ä½œï¼Œåç»­å¯ä»¥åŸºäºè¯¥é•œåƒç›´æ¥åšæ‰©å±•ã€‚ å¦å¤–ï¼Œè¿™é‡Œä½¿ç”¨ yarn install è€Œæ²¡æœ‰ç”¨ npm install çš„ä¸€ä¸ªä¼˜åŠ¿æ˜¯ å¦‚æœä½ çš„ package.json æ–‡ä»¶åœ¨æ›´æ–°æ—¶æ²¡æœ‰å˜åŒ–ï¼Œyarn install ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåç»­çš„æ“ä½œéƒ½æ˜¯è¯»å–cacheç¼“å­˜äº†ï¼Œæ‰€ä»¥åç»­çš„ä»£ç æ›´æ–°æ“ä½œä¹Ÿå°±éå¸¸å¿«é€Ÿäº†ã€‚ å…·ä½“å…³äº yarn å’Œ npm çš„åŒºåˆ«ï¼Œè¿™é‡Œä¸å†è¯¦ç»†å±•å¼€è¯´æ˜ã€‚ è¿›ä¸€æ­¥ä¼˜åŒ–ä¸Šé¢çš„æ“ä½œè™½è¯´å·²ç»å¾ˆç®€ä¾¿äº†ï¼Œä½†æ¯æ¬¡æ›´æ–°ä»£ç çš„æ—¶å€™è¿˜æ˜¯éœ€è¦é‡å¯ä¸€ä¸‹å®¹å™¨æ‰èƒ½åº”ç”¨ä¸Šæœ€æ–°çš„æ”¹åŠ¨ã€‚é‚£è¿˜æœ‰æ²¡æœ‰ä¼˜åŒ–çš„ç©ºé—´å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ å½“ç„¶ã€‚ ä¸€èˆ¬çš„Nodejsé¡¹ç›®æˆ‘ä»¬å¯ä»¥é€šè¿‡ pm2 æ¥ç®¡ç†å’Œç›‘æ§è¿›ç¨‹ï¼Œä¿è¯nodeè¿›ç¨‹æŒç»­è¿è¡Œæˆ–å´©æºƒæ—¶è‡ªåŠ¨é‡å¯ã€‚è€Œ pm2 çš„ watch å‚æ•°å¯ä»¥ç›‘å¬åº”ç”¨ç›®å½•çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè‡ªåŠ¨é‡å¯ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½æ¥å®ç°æ”¹åŠ¨ä»£ç çš„è‡ªåŠ¨æ›´æ–°æ•ˆæœã€‚ åœ¨ pm2 çš„é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼š 1234&#123; &quot;watch&quot;: [&quot;server&quot;, &quot;client&quot;], &quot;ignore_watch&quot; : [&quot;node_modules&quot;, &quot;client/img&quot;],&#125; watch å‚æ•°é»˜è®¤æƒ…å†µä¸‹ä¸º false ,å¯ä»¥è®¾ç½®éœ€è¦ç›‘å¬æ”¹åŠ¨çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚åœ¨ ignore_watch å‚æ•°ä¸­è®¾ç½®æ’é™¤ç›‘å¬æ”¹åŠ¨çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚ è¿™æ ·ï¼Œåªè¦ç›‘å¬åˆ°ä»£ç æœ‰æ”¹åŠ¨ï¼Œpm2 å°±ä¼šè‡ªåŠ¨é‡å¯ã€‚å¯¹äºé¡¹ç›®æ›´æ–°çš„æ“ä½œæˆ‘ä»¬éœ€è¦åšçš„ä¹Ÿå°±åªæœ‰ä¸€é¡¹ ä»gitæ‹‰å–æœ€æ–°é¡¹ç›®ä»£ç  è€Œå·²äº†ã€‚ æ€»ç»“å…¶å®æ— è®ºæ˜¯ç¬¬ä¸€ç§çš„æ¯æ¬¡ç”Ÿæˆé•œåƒè¿˜æ˜¯ç¬¬ä¸‰ç§æ›´åŠ çµæ´»çš„è‡ªåŠ¨é‡å¯ï¼Œå…·ä½“å¦‚ä½•åº”ç”¨è¿˜æ˜¯éœ€è¦çœ‹æ‰€å¯¹åº”çš„éœ€æ±‚è€Œè¨€çš„ï¼Œå¹¶ä¸èƒ½ä¸€å‘³çš„è¯„åˆ¤å­°ä¼˜å­°åŠ£ã€‚ æˆ‘å®ç°çš„Dockeré•œåƒåœ°å€ï¼šleafney/alpine-nodejs - Docker Hub ç®€å•çš„å®ç°äº†ä¸€ä¸ªNodejsé¡¹ç›®çš„Dockeré•œåƒï¼Œå¦‚æœ‰è€ƒè™‘ä¸åˆ°çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æå‡ºå»ºè®®å’Œè®¨è®ºã€‚ ç›¸å…³å‚è€ƒ PM2 - Watch &amp; Restart]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºPythonä¾èµ–åŒ…æ–‡ä»¶requirements]]></title>
    <url>%2F2019%2F03%2F22%2Frequirements-for-python%2F</url>
    <content type="text"><![CDATA[Pythoné¡¹ç›®ä¸­çš„ä¾èµ–åŒ…ä¸€èˆ¬é€šè¿‡ requirements.txt æ¥è®°å½•ã€‚ é—®é¢˜ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡å‘½ä»¤ pip freeze &gt; requirements.txt æ¥ç”Ÿæˆé¡¹ç›®ä¾èµ–æ–‡ä»¶ï¼š 123456789101112131415161718192021amqp==2.4.2aniso8601==6.0.0billiard==3.5.0.5celery==4.2.2certifi==2019.3.9chardet==3.0.4Click==7.0Flask==1.0.2Flask-RESTful==0.3.7Flask-Script==2.0.6idna==2.8itsdangerous==1.1.0Jinja2==2.10kombu==4.3.0MarkupSafe==1.1.1pytz==2018.9requests==2.21.0six==1.12.0urllib3==1.24.1vine==1.3.0Werkzeug==0.15.0 ä½†çœ‹åˆ°è¿™ä¹ˆå¤šçš„ä¾èµ–åŒ…ä¸ç¦è¦äº§ç”Ÿä¸€äº›ç–‘é—®äº†ï¼šéš¾é“è¿™äº›éƒ½æ˜¯æˆ‘è¿™ä¸ªé¡¹ç›®éœ€è¦çš„ä¾èµ–åŒ…å—ï¼Ÿï¼Ÿï¼Ÿ æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹å®‰è£…çš„æ‰€æœ‰ä¾èµ–åŒ…ï¼š 1234567891011121314151617181920212223242526âœ pip listPackage Version ------------- --------amqp 2.4.2 aniso8601 6.0.0 billiard 3.5.0.5 celery 4.2.2 certifi 2019.3.9chardet 3.0.4 Click 7.0 Flask 1.0.2 Flask-RESTful 0.3.7 Flask-Script 2.0.6 idna 2.8 itsdangerous 1.1.0 Jinja2 2.10 kombu 4.3.0 MarkupSafe 1.1.1 pip 19.0.3 pytz 2018.9 requests 2.21.0 setuptools 18.1 six 1.12.0 urllib3 1.24.1 vine 1.3.0 Werkzeug 0.15.0 å¯ä»¥çœ‹åˆ°æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡ pip freeze ç”Ÿæˆçš„æ˜¯å½“å‰ç¯å¢ƒä¸‹çš„æ‰€æœ‰ä¾èµ–åŒ…ï¼Œè€Œä¸æ˜¯å½“å‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…ã€‚ è§£å†³è¦æƒ³ç”Ÿæˆå½“å‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡ pipreqs æ¥å®ç°ã€‚ 1$ pip install pipreqs å‘½ä»¤ä»‹ç»123456789101112131415161718192021âœ pipreqs --helppipreqs - Generate pip requirements.txt file based on importsUsage: pipreqs [options] &lt;path&gt;Options: --use-local Use ONLY local package info instead of querying PyPI --pypi-server &lt;url&gt; Use custom PyPi server --proxy &lt;url&gt; Use Proxy, parameter will be passed to requests library. You can also just set the environments parameter in your terminal: $ export HTTP_PROXY=&quot;http://10.10.1.10:3128&quot; $ export HTTPS_PROXY=&quot;https://10.10.1.10:1080&quot; --debug Print debug information --ignore &lt;dirs&gt;... Ignore extra directories, each separated by a comma --encoding &lt;charset&gt; Use encoding parameter for file open --savepath &lt;file&gt; Save the list of requirements in the given file --print Output the list of requirements in the standard output --force Overwrite existing requirements.txt --diff &lt;file&gt; Compare modules in requirements.txt to project imports. --clean &lt;file&gt; Clean up requirements.txt by removing modules that are not imported in project. å¸¸ç”¨å‘½ä»¤12345678# æŸ¥çœ‹å½“å‰é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–åŒ…$ pipreqs --print ./# è·å–å½“å‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…å¹¶ä¿å­˜åˆ°é»˜è®¤çš„ requirements.txt $ pipreqs ./# è·å–å½“å‰é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…å¹¶ä¿å­˜åˆ°é»˜è®¤çš„ requirements.txt ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™è¦†ç›–$ pipreqs --force ./ ç»“æœç”±äºæˆ‘çš„é¡¹ç›®ä¸‹å·²ç»é€šè¿‡ freeze å‘½ä»¤ç”Ÿæˆäº† requirements.txt æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ pipreqs --force ./ ä¹‹åï¼Œå†æŸ¥çœ‹ï¼š 1234Flask_Script==2.0.6Flask_RESTful==0.3.7Flask==1.0.2celery==4.2.2 è¿™æ‰æ˜¯å½“å‰é¡¹ç›®çœŸæ­£éœ€è¦çš„ä¾èµ–åŒ…ã€‚ ä½¿ç”¨1$ pip install -r requirements.txt è¿™ç®—æ˜¯ä¸€ä¸ªå°çš„æ³¨æ„äº‹é¡¹å§ï¼]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ -- Flutterå¼€å‘æŠ€å·§]]></title>
    <url>%2F2019%2F03%2F11%2Fflutter-development-skills%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬é…ç½®å¥½äº†Flutterçš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥é€‰æ‹© VS Code(ä»¥ä¸‹ç®€ç§°VS) æˆ– Android Studio(ä»¥ä¸‹ç®€ç§°AS) å…¶ä¸­ä»»æ„ä¸€æ¬¾å·¥å…·æ¥å¼€å‘ã€‚ ä¸‹é¢ï¼Œæˆ‘æ•´ç†äº†è¿™ä¸¤æ¬¾å·¥å…·ä¸­å¸¸ç”¨çš„å¿«æ·é”®åŠä¸€äº›æŠ€å·§ï¼Œä»¥å¸®åŠ©å¤§å®¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­æé«˜æ•ˆç‡ã€‚ StatelessWidgetå’ŒStatefulWidgetå¿«é€Ÿåˆ›å»ºåŸºäºStatelessWidgetå’ŒStatefulWidgetçš„ç»„ä»¶åªéœ€è¦è¾“å…¥ stless å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªStatelessWidgetã€‚ åªéœ€è¦è¾“å…¥ stful å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªStatefulWidgetã€‚ åŠŸèƒ½ VS Code Android Studio StatelessWidget stless + Tab stless + Tab / stless + Enter StatefulWidget stful + Tab stful + Tab / stful + Enter å°† StatelessWidget æ”¹æˆ StatefulWidgetåœ¨ AS ä¸­ï¼Œå°†å…‰æ ‡æ”¾åœ¨ StatelessWidget ä¸Šï¼ŒæŒ‰ä½ Alt+Enter (in Mac is Option+Enter) ï¼Œç„¶åå•å‡» Convert to StatefulWidget å°†è‡ªåŠ¨è¿›è¡Œè½¬æ¢ã€‚ åœ¨ VS Code ä¸­ï¼Œå°†å…‰æ ‡æ”¾åœ¨ StatelessWidget ä¸Šï¼ŒæŒ‰ä½ Ctrl + . (in Mac is Cmd + .) ï¼Œç„¶åå•å‡» Convert to StatefulWidget å°†è‡ªåŠ¨è¿›è¡Œè½¬æ¢ã€‚ Alt+Enter æ‰©å±•é€‰é¡¹AS Win: å•å‡»ä»»æ„ç»„ä»¶åç§° + Alt + Enter Mac: å•å‡»ä»»æ„ç»„ä»¶åç§° + Option + Enter VS Code Win: å•å‡»ä»»æ„ç»„ä»¶åç§° + Ctrl + . Mac: å•å‡»ä»»æ„ç»„ä»¶åç§° + Command + . å°†ä»£ç å—æå–åˆ°æ–¹æ³•ä¸­ Extract Methodæå–ä¸€æ®µä»£ç å—ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚å½“ä½ å‘ç°æŸä¸ªæ–¹æ³•é‡Œé¢è¿‡äºå¤æ‚ï¼Œéœ€è¦å°†æŸä¸€æ®µä»£ç æå–æˆå•ç‹¬çš„æ–¹æ³•æ—¶ï¼Œè¯¥æŠ€å·§æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ ASåœ¨ AS ä¸­ï¼Œé€‰ä¸­ä»£ç æ®µ â€“ Menu â€“ Refactor â€“ Extract â€“ Method... ï¼š å¯¹åº”çš„å¿«æ·é”®æ˜¯ï¼š * Win: `é€‰ä¸­ä»£ç æ®µ` + `Ctrl + Alt + M` * Mac: `é€‰ä¸­ä»£ç æ®µ` + `Command + Option + M` æœ€å¼º Android Studio ä½¿ç”¨å°æŠ€å·§å’Œå¿«æ·é”®-è®¾è®¡å¸ˆ-51CTOåšå®¢ VS Codeåœ¨ VS Code ä¸­ï¼Œé€‰ä¸­ä»£ç æ®µ â€“ å³é”®èœå• â€“ é‡æ„... â€“ Extract Method : å¯¹åº”çš„å¿«æ·é”®ï¼š * Win: `é€‰ä¸­ä»£ç æ®µ` + `Ctrl + .` + é€‰æ‹© `Extract Method` * Mac: `é€‰ä¸­ä»£ç æ®µ` + `Command + .` + é€‰æ‹© `Extract Method` å‚è€ƒï¼š v2.12 - Dart Code - Dart &amp; Flutter support for Visual Studio Code Refactoring source code in Visual Studio Code åŒ¹é…æ‹¬å·é«˜äº®å½“ä»£ç é‡å¤šäº†ä¹‹åï¼Œæƒ³è¦æ‰¾åˆ°æŸä¸€éƒ¨åˆ†ä»£ç æ—¶ï¼Œé€šè¿‡åŒ¹é…çš„æ‹¬å·æ¥æ‰¾æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚ ASåœ¨ AS ä¸­ï¼Œé»˜è®¤æ”¯æŒåŒ¹é…æ‹¬å·é«˜äº®ï¼š VS Codeåœ¨ VS Code ä¸­ï¼Œé»˜è®¤çš„æ‹¬å·åŒ¹é…æ¯”è¾ƒç®€å•ï¼š å½“ä»£ç é‡å¤šäº†ä¹‹åï¼Œæ‰¾èµ·æ¥è®©äººçœ‹ç€æœ‰äº›çœ¼æ™•ã€‚ è¿™é‡Œï¼Œæ¨èä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„æ’ä»¶ï¼šBracket Pair Colorizer 2 : å®‰è£…ä¹‹åï¼Œç›¸é‚»çš„æ‹¬å·é¢œè‰²ä¸åŒï¼ŒåŒºåˆ†èµ·æ¥å¾ˆæ˜æ˜¾ã€‚ ä¸è¿‡ï¼Œè¿™é‡Œæˆ‘ä¸å¤ªå–œæ¬¢è‡ªå¸¦çš„è¿™ä¸ªåŒ¹é…çº¿ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠå®ƒå»æ‰äº†ã€‚åœ¨è¯¥æ’ä»¶çš„å®˜æ–¹ä»‹ç»ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯é€šè¿‡ &quot;bracket-pair-colorizer-2.showHorizontalScopeLine&quot; ç±»ä¼¼çš„é€‰é¡¹å®šä¹‰çš„ï¼Œåœ¨ ç”¨æˆ·è®¾ç½® ä¸­å¯ä»¥å…³é—­è¿™äº›ã€‚ å¿«æ·é”®AS ä¸­å¿«æ·é”®æ ¼å¼åŒ–ä»£ç ï¼š * Win: `Ctrl +Alt + L` * Mac: `Command + Option + L` å¿«é€Ÿé€‰ä¸­æ•´ä¸ªå°éƒ¨ä»¶ï¼š * Win: `åŒå‡»é€‰ä¸­éƒ¨ä»¶åç§° + Ctrl + W` * Mac: `åŒå‡»é€‰ä¸­éƒ¨ä»¶åç§° + Option + Up` éƒ¨ä»¶æ“ä½œï¼ˆAlt + Enterï¼‰ï¼š * Win: `å•å‡»ä»»æ„ç»„ä»¶åç§° + Alt + Enter` * Mac: `å•å‡»ä»»æ„ç»„ä»¶åç§° + Option + Enter` é‡å‘½åï¼š * `ç‚¹å‡»é€‰ä¸­ä»»æ„ç»„ä»¶åç§° + Shift + F6` æŸ¥çœ‹ç»„ä»¶æºç : * Win: * `Ctrl + Click` * `Ctrl + B` * `F4` * `Ctrl + Enter` * Mac: * `Command + Click` * `Command + B` * `F4` * `Command + Down` æ³¨æ„ï¼šæˆ‘åªæ‰¾åˆ°äº†è·³è½¬è¿‡å»çš„å¿«æ·é”®ï¼Œä½†æ²¡æ‰¾åˆ°è·³è½¬å›æ¥çš„å¿«æ·é”®ã€‚ æŸ¥çœ‹ Widget åŒ…å«çš„å±æ€§ï¼š * Win: `å•å‡»ä»»æ„ç»„ä»¶åç§° + Ctrl + Shift + I` * Mac: `å•å‡»ä»»æ„ç»„ä»¶åç§° + Command + Y` ç§»é™¤æ²¡ç”¨çš„ imports: * Win: `Ctrl + Alt + O` * Mac: `Command + Option + O` ä¸Šä¸‹ç§»åŠ¨è¡Œï¼š * Win: `å•å‡»ä»»æ„è¡Œ + Alt + Shift + Up/Down` * Mac: `å•å‡»ä»»æ„è¡Œ + Option + Shift + Up/Down` ä¸Šä¸‹ç§»åŠ¨æ–¹æ³•ï¼š * Win: `å•å‡»ä»»æ„æ–¹æ³•åç§° + Ctrl + Shift + Up/Down` * Mac: `å•å‡»ä»»æ„æ–¹æ³•åç§° + Command + Shift + Up/Down` Flutterå¼€å‘ä¸­å¸¸ç”¨çš„å¿«æ·é”® - æ˜é‡‘ æå‡ Flutter å¼€å‘æ•ˆç‡çš„å¿«æ·é”® | Wmlâ€™Blog æœ€å¼º Android Studio ä½¿ç”¨å°æŠ€å·§å’Œå¿«æ·é”®-è®¾è®¡å¸ˆ-51CTOåšå®¢ â­ï¸â­ï¸â­ï¸ VS Code ä¸­å¿«æ·é”®æˆ‘ä»¬çŸ¥é“ VS Code çš„æ’ä»¶éå¸¸ä¸°å¯Œã€‚å…¶ä¸­ä¸€æ¬¾åä¸º Awesome Flutter Snippets ä¸ºæˆ‘ä»¬æ•´ç†äº†å¸¸ç”¨çš„æ–¹æ³•å’Œç»„ä»¶çš„å¿«æ·é”®æ“ä½œã€‚ VS Code è°ƒè¯• Flutterè°ƒè¯•ç‚¹å‡» F5 è¿›å…¥è°ƒè¯•æ¨¡å¼ã€‚ç‚¹å‡» Shift + F5 é€€å‡ºè°ƒè¯•æ¨¡å¼ã€‚ â€œHot Reloadâ€ and â€œHot Restartâ€è°ƒè¯•æ¨¡å¼ä¸‹Hot Reload: ä¿å­˜åè‡ªåŠ¨é‡è½½ * Win: `Ctrl + S` * Mac: `Command + S` ç‚¹å‡»è°ƒè¯•èœå•ä¸­çš„ é‡è½½æŒ‰é’® æˆ–ä½¿ç”¨å¿«æ·é”®ï¼š * Win: `Ctrl + Shift + F5` * Mac: `Command + Shift + F5` Hot Restart: * Win: `Ctrl + F5` * Mac: `Control + F5` How to do full reload? Â· Issue #754 Â· Dart-Code/Dart-Code Key Bindings - Dart Code - Dart &amp; Flutter support for Visual Studio Code å‘½ä»¤æ¨¡å¼ä¸‹Hot Reload: * åœ¨å‘½ä»¤çª—å£è¾“å…¥ `r` Hot Restart: * åœ¨å‘½ä»¤çª—å£è¾“å…¥ `R` ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–AS æˆ– IntelliJ IDEæ‰‹åŠ¨æ‰§è¡Œåœ¨ä»£ç çª—å£ä¸­ï¼Œå³é”®å•å‡»ä»£ç çª—å£å¹¶é€‰æ‹© Reformat code with dartfmt èœå•ï¼Œå®ç°è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ã€‚ ç›¸åº”çš„å¿«æ·é”®ï¼š * Win: `Ctrl + Alt + L` * Mac: `Command + Option + L` è‡ªåŠ¨æ‰§è¡Œé€‰æ‹©èœå• Android Studio â€“ Preferences â€“ æœç´¢ flutter â€“ åœ¨ Languages &amp; Frameworks ä¸­çš„ Flutter å³ä¾§ç•Œé¢ä¸­ï¼Œæ‰¾åˆ° General é€‰é¡¹ã€‚ å‹¾é€‰ Format code on save ä¸€é¡¹ã€‚ä¹Ÿå¯ä»¥å°†å­é¡¹ Organize imports on save åŒæ—¶é€‰ä¸­ã€‚ è¿™é‡Œæˆ‘ä½¿ç”¨çš„ Android Studio ç‰ˆæœ¬ä¸º Android Studio 3.3.1 ã€‚å…¶ä»–ç‰ˆæœ¬å¯èƒ½ä½ç½®æœ‰å˜åŒ–ã€‚ VS Codeæ‰‹åŠ¨æ‰§è¡Œåœ¨ VS Code ä»£ç ç•Œé¢ä¸­ï¼Œå³é”®å•å‡»ä»£ç çª—å£å¹¶é€‰æ‹© Format Documentï¼ˆæ ¼å¼åŒ–æ–‡æ¡£ï¼‰ èœå•ï¼Œå®ç°è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ã€‚ ç›¸åº”çš„å¿«æ·é”®ï¼š * Win: `Alt + Shift + F` * Mac: `Option + Shift + F` è‡ªåŠ¨æ‰§è¡Œç›¸æ¯”èµ·æ‰‹åŠ¨æ‰§è¡Œçš„æ–¹å¼ï¼Œæ›´å¤šäººéƒ½ä¼šé€‰æ‹©é€šè¿‡åœ¨ä¿å­˜æ–‡æ¡£æ—¶æ¥å®ç°ä»£ç çš„è‡ªåŠ¨æ ¼å¼åŒ–ã€‚ åœ¨ VS Code ç•Œé¢ä¸­ï¼Œé€šè¿‡å¿«æ·é”® Ctrl + , ( Command + , in Mac) æ‰“å¼€ è®¾ç½® çª—å£ï¼Œæˆ–è€…é€šè¿‡ æ–‡ä»¶ â€“ é¦–é€‰é¡¹ â€“ è®¾ç½®ï¼ˆ Code â€“ é¦–é€‰é¡¹ â€“ è®¾ç½® in Macï¼‰ æ‰“å¼€ è®¾ç½® çª—å£ã€‚åœ¨æœç´¢æ ä¸­è¾“å…¥ edit:formatonsave æ‰“å¼€è®¾ç½®ç•Œé¢ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¿å­˜æ–‡ä»¶æ—¶ä¸ä¼šè‡ªåŠ¨æ ¼å¼åŒ–æ–‡ä»¶ã€‚ å½“å‹¾é€‰è¿™ä¸€é¡¹åï¼Œè¡¨ç¤ºåœ¨æ ¼å¼åŒ–ç¨‹åºå¯ç”¨çš„å‰æä¸‹ï¼Œä¿å­˜æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ã€‚ ä¹Ÿå¯ä»¥é€‰æ‹©ä¸‹é¢çš„ åœ¨ settings.json ä¸­ç¼–è¾‘ ä¸€é¡¹ï¼Œæ¥è‡ªå®šä¹‰è¯¥é¡¹ã€‚ å½“å‹¾é€‰ä¸Šé¢çš„é€‰é¡¹åï¼Œé»˜è®¤æ˜¯åœ¨ settings.json ä¸­æ·»åŠ äº†ä¸€è¡Œ: 123&#123; &quot;editor.formatOnSave&quot;: true,&#125; é»˜è®¤ä¸º falseã€‚ ä¸ªæ€§åŒ–è®¾ç½®æ¯”å¦‚ï¼Œæˆ‘æƒ³åªåœ¨ Dart ä»£ç ä¸­å®ç°ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–çš„æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·æ¥è®¾ç½®ï¼šç¼–è¾‘ settings.json æ–‡ä»¶ï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š 1234567&#123; &quot;editor.formatOnSave&quot;: false, &quot;[dart]&quot;:&#123; &quot;editor.formatOnSave&quot;: true, &#125;&#125; å†æ¯”å¦‚ï¼Œæˆ‘æƒ³åœ¨æ‰€æœ‰è¯­è¨€ä¸‹éƒ½æ”¯æŒä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–çš„æ“ä½œï¼Œä½†åªåœ¨ javascript ä»£ç ä¸­ä¸æ”¯æŒä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼æ¥è®¾ç½®ï¼š 123456&#123; &quot;editor.formatOnSave&quot;: true, &quot;[javascript]&quot;: &#123; &quot;editor.formatOnSave&quot;: false, &#125;&#125; å¯è§ï¼ŒVS Code çš„è®¾ç½®æ˜¯éå¸¸çµæ´»çš„ã€‚ ç›¸å…³å‚è€ƒ æ ¼å¼åŒ–Flutterä»£ç  - Flutterä¸­æ–‡ç½‘ è‡³æ­¤ï¼Œå…³äºå·¥å…·çš„ä¸€äº›ä½¿ç”¨æŠ€å·§ä¹Ÿå°±ä»‹ç»å®Œäº†ã€‚]]></content>
      <categories>
        <category>Flutterä¹‹æ—…</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…µé©¬æœªåŠ¨ï¼Œç²®è‰å…ˆè¡Œ -- Flutterå¼€å‘ç¯å¢ƒé…ç½®]]></title>
    <url>%2F2019%2F03%2F08%2Fflutter-devemopment-environment-configuration%2F</url>
    <content type="text"><![CDATA[å¯¹äºFlutterå¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œå®˜æ–¹ç½‘ç«™ Install - Flutter ä¸­å·²ç»ä»‹ç»çš„éå¸¸è¯¦ç»†äº†ï¼Œåªè¦æŒ‰ç…§æ­¥éª¤æ¥æ“ä½œå³å¯ã€‚ æˆ‘ä¹Ÿæ˜¯æŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹æ¥æ“ä½œçš„ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸ªè®°å½•ã€‚å¦å¤–ï¼Œæˆ‘çš„æ“ä½œå¹¶ä¸æ˜¯å®Œå…¨æŒ‰ç…§å®˜æ–¹çš„æµç¨‹æ¥çš„ï¼Œè¿™é‡Œä¹Ÿä»…ä»…æ˜¯ç»™å„ä½åšä¸€ä¸ªå‚è€ƒã€‚ å…³äºç³»ç»Ÿæˆ‘çš„ç”µè„‘æ˜¯ Macï¼Œç³»ç»Ÿç‰ˆæœ¬ä¸º macOS Mojave 10.14.3ã€‚ é…ç½®Flutter SDKæˆ‘å®‰è£…çš„æ—¶å€™Flutterçš„ç‰ˆæœ¬è¿˜æ˜¯ v1.0.0 ï¼Œä»Šå¤©çœ‹å·²ç»æ›´æ–°åˆ° v1.2.1 äº†ã€‚ä¸å¾—ä¸è¯´Flutterçš„æ›´æ–°æ˜¯çœŸç»™åŠ›ã€‚ ä¸‹è½½ä»ç½‘ç«™åœ°å€ MacOS install - Flutter ä¸‹è½½ Flutter SDK å®‰è£…åŒ…ã€‚ æˆ‘å°† flutter sdk å®‰è£…åœ¨ ~/sdk (æˆ–è€…å†™æˆ $HOME/sdk) ç›®å½•ä¸‹ï¼š 12$ cd ~/sdk$ unzip ~/Downloads/flutter_macos_v1.0.0-stable.zip é…ç½®æ·»åŠ  flutter ç›¸å…³å·¥å…·åˆ°ç¯å¢ƒå˜é‡ path ä¸­: ç¼–è¾‘ $HOME/.bash_profile æ–‡ä»¶ï¼Œåœ¨åº•éƒ¨æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼š 1export PATH=&quot;$PATH:[PATH_TO_FLUTTER_GIT_DIRECTORY]/flutter/bin&quot; å…¶ä¸­çš„ [PATH_TO_FLUTTER_GIT_DIRECTORY] è¡¨ç¤ºä½ è§£å‹ flutter sdk çš„ç›®å½•ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ ~/sdkã€‚å³ï¼š 1export PATH=&quot;$PATH:~/sdk/flutter/bin&quot; å¦å¤–ï¼Œåœ¨å›½å†…ç”±äº ä¼—æ‰€å‘¨çŸ¥ çš„åŸå› ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€ä¸‹pubæºï¼Œç”¨ä»¥ä¸‹è½½ç›¸å…³çš„ä¾èµ–æ–‡ä»¶ã€‚å…¶ä¸­ PUB_HOSTED_URL å’Œ FLUTTER_STORAGE_BASE_URL æ˜¯googleä¸ºå›½å†…å¼€å‘è€…æ­å»ºçš„ä¸´æ—¶é•œåƒã€‚ 12export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn æ‰€ä»¥ï¼Œéœ€è¦æ·»åŠ çš„å°±æ˜¯ä¸Šé¢çš„ä¸‰æ¡å‘½ä»¤ï¼š 123export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cnexport PATH=PATH_TO_FLUTTER_GIT_DIRECTORY/flutter/bin:$PATH å…¶ä¸­ PATH_TO_FLUTTER_GIT_DIRECTORY ä¸ºä½  flutter sdk çš„è·¯å¾„ã€‚å¦‚æˆ‘è¿™é‡Œå°±æ˜¯æ”¹æˆï¼š 1export PATH=$HOME/sdk/flutter/bin:$PATH åˆ·æ–°bash: 1$ source $HOME/.bash_profile å¦‚æœä½¿ç”¨çš„æ˜¯ zsh ï¼Œåˆ™æ‰§è¡Œï¼š 1$ source $HOME/.zshrc æŸ¥çœ‹ï¼š 1echo $PATH éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸï¼š 1flutter -h è¿™ä¸ªæ—¶å€™åº”è¯¥èƒ½å±•ç¤ºflutterçš„å‘½ä»¤å¸®åŠ©ï¼š æ£€æŸ¥flutterç¯å¢ƒåœ¨å®‰è£…ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼ŒFlutterå®˜æ–¹æä¾›äº†ä¸€ä¸ªä¾èµ–æ£€æŸ¥çš„å‘½ä»¤ flutter doctor ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°å“ªäº›ä¾èµ–é¡¹æˆ–ç¨‹åºæ²¡æœ‰å®‰è£…æˆåŠŸã€‚ 1$ flutter doctor å¦å¤–ï¼Œè¯¥å‘½ä»¤çš„ -v é€‰é¡¹åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿéå¸¸æœ‰å¸®åŠ©ï¼Œæ‰§è¡Œ flutter doctor -v æŸ¥çœ‹ã€‚ ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶é—´ä¼šæœ‰ç‚¹é•¿(æ‰€ä»¥ã€‚ã€‚ã€‚å¦‚æœçœ‹åˆ°æ²¡ååº”çš„è¯åƒä¸‡åˆ«æ…Œï¼Œç­‰ç­‰å°±å¥½äº†)ï¼Œå®ƒä¼šå»ä¸‹è½½ç›¸å…³çš„ä¾èµ–é¡¹å¹¶è‡ªè¡Œç¼–è¯‘ã€‚æ‰§è¡Œç»“æœï¼š 12345678910111213141516171819202122232425262728293031âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[!] Android toolchain - develop for Android devices âœ— No valid Android SDK platforms found in /usr/local/Caskroom/android-platform-tools/latest/platforms. Directory was empty.[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— Xcode requires additional components to be installed in order to run. Launch Xcode and install additional required components when prompted. âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[!] Android Studio (not installed)[!] VS Code (version 1.31.1)[!] Connected device ! No devices available! Doctor found issues in 5 categories. é€šè¿‡ä¸Šé¢çš„æç¤ºä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ° Android toolchain æˆ– iOS toolchain æ˜¯å¿…é¡»å®‰è£…å…¶ä¸€çš„ã€‚è¿™é‡Œæˆ‘æ˜¯éƒ½è¦å®‰è£…ï¼Œæ¯•ç«Ÿä¸¤ä¸ªå¹³å°éƒ½æƒ³è¦ä½“éªŒä¸€ä¸‹çš„ã€‚ å¼€å‘å·¥å…·å‘¢é™¤äº†ä¹‹å‰ å®˜æ–¹ çš„ Android Studio å’Œ XCode ä¹‹å‰ï¼ŒFlutteréå¸¸æ¨èé€šè¿‡è½»é‡çº§çš„ VS Code æ¥è¿›è¡Œå¼€å‘ã€‚ é…ç½®VS Codeå®‰è£…VS Code ,å®‰è£…1.20.1æˆ–æ›´é«˜ç‰ˆæœ¬. å®‰è£…Flutteræ’ä»¶ å¯åŠ¨ VS Code è°ƒç”¨ View &gt; Command Paletteâ€¦ è¾“å…¥ install, ç„¶åé€‰æ‹© Extensions: Install Extension action åœ¨æœç´¢æ¡†è¾“å…¥ flutter , åœ¨æœç´¢ç»“æœåˆ—è¡¨ä¸­é€‰æ‹© Flutter, ç„¶åç‚¹å‡» Install(ä¼šè‡ªåŠ¨é™„å¸¦å®‰è£…å¥½ Dart æ’ä»¶) é€‰æ‹© OK é‡æ–°å¯åŠ¨ VS Code é€šè¿‡Flutter DoctoréªŒè¯æ‚¨çš„è®¾ç½® è°ƒç”¨ View &gt; Command Paletteâ€¦ è¾“å…¥ doctor, ç„¶åé€‰æ‹© Flutter: Run Flutter Doctor é€‰é¡¹ æŸ¥çœ‹ â€œOUTPUTâ€ çª—å£ä¸­çš„è¾“å‡ºæ˜¯å¦æœ‰é—®é¢˜ è¿è¡Œ flutter doctor æŸ¥çœ‹ç»“æœï¼š 12345678910111213141516171819202122232425262728âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[!] Android toolchain - develop for Android devices âœ— No valid Android SDK platforms found in /usr/local/Caskroom/android-platform-tools/latest/platforms. Directory was empty.[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[!] Android Studio (not installed)[âœ“] VS Code (version 1.31.1)[âœ“] Connected device (1 available)! Doctor found issues in 3 categories. å¯ä»¥çœ‹åˆ° [âœ“] VS Code (version 1.31.1) ä¸€é¡¹å·²ç»æ‰“é’©äº†ã€‚ èµ·æ­¥: é…ç½®ç¼–è¾‘å™¨ - Flutterä¸­æ–‡ç½‘ åˆ›å»ºFlutteré¡¹ç›®é€šè¿‡ VS Code åˆ›å»ºFlutteré¡¹ç›®éå¸¸ç®€å•ã€‚ç›´æ¥è°ƒå‡ºVS Codeçš„å‘½ä»¤æ¨¡å¼ Cmd(Control) + Shift + P æˆ–è€…é€‰æ‹©èœå• View &gt; Command Paletteâ€¦ è¾“å…¥ flutter new é€‰æ‹© Flutter: New Project é€‰é¡¹ï¼Œå›è½¦ï¼Œè¾“å…¥é¡¹ç›®ç›®å½•åç§°ï¼Œä¼šè®©ä½ é€‰æ‹©é¡¹ç›®ä¿å­˜ç›®å½•ï¼Œç„¶åç­‰å¾…è‡ªåŠ¨åˆå§‹åŒ–é¡¹ç›®ã€‚ Androidç¯å¢ƒé…ç½®Android toolchain ä¸­è¦æ±‚å¿…é¡»å®‰è£…å¥½ Android SDK ï¼Œè€Œ Android SDK çš„å®‰è£…æ–¹æ³•å¸¸è§çš„æœ‰ä¸¤ç§ï¼š é€šè¿‡å®‰è£… Android Studio ä¼šè‡ªåŠ¨ç»™å®‰è£…å¥½ Android SDK ,è¿™ç§æ–¹æ³•æ“ä½œèµ·æ¥æ¯”è¾ƒç®€å•ï¼ŒåŸºæœ¬ä¸Š Android Studio éƒ½å¸®ä½ é…ç½®å¥½äº†ï¼› ç›´æ¥ä¸‹è½½ Android SDK å®‰è£…åŒ…ï¼Œä½†éœ€è¦è‡ªå·±å»æ‰‹åŠ¨é…ç½®ï¼Œè€Œè¯¥é…ç½®è¿‡ç¨‹ç¨æ˜¾å¤æ‚ï¼› è™½ç„¶å¼€å‘å·¥å…·ä¸Šé¢å·²ç»é…ç½®äº† VS Codeä¹Ÿå°±æ²¡å¿…è¦å†å®‰è£… Android Studio äº†ï¼Œä¸è¿‡ä¸ºäº†æ–¹ä¾¿å¿«æ·ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼æ¥å®‰è£…ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šæœ€å¥½è‡ªå¤‡ æ¢¯å­ ï¼Œæœ‰äº›Androidä¾èµ–åŒ…ä¸‹è½½çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç”±äºç½‘ç»œåŸå› éœ€è¦å¤šæ¬¡é‡è¯•ã€‚ å®‰è£… Android Studio åŠé…ç½®æ‰“å¼€å®˜ç½‘ ï¼Œä¼šç›´æ¥æ ¹æ®å½“å‰ç³»ç»Ÿæ˜¾ç¤ºæ¨èä¸‹è½½ç‰ˆæœ¬ï¼š ç›´æ¥ç‚¹å¼€å®‰è£…å³å¯ã€‚ç»“æœå¼¹å‡ºäº†ä¸€ä¸ªé”™è¯¯é¡µé¢ï¼š å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯ï¼šåœ¨ç¬¬ä¸€æ¬¡å®‰è£…ASï¼Œå¯åŠ¨åï¼Œæ£€æµ‹åˆ°ç”µè„‘æ²¡æœ‰å®‰è£… Android SDKã€‚ ç›¸åº”çš„è§£å†³æ–¹æ³•æ˜¯ç›´æ¥ç‚¹å‡» Cancel é€‰é¡¹ï¼Œåœ¨åç»­çš„ç•Œé¢ä¸­å†å®‰è£…SDKã€‚ ç‚¹å‡» Next åï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ Custom ï¼ˆè‡ªå®šä¹‰ï¼‰é€‰é¡¹ã€‚ å¯ä»¥çœ‹åˆ° Android SDK æ˜¯é»˜è®¤å‹¾é€‰çš„ã€‚å¦å¤–ä¸¤é¡¹æˆ‘è¿™é‡Œå…¨éƒ¨å‹¾é€‰ä¸Šäº†ã€‚è¿˜å¯ä»¥åœ¨è¿™é‡Œé€‰æ‹©è‡ªå®šä¹‰å®‰è£…ç›®å½•ã€‚ ä¸‹ä¸€é¡µæ˜¯Androidæ¨¡æ‹Ÿå™¨çš„å†…å­˜è®¾ç½®ï¼š SDK Path é»˜è®¤ä¸º /Users/xyz/Library/Android/sdk ã€‚ ç„¶åå°±æ˜¯ç­‰å¾…ä¸‹è½½å®‰è£…çš„è¿‡ç¨‹ï¼š ç”±äºæŸäº›èµ„æºåŒ…æ˜¯è®¿é—®çš„ google.com ç½‘å€ï¼Œå¦‚æœæ²¡æœ‰ æ¢¯å­ ï¼Œæ˜¯éœ€è¦ç­‰å¾…å¾ˆä¹…ã€‚ã€‚ã€‚å¾ˆä¹…ã€‚ã€‚ã€‚çš„ã€‚ ç­‰å¾…å®‰è£…å®Œæˆåï¼Œå†æ¬¡æŸ¥çœ‹ï¼š 123456789101112131415161718192021222324252627282930âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[!] Android toolchain - develop for Android devices (Android SDK 28.0.3) âœ— Android licenses not accepted. To resolve this, run: flutter doctor --android-licenses[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 3.3) âœ— Flutter plugin not installed; this adds Flutter specific functionality. âœ— Dart plugin not installed; this adds Dart specific functionality.[âœ“] VS Code (version 1.31.1)[!] Connected device ! No devices available! Doctor found issues in 3 categories. è§£å†³ Android licenses é—®é¢˜çœ‹ä¸Šé¢çš„æç¤ºï¼Œè¿™é‡Œä¸å¾—ä¸å¤¸èµä¸€ä¸‹Flutterå·¥å…·çš„ğŸ‚ğŸºäº†ã€‚æœ‰ä»€ä¹ˆé—®é¢˜ç›´æ¥åœ¨ä¸‹é¢æ˜¾ç¤ºå¹¶ç»™å‡ºè§£å†³æ–¹æ³•ï¼Œä¸ä¼šè®©ä¸€äº›å°ç™½å†éœ€è¦å»ç½‘ä¸Šæœç´¢äº†ã€‚ çœ‹ä¸Šé¢çš„é”™è¯¯æç¤ºï¼š 12[!] Android toolchain - develop for Android devices (Android SDK 28.0.3) âœ— Android licenses not accepted. To resolve this, run: flutter doctor --android-licenses ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š 123456âœ flutter doctor --android-licensesWarning: File /Users/xyz/.android/repositories.cfg could not be loaded..6 of 6 SDK package licenses not accepted. 100% Computing updates...Review licenses that have not been accepted (y/N)?...... æŒ‰ç…§æç¤ºï¼Œä¸€ç›´è¾“å…¥ y å³å¯ã€‚ç›´åˆ°çœ‹åˆ°ï¼š 1All SDK package licenses accepted å°±è¯´æ˜é…ç½®æˆåŠŸäº†ã€‚å†æ¬¡æŸ¥çœ‹ï¼š 1234567891011121314151617181920212223242526272829âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[âœ“] Android toolchain - develop for Android devices (Android SDK 28.0.3)[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 3.3) âœ— Flutter plugin not installed; this adds Flutter specific functionality. âœ— Dart plugin not installed; this adds Dart specific functionality.[âœ“] VS Code (version 1.31.1)[!] Connected device ! No devices available! Doctor found issues in 2 categories. å‘ç° [âœ“] Android toolchain é…ç½®æˆåŠŸäº†ã€‚ å®‰è£…Flutteræ’ä»¶çœ‹ä¸Šé¢çš„é”™è¯¯æç¤ºï¼š 123[âœ“] Android Studio (version 3.3) âœ— Flutter plugin not installed; this adds Flutter specific functionality. âœ— Dart plugin not installed; this adds Dart specific functionality. çœ‹æç¤ºï¼Œéœ€è¦åœ¨ Android Studio ä¸­å®‰è£…ä¸¤ä¸ªå¿…è¦çš„æ’ä»¶ï¼šFlutter plugin å’Œ Dart plugin æ‰“å¼€ Android Studioï¼Œå¯ä»¥ä¸ç”¨æ–°å»ºé¡¹ç›®ï¼Œç›´æ¥é€‰æ‹©èœå•æ ä¸­çš„ Android Studio â€“ Preferences â€“ é€‰æ‹©æˆ–è€…æœç´¢ Plugins èœå• â€“ ç„¶åæœç´¢ Flutter æ’ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¼šè‡ªåŠ¨æç¤ºå®‰è£…ä¾èµ–çš„ Dart æ’ä»¶ï¼š ä¹‹åï¼Œéœ€è¦é‡å¯ã€‚ å†æ¬¡æŸ¥çœ‹ï¼š 123456789101112131415161718192021222324252627âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[âœ“] Android toolchain - develop for Android devices (Android SDK 28.0.3)[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 3.3)[âœ“] VS Code (version 1.31.1)[!] Connected device ! No devices available! Doctor found issues in 2 categories. unable to access android sdk add-on list - è–›ç‘„çš„åšå®¢ - CSDNåšå®¢ åˆ›å»ºFlutteré¡¹ç›®ä½¿ç”¨ Android Studio åˆ›å»º Flutter é¡¹ç›®ä¹Ÿéå¸¸ä¾¿æ·ã€‚ç›´æ¥é€‰æ‹©å¯åŠ¨é¡µä¸­çš„ Start a new Flutter project èœå•ï¼Œç„¶åé€‰æ‹© Flutter Application â€“ Next â€“ è¾“å…¥ Project name åŠä¿å­˜ç›®å½•åï¼Œå³å¯åˆå§‹åŒ–ä¸€ä¸ª Flutter é¡¹ç›®ã€‚ è¿æ¥AndroidçœŸæœºè¿è¡Œä¸Šé¢ Android çš„ç¯å¢ƒå·²ç»é…ç½®å¥½äº†ï¼Œæˆ‘å°±æœ‰äº›è¿«ä¸åŠå¾…çš„æƒ³è¦åœ¨æ‰‹æœºä¸Šè¿è¡Œäº†ã€‚ è·‘èµ·æ¥è¿æ¥ä¸Šå®‰å“æ‰‹æœºï¼Œå¼€å§‹è¿è¡Œ flutter run å‘½ä»¤ï¼š 1234567âœ flutter run No connected devices.Run &apos;flutter emulators&apos; to list and start any available device emulators.If you expected your device to be detected, please run &quot;flutter doctor&quot; to diagnosepotential issues, or visit https://flutter.io/setup/ for troubleshooting tips. ç»“æœå´æç¤º No connected devices ã€‚æ ¹æ®æç¤ºï¼Œæ‰§è¡Œï¼š 123456789101112âœ flutter emulators2 available emulators:Nexus_5X_API_28_x86 â€¢ Nexus 5X â€¢ Google â€¢ Nexus 5X API 28 x86apple_ios_simulator â€¢ iOS Simulator â€¢ AppleTo run an emulator, run &apos;flutter emulators --launch &lt;emulator id&gt;&apos;.To create a new emulator, run &apos;flutter emulators --create [--name xyz]&apos;.You can find more information on managing emulators at the links below: https://developer.android.com/studio/run/managing-avds https://developer.android.com/studio/command-line/avdmanager æŒ‰ç…§æç¤ºï¼Œæ‰§è¡Œ flutter emulators --launch &lt;emulator id&gt; å‘½ä»¤: 123456âœ flutter run -d Nexus_5XNo devices found with name or id matching &apos;Nexus_5X&apos;âœ flutter run -d Nexus_5X_API_28_x86No devices found with name or id matching &apos;Nexus_5X_API_28_x86&apos; ç»“æœä»ç„¶æ˜¯ æ‰¾ä¸åˆ°è®¾å¤‡ã€‚ dart - Flutter - Command line - Emulator- Device not found - Stack Overflow åˆ°è¿™é‡Œçš„ç»“æœå°±æ˜¯ï¼š å®‰å“æ‰‹æœºå‘ç°ä¸äº†è®¾å¤‡ã€‚ Androidæ¨¡æ‹Ÿå™¨ä¸€ç›´è¿æ¥å¤±è´¥ï¼Œå³ä½¿è¿æ¥ä¸Šäº†ï¼Œåœ¨å®‰è£…appçš„æ—¶å€™ä¹Ÿä¼šæç¤º no devices çš„ä¿¡æ¯ã€‚å¥½ä¸å®¹æ˜“å®‰è£…æˆåŠŸåï¼Œå‘ç°ç½‘ä¸Šæåˆ°çš„ hot reload çš„åŠŸèƒ½å´ç”¨ä¸äº†ã€‚Android Studio ä¸Šçš„çƒ­åŠ è½½ âš¡ï¸ æŒ‰é’®ä¹Ÿæ˜¯ç°è‰²çš„ã€‚ iosæ¨¡æ‹Ÿå™¨å®‰è£…å¯åŠ¨æ­£å¸¸ï¼Œè€Œä¸”çƒ­æ›´æ–°çš„åŠŸèƒ½ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ã€‚ åæ¥å†æ¬¡æŸ¥çœ‹äº†å®˜æ–¹çš„å®‰è£…æ–‡æ¡£ï¼Œæç„¶å¤§æ‚Ÿä¹‹é—´ï¼Œæ‰å‘ç°æˆ‘å¿˜è®°æ“ä½œäº†ä¸€æ­¥ï¼šæˆ‘åªå®‰è£…äº† Android Studio ï¼Œä½†å¹¶æ²¡æœ‰é…ç½® ANDROID_HOME ç¯å¢ƒå˜é‡ï¼Œè€Œæ˜¯ç›´æ¥å°±å¼€å§‹å®‰è£…Appäº†ã€‚ è§å®˜æ–¹æ–‡æ¡£ï¼šSet up your Android device - Flutter é…ç½® ANDROID_HOME ç¯å¢ƒå˜é‡æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡ï¼š æ‰“å¼€ AS ï¼Œæ‰¾åˆ° Preferences â€“ Appearance &amp; Behavior â€“ System Settings â€“ Android SDK â€“ åœ¨å³ä¾§æ‰¾åˆ° Android SDK Location â€“ å¤åˆ¶ åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ echo $ANDROID_HOMEï¼Œå‘ç°å½“å‰å€¼ç¡®å®ä¸ºç©ºã€‚ ç„¶ååœ¨ $HOME/.bash_profile ä¸­åŠ å…¥ä¸‹åˆ—ä»£ç : 123export ANDROID_HOME=$HOME/Library/Android/sdkexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/toolsexport PATH=$&#123;PATH&#125;:$&#123;ANDROID_HOME&#125;/platform-tools é‡å¯å‘½ä»¤è¡Œçª—å£æˆ–è€…æ‰§è¡Œ source $HOME/.bash_profile or source $HOME/.zshrc åˆ·æ–°é…ç½®ã€‚ é…ç½®Androidæ¨¡æ‹Ÿå™¨æ‰“å¼€ AS, Android Studio &gt; Tools &gt; Android &gt; AVD Manager and select Create Virtual Device . ï¼ˆæ›´å¤šçš„å»å‚è€ƒä¸€ä¸‹æ–‡æ¡£å»å§ï¼‰&gt; Set up the Android emulator - Flutter åæ¥å‘ç°ï¼Œå¦‚æœæ²¡æœ‰é…ç½®ï¼Œæ˜¯ä¼šå¯åŠ¨ä¸€ä¸ªé»˜è®¤çš„æ¨¡æ‹Ÿå™¨ã€‚ åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼Œç”±äºæˆ‘å¤ªç€æ€¥ï¼Œç›´æ¥å°±è¿è¡Œç¨‹åºäº†ï¼Œæ‰€ä»¥é»˜è®¤ç»™æˆ‘åˆ›å»ºäº†ä¸€ä¸ª Nexus 5X çš„æ¨¡æ‹Ÿå™¨ã€‚ ADB server didnâ€™t ACKå°†æ‰‹æœºé€šè¿‡usbè¿æ¥ï¼Œé€šè¿‡ adb devices å‘½ä»¤æ¥æŸ¥çœ‹è®¾å¤‡è¿æ¥çŠ¶æ€: 12345âœ adb devicesList of devices attachedadb server version (40) doesn&apos;t match this client (39); killing...ADB server didn&apos;t ACK... ç»“æœå´æŠ¥äº† ADB server didn&#39;t ACK çš„é”™è¯¯ã€‚ ç›¸åº”çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š æŸ¥çœ‹ç«¯å£è¢«å ç”¨æƒ…å†µï¼šåœ¨ç»ˆç«¯è¾“å…¥ lsof -i tcp:5037 æŸ¥çœ‹å ç”¨ 5037 ç«¯å£çš„pidå· 1234âœ lsof -i tcp:5037COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEadb 38752 xyz 3u IPv4 0xec93d79cdb5a9d91 0t0 TCP localhost:49653-&gt;localhost:5037 (CLOSED)adb 38752 xyz 11u IPv4 0xec93x80a5492d411 0t0 TCP localhost:5037 (LISTEN) 2.å»ä»»åŠ¡ç®¡ç†å™¨ï¼ˆåº”ç”¨ç¨‹åº-å…¶ä»–-æ´»åŠ¨ç›‘è§†å™¨ï¼‰æ‰¾åˆ°å¯¹åº”pidå·(è¿™é‡Œæ˜¯38752)çš„è¿›ç¨‹ï¼Œå¹¶å…³é—­ å†æ¬¡æŸ¥çœ‹ï¼š 12345âœ adb devicesList of devices attachedadb server version (40) doesn&apos;t match this client (39); killing...* daemon started successfullyFA6AB0311758 device ç°åœ¨ï¼Œè®¾å¤‡å·²ç»æ­£å¸¸è¿æ¥äº†ã€‚ ã€MACç‰ˆã€‘Android ADB server didnâ€™t ACK failed to start daemon è§£å†³åŠæ³• - AZZçš„åšå®¢ - CSDNåšå®¢ Android license status unknown12345678âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[!] Android toolchain - develop for Android devices (Android SDK 28.0.3) âœ— Android license status unknown.[âœ“] Android Studio (version 3.3)ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ è§£å†³æ–¹æ³•æ˜¯ï¼šå†æ‰§è¡Œä¸€æ¬¡ flutter doctor --android-licenses å‘½ä»¤ï¼Œåœ¨æç¤ºåè¾“å…¥ y ç¡®è®¤ï¼Œç„¶åå†é€šè¿‡ flutter doctor æŸ¥çœ‹ã€‚ âœ— Android license status unknown. Â· Issue #16025 Â· flutter/flutter Android license status unknown - Code is Poetry - å¼€æºä¸­å›½ æŸäº›å®‰å“æ‰‹æœºéœ€è¦è§£é”å¯¹äºæŸäº›å®‰å“è®¾å¤‡é»˜è®¤æƒ…å†µä¸‹éƒ½æ²¡æœ‰å¯ç”¨å¼€å‘è€…è°ƒè¯•çš„åŠŸèƒ½ï¼Œè¿™æ¬¡æˆ‘æ¢ç”¨ä¸€å°å°ç±³æ‰‹æœºæ¥è¿›è¡ŒçœŸæœºè°ƒè¯•ã€‚ å½“æœ‰å¤šä¸ªè®¾å¤‡è¿æ¥æ—¶ï¼Œå¯ä»¥é€šè¿‡ -d &lt;deviceId&gt; è¿æ¥æŒ‡å®šè®¾å¤‡ï¼Œæˆ–è€…ä½¿ç”¨ -d all è¿æ¥æ‰€æœ‰è®¾å¤‡æ¥è°ƒè¯•ã€‚å…¶ä¸­ &lt;deviceId&gt; æ”¯æŒæ¨¡ç³ŠåŒ¹é…è®¾å¤‡åç§°ï¼š 123456789101112131415161718192021âœ flutter runMore than one device connected; please specify a device with the &apos;-d &lt;deviceId&gt;&apos; flag, or use &apos;-d all&apos; to acton all devices.Redmi Note 4X â€¢ a1529b418604 â€¢ android-arm64 â€¢ Android 7.0 (API 24)Android SDK built for x86 â€¢ emulator-5554 â€¢ android-x86 â€¢ Android 9 (API 28) (emulator)âœ flutter run -d RedmiLaunching lib/main.dart on Redmi Note 4X in debug mode...Initializing gradle... 1.0sResolving dependencies... 7.7sGradle task &apos;assembleDebug&apos;... Gradle task &apos;assembleDebug&apos;... Done 10.4sBuilt build/app/outputs/apk/debug/app-debug.apk.Installing build/app/outputs/apk/app.apk... 8.1sError: ADB exited with exit code 1adb: failed to install /Users/xyz/Learn/flutter/hello_world/build/app/outputs/apk/app.apk: Failure[INSTALL_FAILED_USER_RESTRICTED: Install canceled by user]Error launching application on Redmi Note 4X. å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘è¿™é‡Œè®¾å¤‡é€‰æ‹©æˆåŠŸäº†ï¼Œä½†å½“è¿è¡Œåˆ° Install é˜¶æ®µæŠ¥é”™äº†ã€‚ è¿™é‡Œï¼Œéœ€è¦æ›´æ”¹ä¸€ä¸‹æ‰‹æœºè®¾ç½®ï¼Œä»¥å°ç±³æ‰‹æœºä¸ºä¾‹ï¼š æ‰“å¼€æ‰‹æœºçš„å¼€å‘è€…æ¨¡å¼: è®¾ç½® â€“ æˆ‘çš„è®¾å¤‡ â€“ å…¨éƒ¨å‚æ•° â€“ MIUIç‰ˆæœ¬ â€“ è¿ç»­ç‚¹å‡»7ä¸‹å³å¯ å†æ¬¡ç‚¹å‡» è®¾ç½® â€“ æ›´å¤šè®¾ç½® â€“ å¼€å‘è€…é€‰é¡¹ â€“ å°† å¼€å¯å¼€å‘è€…é€‰é¡¹ å¯ç”¨ ã€ USBè°ƒè¯• å¯ç”¨ ã€ USBå®‰è£… å¯ç”¨ å†æ¬¡æ‰§è¡Œ flutter run å‘½ä»¤è¿›è¡Œå®‰è£…ï¼Œæ­¤æ—¶æ‰‹æœºä¸Šä¼šå¼¹å‡º USBå®‰è£…æç¤º çš„å‘½ä»¤ï¼Œé€‰æ‹© å…è®¸ å³å¯ 12345678910111213âœ flutter runLaunching lib/main.dart on Redmi Note 4X in debug mode...Initializing gradle... 0.8sResolving dependencies... 1.5sGradle task &apos;assembleDebug&apos;... Gradle task &apos;assembleDebug&apos;... Done 1.5sBuilt build/app/outputs/apk/debug/app-debug.apk.Installing build/app/outputs/apk/app.apk... 14.6sSyncing files to device Redmi Note 4X... 1.6sğŸ”¥ To hot reload changes while running, press &quot;r&quot;. To hot restart (and rebuild state), press &quot;R&quot;.An Observatory debugger and profiler on Redmi Note 4X is available at: http://127.0.0.1:61766/For a more detailed help message, press &quot;h&quot;. To detach, press &quot;d&quot;; to quit, press &quot;q&quot;. INSTALL_FAILED_USER_RESTRICTED : android studio using redmi 4 device æœ€ç»ˆè¿è¡Œå†æ¬¡æ£€æŸ¥çŠ¶æ€ï¼š 1234567891011121314151617181920212223242526âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[âœ“] Android toolchain - develop for Android devices (Android SDK 28.0.3)[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 3.3)[âœ“] VS Code (version 1.31.1)[âœ“] Connected device (1 available)! Doctor found issues in 1 category. æ‰“å¼€ VS Code, åœ¨ç»ˆç«¯ä¸­è¿è¡Œ flutter run å‘½ä»¤ï¼š 12345678910111213âœ flutter runLaunching lib/main.dart on Pixel in debug mode...Initializing gradle... 1.1sResolving dependencies... 8.2sGradle task &apos;assembleDebug&apos;... Gradle task &apos;assembleDebug&apos;... Done 12.4sBuilt build/app/outputs/apk/debug/app-debug.apk.Installing build/app/outputs/apk/app.apk... 3.4sSyncing files to device Pixel... 1.5sğŸ”¥ To hot reload changes while running, press &quot;r&quot;. To hot restart (and rebuild state), press &quot;R&quot;.An Observatory debugger and profiler on Pixel is available at: http://127.0.0.1:49724/For a more detailed help message, press &quot;h&quot;. To detach, press &quot;d&quot;; to quit, press &quot;q&quot;. å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æ‰æ˜¯æ­£å¸¸è¿è¡Œçš„çŠ¶æ€ã€‚å·²ç»æˆåŠŸçš„è¿æ¥ä¸Šäº†æˆ‘çš„ Pixel æ‰‹æœºï¼ŒåŒæ—¶åœ¨æ‰‹æœºç«¯ï¼Œå·²ç»æ‰“å¼€äº†ç¤ºä¾‹appçš„ç•Œé¢ã€‚è¾“å…¥ r æ¥å®ç°çƒ­æ›´æ–°ã€‚ IOSç¯å¢ƒé…ç½®æŸ¥çœ‹å½“å‰çš„çŠ¶æ€ï¼š 1234567891011121314151617181920212223242526âœ flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[âœ“] Android toolchain - develop for Android devices (Android SDK 28.0.3)[!] iOS toolchain - develop for iOS devices (Xcode 10.1) âœ— libimobiledevice and ideviceinstaller are not installed. To install with Brew, run: brew update brew install --HEAD usbmuxd brew link usbmuxd brew install --HEAD libimobiledevice brew install ideviceinstaller âœ— ios-deploy not installed. To install with Brew: brew install ios-deploy âœ— CocoaPods not installed. CocoaPods is used to retrieve the iOS platform side&apos;s plugin code that responds to your plugin usage on the Dart side. Without resolving iOS dependencies with CocoaPods, plugins will not work on iOS. For more info, see https://flutter.io/platform-plugins To install: brew install cocoapods pod setup[âœ“] Android Studio (version 3.3)[âœ“] VS Code (version 1.31.1)[âœ“] Connected device (1 available)! Doctor found issues in 1 category. ä¾ç…§ä¸Šé¢çš„æç¤ºä¿¡æ¯ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œå®‰è£… iOS toolchain æ‰€æœ‰ç›¸å…³ä¾èµ–ã€‚ è¿æ¥IPhoneçœŸæœºè¿è¡ŒNo valid code signing certificates were foundæ²¡æƒ³åˆ°ç¬¬ä¸€æ¬¡è¿è¡Œå´æŠ¥é”™äº†ï¼š 12345678910111213141516171819202122232425262728âœ flutter runLaunching lib/main.dart on xyzçš„iPhone in debug mode...â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•No valid code signing certificates were foundYou can connect to your Apple Developer account by signing in with your Apple IDin Xcode and create an iOS Development Certificate as well as a Provisioning Profile for your project by: 1- Open the Flutter project&apos;s Xcode target with open ios/Runner.xcworkspace 2- Select the &apos;Runner&apos; project in the navigator then the &apos;Runner&apos; target in the project settings 3- In the &apos;General&apos; tab, make sure a &apos;Development Team&apos; is selected. You may need to: - Log in with your Apple ID in Xcode first - Ensure you have a valid unique Bundle ID - Register your device with your Apple Developer Account - Let Xcode automatically provision a profile for your app 4- Build or run your project again 5- Trust your newly created Development Certificate on your iOS device via Settings &gt; General &gt; Device Management &gt; [your new certificate] &gt; TrustFor more information, please visit: https://developer.apple.com/library/content/documentation/IDEs/Conceptual/ AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.htmlOr run on an iOS simulator without code signingâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•No development certificates available to code sign app for device deployment æŒ‰ç…§ä¸Šé¢çš„æç¤ºï¼Œç”¨ Xcode æ‰“å¼€ç¤ºä¾‹é¡¹ç›®ä¸­çš„ ios/Runner.xcworkspace è¿™ä¸ªæ–‡ä»¶ï¼Œ é€‰æ‹©é¡¹ç›®èœå• Runner â€“ General é€‰é¡¹ ï¼Œå¯ä»¥çœ‹åˆ° Signing ä¸­çš„ Status æç¤ºé”™è¯¯ä¿¡æ¯ï¼š 12Signing for &quot;Runner&quot; requires a development team.Select a development team in the projct editor. ç‚¹å‡» Team é€‰é¡¹çš„ Add Account... æŒ‰é’®ï¼Œç™»å½• Apple ID ï¼Œæ²¡æœ‰åˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªã€‚å›åˆ° General ç•Œé¢ï¼Œé€‰æ‹© Team åç§°ã€‚ç­‰å¾…éªŒè¯ã€‚ No profiles for xxx were foundç°åœ¨åˆæç¤ºä¸‹é¢çš„é”™è¯¯ï¼š åœ¨ VSCodeä¸­æ‰§è¡Œ flutter run å‘½ä»¤ï¼š 123456789101112131415161718192021222324252627282930âœ flutter runLaunching lib/main.dart on xyzçš„iPhone in debug mode...Automatically signing iOS for device deployment using specified development team in Xcode project:9Y41Q9PF28Starting Xcode build... Xcode build done. 1.3sFailed to build iOS appError output from Xcode build:â†³ ** BUILD FAILED **Xcode&apos;s output:â†³ === BUILD TARGET Runner OF PROJECT Runner WITH CONFIGURATION Debug === Code Signing Error: No profiles for &apos;com.example.helloWorld&apos; were found: Xcode couldn&apos;t find any iOS App Development provisioning profiles matching &apos;com.example.helloWorld&apos;. Automatic signing is disabled and unable to generate a profile. To enable automatic signing, pass -allowProvisioningUpdates to xcodebuild. Code Signing Error: Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos; Code Signing Error: Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos; Code Signing Error: Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos;Could not build the precompiled application for the device.It appears that your application still contains the default signing identifier.Try replacing &apos;com.example&apos; with your signing id in Xcode: open ios/Runner.xcworkspaceError launching application on xyzçš„iPhone. åœ¨ XCodeä¸­ç¼–è¯‘ï¼Œæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š 1234567Failed to create provisioning profile. The app ID &quot;com.example.helloWorld&quot; cannot be registered to your development team. Change your bundle identifier to a unique string to try again.No profiles for &apos;com.example.helloWorld&apos; were found: Xcode couldn&apos;t find any iOS App Development provisioning profiles matching &apos;com.example.helloWorld&apos;.Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos;Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos;Code signing is required for product type &apos;Application&apos; in SDK &apos;iOS 12.1&apos; é€šè¿‡ä¸€ç•ªæŸ¥æ‰¾ï¼Œåœ¨ Stack Overflow ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼š å°† Bundle Identifier çš„å€¼æ”¹å˜ä¸€ä¸‹ï¼Œæ¯”å¦‚åœ¨ç»“å°¾éšæœºåŠ ä¸Šå‡ ä¸ªæ•°å­—ã€‚ Failed to create provisioning profile å†æ¬¡åœ¨ VS Code ä¸­è¿è¡Œï¼š æœŸé—´éœ€è¦è¾“å…¥å¯†ç ã€‚ 123456789101112131415161718âœ flutter run Launching lib/main.dart on xyzçš„iPhone in debug mode...Automatically signing iOS for device deployment using specified development team in Xcode project:9Y41Q9PF28Starting Xcode build... â”œâ”€Assembling Flutter resources... 1.3s â””â”€Compiling, linking and signing... 3.4s Xcode build done. 6.2sInstalling and launching... 4.6sâ¢¿2019-02-24 17:17:33.270 ios-deploy[15328:80609] [ !! ] Unable to locate DeviceSupport directory with suffix &apos;Symbols&apos;. This probably means you don&apos;t have Xcode installed, you will need to launch the app manually and logging output will not be shown! 6.8sCould not install build/ios/iphoneos/Runner.app on f1b5b10369882093413772c363995b5cda163c34.Try launching Xcode and selecting &quot;Product &gt; Run&quot; to fix the problem: open ios/Runner.xcworkspaceError launching application on xyzçš„iPhone. Device is lockedä½¿ç”¨ XCodeç¼–è¯‘ï¼Œæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š è¿™ä¸ªé—®é¢˜æ˜¯éœ€è¦åœ¨æ‰‹æœºç«¯å¼€å¯å…è®¸è°ƒè¯•ã€‚ ä¾æ¬¡ç‚¹å‡» é€šç”¨ â€“ è®¾å¤‡ç®¡ç† â€“ å¼€å‘è€…åº”ç”¨ â€“ ç‚¹å‡»å¼€å‘è€…è´¦å· â€“ ç‚¹å‡» ä¿¡ä»»åº”ç”¨ å†æ¬¡åœ¨ VS Code ä¸­è¿è¡Œï¼š 1234567891011121314151617âœ flutter run Launching lib/main.dart on xyzçš„iPhone in debug mode...Automatically signing iOS for device deployment using specified development team in Xcode project:9Y41Q9PF28Starting Xcode build... â”œâ”€Assembling Flutter resources... 1.4s â””â”€Compiling, linking and signing... 4.6s Xcode build done. 7.7sInstalling and launching... 6.1s12.0sSyncing files to device xyzçš„iPhone... 1.7sğŸ”¥ To hot reload changes while running, press &quot;r&quot;. To hot restart (and rebuild state), press &quot;R&quot;.An Observatory debugger and profiler on xyzçš„iPhone is available at: http://127.0.0.1:1024/For a more detailed help message, press &quot;h&quot;. To detach, press &quot;d&quot;; to quit, press &quot;q&quot;. è¿™æ¬¡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œäº†ï¼Œä¹Ÿæ”¯æŒçƒ­åŠ è½½è°ƒè¯•ã€‚ Flutterç‰ˆæœ¬æ›´æ–°å¯¹äºFlutterçš„ç‰ˆæœ¬æ›´æ–°ï¼Œçœ‹æœ€è¿‘çš„å½¢åŠ¿è¿­ä»£é¢‘ç‡è¶Šæ¥è¶Šå¿«ï¼Œè€Œæ›´æ–°æ“ä½œä¹Ÿå¾ˆç®€å•ï¼š 123456789101112131415161718âœ flutter doctor â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â•‘ A new version of Flutter is available! â•‘ â•‘ â•‘ â•‘ To update to the latest version, run &quot;flutter upgrade&quot;. â•‘ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Doctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.0.0, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN)[âœ“] Android toolchain - develop for Android devices (Android SDK 28.0.3)[âœ“] iOS toolchain - develop for iOS devices (Xcode 10.1)[âœ“] Android Studio (version 3.3)[âœ“] VS Code (version 1.31.1)[!] Connected device ! No devices available! Doctor found issues in 1 category. ç›´æ¥æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æç¤ºæ‰§è¡Œ flutter upgrade å³å¯ã€‚ è‡³æ­¤ï¼ŒAndroidå’ŒiOSçš„å¼€å‘ç¯å¢ƒé…ç½®åŸºæœ¬okäº†ã€‚]]></content>
      <categories>
        <category>Flutterä¹‹æ—…</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨ -- Flutterä»‹ç»]]></title>
    <url>%2F2019%2F03%2F08%2Fflutter-get-start%2F</url>
    <content type="text"><![CDATA[Flutteræ˜¯ä¸€ä¸ªç”±è°·æ­Œå¼€å‘çš„å¼€æºç§»åŠ¨åº”ç”¨è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºä¸ºAndroidå’ŒiOSå¼€å‘åº”ç”¨ï¼ŒåŒæ—¶ä¹Ÿå°†æ˜¯Google Fuchsiaä¸‹å¼€å‘åº”ç”¨çš„ä¸»è¦å·¥å…·ã€‚ ç³»åˆ—æ–‡ç« åˆ—è¡¨ æ‰“å¼€æ–°ä¸–ç•Œçš„å¤§é—¨ â€“ Flutterä»‹ç» | ITèŒƒå„¿ å…µé©¬æœªåŠ¨ï¼Œç²®è‰å…ˆè¡Œ â€“ Flutterå¼€å‘ç¯å¢ƒé…ç½® | ITèŒƒå„¿ ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ â€“ Flutterå¼€å‘æŠ€å·§ | ITèŒƒå„¿]]></content>
      <categories>
        <category>Flutterä¹‹æ—…</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³Golangä¸‹json.Marshalé»˜è®¤å¯¹htmlæ ‡ç­¾è½¬ä¹‰é—®é¢˜]]></title>
    <url>%2F2018%2F12%2F27%2Fgolang-json-marshal-for-html%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨ç”¨Golangä¸‹çš„jsonå¯¹å«æœ‰htmlæ ‡ç­¾çš„Objectåºåˆ—åŒ–çš„æ—¶å€™ï¼Œå‘ç°Golangä¼šé»˜è®¤å¯¹htmlæ ‡ç­¾åšè½¬ä¹‰å¤„ç†ã€‚æ¯”å¦‚æˆ‘çš„ä¸€æ®µhtmlä»£ç ï¼š 123456789101112131415161718&lt;div id=&quot;choose-results&quot; class=&quot;li&quot; style=&quot;display:none&quot;&gt;&lt;div class=&quot;dt&quot;&gt;å·²é€‰æ‹©&lt;/div&gt;&lt;div class=&quot;dd&quot;&gt;&lt;/div&lt;/div&gt; &lt;div id=&quot;choose-luodipei&quot; class=&quot;choose-luodipei li&quot; style=&quot;display&lt;div class=&quot;dt&quot;&gt;é€è£…æœåŠ¡&lt;/div&gt; &lt;div class=&quot;dd&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;div id=&quot;choose-suits&quot; class=&quot;li choose-suits&quot; style=&quot;display:none&quot;&gt; &lt;div class=&quot;dt&quot;&gt;å¥—&amp;#x3000;&amp;#x3000;è£…&lt;/div&gt; &lt;div class=&quot;dd clearfix&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;div id=&quot;choose-gift&quot; class=&quot;choose-gift li&quot; style=&quot;display: none;&quot;&gt; &lt;div class=&quot;dt&quot;&gt;æ­é…èµ å“&lt;/div&gt; &lt;div class=&quot;dd clearfix&quot;&gt; &lt;div class=&quot;gift J-gift&quot; clstag=&quot;shangpin|keycount|product|dapeizengpin&quot;&gt; &lt;i class=&quot;sprite-gift J-popup&quot;&gt;&lt;/i&gt;&lt;span class=&quot;gift-tips&quot;&gt;é€‰æ‹©æ­é…èµ å“(å…±&lt;em&gt;0&lt;/em&gt;ä¸ª)&lt;/span&gt; &lt;/div&gt; &lt;!--choosed--&gt; &lt;div class=&quot;J-gift-selected hide&quot;&gt; &lt;div class=&quot;gift choosed J-gift-choosed&quot;&gt;&lt;/div&gt; &lt;a href=&quot;#none&quot; class=&quot;gift-modify J-popup&quot; clstag=&quot;shangpin|keycount|product|zengpin-genggai&quot;&gt;æ›´æ”¹&lt;/a&gt; åœ¨ç»è¿‡ json.Marshal() å¤„ç†ä¹‹åå°±å˜æˆäº†ï¼š 1\u003cdiv id=\&quot;choose-results\&quot; class=\&quot;li\&quot; style=\&quot;display:none\&quot;\u003e\u003cdiv class=\&quot;dt\&quot;\u003eå·²é€‰æ‹©\u003c/div\u003e\u003cdiv class=\&quot;dd\&quot;\u003e\u003c/div\u003e\u003c/div\u003e\n \u003c/div\u003e\n\n \n \u003cdiv id=\&quot;choose-luodipei\&quot; class=\&quot;choose-luodipei li\&quot; style=\&quot;display:none\&quot;\u003e\n \u003cdiv class=\&quot;dt\&quot;\u003eé€è£…æœåŠ¡\u003c/div\u003e\n \u003cdiv class=\&quot;dd\&quot;\u003e\u003c/div\u003e\n \u003c/div\u003e\n \u003cdiv id=\&quot;choose-suits\&quot; class=\&quot;li choose-suits\&quot; style=\&quot;display:none\&quot;\u003e\n \u003cdiv class=\&quot;dt\&quot;\u003eå¥—\u0026#x3000;\u0026#x3000;è£…\u003c/div\u003e\n \u003cdiv class=\&quot;dd clearfix\&quot;\u003e\u003c/div\u003e\n \u003c/div\u003e\n \u003cdiv id=\&quot;choose-gift\&quot; class=\&quot;choose-gift li\&quot; style=\&quot;display: none;\&quot;\u003e\n \u003cdiv class=\&quot;dt\&quot;\u003eæ­é…èµ å“\u003c/div\u003e\n \u003cdiv class=\&quot;dd clearfix\&quot;\u003e\n \u003cdiv class=\&quot;gift J-gift\&quot; clstag=\&quot;shangpin|keycount|product|dapeizengpin\&quot;\u003e\n \u003ci class=\&quot;sprite-gift J-popup\&quot;\u003e\u003c/i\u003e\u003cspan class=\&quot;gift-tips\&quot;\u003eé€‰æ‹©æ­é…èµ å“(å…±\u003cem\u003e0\u003c/em\u003eä¸ª)\u003c/span\u003e\n \u003c/div\u003e\n \u003c!--choosed--\u003e\n \u003cdiv class=\&quot;J-gift-selected hide\&quot;\u003e\n \u003cdiv class=\&quot;gift choosed J-gift-choosed\&quot;\u003e\u003c/div\u003e\n \u003ca href=\&quot;#none\&quot; class=\&quot;gift-modify J-popup\&quot; clstag=\&quot;shangpin|keycount|product|zengpin-genggai\&quot;\u003eæ›´æ”¹\u003c/a\u003e\n é€šè¿‡ä¸Šç½‘æœç´¢ï¼Œå‘ç°Golangä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª SetEscapeHTML() æ–¹æ³•ï¼Œé»˜è®¤æƒ…å†µä¸‹è¯¥å€¼ä¸º true ï¼Œæˆ‘ä»¬åªè¦å°†å…¶è®¾ç½®ä¸º false å³å¯å®ç°ä¸å¯¹htmlæ ‡ç­¾è½¬ä¹‰ã€‚ æˆ‘çš„å°è£…æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718package utilsimport ( &quot;bytes&quot; &quot;encoding/json&quot;)// json.Marshalæ–¹æ³•ä¼˜åŒ–ï¼Œä¸å¯¹htmlåšè½¬ä¹‰å¤„ç†func MarshalHTML(v interface&#123;&#125;) ([]byte, error) &#123; var buf bytes.Buffer enc := json.NewEncoder(&amp;buf) enc.SetEscapeHTML(false) err := enc.Encode(v) if err != nil &#123; return nil, err &#125; return buf.Bytes(), nil&#125; go - How to stop json.Marshal from escaping &lt; and &gt;? - Stack Overflow]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºä»€ä¹ˆæˆ‘è¦æ”¾å¼ƒPythonè€Œè½¬æŠ•Golang]]></title>
    <url>%2F2018%2F12%2F21%2Fwhy-me-give-up-python-to-golang%2F</url>
    <content type="text"><![CDATA[æ‰å¿ƒäº†ï¼Œè€é“ï¼ï¼ï¼]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FiddleræŠ“åŒ…æ—¶HTTPSè¯ä¹¦æŠ¥é”™é—®é¢˜]]></title>
    <url>%2F2018%2F12%2F13%2Ffiddler-cannot-create-the-key-of-the-subject-joesoft-failed%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©é¡¹ç›®ä¸­é€šè¿‡FiddleræŠ“åŒ…çš„æ—¶å€™ï¼Œå‘ç°é‡åˆ° https çš„è¯·æ±‚æ— æ³•æŠ“å–åˆ°ï¼Œåœ¨Hostä¸€æ æ˜¾ç¤ºçš„æ˜¯ Tunnel to ã€‚æˆ‘çš„ç¬¬ä¸€æ„Ÿè§‰æ¨æµ‹æ˜¯Fiddlerçš„è¯ä¹¦å‡ºé—®é¢˜äº†ã€‚ å½“åœ¨Fiddlerä¸­é€‰æ‹© Tools â€“ Fiddler Options â€“ HTTPS ä¸­çš„é€‰é¡¹ç§»é™¤è¯ä¹¦çš„æ—¶å€™ï¼Œå´å‘ç°æŠ¥é”™äº†ã€‚ é”™è¯¯ä¿¡æ¯ä¸ºï¼š Can&#39;t create the key of the subject (&#39;JoeSoft&#39;) Failed å¦‚ä¸‹é¢çš„å½¢å¼ï¼š 123456789101112--------------------------- Unable to Generate Certificate --------------------------- Creation of the interception certificate failed. makecert.exe returned -1. Results from C:\Program Files\Fiddler2\MakeCert.exe -ss my -n &quot;CN=DO_NOT_TRUST_FiddlerRoot, O=DO_NOT_TRUST, OU=Created by http://www.fiddler2.com&quot; -eku 1.3.6.1.5.5.7.3.1 -r -cy authority -a sha1 Error: Can&apos;t create the key of the subject (&apos;JoeSoft&apos;) Failed ------------------------------------------- æœ‰æ—¶å€™ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸‹é¢çš„é”™è¯¯ï¼š è§£å†³æ–¹æ³•åœ¨ç½‘ä¸Šæœç´¢ï¼Œæ‰¾åˆ°ä¸€ç§ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œç»æµ‹è¯•åç¡®å®æœ‰æ•ˆã€‚ åœ¨Fiddlerçš„é€‰é¡¹ä¸­æ“ä½œç§»é™¤ç°æœ‰è¯ä¹¦â€“è§ä¸‹é¢çš„ ç§»é™¤è¯ä¹¦ æ–¹æ³•ã€‚ é€€å‡ºFiddlerã€‚ æ‰“å¼€windowsèµ„æºç®¡ç†å™¨ï¼Œè¾“å…¥ %userprofile%\AppData\Roaming\Microsoft\Crypto\RSA ï¼Œå›è½¦æ‰“å¼€ï¼› å°†è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹åˆ é™¤å³å¯ï¼ˆåˆ é™¤ä¹‹å‰ä»¥é˜²å‡ºé—®é¢˜å¯ä»¥å¤‡ä»½ä¸€ä¸‹ï¼‰ã€‚ ç„¶åï¼Œå°±å¯ä»¥ä¸ºFiddleré‡æ–°æ·»åŠ è¯ä¹¦äº†â€“è§ä¸‹é¢çš„ å®‰è£…è¯ä¹¦ æ–¹æ³•ã€‚ ç§»é™¤è¯ä¹¦æ‰“å¼€Fiddlerï¼Œé€‰æ‹© Tools â€“ Fiddler Options â€“ HTTPS é€‰é¡¹ï¼Œ å»æ‰å‹¾é€‰ Capture HTTPS CONNECTs çš„å¯¹å‹¾ï¼š æ­¤æ—¶ï¼Œçª—å£ä¸­å³ä¸‹è§’çš„ Remove Interception Certificates æŒ‰é’®å°±å¯ä»¥ç‚¹å‡»äº†ï¼š ç‚¹å‡»ç§»é™¤å³å¯ã€‚ å¦å¤–éœ€è¦è¯´æ˜ä¸€ç‚¹çš„æ˜¯ï¼Œå³ä½¿ä½ çš„è¯ä¹¦ç§»é™¤å¤±è´¥äº†ï¼Œä¹Ÿè¦æŠŠ Capture HTTPS CONNECTs ä¸€é¡¹å‰é¢çš„å¯¹å‹¾å–æ¶ˆæ‰ï¼Œè¿™å¾ˆå…³é”®ã€‚ å®‰è£…è¯ä¹¦æ‰“å¼€Fiddlerï¼Œé€‰æ‹© Tools â€“ Fiddler Options â€“ HTTPS é€‰é¡¹ï¼Œ å‹¾é€‰ Capture HTTPS CONNECTs Decrypt HTTPS traffic é€‰é¡¹ï¼Œä¼šå¼¹å‡ºå®‰è£…è¯ä¹¦æ–‡ä»¶çš„æç¤ºï¼Œç‚¹å‡»ç¡®å®šå³å¯å®‰è£…ã€‚ ç‚¹åˆ° ç¬¬2æ­¥ çš„æ—¶å€™å°±ä¼šå¼¹å‡ºå®‰è£…è¯ä¹¦çš„å¼¹çª—ï¼Œé€‰æ‹© Yesï¼š å®Œæˆåç‚¹å‡»æœ€ä¸‹é¢çš„ OK é€‰é¡¹ã€‚ ç„¶åå°†Fiddlerå…³é—­ï¼Œå†é‡æ–°æ‰“å¼€ã€‚ ä¹‹åï¼Œå°±å¯ä»¥å¯¹HTTPSçš„è¯·æ±‚è¿›è¡ŒæŠ“åŒ…äº†ã€‚ ç›¸å…³å‚è€ƒ Creation of the interception certificate failed. - Fiddler on PCs - Fiddler Forum]]></content>
      <tags>
        <tag>æ•°æ®æŠ“å–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangé€šè¿‡Channelå®ç°Nä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œå¹¶ç»Ÿä¸€è¿”å›ç»“æœ]]></title>
    <url>%2F2018%2F12%2F12%2Fgolang-task-concurrent-execution-through-channel%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨é¡¹ç›®ä¸­æƒ³è¦å®ç°ä¸€ä¸ªéœ€æ±‚ï¼š åœ¨ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å®ç°å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼Œå¹¶åŒæ—¶è¿”å›ç»“æœ å¤šä¸ªä»»åŠ¡çš„å…¥å‚ç›¸åŒæˆ–å…¥å‚ç±»å‹ç›¸åŒï¼Œè¿”å›ç»“æœç±»å‹ç›¸åŒ è®¾ç½®é»˜è®¤çš„è¶…æ—¶æ—¶é—´ï¼Œå½“æŸä¸€ä»»åŠ¡æ‰§è¡Œè¶…æ—¶ï¼Œåˆ™è¿”å›é»˜è®¤å€¼ ä¸¾ä¸€ä¸ªä¾‹å­å¦‚ï¼šæ ¹æ®ä¸€ä¸ªç”¨æˆ·çš„ userIdï¼Œä»»åŠ¡1 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼›ä»»åŠ¡2 æŸ¥è¯¢ç”¨æˆ·æ‰€æœ‰è®¢å•ä¿¡æ¯ï¼›ä»»åŠ¡3 æŸ¥è¯¢ç”¨æˆ·å…³æ³¨çš„å•†å“ä¿¡æ¯ï¼›ä¸‰ä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œï¼Œå¹¶å°†ä¸‰ä¸ªä»»åŠ¡çš„æ‰§è¡Œç»“æœç»Ÿä¸€è¿”å›ã€‚ ä¸€ä¸ªğŸŒ°å‚è€ƒè‡ªï¼šGolang ä¸­çš„å¹¶å‘é™åˆ¶ä¸è¶…æ—¶æ§åˆ¶ - ç®€ä¹¦ ä¸­çš„ â€œè¶…æ—¶æ§åˆ¶â€ ç¤ºä¾‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344func main()&#123; Test()&#125;func Run(task_id, sleeptime, timeout int, ch chan string) &#123; ch_run := make(chan string) go run(task_id, sleeptime, ch_run) select &#123; case re := &lt;-ch_run: ch &lt;- re case &lt;-time.After(time.Duration(timeout) * time.Second): re := fmt.Sprintf(&quot;task id %d, timeout &quot;, task_id) ch &lt;- re &#125;&#125;func run(task_id, sleeptime int, ch chan string) &#123; time.Sleep(time.Duration(sleeptime) * time.Second) ch &lt;- fmt.Sprintf(&quot;task id %d,sleep %d second&quot;, task_id, sleeptime) return&#125;func Test() &#123; input := []int&#123;3, 5, 8&#125; timeout := 8 // åˆ›å»ºNä¸ªä»»åŠ¡ç®¡é“ï¼Œç”¨æ¥æ¥æ”¶å„ä¸ªå¹¶å‘ä»»åŠ¡çš„å®Œæˆç»“æœ chs := make([]chan string, len(input)) sTime := time.Now() fmt.Println(&quot;start&quot;) for i, sleeptime := range input &#123; chs[i] = make(chan string) go Run(i, sleeptime, timeout, chs[i]) &#125; // è·å–ç»“æœ for _, ch := range chs &#123; fmt.Println(&lt;-ch) &#125; eTime := time.Now() fmt.Printf(&quot;finished,Process time %s. Number of task is %d \n&quot;, eTime.Sub(sTime), len(input))&#125; æˆ‘çš„æ”¹é€ æˆ‘å°†ä¸Šé¢çš„ç¤ºä¾‹æ”¹é€ æˆäº†ï¼šå°†è¦æ‰§è¡Œçš„æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·å°±å¯ä»¥éšæ„ä¼ å…¥ä¸åŒçš„ä»»åŠ¡äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687func main()&#123; Test()&#125;func Run(f func(s string, ch chan string), s string, timeout int, cOut chan string) &#123; ch_run := make(chan string) // go run(s, ch_run) go f(s, ch_run) select &#123; case re := &lt;-ch_run: cOut &lt;- re case &lt;-time.After(time.Duration(timeout) * time.Second): re := fmt.Sprintf(&quot;task timeout &quot;) cOut &lt;- re &#125;&#125;// func run(s string, ch chan string) &#123;// time.Sleep(time.Duration(3) * time.Second)// ch &lt;- fmt.Sprintf(&quot;task input %s,sleep %d second&quot;, s, 3)// return// &#125;func aa1(s string, ch chan string) &#123; time.Sleep(time.Duration(3) * time.Second) ch &lt;- fmt.Sprintf(&quot;task1 input %s,sleep %d second&quot;, s, 3)&#125;func aa2(s string, ch chan string) &#123; time.Sleep(time.Duration(5) * time.Second) ch &lt;- fmt.Sprintf(&quot;task2 input %s,sleep %d second&quot;, s, 5)&#125;func aa3(s string, ch chan string) &#123; time.Sleep(time.Duration(10) * time.Second) ch &lt;- fmt.Sprintf(&quot;task3 input %s,sleep %d second&quot;, s, 10)&#125;func Test() &#123; a := synchron(20, &quot;aaa&quot;, aa1, aa2, aa3) fmt.Printf(&quot;result: %v \n&quot;, a)&#125;// timeout: è¶…æ—¶æ—¶é—´// input: ç»Ÿä¸€å…¥å‚// args: æ–¹æ³•func synchron(timeout int, input string, args ...func(s string, ch chan string)) []string &#123; // input := []string&#123;&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;&#125; // timeout := 8 // åˆ›å»ºNä¸ªä»»åŠ¡ç®¡é“ï¼Œç”¨æ¥æ¥æ”¶å„ä¸ªå¹¶å‘ä»»åŠ¡çš„å®Œæˆç»“æœ chs := make([]chan string, len(args)) defer func() &#123; for _, c := range chs &#123; if c != nil &#123; close(c) &#125; &#125; &#125;() sTime := time.Now() fmt.Println(&quot;start&quot;) for i, f := range args &#123; chs[i] = make(chan string) go Run(f, input, timeout, chs[i]) &#125; resList := []string&#123;&#125; // è·å–ç»“æœ for _, ch := range chs &#123; v := &lt;-ch fmt.Println(v) resList = append(resList, v) &#125; eTime := time.Now() fmt.Printf(&quot;finished,Process time %s. Number of task is %d \n&quot;, eTime.Sub(sTime), len(args)) // å°†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡åŒæ—¶è¿”å› return resList&#125; æ‰§è¡Œç»“æœï¼š 123456789101112131415161718# timeout 20 input &quot;aaa&quot;âœ go run main.gostarttask1 input aaa,sleep 3 secondtask2 input aaa,sleep 5 secondtask3 input aaa,sleep 10 secondfinished,Process time 10.0028964s. Number of task is 3result: [task1 input aaa,sleep 3 second task2 input aaa,sleep 5 second task3 input aaa,sleep 10 second]# timeout 7 input &quot;aaa&quot;âœ go run main.gostarttask1 input aaa,sleep 3 secondtask2 input aaa,sleep 5 secondtask timeoutfinished,Process time 7.001273493s. Number of task is 3result: [task1 input aaa,sleep 3 second task2 input aaa,sleep 5 second task timeout ] ä½ çš„æ‰©å±•å½“ç„¶ï¼Œæˆ‘ä¸Šé¢åªæ˜¯å®ç°äº†ä¸€ç§æƒ…å†µï¼Œè¿˜å¯ä»¥ä¿®æ”¹æˆä¸ºä¸åŒçš„æ–¹æ³•ä¼ å…¥ç›¸åº”ç±»å‹çš„å‚æ•°ç­‰ç­‰ã€‚ ç›®å‰æˆ‘å¯¹Golangçš„Channeläº†è§£çš„ä¸æ·±ï¼Œåªæ˜¯æƒ³è¦å®ç°ç±»ä¼¼çš„æ•ˆæœå°±åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼ŒåæœŸä¼šå†æ·±å…¥å»å­¦ä¹ ã€‚ ç›¸å…³å‚è€ƒ è¿™ä¸ªè®²çš„æŒºå…¨çš„: Golang ä¸­çš„å¹¶å‘é™åˆ¶ä¸è¶…æ—¶æ§åˆ¶ - ç®€ä¹¦ ä½ å¯ä»¥ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å…¥æ‰‹: golang å¤šä¸ªroutineä¹‹é—´çš„åŒæ­¥ - ç¿”äº‘ - CSDNåšå®¢ å°è¯•å°è£…ä¸€ä¸ªå¹¶å‘æ‰§è¡Œå™¨: golang å¹¶å‘ä¹‹ååŒæ­¥ - @å¥® é¬¥@çš„ä¸“æ  - CSDNåšå®¢ Channelè¯¦è§£: Go Channel è¯¦è§£ | é¸Ÿçª]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä¸»åˆ†æ”¯æœ‰æ›´æ”¹åå¦‚ä½•åˆå¹¶æäº¤]]></title>
    <url>%2F2018%2F11%2F30%2Fhow-to-merge-when-main-branch-changed%2F</url>
    <content type="text"><![CDATA[å…¬å¸é‡Œçš„é¡¹ç›®éƒ¨ç½²åœ¨ç§æœ‰çš„GitLabç«™ç‚¹ä¸Šï¼Œé¡¹ç›®çš„ master åˆ†æ”¯ä¸èƒ½ç›´æ¥è¿›è¡Œ git push æ“ä½œï¼Œåªèƒ½é€šè¿‡å°†å…¶ä»–åˆ†æ”¯åˆå¹¶åˆ° master åˆ†æ”¯æ¥ä¸Šçº¿æ–°åŠŸèƒ½ã€‚ æ¯”å¦‚æˆ‘åŸºäº master åˆ†æ”¯åˆ›å»ºäº†ä¸€ä¸ªåä¸º dev-1130 çš„åˆ†æ”¯åšåŠŸèƒ½å¼€å‘ã€‚å½“åŠŸèƒ½å¼€å‘å®Œæˆåéœ€è¦åˆå¹¶åˆ° master åˆ†æ”¯ï¼Œå´å‘ç° master åˆ†æ”¯ä¸Šå·²ç»æœ‰åŒäº‹æäº¤äº†è‡ªå·±çš„åˆ†æ”¯ï¼Œæç¤ºæœ‰ä»£ç åˆå¹¶å†²çªï¼Œä¸èƒ½è‡ªåŠ¨åˆå¹¶ã€‚ é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹è¯¥å¦‚ä½•åˆå¹¶å½“å‰çš„åˆ†æ”¯å‘¢ï¼Ÿ å…¶å®è§£å†³æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸‹é¢è¯´ä¸€ç§ã€‚å…¶ä»–çš„æ–¹æ³•åç»­è¡¥å……ã€‚ ç¬¬ä¸€ç§æ–¹æ³•æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€123âœ git statusOn branch dev-1130nothing to commit, working tree clean æ‹‰å–å½“å‰åˆ†æ”¯æœ€æ–°ä»£ç 12âœ git pull origin dev-1130:dev-1130Already up to date. åˆ‡æ¢åˆ°masteråˆ†æ”¯123âœ git checkout masterSwitched to branch &apos;master&apos;Your branch is up to date with &apos;origin/master&apos;. æ‹‰å–masteråˆ†æ”¯æœ€æ–°ä»£ç 12âœ git pull origin master:masterAlready up to date. æ‰‹åŠ¨åˆå¹¶dev-1130åˆ°masteråˆ†æ”¯1234âœ git merge dev-1130Auto-merging hello_world/hello.pyCONFLICT (content): Merge conflict in hello_world/hello.pyAutomatic merge failed; fix conflicts and then commit the result. æç¤ºä»£ç å†²çªï¼Œæ‰‹åŠ¨è§£å†³æäº¤æ›´æ”¹1234âœ git add .âœ git commit -m &quot;è§£å†³å†²çª&quot;[master 9c7471f] è§£å†³å†²çª æŸ¥çœ‹å½“å‰åˆ†æ”¯çŠ¶æ€1234âœ git statusOn branch masterYour branch is ahead of &apos;origin/master&apos; by 3 commits. (use &quot;git push&quot; to publish your local commits) å°†å½“å‰masteråˆ†æ”¯æäº¤åˆ°è¿œç«¯çš„dev-1130åˆ†æ”¯æ³¨æ„è¿™é‡Œï¼Œæ˜¯å°†æœ¬åœ°æˆ‘ä»¬è§£å†³å†²çªåˆå¹¶ä¹‹åçš„ master åˆ†æ”¯ä»£ç æäº¤åˆ°è¿œç«¯çš„ dev-1130 åˆ†æ”¯ä¸Šã€‚ 12345678âœ git push origin master:dev-1130Counting objects: 4, done.Delta compression using up to 8 threads.Compressing objects: 100% (4/4), done.Writing objects: 100% (4/4), 548 bytes | 548.00 KiB/s, done.Total 4 (delta 2), reused 0 (delta 0)To mycompany_gitlab:Leafney/hello_world.git 49c7684..9c7471f master -&gt; dev-1130 æ‹‰å–è¿œç«¯çš„dev-1130åˆ†æ”¯åˆ°æœ¬åœ°çš„dev-1130åˆ†æ”¯1234âœ git pull origin dev-1130:dev-1130From mycompany_gitlab:Leafney/hello_world 49c7684..9c7471f dev-1130 -&gt; dev-1130Already up to date. è‡³æ­¤ï¼Œæ“ä½œå®Œæ¯•ã€‚]]></content>
      <categories>
        <category>Gitæ“ä½œç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Forkåˆ«äººçš„é¡¹ç›®æºä½œè€…æ›´æ–°åå¦‚ä½•åŒæ­¥æ›´æ–°]]></title>
    <url>%2F2018%2F11%2F29%2Fsynchronize-project-updated-after-fork%2F</url>
    <content type="text"><![CDATA[forké¡¹ç›®åŒæ­¥æ›´æ–° æˆ‘ä¹‹å‰ fork äº† https://github.com/imroc/req è¿™ä¸ªé¡¹ç›®ï¼Œä»Šå¤©çœ‹åˆ°è¿™ä¸ªé¡¹ç›®è¿›è¡Œäº†ä¸€äº›æ›´æ–°æ“ä½œã€‚ è¯¥é¡¹ç›®çš„æœ€æ–°æ›´æ–°ï¼š æˆ‘çš„æ›´æ–°ï¼š æ›´æ–°æ“ä½œå¦‚ä¸‹ï¼š å›åˆ°æˆ‘forkè¿‡æ¥çš„é¡¹ç›®ä¸»é¡µé¢ï¼Œç‚¹å‡» New pull request æŒ‰é’®ï¼š åœ¨è¿›å…¥çš„ç•Œé¢ä¸­ï¼Œå°†å·¦ä¾§çš„ base fork é€‰ä¸ºè‡ªå·±çš„ä»“åº“ï¼Œæºforké¡¹ç›®ä½œä¸ºå³è¾¹çš„ head fork ï¼š å½“é€‰æ‹©å®Œå·¦ä¾§ base fork åï¼Œç•Œé¢ä¼šå˜æˆå¦‚ä¸‹ï¼š æ­¤æ—¶ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ compare across forks ï¼Œä¸‹é¢å°±ä¼šå‡ºç°å¯é€‰æ‹©çš„é€‰æ¡†ï¼š è¿™æ—¶ï¼Œå†å°†å·¦ä¾§é€‰æ‹©ä¸ºè‡ªå·±çš„ä»“åº“ï¼Œå³ä¾§é€‰æ‹©ä¸ºæºforké¡¹ç›®ï¼š å¯ä»¥çœ‹åˆ°ï¼Œä¸‹é¢å·²ç»æ˜¾ç¤ºå‡ºäº†æºä½œè€…çš„å˜æ›´æ“ä½œã€‚ ç‚¹å‡» Create pull request æŒ‰é’®ï¼Œå¡«å†™æäº¤çš„ä¿¡æ¯ï¼š ä¹‹åï¼Œç‚¹å‡» Create pull request å³å¯ã€‚ è‡³æ­¤ï¼Œå°±å°†æºé¡¹ç›®çš„å˜æ›´åœ¨è‡ªå·±çš„é¡¹ç›®ä¸‹ä½œäº†ä¸€ä¸ª Pull requests çš„åˆå¹¶è¯·æ±‚ã€‚ç‚¹å‡»ä¸‹é¢çš„ Merge pull request ,å®Œæˆåˆå¹¶ã€‚ ä¿®æ”¹äº†é¡¹ç›®æäº¤æ›´æ–°æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚ ç›¸å…³å‚è€ƒ Githubä¸Šæ€ä¹ˆä¿®æ”¹åˆ«äººçš„é¡¹ç›®å¹¶ä¸”æäº¤ç»™åŸä½œè€…ï¼å›¾æ–‡å¹¶èŒ‚ï¼ - åˆ˜æ¡‚æ—çš„åšå®¢ - CSDNåšå®¢ github fork åˆ«äººçš„é¡¹ç›®æºä½œè€…æ›´æ–°åå¦‚ä½•åŒæ­¥æ›´æ–° - zhongzunfaçš„ä¸“æ  - CSDNåšå®¢]]></content>
      <categories>
        <category>Gitæ“ä½œç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golang http malformed HTTP response æ¢ç©¶]]></title>
    <url>%2F2018%2F11%2F28%2Fgolang-http-error-malformed-http-response%2F</url>
    <content type="text"><![CDATA[é—®é¢˜å¤„ç†è¯·æ±‚è¿”å›å†…å®¹çš„æ—¶å€™ï¼Œ é‡åˆ° error malformed HTTP response &quot;&lt;html&gt;&quot; å¼‚å¸¸ä¿¡æ¯ æ¢ç©¶æ ¹æ®ç›®å‰çš„æµ‹è¯•æƒ…å†µï¼Œå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼š åœ¨è¯·æ±‚è¿”å›ç»“æœä¸º html é¡µé¢æ—¶ï¼Œproxy éœ€è¦å¸¦ä¸Š http:// å‰ç¼€ã€‚ åœ¨è¯·æ±‚è¿”å›ç»“æœä¸º api æ¥å£æ—¶ï¼Œproxy éœ€è¦å»æ‰ http:// å‰ç¼€ã€‚ å¾…åç»­å¤šæ¬¡éªŒè¯ã€‚ ç»éªŒè¯ï¼š ä»¥ä¸Šç»“è®º é”™è¯¯ã€‚ è¯·æ±‚ç½‘å€ è¿”å›ç»“æœç±»å‹ proxyæ ¼å¼ proxyæ˜¯å¦å¸¦http è¯·æ±‚ç»“æœ http://ip38.com/ html http://27.203.219.181:8060 æ˜¯ okï¼Œå·²éªŒè¯ http://ip38.com/ html 27.203.219.181:8060 å¦ è¯·æ±‚æ­£å¸¸ï¼Œä»£ç†æœªç”Ÿæ•ˆ,å·²éªŒè¯ https://www.cnblogs.com/ html http://27.203.219.181:8060 æ˜¯ error,malformed HTTP response &quot;&lt;html&gt;&quot;,å·²éªŒè¯ https://www.cnblogs.com/ html 27.203.219.181:8060 å¦ okï¼Œå·²éªŒè¯ https://p.3.cn/prices/mgets json http://27.203.219.181:8060 æ˜¯ error,malformed HTTP response &quot;&lt;html&gt;&quot;,å·²éªŒè¯ https://p.3.cn/prices/mgets json 27.203.219.181:8060 å¦ ok,å·²éªŒè¯ å³ï¼š è¯·æ±‚ http://ip38.com/ æ—¶ï¼Œéœ€è¦ä½¿ç”¨ proxyæ ¼å¼ä¸º http://27.203.219.181:8060 æ‰èƒ½è®¿é—®æˆåŠŸã€‚ è¯·æ±‚ https://www.cnblogs.com/ æ—¶ï¼Œéœ€è¦ä½¿ç”¨proxyæ ¼å¼ä¸º 27.203.219.181:8060 æ‰èƒ½è®¿é—®æˆåŠŸã€‚ è¯·æ±‚ https://p.3.cn/prices/mgets æ—¶ï¼Œéœ€è¦ä½¿ç”¨proxyæ ¼å¼ä¸º 27.203.219.181:8060 æ‰èƒ½è®¿é—®æˆåŠŸã€‚ æˆ‘çš„ä¸€ç§è§£æ³•é¡¹ç›®ä¸­åœ¨æµ‹è¯•ä½¿ç”¨ä»£ç†çš„ä»£ç æ®µï¼š ä»£ç ä¸­çš„ req.XReq() æ˜¯å¯¹ imroc/req: a golang http request library for humans çš„å°è£…ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142 // ä½¿ç”¨äº†ä»£ç†ip //ä¸ºé˜²æ­¢ä½¿ç”¨ä»£ç†ipè¯·æ±‚è¶…æ—¶å¤ªé•¿ï¼Œè®¾ç½®é»˜è®¤è¶…æ—¶æ—¶é—´ä¸º30s if _, ok := rh[&quot;time-out&quot;]; !ok &#123; // è¯·æ±‚å¤´ä¸­ time-out å‚æ•°ä¸å­˜åœ¨ rh[&quot;time-out&quot;] = 30 &#125; is_malformedHttp := falseHandleProxy: for _, ag := range rAgents &#123; // è¡¨ç¤ºåœ¨ä½¿ç”¨proxy ipæ—¶ï¼Œæ˜¯å¦é‡åˆ°è¿”å›é”™è¯¯ä¿¡æ¯ä¸º malformed HTTP response &quot;&lt;html&gt;&quot; çš„æƒ…å†µ if is_malformedHttp &#123; // å°†ä»£ç†ipçš„ http:// å»æ‰ ag = GetHostAndPort(ag) fmt.Printf(&quot;[info] remove http for proxy ip: %s .\n&quot;, ag) &#125; rh[&quot;proxy&quot;] = ag fmt.Printf(&quot;[info] use proxy to request: %s .\n&quot;, ag) resData, errMsg = req.XReq(rUrl, rh, rp) if errMsg != nil &#123; fmt.Printf(&quot;[info] the proxy result error: %s .\n&quot;, errMsg.Error()) if !is_malformedHttp &#123; // å½“ is_malf ä¸º falseæ—¶ï¼Œæ‰å¯¹ mailformed http response å¤„ç† if strings.Contains(errMsg.Error(), &quot;malformed HTTP response&quot;) &#123; fmt.Printf(&quot;[error] the proxy ip format error: %s .\n&quot;, errMsg.Error()) is_malformedHttp = true time.Sleep(1 * time.Second) goto HandleProxy &#125; &#125; continue &#125; else &#123; fmt.Printf(&quot;[info] the proxy ok %s .\n&quot;, ag) break &#125; &#125; å®ç°é€»è¾‘æ˜¯ï¼š å½“ä¼ å…¥çš„ä»£ç†ipæ ¼å¼ä¸º http://27.203.219.181:8060 ï¼Œå…ˆå‘èµ·è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚æŠ¥é”™ï¼Œåˆ¤æ–­é”™è¯¯ä¿¡æ¯æ˜¯å¦åŒ…å« malformed HTTP response ï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™è®¤ä¸ºæ˜¯ä»£ç†ipçš„æ ¼å¼é”™è¯¯ï¼Œéœ€è¦å¯¹ä»£ç†ipå¤„ç†ã€‚ é€šè¿‡ goto è¯­å¥ï¼Œç›´æ¥è·³å›åˆ° for å¾ªç¯ä¹‹å¤–ï¼Œå¯¹ä»£ç†ipåšæ ¼å¼åŒ–å¤„ç†ï¼Œæˆªå–åˆ° host:port çš„æ ¼å¼å†æ¬¡å»è¯·æ±‚ã€‚ ä¸ºäº†é˜²æ­¢ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶å†é‡åˆ° malformed HTTP response é”™è¯¯çš„è¯ï¼Œåˆä¼š goto åˆ° for å¾ªç¯ä¹‹å¤–ï¼Œæ‰€ä»¥è¿™é‡ŒåŠ ä¸€ä¸ªæ ‡è®° is_malformedHttp ï¼Œæ ‡æ˜ä»£ç†ipå‡ºç°æ ¼å¼é—®é¢˜æ—¶æ˜¯å¦è¢«å¤„ç†è¿‡ã€‚ åç»æµ‹è¯•éªŒè¯ï¼Œè¿™ç§æ–¹æ³•æ— æ•ˆã€‚ éªŒè¯ç»“æœï¼š å½“ä»£ç†æ ¼å¼ä¸º [&quot;http://192.168.1.100:8080&quot;,&quot;192.168.1.120:8080&quot;] æ—¶ï¼Œproxy1ç¬¬ä¸€æ¬¡è¯·æ±‚å¼‚å¸¸ï¼Œç»â€œå¤„ç†â€åè¯·æ±‚ä»å¼‚å¸¸ï¼Œproxy2ç¬¬ä¸€æ¬¡è¯·æ±‚å¼‚å¸¸ã€‚è¯·æ±‚ç»“æŸã€‚ å½“ä»£ç†æ ¼å¼ä¸º [&quot;192.168.1.100:8080&quot;,&quot;192.168.1.120:8080&quot;] æ—¶ï¼Œproxy1ç¬¬ä¸€æ¬¡è¯·æ±‚æ­£å¸¸ã€‚è¯·æ±‚ç»“æŸã€‚ çŒœæµ‹ä¸ºä»€ä¹ˆåœ¨ä»£ç†Ipç»å¤„ç†åçš„è¯·æ±‚ï¼Œä»ç„¶ä¼šå‡ºé”™å‘¢ï¼Ÿ ä¸ªäººæ€€ç–‘æ˜¯ defer å¯¼è‡´çš„ã€‚ deferè¯­å¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ‰§è¡Œä¼šæ¨è¿Ÿï¼Œç›´åˆ°å¤–å›´çš„å‡½æ•°è¿”å›ï¼Œæˆ–è€…å¤–å›´å‡½æ•°è¿è¡Œåˆ°æœ€åï¼Œæˆ–è€…ç›¸åº”çš„goroutine panic. åœ¨è¯·æ±‚ä¹‹åï¼Œéœ€è¦ defer å» close è¯·æ±‚ã€‚è€Œ defer åˆæœ‰å»¶åæ€§ï¼Œä¹Ÿå°±å¯¼è‡´äº†åœ¨ for å¾ªç¯ä¸­çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´éƒ½æ˜¯æœ‰å…³è”çš„ï¼Œç¬¬ä¸€æ¬¡çš„è¯·æ±‚å¯¹è±¡å¹¶æ²¡æœ‰è¢«å…³é—­å°±ç»§ç»­è¿›è¡Œäº†åç»­çš„è¯·æ±‚ï¼Œç›´åˆ°å‡½æ•°ç»“æŸï¼Œè¯·æ±‚æ‰è¢«å…³é—­æ‰ã€‚ ä¹Ÿå°±å¯¼è‡´äº†ï¼Œå³ä½¿ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶çš„ä»£ç†ipå»æ‰äº† http:// ï¼Œè¯·æ±‚ä»ç„¶ä¼šå¤±è´¥ã€‚ ä¹‹åå¦‚ä½•å¤„ç† å…ˆç”¨ http://27.203.219.181:8060 çš„ä»£ç†æ ¼å¼å»è¯·æ±‚ï¼Œå½“é‡åˆ° malformed HTTP response é”™è¯¯æ—¶ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œç­‰å¾…ä¸‹æ¬¡è¯·æ±‚ã€‚ åœ¨ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œå°†ä»£ç†ipçš„æ ¼å¼æ›´æ”¹ä¸º 27.203.219.181:8060 ä¼ å…¥ï¼Œå†å»æ‰§è¡Œè¯·æ±‚æ“ä½œã€‚ ç›¸å…³ https://github.com/golang/go/blob/master/src/net/http/response.go#L168 HTTP Method | holysâ€™ æ¨èæ¨èä¸¤ä¸ªè¯·æ±‚ç±»ï¼š req: imroc/req: a golang http request library for humans gorequest: parnurzeal/gorequest: GoRequest â€“ Simplified HTTP client ( inspired by nodejs SuperAgent ) ä»¥ä¸Šï¼Œä»…åšè®°å½•ã€‚ç”±äºæš‚æœªæŸ¥è¯¢åˆ°é—®é¢˜åŸå› ï¼Œåç»­æŒç»­æ›´æ–°ã€‚]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢Nextä¸»é¢˜è§£å†³ä¸è’œå­ç»Ÿè®¡ä¸æ˜¾ç¤ºé—®é¢˜]]></title>
    <url>%2F2018%2F11%2F12%2Fbusuanzi-counter-error%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨æŸ¥çœ‹åšå®¢ä¸­æ–‡ç« çš„æ—¶å€™ï¼Œå‘ç°é¡µé¢ä¸­çš„ç»Ÿè®¡éƒ½ä¸æ˜¾ç¤ºäº†ï¼š çœ‹äº†ä¸€ä¸‹Chromeçš„æ§åˆ¶å°ï¼Œå‘ç°æ˜¯ ä¸è’œå­ ç»Ÿè®¡çš„jsæ–‡ä»¶æ‰¾ä¸åˆ°è€ŒæŠ¥é”™äº†ï¼š æ‰“å¼€ ä¸è’œå­ çš„å®˜æ–¹ç½‘ç«™ ä¸è’œå­ | ä¸å¦‚ å±…ç„¶çœ‹åˆ°äº†å¦‚ä¸‹çš„æç¤ºï¼š ç«Ÿç„¶æ˜¯åŸæ¥çš„åŸŸåä¸å¯ç”¨äº†ã€‚ é¢ã€‚ã€‚ã€‚çœ‹å®Œæˆ‘åªæƒ³è¯´ï¼šä¸ƒç‰›ç¡®å®å‘å•Šã€‚ã€‚ã€‚ è§£å†³æ–¹æ³•ï¼š å®˜æ–¹ä¹Ÿç»™å‡ºäº†ç›¸åº”çš„æ–¹æ³•ï¼Œå³åªéœ€è¦æ›´æ”¹ next ä¸»é¢˜ä¸‹çš„ ä¸è’œå­ æ’ä»¶çš„jså¼•ç”¨é“¾æ¥å³å¯ã€‚ è¿›å…¥ hexo åšå®¢é¡¹ç›®çš„ themes ç›®å½•ä¸‹ï¼Œåœ¨ next ä¸»é¢˜ç›®å½•ä¸­çš„ layout/_third-party/analytics/ ä¸‹æ‰¾åˆ° busuanzi-counter.swig æ–‡ä»¶ï¼Œ å°†: 1&lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; æ¢æˆï¼š 12&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; å³å¯ã€‚ å½“ç„¶ï¼Œæ”¹èµ·æ¥å¹¶ä¸éº»çƒ¦ã€‚å…³é”®æ˜¯ä½ å¾—çŸ¥é“æ”¹å“ªé‡Œã€‚]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Google Pixelè§£é”BLã€åˆ·å…¥TwrpåŠRootæŠ˜è…¾å°è®°]]></title>
    <url>%2F2018%2F10%2F16%2Fgoogle-pixel-unlock-bl-and-root%2F</url>
    <content type="text"><![CDATA[å› ä¸ºä¸ªäººé¡¹ç›®ä¸Šçš„éœ€è¦ï¼Œæˆ‘ä»æŸå®å…¥æ‰‹äº†ä¸€æ¬¾äºŒæ‰‹çš„Google Pixel æ¬§ç‰ˆæ‰‹æœºã€‚å½“åˆé€‰æ‹©æ—¶ä¸»è¦æ˜¯è€ƒè™‘åˆ°å®ƒçš„å¤§å†…å­˜â€“4Gå†…å­˜ï¼Œå¯ä»¥æµç•…è¿è¡Œå¸¸ç”¨çš„ç¨‹åºã€‚ï¼ˆä¸è¿‡å…¥æ‰‹ä¹‹åçš„æ„Ÿè§‰å°±æ˜¯ï¼Œè¦æƒ³ç”¨å¥½Googleçš„æ‰‹æœºï¼Œã€Œç§‘å­¦ä¸Šç½‘ã€æ˜¯å¿…å¤‡çš„æŠ€èƒ½ï¼Œå¦åˆ™çš„è¯ï¼Œè¿˜æ˜¯ç”¨å›½å†…çš„æ‰‹æœºå§ï¼ï¼‰ å› ä¸ºéœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…æŒ‰é”®ç²¾çµçš„æ‰‹æœºç‰ˆappï¼Œè€Œè°ƒè¯•æŒ‰é”®ç²¾çµçš„è„šæœ¬åˆéœ€è¦è·å–æ‰‹æœºçš„Rootæƒé™ï¼Œæ‰€ä»¥å°±å¼€å§‹äº†æˆ‘çš„Pixelåˆ·æœºä¹‹æ—…ã€‚ å‡†å¤‡å·¥å…· Google Pixelæ‰‹æœº æ¬§ç‰ˆï¼ˆå›½é™…ç‰ˆï¼‰ Android 8.1.0 Windowsæˆ–Mac twrp Magisk ss æ¬§ç‰ˆåˆ¤æ–­ç‚¹å‡»Settings(è®¾ç½®) -&gt; System(ç³»ç»Ÿ) -&gt; About phone(å…³äºæ‰‹æœº) -&gt; Regulatory labels(ç›‘ç®¡æ ‡ç­¾) æŸ¥çœ‹ã€‚ MODEL: G-2PW4200 ï¼Œå…¶ä¸­ 4200 è¡¨ç¤ºæ¬§ç‰ˆï¼Œ4100 è¡¨ç¤ºç¾ç‰ˆã€‚ è§£é”Bootloaderï¼ˆæ³¨æ„ï¼šè§£é” Bootloader é‡ç½®è®¾å¤‡æ•°æ®ï¼Œè¯·æ³¨æ„å¤‡ä»½ã€‚ä¸€å®šä¸è¦å¿˜è®°é€€å‡ºä½ çš„Googleè´¦å·å’Œå–æ¶ˆæŒ‡çº¹è¯†åˆ«åŠé”å±è®¾ç½®ã€‚ï¼‰ ç”±äºæˆ‘çš„æ‰‹æœºæ˜¯æ–°ä¹°çš„ï¼Œæ‰€ä»¥è¿™äº›æ“ä½œå°±å…äº†ã€‚ å¼€å¯USBè°ƒè¯•å’ŒOEMè§£é”å®‰è£…ã€Œç§‘å­¦ä¸Šç½‘ã€å·¥å…·ï¼Œå¹¶æˆåŠŸæ¥å…¥äº’è”ç½‘ã€‚ é€‰æ‹© ã€Œè®¾ç½®-ç³»ç»Ÿ-å…³äºæ‰‹æœº-ç‰ˆæœ¬å·ã€ï¼ŒçŒ›å‡»ã€Œç‰ˆæœ¬å·ã€7æ¬¡å¼€å¯ ã€Œå¼€å‘è€…é€‰é¡¹ã€ã€‚ è¿”å›ã€Œä¸Šä¸€é¡µã€ï¼Œåœ¨ã€Œå¼€å‘è€…é€‰é¡¹ã€ä¸­å¼€å¯ã€ŒUSBè°ƒè¯•ã€å’Œã€ŒOEMè§£é”ã€ä¸¤ä¸ªé€‰é¡¹ã€‚å¦‚æœã€ŒOEMè§£é”ã€é€‰é¡¹æ˜¾ç¤ºä¸ºç°è‰²ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚ é€šè¿‡æ•°æ®çº¿å°†æ‰‹æœºè¿æ¥è‡³ç”µè„‘ï¼Œæ­¤æ—¶ï¼Œæ‰‹æœºç«¯ä¼šå¼¹å‡º USB è°ƒè¯•ç”³è¯·ï¼Œç‚¹å‡»ã€Œå…è®¸ã€ã€‚ å¯ä»¥é€šè¿‡å‘½ä»¤ adb devices æ¥éªŒè¯æ˜¯å¦å…è®¸adbè°ƒè¯•ï¼š 123âœ adb devicesList of devices attachedFA6XXXXXXX53 device è¿›å…¥ Bootloaderæ¨¡å¼è¿›å…¥bootloaderé»˜è®¤æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯é€šè¿‡åœ¨å…³æœºçŠ¶æ€ä¸‹ã€ŒæŒ‰ä½ç”µæºé”®+éŸ³é‡å‡å°‘é”®ã€ï¼›ç¬¬äºŒç§æ˜¯é€šè¿‡ã€ŒADBå‘½ä»¤ã€è¿›å…¥ã€‚ è¿™é‡Œæˆ‘é‡‡ç”¨ã€Œadbå‘½ä»¤ã€æ¥æ“ä½œã€‚ å›åˆ°å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œé”®å…¥ adb reboot bootloader å¹¶å›è½¦ï¼Œæ‰‹æœºä¼šç«‹å³é‡å¯è‡³ Bootloader æ¨¡å¼ã€‚ 12~/test/pixelâœ adb reboot bootloader ä¹‹åï¼Œé€šè¿‡ fastboot devices å‘½ä»¤éªŒè¯ fastboot æ˜¯å¦æˆåŠŸï¼š 12âœ fastboot devicesFA6AB0311758 fastboot è§£é” Bootloaderä¸Šä¸€æ­¥è¿›å…¥Bootloaderé¡µé¢åï¼Œæ‰‹æœºç•Œé¢åº”è¯¥æ˜¯å¦‚ä¸‹å›¾ï¼š åœ¨å‘½ä»¤æç¤ºç¬¦çª—å£é”®å…¥ fastboot flashing unlock å¹¶å›è½¦ï¼Œæ‰‹æœºè¿›å…¥ Bootloader è§£é”ç•Œé¢ã€‚ 1234âœ fastboot flashing unlock...OKAY [ 0.049s]finished. total time: 0.049s å¯¹äº Pixel 2 XL æœºå‹ï¼Œè¦ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼š 1fastboot flashing unlock_critical è¯¦æƒ…æŸ¥çœ‹ï¼šFactory Images for Nexus and Pixel Devices | Google APIs for Android | Google Developers åœ¨ Bootloader è§£é”ç•Œé¢ä¸­ï¼Œä½¿ç”¨éŸ³é‡é”® +/- æ¥æ§åˆ¶å…‰æ ‡ï¼Œé€‰æ‹©ã€ŒYesã€å¹¶æŒ‰ä¸‹ç”µæºé”®æ¥è¿›è¡Œ Bootloader è§£é”ã€‚ ç¡®è®¤å®Œæ¯•å,ç¨ä½œç­‰å¾…ã€‚é€šè¿‡ fastboot reboot å‘½ä»¤é‡å¯æ‰‹æœºï¼š 1234âœ fastboot rebootrebooting...finished. total time: 0.050s ç¨ç­‰ç‰‡åˆ»ä¹‹åï¼Œä½ çš„è®¾å¤‡ä¼šè‡ªåŠ¨é‡å¯ã€‚ åˆ¤æ–­è§£é”æˆåŠŸå½“æ‰‹æœºé‡å¯æ—¶å‡ºç°é»‘åº•ç™½å­—çš„è‹±æ–‡è­¦å‘Šé¡µä»¥åŠå±å¹•ä¸‹æ–¹å‡ºç°ä¸€æŠŠæ‰“å¼€çš„å°é”ï¼Œé‚£ Bootloader å°±è§£é”æˆåŠŸå•¦ã€‚ é‡å¯æ‰‹æœºï¼Œå‡ºç°å¦‚ä¸‹ä¸¤ä¸ªç•Œé¢å°±ç®—è§£é”æˆåŠŸï¼š å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯å†æ¬¡è¿›å…¥ fastboot æ¨¡å¼ï¼ŒæŸ¥çœ‹ï¼š è§£é”Bootloaderåçš„ä¸¤ä¸ªé—®é¢˜æ¢å¤åˆå§‹åœ¨è§£é” Bootloader ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°æ‰‹æœºç³»ç»Ÿå·²ç»æ˜¯å®Œå…¨åˆå§‹åŒ–çš„çŠ¶æ€äº†ã€‚ åœ¨è¿›å…¥ ã€Œå…³äºæ‰‹æœºã€ ç•Œé¢åï¼Œå¯ä»¥å‘ç°ä¹‹å‰å¼€å¯çš„ã€Œå¼€å‘è€…é€‰é¡¹ã€ä¹Ÿæ˜¯é»˜è®¤å…³é—­äº†ï¼Œéœ€è¦å†æ¬¡ç‚¹å‡»7æ¬¡ã€Œç‰ˆæœ¬å·ã€å¼€å¯ã€‚ é‚£ä¹ˆï¼Œåœ¨æ‰§è¡Œåé¢çš„æ“ä½œæ—¶æ˜¯å¦ä»éœ€è¦å†æ¬¡å°†ã€ŒOEMè§£é”ã€æ‰“å¼€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸éœ€è¦ã€‚ ç„¶è€Œï¼Œå› ä¸ºåé¢éœ€è¦ç”¨åˆ° adb å‘½ä»¤å»æ“ä½œæ‰‹æœºï¼Œæ‰€ä»¥ã€ŒUSBè°ƒè¯•ã€é€‰é¡¹è¿˜æ˜¯éœ€è¦æ‰“å¼€çš„ã€‚ å…³äºã€ŒOEMé”ä¸bootloaderé”çš„å…³ç³»ã€ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ ç–‘éš¾è§£ç­” ã€‚ é”™è¯¯æç¤ºæˆåŠŸè§£é”Bootloaderåï¼Œæ¯æ¬¡æ‰‹æœºå¯åŠ¨æˆ–é‡å¯æ—¶ï¼Œéƒ½ä¼šå‡ºç°é»‘åº•ç™½å­—çš„è‹±æ–‡è­¦å‘Šé¡µï¼Œæç¤º â€œYour device software canâ€™t be checked for corruption. Please lock the bootloaderâ€ã€‚ è¿™æ²¡æœ‰ä»€ä¹ˆå¯æ‹…å¿ƒçš„ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼ è¿™ä»…ä»…æ˜¯æç¤ºä½  Bootloader è¢«è§£é”äº†ï¼Œç›´æ¥å¿½è§†å³å¯ã€‚ åˆ·å…¥ç¬¬ä¸‰æ–¹Recovery:TWRPåŠRootç”±äºPixelåŠPixel XLéƒ½é‡‡ç”¨A/Bå‡çº§ç³»ç»Ÿï¼Œå› è€Œå¯ä»¥ç†è§£ä¸ºæ‰‹æœºé‡Œæœ‰2ä¸ªç³»ç»Ÿï¼Œå¦‚æœä½ æŒ‰ç…§ä¼ ç»Ÿåˆ·å…¥Twrpçš„æ–¹æ³•åˆ·å…¥çš„è¯ï¼Œé‚£ä¹ˆä½ å¹¶ä¸ä¼šè·å¾—ä¸€ä¸ªæ°¸ä¹…çš„Twrpã€‚æ‰€ä»¥éœ€è¦å…ˆåˆ·å…¥ä¸€ä¸ªä¸´æ—¶çš„Twrpï¼Œåœ¨é€šè¿‡ä¸´æ—¶çš„Twrpæ¥åˆ·å…¥æ°¸ä¹…çš„Twrpä»è€Œæ¥è·å–Rootæƒé™ã€‚ ä¸‹è½½å¿…è¦è½¯ä»¶éœ€è¦ä¸‹è½½ä¸´æ—¶çš„Twrpã€æ°¸ä¹…TwrpåŠMagiskä¸‰ä¸ªæ–‡ä»¶ã€‚ é¦–å…ˆï¼Œå‰å¾€ TWRP å®˜ç½‘ Devices ä¸‹è½½æœ€æ–°ç‰ˆ TWRP å‹ç¼©åŒ…ï¼ˆ.zipï¼‰å’Œä¸´æ—¶ TWRP é•œåƒæ–‡ä»¶ï¼ˆ.imgï¼‰ã€‚ æˆ‘çš„Pixelå¯¹åº”é€‰æ‹©ä»è¿™ä¸ªé¡µé¢ Download TWRP for sailfish ä¸‹è½½çš„ 3.2.3-1 ç‰ˆæœ¬ï¼š 12twrp-pixel-installer-sailfish-3.2.3-1.zip ï¼ˆæ°¸ä¹…twrpï¼‰twrp-3.2.3-1-sailfish.img (ä¸´æ—¶twrp) ä»github Releases Â· topjohnwu/Magisk ä¸‹è½½æœ€æ–°çš„ Magisk åŒ…ã€‚ è¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯ 17.2 ç‰ˆæœ¬ï¼š 1Magisk-v17.2.zip æ‹·è´æ–‡ä»¶åˆ°æ‰‹æœºå‡è®¾æˆ‘ç”µè„‘ä¸Šçš„æ“ä½œç›®å½•ä¸º: ~/test/pixel ã€‚ å°† twrp-3.2.3-1-sailfish.img æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚ å°† twrp-pixel-installer-sailfish-3.2.3-1.zip å’Œ Magisk-v17.2.zip æ‹·è´åˆ°æ‰‹æœºä¸­ã€‚ åœ¨å°†æ–‡ä»¶æ‹·è´åˆ°æ‰‹æœºä¸­æ—¶ï¼Œæˆ‘å‘ç°é€šè¿‡æ•°æ®çº¿è¿æ¥åˆ°ç”µè„‘æ—¶ï¼Œé€‰æ‹© ä¼ è¾“æ–‡ä»¶ ç”µè„‘ä¸­å¹¶æ²¡æœ‰å‡ºç°æ‰‹æœºå­˜å‚¨çš„ç›˜ç¬¦ï¼Œä¹Ÿå°±æ— æ³•ç›´æ¥å°†æ–‡ä»¶æ‹–æ‹½åˆ°æ‰‹æœºä¸­ã€‚ åœ¨ç»è¿‡ä¸€ç•ªæ‘†å¼„ä¹‹åï¼Œæˆ‘è§‰å¾—æœ€é è°±çš„è¿˜æ˜¯é€šè¿‡ adb çš„æ–¹å¼æ¥ä¸Šä¼ æ–‡ä»¶ã€‚ è¿æ¥æ‰‹æœºï¼Œåœ¨æ‰‹æœºç«¯å¼¹å‡ºã€ŒUSBè°ƒè¯•ã€ç‚¹å‡»ç¡®å®šï¼Œæ‰“å¼€item2ï¼Œåˆ‡æ¢åˆ°ç›®å½• ~/test/pixel ï¼š 123~/test/pixelâœ lsMagisk-v17.2.zip twrp-3.2.3-1-sailfish.img twrp-pixel-installer-sailfish-3.2.3-1.zip æŸ¥çœ‹adbè¿æ¥çŠ¶æ€ï¼š 1234~/test/pixelâœ adb devicesList of devices attachedFA6XXXXXXX53 device å…ˆé€šè¿‡ adb shell å‘½ä»¤è¿›å…¥æ‰‹æœºçš„bashå‘½ä»¤ä¸‹ï¼Œåœ¨ /sdcard ç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹ tmp : 123456789101112131415161718~/test/pixelâœ adb shellsailfish:/ $ cd sdcard/sailfish:/sdcard $ mkdir tmpsailfish:/sdcard $ lsAlarms Android DCIM Download Movies Music Notifications Pictures Podcasts Ringtones tmpsailfish:/sdcard $ ls -altotal 100drwxrwx--x 13 root sdcard_rw 4096 2018-10-16 17:27 .drwx--x--x 4 root sdcard_rw 4096 2009-01-01 16:02 ..drwxrwx--x 2 root sdcard_rw 4096 2009-01-01 16:02 Alarmsdrwxrwx--x 3 root sdcard_rw 4096 2009-01-01 16:02 Androiddrwxrwx--x 2 root sdcard_rw 4096 2009-01-01 16:02 DCIMdrwxrwx--x 2 root sdcard_rw 4096 2009-01-01 16:02 Download......drwxrwx--x 2 root sdcard_rw 4096 2018-10-16 17:27 tmpsailfish:/sdcard $ é€šè¿‡ adb push &lt;local&gt; &lt;remote&gt; å‘½ä»¤å°†æ–‡ä»¶ä¸Šä¼ åˆ°æ‰‹æœºçš„ /sdcard/tmp/ ç›®å½•ä¸­ï¼š 12345678~/test/pixelâœ adb push twrp-pixel-installer-sailfish-3.2.3-1.zip /sdcard/tmp/twrp-pixel-installer-sailfish-3.2.3-1.zip: 1 file pushed. 14.6 MB/s (11492088 bytes in 0.753s)~/test/pixelâœ adb push Magisk-v17.2.zip /sdcard/tmp/Magisk-v17.2.zip: 1 file pushed. 16.3 MB/s (4174026 bytes in 0.245s) æŸ¥çœ‹æ‰‹æœºä¸­æ–‡ä»¶åˆ—è¡¨ï¼š 1234567~/test/pixelâœ adb shell ls -al /sdcard/tmp/total 15328drwxrwx--x 2 root sdcard_rw 4096 2018-10-16 17:32 .drwxrwx--x 13 root sdcard_rw 4096 2018-10-16 17:27 ..-rw-rw---- 1 root sdcard_rw 4174026 2018-10-16 16:07 Magisk-v17.2.zip-rw-rw---- 1 root sdcard_rw 11492088 2018-10-16 15:56 twrp-pixel-installer-sailfish-3.2.3-1.zip æ³¨ï¼šå¯¹äºä¸ºä»€ä¹ˆå°†æ–‡ä»¶æ‹·è´åˆ°æ‰‹æœºçš„ /sdcard ç›®å½•ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ ç–‘éš¾è§£ç­” åˆ·ä¸´æ—¶Twrpå¼•å¯¼è¿›å…¥ Bootloaderæ‰§è¡Œå‘½ä»¤ adb reboot bootloader: 12~/test/pixelâœ adb reboot bootloader åˆ·å…¥ä¸´æ—¶Twrpæ‰§è¡Œå‘½ä»¤ fastboot boot *.img æ¥å¯åŠ¨ä¸´æ—¶Twrpï¼š 1234567~/test/pixel took 5sâœ fastboot boot twrp-3.2.3-1-sailfish.imgdownloading &apos;boot.img&apos;...OKAY [ 0.712s]booting...OKAY [ 0.903s]finished. total time: 1.615s ä¹‹åï¼Œæ‰‹æœºä¼šè¿›å…¥åˆ°ä¸´æ—¶çš„Twrpä¸­ï¼š æ»‘åŠ¨ä¸‹é¢çš„ Swipe to Allow Modifications æ»‘æ¡ï¼Œè¿›å…¥Twrpæ“ä½œé¡µé¢ï¼š åˆ·å…¥æ°¸ä¹…Twrpé€‰æ‹© Install â€“ æ‰¾åˆ°ç›®å½• /sdcard/tmp/ â€“ é€‰æ‹© twrp*.zip æ–‡ä»¶ â€“ å¼¹å‡ºå®‰è£…ç•Œé¢ â€“ ç›´æ¥æ»‘åŠ¨åº•éƒ¨çš„æ»‘æ¡ Swipe to confirm Flash å®‰è£…ï¼š è¿™é‡Œä¹Ÿé—´æ¥éªŒè¯äº†ä¸ºä»€ä¹ˆè¦é€‰æ‹© /sdcard ç›®å½•ï¼šç‚¹å‡» Install æŒ‰é’®åï¼Œç›´æ¥è¿›å…¥çš„å°±æ˜¯ /sdcard ç›®å½•ï¼Œå³åªèƒ½æ“ä½œè¿™ä¸ªç›®å½•ã€‚ ç­‰å¾…è¿›åº¦æ¡æ‰§è¡Œå®Œæ¯•ï¼Œæœ€åä¼šæ˜¾ç¤º ...done çš„æç¤ºã€‚è¯´æ˜è¿™ä¸€æ­¥æ‰§è¡Œå®Œæˆã€‚ åˆ·å…¥Magiskä¸Šä¸€æ­¥å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å‘ç°ç•Œé¢ä¸­åªæœ‰ä¸¤ä¸ªæŒ‰é’®ï¼šWipe cache/dalvik å’Œ Reboot System ã€‚åä¸€é¡¹è‚¯å®šä¸èƒ½é€‰ï¼Œå¦‚æœé€‰æ‹©é‡å¯ï¼Œé‚£è¿˜æœ‰ä¸€ä¸ª Magisk æ–‡ä»¶æ²¡æœ‰åˆ·å…¥ï¼Œå¦åˆ™çš„è¯è¿˜éœ€è¦èµ°ä¸€éä¸Šé¢çš„ åˆ·å…¥ä¸´æ—¶Twrp çš„æ“ä½œï¼›è€Œç¬¬ä¸€é¡¹ æ¸…é™¤ä¸´æ—¶ç¼“å­˜æ–‡ä»¶ï¼Œåªæ˜¯æˆ‘ä¸æ¸…æ¥šè¯¥æ–‡ä»¶å…·ä½“æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œæ‰€ä»¥ä¹Ÿæ€•ç‚¹äº†ä¹‹åä¼šå‡ºé—®é¢˜ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘åªå¥½ä¸Šç½‘å»æŸ¥è¯¢çœ‹çœ‹æ˜¯å¦æœ‰ç›¸å…³çš„æ“ä½œä»‹ç»ï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½å¤ªç®€å•äº†ï¼Œå¾ˆéš¾æ‰¾åˆ°ç›¸å…³çš„ä»‹ç»ã€‚ æ­£å½“æˆ‘ä¸€è„¸è¿·è’™æ—¶ï¼Œæˆ‘çš„æ‰‹è¯¯æŒ‰äº†é¡¶éƒ¨çš„ â€œè“è‰²æ¡â€ éƒ¨åˆ†ï¼Œå‘ç°â€¦ ç•Œé¢è¿”å›äº† Install é¡µé¢ï¼š æˆ‘åªæƒ³è¯´ï¼Œè¿™æ“ä½œç®€ç›´æ˜¯ 666 å•Šï¼ï¼ï¼ ç»è¿‡éªŒè¯ï¼Œåªè¦ç‚¹å‡»é¡¶éƒ¨çš„ã€Œinstall Zipã€ è“è‰²æ¡éƒ¨åˆ†å·¦ä¾§çš„ã€Œå›¾æ ‡ã€å¤„ï¼Œå°±ä¼šè¿”å› Team Win Recovery Project ç•Œé¢ã€‚ ä¾ç…§ä¸Šé¢çš„å®‰è£…æ­¥éª¤ï¼Œç»§ç»­å®‰è£… Magisk-v17.2.zip æ–‡ä»¶ã€‚ç›´åˆ°ç•Œé¢ä¸­æç¤º ...done æ—¶ï¼Œè¯´æ˜å®‰è£…å®Œæˆã€‚ å®‰è£…å®Œæˆåï¼Œç‚¹å‡»ä¸‹é¢çš„ Reboot System æŒ‰é’®ï¼Œé‡å¯ç³»ç»Ÿã€‚ ä¸è¿‡ï¼Œè¿™æ—¶å€™å‘ç°ç•Œé¢ä¼šæç¤ºè¯¢é—®æ˜¯å¦å®‰è£… TWRP App ï¼Ÿ è¿™é‡Œï¼Œåƒä¸‡ä¸è¦å®‰è£…ã€‚ç›´æ¥ç‚¹å‡»ä¸­é—´çš„ Do Not Install å³å¯ã€‚ å¾…æ‰‹æœºé‡å¯è¿›å…¥ç³»ç»Ÿåï¼Œå¯ä»¥å‘ç°æ‰‹æœºAPPä¸­å¤šäº†ä¸€ä¸ª Magisk çš„è„¸è°±Logoå›¾æ ‡ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªåˆ·æœºè¿‡ç¨‹å°±ç»“æŸäº†ã€‚ éªŒè¯æ˜¯å¦æˆåŠŸRootè‡³äºå¦‚ä½•éªŒè¯æ˜¯å¦æˆåŠŸRootï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å®‰è£…å‡ ä¸ªéœ€è¦è·å–Rootæƒé™çš„è½¯ä»¶å°±å¯ä»¥äº†ã€‚ å¯ä»¥åœ¨ã€Œè„¸è°±Logoã€çš„èœå•ä¸­é€‰æ‹©ã€Œè¶…çº§ç”¨æˆ·ã€ï¼Œä¸ºç›¸åº”çš„è½¯ä»¶å¼€å¯Rootæƒé™ã€‚ ä¼˜åŒ–å»æ‰wifiå‰å·æ ‡è®°åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œé€šè¿‡wifiè”ç½‘ä¹‹åï¼ŒPixelçš„wifiå›¾æ ‡ä¸Šä¼šé»˜è®¤æ˜¾ç¤ºä¸€ä¸ªã€Œå‰å·ã€ã€‚è™½ç„¶èƒ½å¤Ÿæ­£å¸¸è”ç½‘ï¼Œä½†å¯¹äºå¼ºè¿«ç—‡æ¥è¯´ï¼Œè¿˜æ˜¯è§‰å¾—å¾ˆç¢çœ¼ã€‚ å¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒåŸç†æ€§çš„è§£é‡Šæ˜¯ï¼š è°·æ­ŒåŸç”Ÿå®‰å“ç³»ç»Ÿå½“è¿æ¥åˆ°ç§»åŠ¨æ•°æ®ç½‘ç»œæˆ–è€…WIFIç½‘ç»œçš„æ—¶å€™ï¼Œå…¶NetworkMonitoræ¨¡å—ä¼šå‘ç‰¹å®šçš„æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªhttpçš„è¯·æ±‚å¹¶åˆ©ç”¨æ”¶åˆ°çš„å“åº”è¿›è¡Œç½‘ç»œçŠ¶æ€åˆ¤æ–­ã€‚ç”±äºè°·æ­Œçš„æœåŠ¡å™¨è¢«GFWå±è”½ï¼Œæ‰€ä»¥å¯¼è‡´æ²¡æœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªæ—¶å€™è°·æ­Œå®‰å“ç³»ç»Ÿå°±ä¼šåœ¨ä¿¡å·æˆ–è€…wifiä¸Šæ‰“ä¸€ä¸ªæ„Ÿå¹å·æˆ–å‰å·ã€‚ å¯ä»¥é€šè¿‡æ¢æˆv2exçš„éªŒè¯æ–¹å¼æ¥è§£å†³ã€‚åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­æ‰§è¡Œï¼š 1adb shell settings put global captive_portal_https_url https://www.google.cn/generate_204 ç„¶åå¼€å¯é£è¡Œæ¨¡å¼ï¼Œå†å…³é—­é£è¡Œæ¨¡å¼å³è§£å†³ï¼ æ“ä½œå‰ï¼š æ‰§è¡Œå‘½ä»¤ï¼š 12345~/test/pixelâœ adb shell settings put global captive_portal_https_url https://www.google.cn/generate_204~/test/pixelâœ æ“ä½œåï¼š å¦‚æœä½ æƒ³æ¢å¤çš„è¯ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼šï¼ˆæœªäº²æµ‹ï¼‰ 12adb shell settings delete global captive_portal_server adb shell settings put global captive_portal_detection_enabled 1 ç–‘éš¾è§£ç­”fastboot oem unlock or fastboot flashing unlockåœ¨ç½‘ä¸Šæœç´¢åˆ°çš„ä¸€äº›æ•™ç¨‹ä¸­ï¼Œæœ‰çš„è¯´æ˜¯ä½¿ç”¨ fastboot oem unlock æ¥è§£BLï¼Œæœ‰çš„è¯´æ˜¯é€šè¿‡ fastboot flashing unlock æ¥è§£BLã€‚ æœ€ç»ˆåœ¨googleçš„å®˜ç½‘ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†å¦‚ä¸‹çš„ä»‹ç»ï¼š If necessary, unlock the deviceâ€™s bootloader using one of the following methods: If you are updating a Nexus or Pixel device that is manufactured in 2015 or later (for example, a Nexus 5X, Nexus 6P, Pixel, Pixel XL, Pixel 2 or Pixel 2 XL device), run this command: fastboot flashing unlock If you are updating an older device, run this command: fastboot oem unlock æ›´å¤šä»‹ç»ï¼Œè¯·çœ‹ï¼š Factory Images for Nexus and Pixel Devices | Google APIs for Android | Google Developers OEMé”ä¸bootloaderé”çš„å…³ç³»OEMé”æ˜¯é™åˆ¶äº†bootloaderé”ï¼ŒOEMé”ç³»ç»Ÿé»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¿…é¡»åœ¨å¼€å‘è€…ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚ä¹‹å bootloaderé”æ‰èƒ½è¿›è¡Œè§£é”ã€‚ é€šä¿—ä¸€ç‚¹çš„è¯´ï¼ŒOEMé”åªè·Ÿbootloaderé”æœ‰å…³ç³»ï¼Œå’Œä¹‹åçš„Rootæ“ä½œæ²¡æœ‰å…³ç³»ã€‚æ‰€ä»¥å½“è§£é”Bootloaderåç³»ç»Ÿé…ç½®è¢«é‡ç½®äº†ï¼Œå³ä½¿ ã€Œå¼€å‘è€…é€‰é¡¹ã€ä¸­çš„ ã€ŒOEMè§£é”ã€æ˜¾ç¤ºä¸ºç°è‰²ä¸èƒ½æ“ä½œï¼Œä¹Ÿæ— å…³ç´§è¦äº†ã€‚ å‚è€ƒï¼šå…³äºè§£é”bootloaderçš„é‡è¦æ€§.æœºå‹ä»¬åŠ¡å¿…ç»†è¯»,ç”Ÿæ­»é—®é¢˜,è¯·å‹¿å¿½è§†! - Pixel | Pixel XL è®ºå› - æ™ºå‹è®ºå› è§£é”bootloaderçš„å¥½å¤„ æœ€é‡è¦æ˜¯ä¸ºè‡ªå·±çš„æ‰‹æœºä¹°äº†ä»½ä¿é™©,ç•™äº†æ¡ç”Ÿè·¯.å¡æ­» ç³»ç»ŸæŠ½é£æˆ–å˜ç –å,å¯åœ¨bootloaderç•Œé¢ä¸‹çº¿åˆ·åŸå‚é•œåƒæ¢å¤ç³»ç»Ÿã€‚(ä¸è§£é”çš„æ— æ³•åˆ·æœºæ•‘å›) ä½œä¸ºäº²å„¿å­æœºå‹ï¼ŒXDAä¸Šå¾ˆå¤šèµ„æºï¼Œæœ‰å¤§é‡ç¬¬ä¸‰æ–¹ROMã€ä¼˜åŒ–è¡¥ä¸ã€Recooveryã€ROOT è§£é”bootloaderåï¼Œä¸ROOTå’Œä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œä¸å½±å“åœ¨çº¿OTAå‡çº§ã€‚ è§£é”å å¼€æœºGoogle logoä¸‹æœ‰ä¸ªå°é”å’Œä¸¤ç§’é’Ÿçš„è­¦ç¤ºè¯­è¯´ä½ çš„æ‰‹æœºå·²ç»è§£äº†bootloaderé”,æœºå‹ä»¬å¯ä»¥æ— è§†ä¹‹ï¼Œä¸å½±å“ä½¿ç”¨ã€‚ adbpushæ–‡ä»¶æ—¶æƒé™ä¸å¤Ÿåœ¨ä½¿ç”¨å‘½ä»¤ adb push å°†æ–‡ä»¶ twrp-pixel-installer-sailfish-3.2.3-1.zip ä¸Šä¼ åˆ°æ‰‹æœºæ—¶ï¼Œå¯èƒ½ç”±äºæƒé™é—®é¢˜è€ŒæŠ¥é”™ï¼š 1234~/test/pixelâœ adb push twrp-pixel-installer-sailfish-3.2.3-1.zip /adb: error: failed to copy &apos;twrp-pixel-installer-sailfish-3.2.3-1.zip&apos; to &apos;/twrp-pixel-installer-sailfish-3.2.3-1.zip&apos;: remote couldn&apos;t create file: Read-only file systemtwrp-pixel-installer-sailfish-3.2.3-1.zip: 0 files pushed. 22.7 MB/s (1048448 bytes in 0.044s) æˆ‘ä»¬å¯ä»¥é€šè¿‡ adb shell å‘½ä»¤æ¥è¿›å…¥åˆ°æ‰‹æœºçš„bashå‘½ä»¤ä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨åé¢è·Ÿä¸Šbashå‘½ä»¤æ¥æ‰§è¡Œã€‚è¿›è¡ŒéªŒè¯ï¼š adb shell : 1234567891011~/test/pixelâœ adb shellsailfish:/ $ sailfish:/ $ lsls: ./verity_key: Permission deniedls: ./init.rc: Permission deniedls: ./postinstall: Permission deniedls: ./init.usb.configfs.rc: Permission deniedls: ./init.zygote64_32.rc: Permission denied...... æˆ–è€… adb shell mkdir tmp : 123~/test/pixelâœ adb shell mkdir tmpmkdir: &apos;tmp&apos;: Read-only file system å‘ç°ï¼Œæœç„¶æ˜¯å½“å‰ç”¨æˆ·çš„æƒé™ä¸å¤Ÿã€‚ ç»è¿‡éªŒè¯ï¼Œå‘ç°å½“å‰ç”¨æˆ·å¯¹ /sdcard ç›®å½•æ˜¯æœ‰æƒé™è¿›è¡Œæ–‡ä»¶æˆ–ç›®å½•çš„æ“ä½œçš„ã€‚ 12345678910111213~/test/pixelâœ adb shellsailfish:/ $ cd sdcard/sailfish:/sdcard $ lsAlarms Android DCIM Download Movies Music Notifications Pictures Podcasts Ringtonessailfish:/sdcard $ mkdir tmpsailfish:/sdcard $ lsAlarms Android DCIM Download Movies Music Notifications Pictures Podcasts Ringtones tmpsailfish:/sdcard $ rm -rf tmpsailfish:/sdcard $ lsAlarms Android DCIM Download Movies Music Notifications Pictures Podcasts Ringtonessailfish:/sdcard $ exit ç å­—ä¸æ˜“ï¼Œä»¥ä¸Šæ“ä½œå‡ä¸ºæœ¬äººå®é™…æ“ä½œå¹¶éªŒè¯ã€‚å¦‚æœè¯¥æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå¯ä»¥èµ é€ä¸€æ¯å’–å•¡ï¼ï¼ï¼ ç›¸å…³é“¾æ¥å·¥å…· Releases Â· shadowsocks/shadowsocks-android Download TWRP for sailfish Releases Â· topjohnwu/Magisk æ•™ç¨‹ Pixel XLè§£é”BLã€åˆ·å…¥TwrpåŠRootæ•™ç¨‹ | XZYMOEâ€™S BLOG â˜† ä» Bootloader è§£é”åˆ°å¿…å¤‡åº”ç”¨æ¨èï¼šæˆ‘çš„ Google Pixel æŠ˜è…¾æ‰‹è®° - å°‘æ•°æ´¾ Android ADBå‘½ä»¤å¤§å…¨(é€šè¿‡ADBå‘½ä»¤æŸ¥çœ‹wifiå¯†ç ã€MACåœ°å€ã€è®¾å¤‡ä¿¡æ¯ã€æ“ä½œæ–‡ä»¶ã€æŸ¥çœ‹æ–‡ä»¶ã€æ—¥å¿—ä¿¡æ¯ã€å¸è½½ã€å¯åŠ¨å’Œå®‰è£…APKç­‰) - mingyçš„ä¸“æ  - CSDNåšå®¢]]></content>
      <tags>
        <tag>Skill</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OmniGraffleå¸¸ç”¨å¿«æ·é”®]]></title>
    <url>%2F2018%2F10%2F10%2Fomnigraffle-shortcut-keys%2F</url>
    <content type="text"><![CDATA[OmniGraffle æ˜¯ Mac ä¸Šçš„ç»˜å›¾åˆ©å™¨ã€‚Graffle åœ¨å¾ˆå¤šæ–¹é¢å¯¹æ ‡ Windows ç³»ç»Ÿä¸Šçš„ Microsoft Visioï¼Œæ˜¯åˆ¶ä½œå„ç§æ–‡æ¡£çš„ç»å¦™å·¥å…·ã€‚ å˜æ¢ç§»åŠ¨æ”¾å¤§ï¼šCmd+Shift+. æˆ– z+ç‚¹å‡» ç¼©å°ï¼šCmd+Shift+, æˆ– z+Option+ç‚¹å‡» ç¼©æ”¾ï¼šæŒ‰ä½Cmd+åŒæŒ‡æ¨ç§» ä¸­å¿ƒç¼©æ”¾ï¼šæŒ‰ä½Cmd + æŒ‰ä½Option + åŒæŒ‡æ¨ç§» æ—‹è½¬å¯¹è±¡ï¼šç‚¹å‡»å¯¹è±¡ + é€‰æ‹©å®šä½å— + æ—‹è½¬ å¸¸ç”¨å·¥å…·é€‰å–å·¥å…·ï¼šæŒ‰ä½ v ä¸æ”¾å¹¶æ‹–æ‹½å¯¹è±¡ æˆ– æŒ‰ 1 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ å½¢çŠ¶å·¥å…·ï¼šæŒ‰ä½ s ä¸æ”¾å¹¶åœ¨ç©ºç™½å¤„æ‹–æ‹½ æˆ– æŒ‰ 2 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ çº¿æ¡å·¥å…·ï¼šæŒ‰ä½ c ä¸æ”¾å…ˆåç‚¹å‡»ç›®æ ‡å½¢çŠ¶è¿æ¥ æˆ– æŒ‰ 3 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ æ–‡å­—å·¥å…·ï¼šæŒ‰ä½ t å¹¶å•å‡»åè¾“å…¥æ–‡å­— æˆ– æŒ‰ 4 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ ç£åŒ–å·¥å…·ï¼šæŒ‰ä½ m ä¸æ”¾å¹¶ç‚¹å‡»å½¢çŠ¶å†…ä»»æ„ä½ç½® æˆ– æŒ‰ 9 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ å…¶ä»–ï¼š å¤åˆ¶å¤åˆ¶å¯¹è±¡ï¼šé€‰ä¸­å¯¹è±¡ + Cmd+d ç£åŒ–ç‚¹æ·»åŠ ç£åŒ–ç‚¹ï¼šæŒ‰ä½ m ä¸æ”¾å¹¶ç‚¹å‡»å½¢çŠ¶å†…ä»»æ„ä½ç½® æˆ– æŒ‰ 9 åˆ‡æ¢ï¼šæŒ‰ä¸€æ¬¡é€‰ä¸­ ï¼›æŒ‰äºŒæ¬¡ä¿æŒé€‰ä¸­ åˆ é™¤ç£åŒ–ç‚¹ï¼šåœ¨ç£åŒ–æŒ‰é’®ä¿æŒé€‰ä¸­çŠ¶æ€ä¸‹ + Option + ç‚¹å‡»ç£åŒ–ç‚¹ æ£€æŸ¥å™¨é¢æ¿åˆ‡æ¢æ£€æŸ¥å™¨é¢æ¿ï¼šCmd+1/2/3/4/5 å¯¹è±¡æ£€æŸ¥å™¨ï¼šCmd+1 ç±»å‹æ£€æŸ¥å™¨ï¼šCmd+2 â€¦ä»¥æ­¤ç±»æ¨ã€‚ å±‚çº§å‰ç§»å¯¹è±¡ï¼šCmd+Option+F åç§»å¯¹è±¡ï¼šCmd+Option+B ç½®äºæœ€å‰ï¼šCmd+Shift+F ç½®äºæœ€åï¼šCmd+Shift+B é”å®šï¼šé€‰ä¸­å¯¹è±¡ + Cmd+L è§£é”ï¼šé€‰ä¸­å¯¹è±¡ + Cmd+Option+L åˆ›å»ºç¾¤ç»„ï¼šCmd+Shift+G (Group) è§£æ•£ç¾¤ç»„ï¼šCmd+Shift+U (Ungroup) å¯¼å‡ºåœ¨å°†å®Œæˆåçš„æµç¨‹å›¾å¯¼å‡ºæˆjpgç­‰å…¶ä»–æ ¼å¼æ—¶ï¼Œæœ‰ä¸€ä¸ªã€Œå¯¼å‡ºåŒºåŸŸã€çš„é€‰é¡¹ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯ã€Œæ‰€æœ‰å¯¹è±¡ã€ï¼Œä½†é€‰æ‹©è¿™ç§åå¯¼å‡ºçš„å›¾ç‰‡ä¸­å¯èƒ½å‡ºç°å…ƒç´ æ˜¾ç¤ºçš„ä¸å®Œæ•´çš„æƒ…å†µã€‚ è¦æƒ³å°†æ‰€æœ‰å…ƒç´ éƒ½æ˜¾ç¤ºï¼Œé‚£ä¹ˆéœ€è¦é€‰æ‹©ã€Œå½“å‰ç‰ˆé¢ã€é€‰é¡¹ã€‚ ç›¸å…³å‚è€ƒ Omnigraffleå¿«æ·é”® - Shiyu_Huang - åšå®¢å›­ OmniGraffle åŸºç¡€å…¥é—¨ï¼ˆä¸€ï¼‰ï¼šä»å·¥å…·æ å¼€å§‹ - å°‘æ•°æ´¾]]></content>
      <tags>
        <tag>Skill</tag>
        <tag>Tools</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerå›¾å½¢åŒ–ç®¡ç†å·¥å…·Portainer]]></title>
    <url>%2F2018%2F09%2F30%2Fdocker-management-tool-portainer%2F</url>
    <content type="text"><![CDATA[Portainer æ˜¯ä¸€ä¸ªè½»é‡çº§çš„Dockerå®¹å™¨ç®¡ç†ç•Œé¢ï¼Œå¯è®©æ‚¨è½»æ¾ç®¡ç† Docker ä¸»æœº æˆ– Swarm é›†ç¾¤ã€‚ åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²äº†å¾ˆå¤šDockerå®¹å™¨åï¼Œæ€»è§‰å¾—è¿˜å·®ç‚¹ä»€ä¹ˆã€‚æ„Ÿè§‰ç¡®å®éœ€è¦ä¸€ä¸ªå›¾å½¢åŒ–çš„å®¹å™¨ç®¡ç†å·¥å…·ï¼Œä¾¿äºç›´è§‚çš„æŸ¥çœ‹ç›®å‰æœåŠ¡å™¨ä¸­å®¹å™¨çš„çŠ¶æ€ç­‰ã€‚ é€šè¿‡å¯¹å„ç§ç®¡ç†å·¥å…·çš„æ¯”è¾ƒï¼Œæœ€åç¡®å®šä½¿ç”¨ Portainer è¿™æ¬¾è½»é‡çº§çš„ã€‚æ¯•ç«Ÿæ˜¯ä¸ªäººæœåŠ¡å™¨ï¼Œä¹Ÿç”¨ä¸åˆ°ç‰¹åˆ«å¤§çš„é‡çº§ã€‚ éƒ¨ç½²è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨å®˜ç½‘æä¾›çš„ docker-compose.yml æ¥å¯åŠ¨portainerå®¹å™¨ã€‚ä¸‹è½½è¯¥æ–‡ä»¶: Download the Compose file ï¼Œæ›´å¤šçš„å®‰è£…ä¿¡æ¯å¯è§å®˜æ–¹æ–‡æ¡£ï¼šDeployment â€” Portainer 1.20.1 documentation ã€‚ 1234567891011121314version: &apos;2&apos;services: portainer: image: portainer/portainer ports: - &quot;9000:9000&quot; command: -H unix:///var/run/docker.sock volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/datavolumes: portainer_data: ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œéœ€è¦è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç ã€‚ ç®¡ç†ç•Œé¢ï¼š æ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ ç›¸å…³å‚è€ƒ Deployment â€” Portainer 1.20.1 documentation]]></content>
      <categories>
        <category>Dockerå®¹å™¨æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPSæ³›åŸŸåè¯ä¹¦ç”³è¯·ä¹‹ä¸‰-ä¸ƒç‰›äº‘å›¾ç‰‡é“¾æ¥å‡çº§https]]></title>
    <url>%2F2018%2F09%2F24%2Fhttps-certificate-three-of-qiniu-https%2F</url>
    <content type="text"><![CDATA[ä¸Šç¯‡æ–‡ç«  HTTPSæ³›åŸŸåè¯ä¹¦ç”³è¯·ä¹‹äºŒ-Nginxé…ç½® è¯´é“ï¼Œè¦è®©æˆ‘çš„åšå®¢ https://www.itfanr.cc ç”¨ä¸Šå…¨ç«™çš„HTTPSå®‰å…¨æ¨¡å¼ï¼Œå¿…é¡»è§£å†³ä¸ƒç‰›äº‘å›¾ç‰‡é“¾æ¥httpçš„é—®é¢˜ã€‚ è€Œä¸ƒç‰›äº‘å®˜æ–¹æ¨èçš„httpsæ–¹æ¡ˆï¼Œè´¹ç”¨æ¯”ä»·é«˜ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå…è´¹çš„æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯é€šè¿‡ è‡ªå®šä¹‰åŸŸå æ¥è®¾ç½®ã€‚ ä¹Ÿå°±æ˜¯åŸŸåæˆ‘ä»¬è‡ªå®šä¹‰ï¼Œè¯ä¹¦ä½¿ç”¨ä¹‹å‰è®¾ç½®çš„æ³›åŸŸåè¯ä¹¦ï¼Œé‚£ä¹ˆé—®é¢˜å°±æå®šäº†ã€‚ åœ¨ä¸ƒç‰›äº‘ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸååœ¨ä¸ªäººçš„ â€œå­˜å‚¨ç©ºé—´â€ è®¾ç½®èœå•ä¸­é€‰æ‹© â€œç»‘å®šåŸŸåâ€ ï¼ŒåŸŸåç±»å‹ä¸­é€‰æ‹© â€œæ™®é€šåŸŸåâ€ å³å¯ã€‚ åœ¨ â€œåŠ é€ŸåŸŸåâ€ å¤„è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„åŸŸåï¼Œæ¯”å¦‚æˆ‘è®¾ç½®çš„æ˜¯ qiniu.itfanr.cc ã€‚ â€œé€šä¿¡åè®®â€ é€‰æ‹© HTTPS æ–¹å¼ã€‚ ç”±äºè¦ä¸ºè‡ªå®šä¹‰åŸŸåæ·»åŠ è¯ä¹¦æ–‡ä»¶ï¼Œè€Œä¹‹å‰ä¹Ÿæ²¡æœ‰æ·»åŠ è¿‡ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹© â€œSSL è¯ä¹¦ç®¡ç†â€ æ¥è®¾ç½®ã€‚ åœ¨ â€œSSLè¯ä¹¦æœåŠ¡ &gt; è¯ä¹¦ç®¡ç†â€ ç•Œé¢ä¸­ï¼Œé€‰æ‹© â€œä¸Šä¼ è‡ªæœ‰è¯ä¹¦â€ æ¥æ·»åŠ ä¹‹å‰ç”³è¯·åˆ°çš„è¯ä¹¦æ–‡ä»¶ã€‚ è®¾ç½®å®Œæˆåï¼Œç­‰å¾…ä¸ƒç‰›äº‘å¤„ç†ã€‚ å¤„ç†å®Œæˆåï¼Œä¼šç»™å‡ºå¦‚ä¸‹æç¤ºï¼š åœ¨é˜¿é‡Œäº‘è®¾ç½®åŸŸåCNAMEä¸ƒç‰›äº‘è‡ªå®šä¹‰åŸŸåæ·»åŠ æˆåŠŸåï¼Œè¿˜è¦æ·»åŠ åŸŸåçš„è§£æã€‚ä¹Ÿå°±æ˜¯éœ€è¦åœ¨åŸŸåæœåŠ¡å•†å¤„æ·»åŠ ä¸€æ¡ CNAME è®°å½•ã€‚ ä»¥ä¸‹æ˜¯æˆ‘åœ¨é˜¿é‡Œäº‘ä¸­æ·»åŠ çš„é…ç½®ï¼š ç¨ç­‰ç‰‡åˆ»ï¼Œç­‰å¾…ç”Ÿæ•ˆã€‚ è®¾ç½®ä¸ƒç‰›äº‘å›¾ç‰‡å¤–é“¾é»˜è®¤åŸŸååŸŸåè§£ææˆåŠŸåï¼Œè¿˜è¦åœ¨ä¸ƒç‰›äº‘ä¸­æ·»åŠ å›¾ç‰‡çš„é»˜è®¤åŸŸåã€‚ æ‰“å¼€ä¸ƒç‰›äº‘ â€œå­˜å‚¨ç©ºé—´â€ è®¾ç½®ï¼Œåœ¨ â€œå†…å®¹ç®¡ç†â€ ä¸­çš„ â€œå¤–é“¾é»˜è®¤åŸŸåâ€ å¤„é€‰æ‹©åˆšåˆšæ·»åŠ çš„ è‡ªå®šä¹‰åŸŸåï¼Œä¹‹å â€œä¿å­˜é»˜è®¤åŸŸåâ€ å³å¯ã€‚ é€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼Œé€šè¿‡è‡ªå®šä¹‰åŸŸåè®¿é—®ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»èƒ½æ­£å¸¸æ”¯æŒhttpsäº†ã€‚ å›¾ç‰‡ä¼˜åŒ–ä¸€èˆ¬ç›´æ¥æˆªå›¾æˆ–è€…ä¸Šä¼ æœ¬åœ°çš„å›¾ç‰‡åˆ°ä¸ƒç‰›äº‘åï¼Œé€šè¿‡é“¾æ¥ç›´æ¥è®¿é—®ï¼Œå›¾ç‰‡ä½“ç§¯éƒ½ä¼šå¾ˆå¤§ï¼ŒåŠ è½½æ—¶é—´ä¹Ÿä¼šå¾ˆé•¿ã€‚ è€Œä¸ƒç‰›äº‘ä¸­ä¹Ÿæœ‰ç›¸å…³çš„å›¾ç‰‡ä¼˜åŒ–è®¾ç½®ã€‚æ‰“å¼€ â€œå­˜å‚¨ç©ºé—´è®¾ç½®â€ â€“ â€œå›¾ç‰‡æ ·å¼â€ é€‰é¡¹ï¼Œåœ¨è¿™é‡Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„å›¾ç‰‡ä¼˜åŒ–æ–¹æ¡ˆã€‚ åœ¨ â€œæ ·å¼åˆ†éš”ç¬¦è®¾ç½®â€ ä¸­ï¼Œå¯ä»¥è®¾ç½®åˆ†éš”ç¬¦ã€‚ é‚£ä¹ˆï¼Œæ·»åŠ ä¸Šå›¾ç‰‡ä¼˜åŒ–çš„é“¾æ¥å°±å¦‚ä¸‹ï¼šæˆ‘çš„å›¾ç‰‡æ ·å¼å®šä¹‰ä¸ºblogï¼Œåˆ†éš”ç¬¦ä¸º - 1https://qiniu.itfanr.cc/blog/170809/26B1D9j4eI.jpg-blog æ›¿æ¢Hexoåšå®¢ä¸­å·²æœ‰çš„å›¾ç‰‡é“¾æ¥å› ä¸ºä¹‹å‰çš„æ–‡ç« ä¸­ä¹Ÿæœ‰æ·»åŠ å¾ˆå¤šçš„ä¸ƒç‰›äº‘å›¾ç‰‡é“¾æ¥ï¼Œä½†éƒ½æ˜¯http çš„ï¼Œæƒ³è¦ä¸€ç¯‡æ–‡ç« ä¸€ç¯‡æ–‡ç« çš„æ›¿æ¢ä¹Ÿå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å°±å†™äº†ä¸€ä¸ªPyè„šæœ¬æ¥åšæ›¿æ¢çš„äº‹ã€‚ Pyè„šæœ¬ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼šå®Œæ•´ä»£ç æŸ¥çœ‹ï¼šLeafney/md-qiniu-imges-replace: markdownæ–‡ä»¶ä¸­ä¸ƒç‰›äº‘å›¾ç‰‡é“¾æ¥æ›¿æ¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960def md_img_replace(md_file): &quot;&quot;&quot; æ›¿æ¢mdæ–‡ä»¶ä¸­çš„å›¾ç‰‡é“¾æ¥ &quot;&quot;&quot; result=False post=md_read(md_file) matches = re.compile( &apos;!\\[.*?\\]\\((.*?)\\)|&lt;img.*?src=[\&apos;\&quot;](.*?)[\&apos;\&quot;].*?&gt;&apos;).findall(post) if matches and len(matches)&gt;0: # è¯¥mdæ–‡ä»¶ä¸­æœ‰å›¾ç‰‡ # è¾“å‡ºæ–‡ä»¶åç§° print(&apos;æ–‡ä»¶ï¼š[&#123;0&#125;] ä¸­å«æœ‰å›¾ç‰‡&apos;.format(md_file)) new_post=post for sub_match in matches: # æ­£åˆ™é‡ŒåŒ…å«æˆ–ï¼Œæ‰€ä»¥è¿™é‡Œsub_matthæ˜¯å…ƒç»„ # print(sub_match) for match in sub_match: if match and len(match)&gt;0: # å¾—åˆ°å•å¼ å›¾ç‰‡é“¾æ¥ print(&apos;æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[&#123;0&#125;]&apos;.format(match)) # åœ¨è¿™é‡Œéå†ä¸€éåï¼Œå‘ç°æˆ‘çš„æ–‡ç« ä¸­å›¾ç‰‡é“¾æ¥çš„ç‰¹ç‚¹ä¸»è¦æœ‰ä¸‰ç§æ ¼å¼ï¼š &quot;&quot;&quot; https://qiniu.itfanr.cc/blog/20180924112100.png?imageslim -- å·²ç»ç¬¦åˆè¦æ±‚çš„ http://ouej55gp9.bkt.clouddn.com/blog/20180920204113.png -- åªæœ‰æ—§ç‰ˆé“¾æ¥çš„ http://ouej55gp9.bkt.clouddn.com/blog/180116/B2c2Deah5B.png?imageslim -- æ—§ç‰ˆé“¾æ¥å¸¦ä¼˜åŒ–å‚æ•°çš„ æ‰€ä»¥ï¼Œä¸‹é¢çš„æ“ä½œä¸»è¦é’ˆå¯¹äºä¸Šé¢çš„ä¸‰ç§æƒ…å†µæ¥å¤„ç† ***** æ‰€ä»¥ï¼Œè¿™é‡Œè¦æ”¹æˆé’ˆå¯¹äºä½ è‡ªå·±çš„æ–‡ç« å›¾ç‰‡é“¾æ¥æ¥å¤„ç† ***** &quot;&quot;&quot; # print(&apos;----------------&apos;) # åˆ¤æ–­å›¾ç‰‡åŸŸåæ˜¯å¦ä¸º http://ouej55gp9.bkt.clouddn.com/ æ˜¯çš„è¯ï¼Œåˆ™æ›¿æ¢ä¸º https://qiniu.itfanr.cc if match.startswith(&apos;http://ouej55gp9.bkt.clouddn.com&apos;): # è®°å½•ä¸‹æ›¿æ¢å‰çš„é“¾æ¥ old_url=match new_url = match.replace( &apos;http://ouej55gp9.bkt.clouddn.com&apos;, &apos;https://qiniu.itfanr.cc&apos;) # print(&apos;step_1_new_url:[&#123;0&#125;]&apos;.format(new_url)) # åˆ¤æ–­æ˜¯å¦ä»¥ ?imageslim ç»“å°¾ if not match.endswith(&apos;imageslim&apos;): # ä¸æ˜¯ï¼Œåœ¨ç»“å°¾æ·»åŠ  new_url += &apos;?imageslim&apos; print(&apos;step_2_new_url:[&#123;0&#125;]&apos;.format(new_url)) # æ›¿æ¢ post ä¸­çš„ old_urlä¸º new_urlï¼Œå¹¶å°†æ–°å†…å®¹å†™å›æ–‡ä»¶ new_post = new_post.replace(old_url, new_url) result = True print(&apos;----------------&apos;) if result: # å°†å†…å®¹é‡æ–°å†™å›æ–‡ä»¶ # print(new_post) md_write(md_file,new_post) print(&apos;ok-ä¿®æ”¹æˆåŠŸ&apos;) print(&apos;****************&apos;) return result æ‰§è¡Œè¿‡ç¨‹è®°å½•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142æ–‡ä»¶ï¼š[./_posts/https-certificate-two-of-nginx-settings.md] ä¸­å«æœ‰å›¾ç‰‡æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919001532.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919001532.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919180924.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919180924.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919171901.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919171901.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[https://qiniu.itfanr.cc/blog/20180924000202.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[https://qiniu.itfanr.cc/blog/20180924000229.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919165205.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919165205.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919170111.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919170111.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919173643.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919173643.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919180924.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919180924.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180919180907.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180919180907.png?imageslim]----------------ok-ä¿®æ”¹æˆåŠŸ****************æ–‡ä»¶ï¼š[./_posts/https-certificate-one-of-application.md] ä¸­å«æœ‰å›¾ç‰‡æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[https://qiniu.itfanr.cc/blog/20180921175821.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180918225700.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180918225700.png?imageslim]----------------æ‰¾åˆ°å›¾ç‰‡é“¾æ¥ï¼š[http://ouej55gp9.bkt.clouddn.com/blog/20180918232923.png]step_2_new_url:[https://qiniu.itfanr.cc/blog/20180918232923.png?imageslim]----------------ok-ä¿®æ”¹æˆåŠŸ****************]]></content>
      <categories>
        <category>HTTPS</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPSæ³›åŸŸåè¯ä¹¦ç”³è¯·ä¹‹äºŒ-Nginxé…ç½®]]></title>
    <url>%2F2018%2F09%2F24%2Fhttps-certificate-two-of-nginx-settings%2F</url>
    <content type="text"><![CDATA[åœ¨ç”³è¯·æˆåŠŸhttpsçš„æ³›åŸŸåè¯ä¹¦è´¦å·ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸ºä¸»åŸŸåä»¥åŠäºŒçº§åŸŸåé…ç½®æ·»åŠ è¯ä¹¦æ–‡ä»¶ï¼Œä»¥è®©â€œå°ç»¿é”â€ æ˜¾ç¤ºå‡ºæ¥ã€‚ æ˜¾ç¤ºå°ç»¿é”å´æç¤º404NotFoundä¸Šç¯‡æ–‡ç« æœ«å°¾ï¼Œæˆ‘ä¸ºäºŒçº§åŸŸå gogit.itfanr.cc çš„Nginxé…ç½®ä¸­æŒ‡å®šäº†è¯ä¹¦ç›®å½•ï¼Œç½‘ç«™ä¹Ÿæ­£å¸¸åº”ç”¨ä¸Šäº†httpsï¼š 1234567891011121314151617181920212223server &#123; listen 443 ssl; server_name gogit.itfanr.cc; ssl_certificate /etc/acme.sh/itfanr.cc/fullchain.cer; ssl_certificate_key /etc/acme.sh/itfanr.cc/itfanr.cc.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; location / &#123; proxy_pass http://127.0.0.1:3000/; &#125;&#125;server &#123; listen 80; server_name gogit.itfanr.cc; return 301 https://$server_name$request_uri;&#125; ä½†å½“æˆ‘æŒ‰ç…§ä¸Šé¢çš„é…ç½®ä¸ºä¸»åŸŸå www.itfanr.cc ä¹ŸæŒ‡å®šhttpsè¯ä¹¦åï¼š 1234567891011121314151617181920212223server &#123; listen 443 ssl; server_name www.itfanr.cc; ssl_certificate /etc/acme.sh/itfanr.cc/fullchain.cer; ssl_certificate_key /etc/acme.sh/itfanr.cc/itfanr.cc.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; location / &#123; proxy_pass http://localhost:8080/; &#125;&#125;server &#123; listen 80; server_name www.itfanr.cc; return 301 https://$server_name$request_uri;&#125; ç»“æœï¼Œé¡µé¢å´æ˜¾ç¤ºäº† 404 Not Found çš„é”™è¯¯ã€‚ è§£å†³å¤šåŸŸåä¸‹è®¾ç½®è¯ä¹¦é€šè¿‡ç›¸å…³é—®é¢˜çš„æœç´¢ï¼Œç»“æœå´æ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆæœ‰æ•ˆçš„è§£å†³æ–¹æ³•ã€‚å¦å¤–ç”±äºæˆ‘å¯¹Nginxçš„é…ç½®ä¹Ÿä¸æ˜¯ç‰¹åˆ«ç²¾é€šï¼Œæ‰€ä»¥ä¸€ä¸‹å­é™·å…¥äº†è¿·èŒ«ä¸­ã€‚ åæ¥ï¼Œåœ¨ä¸€ç¯‡ç›¸å…³æ–‡ç«  Letâ€™s Encrypt æ³›åŸŸåè¯ä¹¦ç”³è¯·åŠé…ç½® ä¸­æ‰¾åˆ°äº†ä¸€ç§æ–¹æ³•ã€‚ ç¬¬ä¸€æ­¥åœ¨Nginxçš„ snippets ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œå‘½åä¸º ssl-itfanr.confï¼Œå†…å®¹ç”¨æ¥è®¾ç½®SSLç›¸å…³çš„é…ç½®ï¼š 1234567891011121314151617181920212223242526272829# /etc/nginx/snippets/ssl-itfanr.confserver_tokens off;ssl_session_cache shared:SSL:10m;ssl_session_timeout 60m;ssl_session_tickets on;ssl_stapling on;ssl_stapling_verify on;resolver 8.8.4.4 8.8.8.8 valid=300s;resolver_timeout 10s;ssl_prefer_server_ciphers on;# è¯ä¹¦è·¯å¾„ ç»å¯¹åœ°å€ssl_certificate /etc/acme.sh/itfanr.cc/fullchain.cer;ssl_certificate_key /etc/acme.sh/itfanr.cc/itfanr.cc.key;ssl_protocols TLSv1 TLSv1.1 TLSv1.2;ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:ECDHE-RSA-AES128-GCM-SHA256:AES256+EECDH:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4&quot;;add_header Strict-Transport-Security &quot;max-age=31536000;includeSubDomains;preload&quot;;add_header X-Frame-Options deny;add_header X-Content-Type-Options nosniff;add_header x-xss-protection &quot;1; mode=block&quot;;add_header Content-Security-Policy &quot;default-src &apos;self&apos;; script-src &apos;self&apos; &apos;unsafe-inline&apos; &apos;unsafe-eval&apos; blob: https:; connect-src &apos;self&apos; https:; img-src &apos;self&apos; data: https: blob:; style-src &apos;unsafe-inline&apos; https:; font-src https:&quot;; ç¬¬äºŒæ­¥ç„¶ååœ¨ Nginx ä¸»é…ç½®æ–‡ä»¶ä¸­å¼€å¯ SSL æ”¯æŒï¼š 1234567891011121314# /etc/nginx/nginx.confhttp &#123; ... ... ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ... ...&#125; æˆ‘çš„é…ç½®æ–‡ä»¶ä¸­ SSLé…ç½® è¿™é‡Œé»˜è®¤æ˜¯å¯ç”¨çŠ¶æ€ï¼Œæ‰€ä»¥ä¿æŒé»˜è®¤å³å¯ã€‚ ç¬¬ä¸‰æ­¥ä¿®æ”¹åŸŸåçš„é…ç½®æ–‡ä»¶ã€‚ æ¯”å¦‚ï¼Œä¿®æ”¹æˆ‘çš„ç½‘ç«™ä¸»åŸŸå itfanr.cc é…ç½®æ–‡ä»¶å¦‚ä¸‹: 123456789101112131415161718192021# /etc/nginx/conf.d/itfanr.confserver &#123; listen 80; listen [::]:80; server_name itfanr.cc www.itfanr.cc; return 301 https://$server_name$request_uri;&#125;server &#123; listen 443 default_server; listen [::]:443 default_server; server_name itfanr.cc www.itfanr.cc; include snippets/ssl-itfanr.conf; location / &#123; proxy_pass http://localhost:8080/; &#125;&#125; åŒæ—¶ï¼Œä¿®æ”¹äºŒçº§åŸŸå gogit.itfanr.cc çš„é…ç½®æ–‡ä»¶ï¼š 12345678910111213141516171819# /etc/nginx/conf.d/gogit.confserver &#123; listen 80; server_name gogit.itfanr.cc; return 301 https://$server_name$request_uri;&#125;server &#123; listen 443 ssl; listen [::]:443 ssl; server_name gogit.itfanr.cc; include snippets/ssl-itfanr.conf; location / &#123; proxy_pass http://127.0.0.1:3000/; &#125;&#125; å…¶ä¸­ï¼Œå…³é”®çš„ä¸€ç‚¹å°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åŒ…å«SSLçš„é…ç½®æ–‡ä»¶ï¼š 1include snippets/ssl-itfanr.conf; ç¬¬å››æ­¥å¦‚æœè¿˜æœ‰å…¶ä»–çš„äºŒçº§åŸŸåï¼ŒåŒæ ·ä¾ç…§ä¸Šé¢çš„æ–¹æ³•è¿›è¡Œé…ç½®ï¼Œç„¶åé‡æ–°è½½å…¥Nginxé…ç½®æ–‡ä»¶ã€‚ åœ¨é‡è½½ä¹‹å‰ï¼Œå¯ä»¥å…ˆéªŒè¯ä¸€ä¸‹åˆšåˆšä¿®æ”¹çš„é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯¯ï¼š 123$ sudo nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful æ— è¯¯åï¼Œå†æ‰§è¡Œé‡è½½æ“ä½œï¼š 1$ sudo nginx -s reload æ­¤æ—¶ï¼Œå†æ¬¡è®¿é—®ä¸¤ä¸ªåŸŸååœ°å€ï¼Œå¯ä»¥å‘ç°éƒ½èƒ½å¤Ÿæ­£å¸¸è®¿é—®ä¸”éƒ½æ˜¯httpså®‰å…¨è¿æ¥äº†ã€‚ itfanr.cc: gogit.itfanr.cc: è®¾ç½®é»˜è®¤ç«™ç‚¹å› ä¸ºæˆ‘çš„åŸŸåè®¾ç½®äº†æ”¯æŒæ³›åŸŸåï¼Œæ‰€ä»¥æ”¯æŒçš„äºŒçº§åŸŸåéƒ½ä¼šè·³è½¬åˆ°æˆ‘çš„æœåŠ¡å™¨çš„IPåœ°å€ã€‚ é‚£ä¹ˆï¼Œå¯¹äºä¸€äº›æˆ‘ä»¬æ²¡æœ‰æ·»åŠ åˆ°äºŒçº§åŸŸååœ¨æ²¡æœ‰è¿›è¡Œå®šä¹‰æ—¶ï¼Œä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±éœ€è¦è®¾ç½® é»˜è®¤ç«™ç‚¹ äº†ã€‚ ä¹Ÿå°±æ˜¯é€šè¿‡å‚æ•° default_server æ¥æŒ‡å®šã€‚ æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ /etc/nginx/sites-available/default æ–‡ä»¶ï¼š 1234567server &#123; listen 80 default_server; listen [::]:80 default_server; ... ... root /var/www/html; &#125; ä¸Šé¢çš„è®¾ç½®è¯´æ˜ï¼Œå½“è®¿é—®åŸŸåæ˜¯æ²¡æœ‰åŒ¹é…åˆ°æˆ‘ä»¬æ·»åŠ çš„åŸŸåï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›é»˜è®¤çš„åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¿™é‡Œçš„ Nginxé»˜è®¤çš„é¡µé¢ã€‚ æ¯”å¦‚ï¼Œæˆ‘è®¿é—® http://abc.itfanr.cc æ—¶ï¼š è€Œè¯¥æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰é…ç½®å½“ä½¿ç”¨ https æ–¹å¼è®¿é—®æ—¶ï¼Œè¦è¿”å›ä»€ä¹ˆé»˜è®¤é¡µé¢ã€‚æ‰€ä»¥æˆ‘åœ¨ä¸Šé¢çš„ itfanr.confé…ç½®ä¸­æ·»åŠ äº†ä¸€é¡¹ï¼š 12345...listen 443 default_server;listen [::]:443 default_server;server_name itfanr.cc www.itfanr.cc;... é»˜è®¤è¿”å›æˆ‘çš„åšå®¢åœ°å€ã€‚æ¯”å¦‚è®¿é—® https://abc.itfanr.cc æ—¶ï¼š å¦å¤–ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼šåªèƒ½è®¾ç½®ä¸€ä¸ªç½‘å€ä¸ºé»˜è®¤åœ°å€ï¼Œå½“è®¾ç½®äº†å¤šä¸ªæ—¶ä¼šæç¤ºé”™è¯¯ï¼š 123$ sudo nginx -tnginx: [emerg] a duplicate default server for 0.0.0.0:80 in /etc/nginx/sites-enabled/default:17nginx: configuration file /etc/nginx/nginx.conf test failed è§£å†³ç½‘ç«™ä¸­çš„ data ç±»å‹å­—ä½“å›¾ç‰‡æ— æ³•è½½å…¥é—®é¢˜é…ç½®å¥½Nginxçš„ https é…ç½®åï¼Œå†æ¬¡è¯·æ±‚ç½‘å€ https://gogit.itfanr.ccï¼Œå‘ç°æµè§ˆå™¨åœ°å€æ ä¸­å·²ç»æ˜¾ç¤ºäº†å®‰å…¨çš„ â€œå°ç»¿é”â€ æ ‡å¿—ã€‚ä½†æ˜¯ä¸€æ‰“å¼€Chromeæµè§ˆå™¨çš„F12è°ƒè¯•å·¥å…·ï¼Œå‘ç°æœ‰ä¸€äº›è¯·æ±‚æ˜¯æŠ¥é”™çš„ã€‚ å¯ä»¥å‘ç°ï¼ŒæŠ¥é”™çš„åŸºæœ¬éƒ½æ˜¯å‰ç¼€ä¸º data:application ç±»å‹çš„å­—ä½“å›¾ç‰‡æ–‡ä»¶ã€‚ é€šè¿‡æŸ¥è¯¢ï¼Œåœ¨ Content-Security-Policy æ®µä¸­åº”è¯¥åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š 1font-src &apos;self&apos; data:; æ‰€ä»¥åªéœ€è¦åœ¨ font-src å’Œ https ä¹‹é—´æ·»åŠ  ï¼š&#39;self&#39; data: å³å¯ã€‚æ³¨æ„å‰åä¹‹é—´è¦ç”¨ç©ºæ ¼åˆ†éš”ã€‚ åŸï¼š 123# /etc/nginx/snippets/ssl-itfanr.confadd_header Content-Security-Policy &quot;default-src &apos;self&apos;; script-src &apos;self&apos; &apos;unsafe-inline&apos; &apos;unsafe-eval&apos; blob: https:; connect-src &apos;self&apos; https:; img-src &apos;self&apos; data: https: blob:; style-src &apos;unsafe-inline&apos; https:; font-src https:&quot;; ä¿®æ”¹åï¼š 123# /etc/nginx/snippets/ssl-itfanr.confadd_header Content-Security-Policy &quot;default-src &apos;self&apos;; script-src &apos;self&apos; &apos;unsafe-inline&apos; &apos;unsafe-eval&apos; blob: https:; connect-src &apos;self&apos; https:; img-src &apos;self&apos; data: https: blob:; style-src &apos;unsafe-inline&apos; https:; font-src &apos;self&apos; data: https:&quot;; ä¿®æ”¹å®Œæˆåï¼Œé‡æ–°è½½å…¥Nginxé…ç½®ï¼Œå†æ¬¡åˆ·æ–°ç½‘ç«™ï¼Œå‘ç°å·²ç»æ²¡æœ‰ data:application çº¢è‰²çš„é”™è¯¯è¯·æ±‚é“¾æ¥äº†ï¼š javascript - Refused to load the font â€˜data:font/woffâ€¦..â€™it violates the following Content Security Policy directive: â€œdefault-src â€˜selfâ€™â€. Note that â€˜font-srcâ€™ - Stack Overflow è§£å†³ä¸ƒç‰›äº‘å›¾ç‰‡å¤–é“¾httpæ— æ³•è½½å…¥çš„é—®é¢˜è®¿é—®æˆ‘çš„åšå®¢ç½‘å€ https://www.itfanr.cc ï¼Œå‘ç°æœ‰äº›æ–‡ç« ä¸­çš„ä¸ƒç‰›äº‘å¤–é“¾å›¾ç‰‡éƒ½ä¸æ˜¾ç¤ºäº†ã€‚æŸ¥çœ‹F12è°ƒè¯•å·¥å…·ï¼š å‘ç°æ‰€æœ‰çš„ä¸ƒç‰›äº‘ http å¤–é“¾å›¾ç‰‡å‡ä¸åŠ è½½ã€‚ ç„¶åæˆ‘åˆå»ä¸ƒç‰›äº‘çš„ç½‘ç«™ä¸­æŸ¥çœ‹äº†ä¸€ä¸‹é…ç½®ï¼Œå‘ç°å¦‚æœæŒ‰ç…§å®˜æ–¹çš„æ–¹æ³•åˆ‡æ¢æˆ https çš„é“¾æ¥ï¼Œæ˜¯éœ€è¦æ”¶è´¹çš„ï¼Œæ­¤æ—¶å¿ƒé‡Œæ˜¯ä¸€ä¸‡å¤´è‰æ³¥é©¬ç‹‚å¥”çš„æ™¯è±¡â€¦ æ— å¥ˆåªèƒ½æ‰¾å¯»å…¶ä»–çš„è§£å†³æ–¹æ³•äº†ã€‚ æŸ¥çœ‹F12çš„Consoleä¸­çš„é”™è¯¯ä¿¡æ¯ï¼š 1Refused to load the image &apos;http://ouej55gp9.bkt.clouddn.com/blog/20180917193602.png&apos; because it violates the following Content Security Policy directive: &quot;img-src &apos;self&apos; data: https: blob:&quot;. æœç´¢åˆ° Content-Security-Policy ä»‹ç»é¡µé¢ï¼šContent Security Policy CSP Reference &amp; Examples å‚ç…§é‡Œé¢çš„ä»‹ç»ï¼Œå°è¯•æŠŠä¸ƒç‰›äº‘å›¾ç‰‡çš„åŸŸååŠ åˆ° img-src ä¸­ï¼Œæ›´æ”¹å¦‚ä¸‹ï¼š 12345img-src &apos;self&apos; data: https: blob:;# æ›´æ”¹ä¸ºï¼šimg-src &apos;self&apos; ouej55gp9.bkt.clouddn.com data: https: blob:; å†æ¬¡åˆ·æ–°é¡µé¢åï¼Œå‘ç°å¦‚æœé¡µé¢ä¸­æ²¡æœ‰å¼•ç”¨åˆ°ä¸ƒç‰›äº‘çš„å›¾ç‰‡é“¾æ¥ï¼Œåœ°å€æ ä¸­æ˜¯æ˜¾ç¤ºâ€œå°ç»¿é”â€çš„ï¼Œæ¯”å¦‚é¦–é¡µï¼›è€Œåˆ°äº†æ–‡ç« è¯¦æƒ…é¡µä¸­ï¼Œå¼•ç”¨äº†ä¸ƒç‰›äº‘çš„å›¾ç‰‡é“¾æ¥åï¼Œåœ°å€æ ä¸­å°±ä¼šæ˜¾ç¤ºâ€œå¹å·â€çš„ä¸å®‰å…¨æ ‡å¿—ã€‚ è®¿é—®é¦–é¡µï¼Œæç¤ºâ€œå®‰å…¨è¿æ¥â€ï¼š è®¿é—®å¸¦æœ‰httpå¤–é“¾å›¾ç‰‡çš„æ–‡ç« è¯¦æƒ…ï¼Œæç¤ºâ€œè¿æ¥å¹¶éå®Œå…¨å®‰å…¨â€ï¼š æ ¹æ®ä¸Šé¢çš„éªŒè¯å‘ç°ï¼Œå¿…é¡»å¾—æ•´ç«™çš„é“¾æ¥éƒ½æ˜¯ https çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæ˜¯ä¸€ç›´å¤„äºâ€œå°ç»¿é”â€çš„å®‰å…¨æ¨¡å¼ä¸‹ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯è§£å†³æ•´ç«™httpsçš„é—®é¢˜äº†ã€‚ç›®å‰æ¥çœ‹ï¼Œä¹Ÿå°±æ˜¯è§£å†³ä¸ƒç‰›äº‘å›¾ç‰‡é“¾æ¥å¦‚ä½•ä» http åˆ° https çš„é—®é¢˜ã€‚ é—ç•™çš„é—®é¢˜è™½ç„¶é€šè¿‡ç‹¬ç«‹å‡ºSSLé…ç½®ï¼Œç„¶ååœ¨éœ€è¦å¯ç”¨ https çš„åŸŸåé…ç½®æ–‡ä»¶ server{} ä¸­ include çš„æ–¹å¼èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œä½†æˆ‘å¿ƒé‡Œä¸€ç›´è¿˜æ˜¯æœ‰ä¸ªç–‘é—®çš„ï¼šä¸ºä»€ä¹ˆåˆ†åˆ«æŒ‡å®šè¯ä¹¦æ–‡ä»¶åœ°å€æ—¶é…ç½®å´ä¸ç”Ÿæ•ˆï¼Ÿ ç”±äºç›®å‰è¿˜æœªæ‰¾åˆ°åŸå› ï¼Œè¿™ä¸ªé—®é¢˜æš‚ç•™ï¼Œä»¥å¾…åç»­è§£ç­”ã€‚]]></content>
      <categories>
        <category>HTTPS</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPSæ³›åŸŸåè¯ä¹¦ç”³è¯·ä¹‹ä¸€-ç”³è¯·æµç¨‹]]></title>
    <url>%2F2018%2F09%2F24%2Fhttps-certificate-one-of-application%2F</url>
    <content type="text"><![CDATA[è‡ªä» Let&#39;s Encrypt æ”¯æŒæ³›åŸŸåä¹‹åï¼Œä¸ºç½‘ç«™è®¾ç½®httpså°±å˜å¾—éå¸¸ç®€å•äº†ã€‚ä¹‹å‰éœ€è¦ç»´æŠ¤å¤šä¸ªå­åŸŸåçš„è¯ä¹¦æ›´æ–°ï¼Œæ“ä½œèµ·æ¥ä¹Ÿæ˜¯å¾ˆéº»çƒ¦çš„ã€‚ å› ä¸ºæœ€è¿‘æˆ‘çš„ gogit.itfanr.cc çš„httpsè¯ä¹¦åˆ°æœŸï¼Œæ‰€ä»¥å°±ç ”ç©¶äº†ä¸€ä¸‹æ³›åŸŸåçš„ç”³è¯·è¿‡ç¨‹ï¼Œæƒ³è¦å°†æˆ‘æ‰€æœ‰ itfanr.cc ä¸‹çš„äºŒçº§åŸŸåéƒ½è®¾ç½®æˆhttpsçš„è¯·æ±‚æ–¹å¼ã€‚ ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„ä¸º Let&#39;s Encrypt ç”Ÿæˆè¯ä¹¦çš„å·¥å…·æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚ certbot å’Œ acme.sh æ˜¯æˆ‘ä¹‹å‰æ¥è§¦è¿‡çš„ä¸¤æ¬¾ã€‚è¿™é‡Œæˆ‘è¦ä½¿ç”¨ acme.sh è¿™ä¸ªå·¥å…·æ¥å®‰è£… Let&#39;s Encrypt è¯ä¹¦ã€‚ acme.shacme.sh æ˜¯ç”±å›½äººåˆ©ç”¨ shell è„šæœ¬å¼€å‘çš„ï¼Œå…¼å®¹å„ç§ Linux ç³»ç»Ÿã€‚ä»…ä»…ä¾èµ– curlã€‚ acme.sh å®ç°äº† acme åè®®, å¯ä»¥ä» letsencrypt ç”Ÿæˆå…è´¹çš„è¯ä¹¦ã€‚ acme.sh æ”¯æŒ --webroot, --standalone, --apache, --nginx and --dns 5ç§è¯ä¹¦ç”³è¯·æ¨¡å¼ã€‚ å®‰è£…å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹é¢çš„è„šæœ¬æ¥å®‰è£… acme.shï¼š 1curl https://get.acme.sh | sh å®‰è£…è¿‡ç¨‹ä¸ä¼šæ±¡æŸ“å·²æœ‰çš„ç³»ç»Ÿä»»ä½•åŠŸèƒ½å’Œæ–‡ä»¶ï¼Œacme.sh ä¼šè¢«è‡ªåŠ¨å®‰è£…åˆ° ~/.acme.sh/ ä¸­ã€‚ å¹¶ä¸”ï¼Œè¿˜é»˜è®¤åˆ›å»ºä¸€ä¸ª bash çš„ alias, æ–¹ä¾¿ä½ çš„ä½¿ç”¨: alias acme.sh=~/.acme.sh/acme.sh ã€‚ æ­¤å¤–ï¼Œacme.sh è¿˜è‡ªåŠ¨åˆ›å»ºäº† cronjobä»»åŠ¡, æ¯å¤© 0:00 ç‚¹è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰çš„è¯ä¹¦, å¦‚æœå¿«è¿‡æœŸäº†, éœ€è¦æ›´æ–°, åˆ™ä¼šè‡ªåŠ¨æ›´æ–°è¯ä¹¦. å•åŸŸåç”³è¯·å½“ä½ åªæƒ³è¦ä¸ºä¸€ä¸ªåŸŸåè®¾ç½® https æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ --standalone æ¨¡å¼æ¥ç”³è¯·ã€‚ æ¯”å¦‚æˆ‘ä¹‹å‰åœ¨ä¸º gogit.itfanr.cc è®¾ç½®æ—¶ï¼Œæˆ‘çš„ç½‘ç«™ç¨‹åºæ˜¯è·‘åœ¨Dockerå®¹å™¨ä¸‹çš„ï¼Œå¤–é¢ç”¨ Nginx æ¥åšè·³è½¬ã€‚ é¦–å…ˆï¼Œæˆ‘éœ€è¦å…ˆå°†å ç”¨ 80 ç«¯å£çš„ Nginx æœåŠ¡åœæ‰ï¼Œç„¶åå†è®¾ç½®ï¼š 1$ sudo service nginx stop ç„¶åï¼Œç”Ÿæˆhttpsè¯ä¹¦ï¼š 1$ acme.sh --issue -d gogit.itfanr.cc --standalone å…¶ä¸­ï¼Œgogit.itfanr.cc è¯·æ¢æˆè‡ªå·±çš„ç«™ç‚¹åŸŸåã€‚ Standalone æ¨¡å¼é»˜è®¤ä½¿ç”¨çš„æ˜¯ 80 ç«¯å£ï¼Œå¦‚æœä½ çš„ 80 ç«¯å£æ— æ³•ä½¿ç”¨çš„è¯ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç›¸åº”çš„ç«¯å£ï¼š 1$ acme.sh --issue -d gogit.itfanr.cc --standalone --httpport 88 è·å–AccessKeyså› ä¸ºæˆ‘è¦å°† itfanr.cc åŸŸåä¸‹æ‰€æœ‰çš„äºŒçº§åŸŸåéƒ½è®¾ç½®æˆ https ï¼Œé‚£ä¹ˆä¸Šé¢ä¸€ä¸ªåŸŸåä¸€ä¸ªåŸŸåçš„è®¾ç½®æ–¹æ³•å°±ä¸è¡Œäº†ã€‚ æ³›åŸŸåå°±æ˜¯ç±»ä¼¼äº *.example.com è¿™æ ·çš„åŸŸåã€‚ acme.sh ç›®å‰æ”¯æŒæ•°åç§åŸŸåè§£æå•†çš„APIï¼Œå¯ä»¥è‡ªåŠ¨æ·»åŠ  TXT è®°å½•æ¥éªŒè¯ã€‚ è¿™é‡Œæˆ‘ä»¥é˜¿é‡Œäº‘DNSä¸ºä¾‹ï¼Œå…¶ä»–æ”¯æŒçš„åŸŸåéªŒè¯æ–¹å¼ï¼Œå¯ä»¥æŸ¥çœ‹è¿™é‡Œäº†è§£ ä»¥åŠç›¸åº”çš„è®¾ç½®æ–¹æ³• acme.sh è®¿é—®é˜¿é‡Œäº‘ DNS æ˜¯é€šè¿‡é˜¿é‡Œäº‘ DNS å…¬å¼€çš„ API ä»¥åŠç”¨æˆ·çš„ AccessKeys æ¥è¿›è¡Œäº¤äº’çš„ã€‚ ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œé˜¿é‡Œäº‘ AccessKeys æ˜¯ä½¿ç”¨ é˜¿é‡Œäº‘å­è´¦æˆ· æ¥æ·»åŠ çš„ã€‚ ç™»å½• [é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°](https://home.console.aliyun.com/) â€“ ç‚¹å‡»å¤´åƒä¸­çš„ accesskeys â€“ é€‰æ‹© å¼€å§‹ä½¿ç”¨å­ç”¨æˆ·AccessKeys {æˆ–è€…ç›´æ¥ç‚¹å‡»è¯¥ç½‘å€} â€“ è®¾ç½® ç”¨æˆ·å â€“ é€‰æ‹©æƒé™ä¸­è¾“å…¥â€œDNSâ€ï¼Œé€‰æ‹© AliyunDNSFullAccess(ç®¡ç†å‘˜è§£æï¼ˆDNSï¼‰çš„æƒé™) è¿™é¡¹ â€“ ä¹‹åå­è´¦æˆ·å’ŒAKéƒ½åˆ›å»ºæˆåŠŸäº†ã€‚ AliyunDNSFullAccess è¡¨ç¤º â€œç®¡ç†å‘˜è§£æï¼ˆDNSï¼‰çš„æƒé™â€ï¼Œæ—¢è¯¥è´¦æˆ·å°±æœ‰äº†æ·»åŠ DNSè®°å½•å’Œåˆ é™¤DNSè®°å½•çš„æƒé™ï¼Œä½†æ²¡æœ‰å…¶ä»–æƒé™ã€‚ ä¸€å®šè¦åœ¨è¿™ä¸€æ­¥è®°å½•ä¸‹è¿™ä¸ª AccessKey ä¿¡æ¯ï¼Œä¹‹åå°±æ— æ³•çœ‹åˆ°äº†ã€‚ æ·»åŠ é…ç½®åœ¨ bash ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°†å‚æ•°æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼š 12export Ali_Key=&quot;AccessKeyId&quot;export Ali_Secret=&quot;AccessKeySecret&quot; æ³¨æ„ï¼Œè¿™é‡Œçš„ Ali_Key å’Œ Ali_Secret æ˜¯å’Œä½ æ‰€ä½¿ç”¨çš„åŸŸåæä¾›å•†ä¸€ä¸€å¯¹åº”çš„ã€‚å…·ä½“çš„å¯åœ¨è¿™é‡ŒæŸ¥æ‰¾ï¼šç›¸åº”çš„è®¾ç½®æ–¹æ³• å¦å¤–ï¼Œè¿™ä¸ªä¸´æ—¶ç¯å¢ƒå˜é‡åªéœ€é…ç½®è¿™ä¸€æ¬¡ï¼Œå½“æˆåŠŸç”³è¯·è¯ä¹¦åï¼ŒAPIä¿¡æ¯ä¼šè¢«è‡ªåŠ¨ä¿å­˜åœ¨ ~/.acme.sh/account.conf ï¼Œä¸‹æ¬¡ä½ ä½¿ç”¨ acme.sh çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨ä½¿ç”¨ã€‚ ç”Ÿæˆæ³›åŸŸåè¯ä¹¦æ¥ä¸‹æ¥æ­£å¼å¼€å§‹ç”³è¯·æ³›åŸŸåè¯ä¹¦ï¼Œå°† example.com æ¢æˆä½ è‡ªå·±çš„åŸŸåï¼š 1$ acme.sh --issue --dns dns_ali -d example.com -d &apos;*.example.com&apos; ç”³è¯·å®Œæˆåå¯ä»¥åœ¨ ~/.acme.sh/example.com ä¸‹çœ‹åˆ°è¯ä¹¦æ–‡ä»¶ï¼š è¯ä¹¦æ–‡ä»¶æ˜¯ fullchain.cerå¯†é’¥æ–‡ä»¶æ˜¯ example.com.key è¯ä¹¦ç»­æœŸLetâ€™s Encrypt è¯ä¹¦çš„æœ‰æ•ˆæœŸä¸ºä¸‰ä¸ªæœˆï¼Œacme.shä¼šæ¯éš”60å¤©è‡ªåŠ¨å¸®ä½ ç»­æœŸã€‚åœ¨ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œåï¼Œä¼šåœ¨ crontab é‡Œæ·»åŠ è®¡åˆ’ï¼Œé€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š 1$ crontab -l å°†è¯ä¹¦é…ç½®åˆ°Nginxæ”¾åœ¨ ~/.acme.sh/example.com ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶ä¸èƒ½ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œéœ€è¦æ‹·è´åˆ°ä¸€ä¸ªè‡ªå®šä¹‰çš„ç›®å½•ä¸‹ï¼Œå†é…ç½®åˆ°Nginxä¸­æ‰èƒ½æ­£å¸¸çš„ä½¿ç”¨ã€‚ Dockerä½¿ç”¨acme.shä¸Šé¢çš„æ–¹æ³•å®‰è£…èµ·æ¥è™½è¯´å·²ç»å¾ˆç®€å•äº†ï¼Œä½†æ˜¯å¯¹äºåƒæˆ‘è¿™ç§ä½†å‡¡èƒ½ç”¨Dockeræ¥è§£å†³çš„é—®é¢˜ç»å¯¹ä¸ç”¨å…¶ä»–æ–¹å¼ã€‚ è·å–é•œåƒ1$ docker pull neilpang/acme.sh åˆ›å»ºacme.shè¯ä¹¦ä¿å­˜ç›®å½•1$ mkdir /etc/acme.sh è¿è¡Œ acme.sh å®¹å™¨è¿™é‡Œä¾ç„¶éœ€è¦ä»åŸŸåæœåŠ¡å•†å¤„è·å¾—çš„IDå’ŒSecretï¼š 12345$ docker run --rm \-v /etc/acme.sh:/acme.sh \-e Ali_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot; \-e Ali_Secret=&quot;jlsdflanljkljlfdsaklkjflsa&quot; \neilpang/acme.sh --issue --dns dns_ali -d example.com -d &apos;*.example.com&apos; æ³¨æ„è¿™é‡Œç¬¬ä¸€ä¸ªåŸŸåä¸ºé¡¶çº§åŸŸåï¼Œåé¢ä¸€ä¸ªä¸ºæ³›åŸŸåã€‚ è¿™ç§æ–¹å¼å°†è‡ªåŠ¨ä¸ºä½ çš„åŸŸåæ·»åŠ ä¸€æ¡ txt è§£æï¼ŒéªŒè¯æˆåŠŸåï¼Œè¿™æ¡è§£æè®°å½•ä¼šè¢«åˆ é™¤ï¼Œæ‰€ä»¥å¯¹ä½ æ¥è¯´æ˜¯æ— æ„Ÿçš„ï¼Œå°±æ˜¯è¦ç­‰å¾… 120 ç§’ã€‚ è¯ä¹¦ç”ŸæˆæˆåŠŸåï¼Œé»˜è®¤ä¿å­˜åœ¨ .acme.sh/example.com ä¸­ã€‚ å®¹å™¨åŒ–è‡ªåŠ¨ç»­æœŸå¯ä»¥ä»¥åå°è¿›ç¨‹çš„æ–¹å¼è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼š 1234$ docker run --name acme.sh \-d --restart unless-stopped \-v /etc/acme.sh:/acme.sh \neilpang/acme.sh daemon è¿™æ ·ï¼Œacme.sh è¯ä¹¦åˆ°60å¤©å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ æ³¨æ„äº‹é¡¹å½“æˆ‘æŒ‰ç…§å¦‚ä¸Šæ–¹æ³•ç”ŸæˆåŸŸåè¯ä¹¦æ—¶ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š 12345$ docker run --rm \-v /etc/acme.sh:/acme.sh \-e Ali_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot; \-e Ali_Secret=&quot;jlsdflanljkljlfdsaklkjflsa&quot; \neilpang/acme.sh --issue --dns dns_ali -d itfanr.cc -d *.itfanr.cc å‘ç°ä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š 1234567âœ acme.sh docker run --rm \-v /etc/acme.sh:/acme.sh \-e Ali_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot; \-e Ali_Secret=&quot;jlsdflanljkljlfdsaklkjflsa&quot; \neilpang/acme.sh --issue --dns dns_ali -d itfanr.cc -d *.itfanr.cczsh: no matches found: *.itfanr.ccâœ acme.sh ç»æŸ¥è¯ï¼Œå…¶ä¸­çš„æ³›åŸŸå *.example.com ä¸­ç”±äºå¸¦æœ‰ * å·ï¼Œä¼šæŠ¥é”™ã€‚ç›¸åº”çš„è§£å†³æ–¹æ³•æ˜¯æ·»åŠ å¼•å·ï¼š-d &#39;*.example.com&#39; Issue Wildcard certificate with zsh failed Â· Issue #1334 Â· Neilpang/acme.sh æˆ‘çš„æ“ä½œè®°å½•åˆ›å»ºæœ¬åœ°è¯ä¹¦ä¿å­˜ç›®å½•ï¼š 1$ mkdir /etc/acme.sh æ‰§è¡Œï¼š 1234567891011121314151617âœ acme.sh docker run --rm \-v /etc/acme.sh:/acme.sh \-e Ali_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot; \-e Ali_Secret=&quot;jlsdflanljkljlfdsaklkjflsa&quot; \neilpang/acme.sh --issue --dns dns_ali -d itfanr.cc -d &apos;*.itfanr.cc&apos;[Tue Sep 18 15:11:27 UTC 2018] Registering account[Tue Sep 18 15:11:28 UTC 2018] Registered[Tue Sep 18 15:11:28 UTC 2018] ACCOUNT_THUMBPRINT=&apos;AR2Gc73349sl32z_kw-kY9nP7qqesQqFlK8&apos;[Tue Sep 18 15:11:28 UTC 2018] Creating domain key[Tue Sep 18 15:11:29 UTC 2018] The domain key is here: /acme.sh/itfanr.cc/itfanr.cc.key[Tue Sep 18 15:11:29 UTC 2018] Multi domain=&apos;DNS:itfanr.cc,DNS:*.itfanr.cc&apos;[Tue Sep 18 15:11:29 UTC 2018] Getting domain auth token for each domain[Tue Sep 18 15:11:30 UTC 2018] Getting webroot for domain=&apos;itfanr.cc&apos;[Tue Sep 18 15:11:30 UTC 2018] Getting webroot for domain=&apos;*.itfanr.cc&apos;[Tue Sep 18 15:11:30 UTC 2018] Found domain api file: /root/.acme.sh/dnsapi/dns_ali.sh[Tue Sep 18 15:11:31 UTC 2018] Found domain api file: /root/.acme.sh/dnsapi/dns_ali.sh[Tue Sep 18 15:11:32 UTC 2018] Sleep 120 seconds for the txt records to take effect å‘ç°ï¼Œå½“æœ€åä¸€è¡Œæç¤ºä¿¡æ¯ä¸º Sleep 120 seconds for the txt records to take effect æ—¶ï¼Œè¯´æ˜æ­£åœ¨è‡ªåŠ¨æ‰§è¡ŒDNSç»‘å®šçš„æ“ä½œã€‚ å½“æ—¥å¿—ç»§ç»­è¾“å‡ºæ—¶ï¼Œå¯ä»¥çœ‹åˆ°æœ€åæç¤ºæ‰§è¡ŒæˆåŠŸäº† Cert success.ï¼š 12345678910111213141516171819202122[Tue Sep 18 15:11:32 UTC 2018] Sleep 120 seconds for the txt records to take effect[Tue Sep 18 15:13:32 UTC 2018] Verifying:itfanr.cc[Tue Sep 18 15:13:35 UTC 2018] Success[Tue Sep 18 15:13:35 UTC 2018] Verifying:*.itfanr.cc[Tue Sep 18 15:13:38 UTC 2018] Success[Tue Sep 18 15:13:38 UTC 2018] Removing DNS records.[Tue Sep 18 15:13:42 UTC 2018] Verify finished, start to sign.[Tue Sep 18 15:13:44 UTC 2018] Cert success.-----BEGIN CERTIFICATE-----MIIGCjCCBPKgAwIBAgISA95TIaF4XRlosoA/zwdEbLRaMA0GCSqGSIb3DQEBCwUAMEoxCzAJBgNVBAYTAlVTMR34dcvKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQDExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0xODA5MTgxNDEzNDJaFw0x......A6l0KWm2/jjYcf5YPGIoK3jMzNm17B88yoPYoDwecxWC59t5+DQjpQo7iM7tyTV+q4UZMY9jlrbaCJVSdrM=-----END CERTIFICATE-----[Tue Sep 18 15:13:44 UTC 2018] Your cert is in /acme.sh/itfanr.cc/itfanr.cc.cer[Tue Sep 18 15:13:44 UTC 2018] Your cert key is in /acme.sh/itfanr.cc/itfanr.cc.key[Tue Sep 18 15:13:44 UTC 2018] The intermediate CA cert is in /acme.sh/itfanr.cc/ca.cer[Tue Sep 18 15:13:44 UTC 2018] And the full chain certs is there: /acme.sh/itfanr.cc/fullchain.cerâœ acme.sh æŸ¥çœ‹ /etc/acme.sh ç›®å½•ä¸‹ï¼š 12345âœ acme.sh lsaccount.conf ca http.header itfanr.ccâœ acme.sh ls itfanr.ccca.cer fullchain.cer itfanr.cc.cer itfanr.cc.conf itfanr.cc.csr itfanr.cc.csr.conf itfanr.cc.keyâœ acme.sh å…¶ä¸­ï¼Œ è¯ä¹¦æ–‡ä»¶æ˜¯ fullchain.cer ï¼Œå¯†é’¥æ–‡ä»¶æ˜¯ itfanr.cc.key ã€‚ é…ç½®Nginxåœ¨åŸŸåçš„nginxé…ç½®æ–‡ä»¶ä¸­æ–°å¢è¯ä¹¦é…ç½®ï¼Œä¾‹å¦‚æˆ‘çš„ gogit.itfanr.cc åŸŸåçš„é…ç½®æ–‡ä»¶ gogit.conf å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223server &#123; listen 443 ssl; server_name gogit.itfanr.cc; ssl_certificate /etc/acme.sh/itfanr.cc/fullchain.cer; ssl_certificate_key /etc/acme.sh/itfanr.cc/itfanr.cc.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; location / &#123; proxy_pass http://127.0.0.1:3000/; &#125;&#125;server &#123; listen 80; server_name gogit.itfanr.cc; return 301 https://$server_name$request_uri;&#125; ç„¶åæ›´æ–°nginxï¼Œé‡æ–°è½½å…¥é…ç½®ï¼š 1$ sudo nginx -s reload åœ¨æµè§ˆå™¨ä¸­è®¿é—®åŸŸåï¼Œå¯ä»¥çœ‹åˆ°åœ°å€æ ä¸­çš„å°ç»¿é”å·²ç»å‡ºç°äº†ã€‚ ç›¸å…³å‚è€ƒ è¯´æ˜ Â· Neilpang/acme.sh Wiki How to issue a cert Â· Neilpang/acme.sh Wiki acme.sh/README.md at master Â· Neilpang/acme.sh åˆ©ç”¨acme.shç”³è¯· Letsencrypt å…è´¹ SSL è¯ä¹¦ | Nero Blog]]></content>
      <categories>
        <category>HTTPS</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢æ·»åŠ Gitmentè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2F2018%2F09%2F17%2Fhexo-add-gitment-review-system%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰æˆ‘çš„Hexoåšå®¢ä¸­ä½¿ç”¨çš„æ˜¯ å¤šè¯´ çš„è¯„è®ºæ’ä»¶ï¼Œåæ¥å¤šè¯´åœæ­¢è¿è¥äº†ä¹‹åå°±ç›´æ¥æŠŠè¯„è®ºåŠŸèƒ½å»æ‰äº†ï¼Œè€Œåä¸€ç›´ä½¿ç”¨çš„æ˜¯é‚®ä»¶çš„æ–¹å¼ã€‚ä½†é‚®ä»¶ä¹Ÿæ˜¯å¾ˆä¸æ–¹ä¾¿çš„ï¼Œæ˜¯ä¸€ç§ä¸å¾—å·²çš„é€‰æ‹©ã€‚ æœ€è¿‘ï¼Œçœ‹åˆ°å¥½å¤šåšå®¢ä¸­éƒ½æ·»åŠ äº†ä¸€ä¸ªåä¸º Gitment çš„è¯„è®ºæ’ä»¶ï¼Œç›´æ¥ä½¿ç”¨GitHubçš„ Issues ä½œä¸ºè¯„è®ºå†…å®¹çš„å­˜å‚¨ä½ç½®ï¼Œä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚ Update:2019-04-30 Gitment è¯„è®ºæ’ä»¶å·²ç»é•¿æ—¶é—´ä¸æ›´æ–°äº†ï¼Œå¦å¤–ç”±äºæ’ä»¶å†…å¼•ç”¨çš„åŸŸåHttpsè¯ä¹¦å·²ç»è¿‡æœŸï¼Œå¯¼è‡´æ— æ³•æäº¤è¯„è®ºã€‚å»ºè®®æ›´æ¢ä¸ºæ›´å¥½ç”¨çš„ Gitalk è¯„è®ºæ’ä»¶ã€‚ é…ç½®æ–¹æ³•è§ï¼šHexoåšå®¢æ·»åŠ Gitalkè¯„è®ºç³»ç»Ÿ | ITèŒƒå„¿ Nextä¸»é¢˜ç‰ˆæœ¬æˆ‘çš„hexoä¸»é¢˜ä½¿ç”¨çš„æ˜¯ Next ä¸»é¢˜,å½“å‰ç‰ˆæœ¬ä¸º v5.1.3 ã€‚è¿™ä¸€ç‰ˆæ˜¯ç›´æ¥å†…ç½®æ”¯æŒ gitment åŠŸèƒ½çš„ã€‚å…³äºå¦‚ä½•å‡çº§ Next ä¸»é¢˜ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ï¼šHexoåšå®¢æ·»åŠ æœç´¢åŠŸèƒ½ å¦å¤–æˆ‘å‘ç°ï¼Œå½“å‰ Next ä¸»é¢˜çš„æœ€æ–°ç‰ˆæœ¬ä¸º v6.4.1ï¼Œè€Œ v6.x.x ç‰ˆæœ¬å’Œ v5.x.x ç‰ˆæœ¬åˆæœ‰æ‰€ä¸åŒï¼Œä¸èƒ½å¹³æ»‘çš„å‡çº§ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±æ²¡æœ‰å‡çº§ Next åˆ°æœ€æ–°ï¼Œç›´æ¥ä½¿ç”¨çš„ v5.1.3 ç‰ˆæœ¬ã€‚ æ·»åŠ Gitmentè¯„è®ºåˆ›å»ºGitHub OAuth Appsæ‰“å¼€é“¾æ¥ OAuth Apps â€“ New OAuth App ã€‚æŒ‰è¦æ±‚å¡«å†™ç›¸åº”å†…å®¹å³å¯ã€‚ å…¶ä¸­ï¼ŒHomepage URL è¡¨ç¤ºç«™ç‚¹çš„ç½‘å€ã€‚Authorization callback URL ä¸ºç«™ç‚¹çš„å›è°ƒåœ°å€ï¼Œä¸€èˆ¬ä¹Ÿé»˜è®¤ä¸ºç«™ç‚¹çš„ç½‘å€ã€‚ æœ€åï¼Œå¾—åˆ° Client ID å’Œ Client Secret å¤‡ç”¨ã€‚ ä¿®æ”¹é…ç½®åœ¨ themes/next ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° _config.yml é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° gitment é…ç½®æ®µï¼š 123456789101112131415# Gitment# Introduction: https://imsun.net/posts/gitment-introduction/gitment: enable: false mint: true # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway count: true # Show comments count in post meta area lazy: false # Comments lazy loading with a button cleanly: false # Hide &apos;Powered by ...&apos; on footer, and more language: # Force language, or auto switch by theme github_user: # MUST HAVE, Your Github Username github_repo: # MUST HAVE, The name of the repo you use to store Gitment comments client_id: # MUST HAVE, Github client id for the Gitment client_secret: # EITHER this or proxy_gateway, Github access secret token for the Gitment proxy_gateway: # Address of api proxy, See: https://github.com/aimingoo/intersect redirect_protocol: # Protocol of redirect_uri with force_redirect_protocol when mint enabled è®¾ç½® enable ä¸º true ï¼Œè¡¨ç¤ºå¯ç”¨ gitment è¯„è®ºæ’ä»¶ã€‚ Update:2019-04-30 Gitment è¯„è®ºæ’ä»¶å·²ç»é•¿æ—¶é—´ä¸æ›´æ–°äº†ï¼Œå¦å¤–ç”±äºæ’ä»¶å†…å¼•ç”¨çš„åŸŸåHttpsè¯ä¹¦å·²ç»è¿‡æœŸï¼Œå¯¼è‡´æ— æ³•æäº¤è¯„è®ºã€‚å»ºè®®æ›´æ¢ä¸ºæ›´å¥½ç”¨çš„ Gitalk è¯„è®ºæ’ä»¶ã€‚ é…ç½®æ–¹æ³•è§ï¼šHexoåšå®¢æ·»åŠ Gitalkè¯„è®ºç³»ç»Ÿ | ITèŒƒå„¿ å…¶ä»–çš„å¿…éœ€é¡¹æ˜¯ github_user ï¼Œè¡¨ç¤ºä½ çš„githubè´¦å·åç§°ã€‚ github_repo è¡¨ç¤ºä¿å­˜è¯„è®ºæ•°æ®çš„ä»“åº“åç§°ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨å½“å‰åšå®¢æ‰€åœ¨çš„ä»“åº“åç§°ï¼Œä¹Ÿå¯ä»¥å•ç‹¬è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„ä»“åº“ã€‚client_id å’Œ client_secret ä¸ºä¸Šé¢åˆ›å»ºçš„å€¼ã€‚ ä¿®æ”¹å®Œæˆåï¼Œå°†hexoåšå®¢æ–‡ä»¶ä¸Šä¼ åˆ°githubã€‚å› ä¸ºgitmentåŠŸèƒ½å¿…éœ€åœ¨çº¿ä¸Šæ‰èƒ½è¿›è¡Œæ“ä½œã€‚ æ³¨æ„äº‹é¡¹ç‚¹å‡»ç™»å½•githubå‘ç°ä¸€ç›´æ˜¾ç¤ºloadingåœ¨åˆ›å»º OAuth Apps ä¸­å¡«å†™ Authorization callback URL æ—¶ï¼Œç½‘ç«™çš„åœ°å€æœ«å°¾ä¸èƒ½å¸¦æœ‰ / ã€‚ æŸäº›æ–‡ç« ä¸èƒ½ç”ŸæˆIssueså½“ç‚¹å‡»æ–‡ç« é¡µé¢åº•éƒ¨çš„ åˆå§‹åŒ–æœ¬æ–‡çš„è¯„è®ºé¡µ æŒ‰é’®æ—¶ï¼Œé¡µé¢ä¼šå¼¹å‡ºé”™è¯¯ä¿¡æ¯ï¼šError:Validation Failed ä¿¡æ¯ã€‚ é€šè¿‡æŸ¥çœ‹æ“ä½œè¯·æ±‚ï¼Œgitmentä¼šåœ¨ç”ŸæˆIssuesæ—¶åˆ›å»ºä¸¤ä¸ª label æ ‡ç­¾ã€‚ ä¸€ä¸ªæ˜¯æ–‡ç« æ ‡é¢˜çš„è·¯å¾„: window.location.pathname å€¼ï¼Œå¦‚ /2018/09/05/pip-install-locale-error-unsupported-locale-setting/ ï¼›å¦ä¸€ä¸ªæ˜¯å®šå€¼ gitment ã€‚ è€Œç”±äº github ä¸­ Issues çš„ label é•¿åº¦é™åˆ¶ä¸ºæœ€å¤§ 50 ä¸ªå­—ç¬¦ï¼Œå½“ æ–‡ç« æ ‡é¢˜é•¿åº¦è¿‡é•¿æ—¶ï¼Œè¯¥labelå°±ä¼šç”Ÿæˆå¤±è´¥ï¼Œè€Œå¯¼è‡´åˆå§‹åŒ–é”™è¯¯ï¼Œå¼¹å‡º Validation Failed çš„æç¤ºã€‚ é€šè¿‡ç½‘ä¸Šçš„æœç´¢ï¼Œå‘ç°å¯ä»¥ä½¿ç”¨æ–‡ç« åˆ›å»ºæ—¶çš„æ—¶é—´æ¥ä»£æ›¿æ–‡ç« æ ‡é¢˜ï¼Œä½œä¸ºè¿™ä¸ªå”¯ä¸€çš„labelæ ‡ç­¾ã€‚ æ‰¾åˆ°gimentçš„é…ç½®ï¼š/themes/next/layout/_third-party/comments/gitment.swig æ–‡ä»¶ï¼š æ‰¾åˆ°å¦‚ä¸‹éƒ¨åˆ†ï¼š 12345var gitment = new &#123;&#123;CommentsClass&#125;&#125;(&#123; id: window.location.pathname, owner: &apos;&#123;&#123; theme.gitment.github_user &#125;&#125;&apos;, repo: &apos;&#123;&#123; theme.gitment.github_repo &#125;&#125;&apos;, ... ä¿®æ”¹ä¸ºï¼š 12345var gitment = new &#123;&#123;CommentsClass&#125;&#125;(&#123; id: &apos;itfanr_blog_&#123;&#123; date(page.date, &quot;YYYYMMDDhhmmss&quot;) &#125;&#125;&apos;, owner: &apos;&#123;&#123; theme.gitment.github_user &#125;&#125;&apos;, repo: &apos;&#123;&#123; theme.gitment.github_repo &#125;&#125;&apos;, ... è¿™æ ·ï¼Œåœ¨åˆå§‹åŒ–æ—¶å°±ä¸ä¼šå‡ºé”™äº†ã€‚ æœ‰æ–°çš„Issuesæ—¶å‘é€é’‰é’‰æé†’ä¸Šé¢æˆ‘ä»¬æ·»åŠ äº†è¯„è®ºåŠŸèƒ½ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨ä¸­ä¼šå‡ºç°ä¸èƒ½åŠæ—¶å“åº”çš„é—®é¢˜ã€‚å½“æœ‰äººå¯¹æ–‡ç« åšäº†è¯„è®ºæˆ–æå‡ºä»€ä¹ˆç–‘é—®åï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½åŠæ—¶çš„çŸ¥é“æˆ–è€…å›å¤ï¼Œè¿™æ ·ç»™äººçš„æ„Ÿè§‰æ˜¯ä¸å¥½çš„ã€‚è™½ç„¶æ·»åŠ äº†è¯„è®ºåŠŸèƒ½ï¼Œä½†åè€Œä¸å¦‚ä½¿ç”¨é‚®ä»¶çš„æ–¹å¼é«˜æ•ˆäº†ã€‚ ç»è¿‡ä¸€ç•ªæ€è€ƒåï¼Œæˆ‘å‘ç°å¹³æ—¶å·¥ä½œä¸­ç”¨åˆ°çš„é’‰é’‰ä¸­æ˜¯å¯ä»¥æ·»åŠ GitHubçš„é’‰é’‰æœºå™¨äººçš„ã€‚è€Œæ‰‹æœºç«¯çš„é’‰é’‰ä¹Ÿèƒ½åšåˆ°æœ‰æ–°æé†’åç«‹å³å“åº”ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è®¾ç½®å½“GitHubçš„Issuesæœ‰å˜åŠ¨æ—¶ï¼Œé€šè¿‡é’‰é’‰æœºå™¨äººæé†’æˆ‘ä»¬æŸ¥çœ‹æ–°çš„è¯„è®ºæˆ–ä½œå‡ºå›å¤ã€‚ ç”ŸæˆGithubæœºå™¨äººWebHookåœ°å€é’‰é’‰æœºå™¨äººåªæœ‰åœ¨ç¾¤ä¸­æ‰èƒ½æ·»åŠ ï¼Œä¸ªäººæ˜¯æ— æ³•æ·»åŠ çš„ã€‚ä½†æ˜¯ä¸€ä¸ªäººåˆæ— æ³•åˆ›å»ºç¾¤ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•æ·»åŠ ä¸€ä¸ªé’‰é’‰ç¾¤æœºå™¨äººå‘¢ï¼Ÿ Update:2019-05-05 æˆ‘é‡‡ç”¨çš„æ–¹æ³•æ˜¯ â€œå·æ¢æ¢æŸ±â€ çš„æ–¹å¼ã€‚é¦–å…ˆå‘¢ï¼Œåœ¨æ‰‹æœºæˆ–PCç«¯é€‰æ‹© â€œå‘èµ·ç¾¤èŠâ€ï¼Œè‡³å°‘é€‰æ‹©äºŒä¸ªäººè¿›æ¥ï¼Œæ­¤æ—¶æ³¨æ„ä¸è¦åœ¨ç¾¤é‡Œå‘ä»»ä½•ä¿¡æ¯ã€‚ç„¶ååœ¨ ç¾¤è®¾ç½® ä¸­çš„ ç¾¤æˆå‘˜ é€‰é¡¹ä¸­ç§»é™¤å…¶ä»–äººå°±å¯ä»¥äº†ï¼Œæ•´ä¸ªè¿‡ç¨‹å…¶ä»–äººä¸ä¼šæ¥æ”¶åˆ°ä»»ä½•æ¶ˆæ¯ï¼ˆæœ‰ç‚¹ç±»ä¼¼äºå¾®ä¿¡æ¸…ç†è”ç³»äººçš„æ“ä½œï¼‰ã€‚å°±è¿™ä¹ˆç®€å•ã€‚è¿™æ ·ï¼Œè¿™ä¸ªç¾¤é‡Œå°±åªæœ‰ä½ ä¸€ä¸ªäººäº†ï¼Œæ·»åŠ ç¾¤æœºå™¨äººåä¹Ÿä¸ä¼šæ‰“æ‰°åˆ°åˆ«äººã€‚ ä¹‹å‰é’‰é’‰ä¸­ç»„å»ºç¾¤ç»„è‡³å°‘å¿…é¡»æ˜¯äºŒä¸ªäººï¼Œæœ€è¿‘æµ‹è¯•å‘ç°ç»„å»ºç¾¤ç»„è‡³å°‘å¿…é¡»æ˜¯ä¸‰ä¸ªäººäº†ã€‚ä¹Ÿå°±æ˜¯å¿…é¡»é€‰æ‹©å¦å¤–ä¸¤ä¸ªå¥½å‹æ‰èƒ½ç»„æˆä¸€ä¸ªç¾¤ç»„ã€‚å¦‚æœåªé€‰æ‹©ä¸€ä¸ªå¥½å‹ï¼Œé‚£è¿›å…¥çš„å°±æ˜¯ â€œå‘æ¶ˆæ¯â€ çš„ç•Œé¢äº†ã€‚ ç„¶ååœ¨ ç¾¤ è®¾ç½®ä¸­é€‰æ‹© ç¾¤æœºå™¨äºº é€‰é¡¹ï¼Œé€‰æ‹© GitHubæœºå™¨äºº ï¼ŒæŒ‰ç…§è®¾ç½®æµç¨‹ç”ŸæˆGitHubæœºå™¨äººï¼Œå³å¯è·å–åˆ°ç›¸åº”ç¾¤çš„WebHookåœ°å€ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š 1https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx åœ¨GitHubä¸­è®¾ç½®é¡¹ç›®çš„webhookè¿›å…¥ GitHub çš„ Hexo åšå®¢ä»“åº“ï¼Œä¾æ¬¡ç‚¹å‡» Settings â€“ Webhooks &amp; Services â€“ Add Webhook ï¼Œæ–°å¢ä¸€é¡¹ã€‚ åœ¨ payload URL ä¸­å¡«å†™åˆšæ‰è·å¾—çš„é’‰é’‰WebHookåœ°å€ï¼› åœ¨ Content type é€‰é¡¹ä¸‹é€‰æ‹© application/json é¡¹ï¼› åœ¨ Secret ä¸­ä¸å¡«å†™å†…å®¹ï¼Œä¿æŒç©ºå€¼å³å¯ï¼› åœ¨ Event é€‰é¡¹ä¸‹ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©äº† issues ç›¸å…³çš„æ‰€æœ‰ event äº‹ä»¶ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚è‡ªå®šä¹‰ã€‚ ç„¶åï¼Œç‚¹å‡» Add webhook æŒ‰é’®å³å¯ã€‚ è‡³æ­¤ï¼Œå½“ Issues ä¸­æœ‰æ–°çš„è¯„è®ºæ—¶ï¼Œåœ¨é’‰é’‰æ‰‹æœºå®¢æˆ·ç«¯å°±èƒ½ç«‹å³æ¥æ”¶åˆ°æé†’äº†ã€‚ å‚è€ƒ è§£å†³Gitmentåˆå§‹åŒ–è¯„è®ºæ—¶validation failed | Paceâ€™s Blog Hexoåšå®¢Nextä¸»é¢˜æ·»åŠ Gitmentè¯„è®ºç³»ç»Ÿå‘ç‚¹ Â· swlfigo/Study Wiki é’‰é’‰ä¸­è®¾ç½®ä»£ç æäº¤æé†’â€“Githubæœºå™¨äºº - CSDNåšå®¢]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³pip installæ—¶unsupported locale settingé”™è¯¯]]></title>
    <url>%2F2018%2F09%2F05%2Fpip-install-locale-error-unsupported-locale-setting%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨å®‰è£… docker-compose æ—¶ï¼Œä½¿ç”¨ pip install å‘½ä»¤å‡ºç°äº†ä¸‹é¢è¿™ä¸ªé”™è¯¯ï¼š 123456789âœ sudo pip install -U docker-composeTraceback (most recent call last): File &quot;/usr/bin/pip&quot;, line 11, in &lt;module&gt; sys.exit(main()) File &quot;/usr/lib/python2.7/dist-packages/pip/__init__.py&quot;, line 215, in main locale.setlocale(locale.LC_ALL, &apos;&apos;) File &quot;/usr/lib/python2.7/locale.py&quot;, line 581, in setlocale return _setlocale(category, locale)locale.Error: unsupported locale setting åæ¥æŸ¥è¯¢åˆ°æ˜¯è¯­è¨€é…ç½®é”™è¯¯å¯¼è‡´çš„ï¼š 12345678âœ locale -alocale: Cannot set LC_CTYPE to default locale: No such file or directoryCC.UTF-8en_USen_US.iso88591en_US.utf8POSIX è§£å†³æ–¹æ³•ï¼š æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ã€‚ 1âœ export LC_ALL=C å†æ¬¡å°è¯•å®‰è£…ï¼š 123456789101112131415âœ sudo pip install -U docker-composeThe directory &apos;/home/ubuntu/.cache/pip/http&apos; or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&apos;s -H flag.The directory &apos;/home/ubuntu/.cache/pip&apos; or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&apos;s -H flag.Collecting docker-compose Downloading https://files.pythonhosted.org/packages/67/03/b833b571595e05c933d3af3685be3b27b1166c415d005b3eadaa5be80d25/docker_compose-1.22.0-py2.py3-none-any.whl (126kB) 100% |################################| 133kB 143kB/sCollecting websocket-client&lt;1.0,&gt;=0.32.0 (from docker-compose) Downloading https://files.pythonhosted.org/packages/09/12/d21872b618befc489cabde794c7af281d12fa2e194e279132ef1f04a3b07/websocket_client-0.52.0-py2.py3-none-any.whl (198kB) 100% |################################| 204kB 34kB/s......Successfully installed PyYAML-3.11 backports.ssl-match-hostname-3.5.0.1 cached-property-1.4.3 certifi-2018.8.24 chardet-2.3.0 docker-3.5.0 docker-compose-1.22.0 docker-pycreds-0.3.0 dockerpty-0.4.1 docopt-0.6.2 enum34-1.1.2 functools32-3.2.3.post2 idna-2.0 ipaddress-1.0.16 jsonschema-2.6.0 requests-2.9.1 six-1.10.0 texttable-0.9.1 urllib3-1.13.1 websocket-client-0.52.0You are using pip version 8.1.1, however version 18.0 is available.You should consider upgrading via the &apos;pip install --upgrade pip&apos; command. å…³äºLC_ALL=C LC_ALL=C æ˜¯ä¸ºäº†å»é™¤æ‰€æœ‰æœ¬åœ°åŒ–çš„è®¾ç½®ï¼Œè®©å‘½ä»¤èƒ½æ­£ç¡®æ‰§è¡Œã€‚ åœ¨Linuxä¸­é€šè¿‡ locale æ¥è®¾ç½®ç¨‹åºè¿è¡Œçš„ä¸åŒè¯­è¨€ç¯å¢ƒï¼Œlocale ç”±ANSI Cæä¾›æ”¯æŒã€‚locale çš„å‘½åè§„åˆ™ä¸º &lt;è¯­è¨€&gt;_&lt;åœ°åŒº&gt;.&lt;å­—ç¬¦é›†ç¼–ç &gt; ï¼Œå¦‚zh_CN.UTF-8ï¼Œzhä»£è¡¨ä¸­æ–‡ï¼ŒCNä»£è¡¨å¤§é™†åœ°åŒºï¼ŒUTF-8è¡¨ç¤ºå­—ç¬¦é›†ã€‚ åœ¨shellæ§åˆ¶å°ä¸­è¾“å…¥ locale å°±å¯ä»¥æŸ¥çœ‹æœ¬åœ°é»˜è®¤è®¾ç½®: 123456789âœ localeLANG=&quot;zh_CN.UTF-8&quot;LC_COLLATE=&quot;zh_CN.UTF-8&quot;LC_CTYPE=&quot;zh_CN.UTF-8&quot;LC_MESSAGES=&quot;zh_CN.UTF-8&quot;LC_MONETARY=&quot;zh_CN.UTF-8&quot;LC_NUMERIC=&quot;zh_CN.UTF-8&quot;LC_TIME=&quot;zh_CN.UTF-8&quot;LC_ALL= â€œCâ€æ˜¯ç³»ç»Ÿé»˜è®¤çš„locale ï¼Œâ€POSIXâ€æ˜¯â€Câ€çš„åˆ«åã€‚æ‰€ä»¥å½“æˆ‘ä»¬æ–°å®‰è£…å®Œä¸€ä¸ªç³»ç»Ÿæ—¶ï¼Œé»˜è®¤çš„ locale å°±æ˜¯ C æˆ– POSIX ã€‚ LANG LC_* çš„é»˜è®¤å€¼ï¼Œæ˜¯æœ€ä½çº§åˆ«çš„è®¾ç½®ã€‚å¯ä»¥ç†è§£æˆ LANGæ˜¯ä¸€ä¸ªç¼ºçœå€¼ï¼Œæ‰€æœ‰æ²¡æœ‰æ˜¾å¼è®¾ç½®å€¼çš„ LC_* å˜é‡éƒ½ä¼šå–LANGçš„å€¼ã€‚ç±»ä¼¼äº LC_ALL ã€‚ LC_ALL å®ƒæ˜¯ä¸€ä¸ªå®ï¼Œå¦‚æœè¯¥å€¼è®¾ç½®äº†ï¼Œåˆ™è¯¥å€¼ä¼šè¦†ç›–æ‰€æœ‰ LC_* çš„è®¾ç½®å€¼ã€‚æ³¨æ„ï¼ŒLANGçš„å€¼ä¸å—è¯¥å®å½±å“ã€‚ æ³¨æ„: LC_ALL å¹¶ä¸æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªglibcä¸­å®šä¹‰çš„ä¸€ä¸ªå®ã€‚LC_ALL=C è¿™æ ·çš„è¯­æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨äº† setlocale æŠŠæ‰€æœ‰çš„ LC_* çš„å˜é‡è®¾ç½®äº†ä¸€éï¼Œæ‰€ä»¥åœ¨ç»ˆç«¯ä¸­ç›´æ¥ echo $LANG ç­‰å¯ä»¥è¾“å‡ºå¯¹åº”å˜é‡çš„å€¼ï¼Œä½†æ˜¯ echo $LC_ALL ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå› ä¸ºå®ƒå‹æ ¹å°±ä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚ æ‰€ä»¥è®¾ç½® LC_ALL=C ï¼Œå°±æ˜¯è§£å†³å„ç§ä¸åŒºåŸŸè®¾ç½®æœ‰å…³çš„warningã€‚ä»ç¨‹åºè¿è¡Œè§’åº¦çœ‹ï¼Œå°±æ˜¯ä¿æŒç¨‹åºè¾“å‡ºçš„ç»Ÿä¸€æ ¼å¼ï¼Œè¿™æ ·æœ‰äº›ç¨‹åºæ‰èƒ½æ­£ç¡®æ‰§è¡Œä¸‹å»ã€‚ ç›¸å…³å‚è€ƒï¼š è§£å†³pip installæ—¶unsupported locale settingé”™è¯¯ | é˜¿é˜¿ç‡ƒ LC_ALL=Cè¡¨ç¤ºä»€ä¹ˆï¼Ÿ | äº‘ä¸Šå°æ‚Ÿ]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿å®šå¸‚å¦‚ä½•æ›´æ¢é©¾é©¶è¯]]></title>
    <url>%2F2018%2F06%2F17%2Fhow-to-change-the-driver-license-in-baoding%2F</url>
    <content type="text"><![CDATA[6æœˆ15æ—¥å‘¨äº”æˆ‘å»ä¿å®šè½¦ç®¡æ‰€ï¼ˆä¿å®šå¸‚é•¿åŸåŒ—å¤§è¡—2601å·ï¼‰æ›´æ¢äº†æ–°é©¾ç…§ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„æ¢è¯è®°å½•ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æƒ³è¦æ›´æ¢é©¾ç…§çš„æœ‹å‹ä»¬ã€‚ ä¸Šç­æ—¶é—´å‘¨ä¸€åˆ°å‘¨äº” å†¬å­£ï¼š 9:00 â€“ 12:00 14:00 â€“ 17:00 å¤å­£ï¼š 9:30 â€“ 12:30 14:30 â€“ 17:30 é¦–å…ˆï¼Œå¯¹äºå‘¨å…­æ—¥èƒ½ä¸èƒ½åŠç†ï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰ä¸“é—¨å»å‘è½¦ç®¡æ‰€çš„åŠå…¬äººå‘˜è€ƒè¯ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¹Ÿå°±ä¸èƒ½ç¡®è®¤ã€‚æˆ‘ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢å‘¨å…­æ—¥ç™½è·‘ä¸€è¶Ÿï¼Œæ‰åœ¨å‘¨äº”è¿™å¤©è¯·äº†ä¸€å¤©å‡è¿‡æ¥çš„ã€‚ 15å·å½“å¤©æˆ‘æ˜¯å¤§æ¦‚12ç‚¹10åˆ†å·¦å³åˆ°çš„è½¦ç®¡æ‰€ï¼Œç»“æœè¿›å»å´è¢«å‘ŠçŸ¥è¦ä¸‹ç­äº†ç­‰ä¸‹åˆå†æ¥ï¼Œä¸€é—®ä¸‹åˆä¸Šç­æ—¶é—´æ˜¯14:30 ã€‚ å¦å¤–ï¼Œè½¦ç®¡æ‰€åˆ†ä¸¤ä¸ªæœåŠ¡å¤§å…ï¼ˆåœ¨å¤–é¢æœ‰ç›¸åº”çš„æ ‡è¯†ï¼‰ï¼ŒAåŒºåº”è¯¥ä¸»è¦æ˜¯åŠç†è½¦è¾†ç›¸å…³çš„ä¸šåŠ¡ï¼ŒBåŒºä¸»è¦æ˜¯åŠç†è¯ä»¶ç›¸å…³çš„ä¸šåŠ¡ã€‚ æ‰€ä»¥ï¼Œè¦æ›´æ¢æ–°é©¾ç…§ï¼Œç›´æ¥å»BåŒºå°±å¥½äº†ã€‚ åœ¨ä¸­åˆè¿™æ®µæ—¶é—´å‘¢ï¼Œè½¦ç®¡æ‰€çš„ä¸¤ä¸ªæœåŠ¡å¤§å…éƒ½ä¼šé”é—¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™é‡Œæ˜¯æ²¡æœ‰å¯ä»¥ä¼‘æ¯çš„åœ°æ–¹çš„ã€‚ 15å·è¿™å¤©çš„æ¸©åº¦å¤§æ¦‚åœ¨29Â°å·¦å³ï¼Œå·²ç»æ˜¯ç›¸å½“çš„é—·çƒ­äº†ã€‚ä¸­åˆè¿™æ®µæ—¶é—´æ¥è¿™é‡ŒåŠç†ä¸šåŠ¡çš„äººä¹Ÿæ˜¯ç»œç»ä¸ç»ï¼Œä¸€çœ‹å…³ç€é—¨ä¹Ÿå°±åªå¥½åœ¨å¤–é¢ç­‰ç€äº†ã€‚ åœ¨ä¸¤ä¸ªå¤§å…ä¹‹é—´æœ‰å¯ä»¥é®é˜³çš„é¡¶æ£šï¼Œä¸¤è¾¹å„æœ‰ä¸€æ’åº§æ¤…å¯ä»¥ä¼‘æ¯ã€‚ä½†å¯¹äºå¤å­£29Â°çš„é—·çƒ­æ°”æ¸©æ¥è¯´ï¼Œä¹Ÿç€å®çƒ­çš„ä¸è¡Œã€‚ æ‰€ä»¥æˆ‘å»ºè®®å¤§å®¶å¦‚æœæ¥çš„è¯ï¼Œå°½é‡èµ¶åœ¨ä¸Šåˆæˆ–è€…ä¸‹åˆ2ç‚¹ä¹‹åå†è¿‡æ¥ã€‚å½“å¤©ä¸­åˆæˆ‘åœ¨å¤–é¢åç€ç­‰äº†ä¸¤ä¸ªå¤šå°æ—¶å®åœ¨æ˜¯éš¾å—å•Šã€‚ éœ€è¦å¸¦ä»€ä¹ˆè¦æ›´æ¢æ–°é©¾ç…§ï¼Œ èº«ä»½è¯ å’Œ é©¾é©¶è¯ å½“ç„¶æ˜¯å¿…éœ€çš„ã€‚ é¦–å…ˆè¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼ŒæœåŠ¡å¤§å…çš„å…¥å£æ˜¯éœ€è¦åˆ·èº«ä»½è¯å¹¶ä¸”éœ€è¦äººè„¸æ¯”å¯¹æ‰èƒ½è¿›å»çš„ï¼Œåº”è¯¥æ˜¯ä¸ºäº†é˜²æ­¢é»„ç‰›çš„ä¸€ç§æªæ–½ã€‚ å…¶æ¬¡ï¼Œè¿˜éœ€è¦å¸¦ä¸Šä¸€äº›é›¶é’±ã€‚è¿™é‡Œè¦ç€é‡è§£é‡Šä¸€ä¸‹ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯â€œçº¸å¸â€ï¼Œä¸»è¦æ˜¯ç›¸å¯¹äºçš„å¾®ä¿¡å’Œæ”¯ä»˜å®è€Œè¨€çš„ï¼Œå› ä¸ºæ˜¯ä¸æ”¯æŒç”¨å¾®ä¿¡å’Œæ”¯ä»˜å®æ¥ç¼´è´¹çš„ã€‚ å…¶ä¸­ä¸€éƒ¨åˆ†æ˜¯éœ€è¦è¿›è¡Œä½“æ£€ï¼Œä½“æ£€è´¹æ˜¯15å…ƒã€‚å¦ä¸€éƒ¨åˆ†æ˜¯æ¢è¯çš„å·¥æœ¬è´¹æ˜¯10å…ƒã€‚ å†è€…ï¼Œå¯ä»¥è‡ªè¡Œæºå¸¦ç…§ç‰‡ã€‚æ³¨æ„ï¼Œç…§ç‰‡çš„è¦æ±‚æ˜¯ ä¸€å¯¸ç™½åº•å…å† å½©ç…§ï¼Œéœ€è¦ä¸¤å¼ ã€‚å¦‚æœæ²¡æœ‰ç…§ç‰‡çš„è¯ï¼Œåœ¨æœåŠ¡å¤§å…å†…æ˜¯æœ‰ä¸¤å°å¯ä»¥ç…§ç›¸çš„æœºå™¨çš„ï¼Œç«‹ç­‰å¯å–ã€‚è´¹ç”¨å¥½åƒæ˜¯10å…ƒä¸€ä»½å§ã€‚å› ä¸ºæˆ‘æ˜¯è‡ªå·±å¸¦çš„ç…§ç‰‡ï¼Œæ‰€ä»¥æ‹ç…§ç‰‡å°±ä¸å¤ªæ¸…æ¥šäº†ã€‚ æ€»ç»“ä¸€ä¸‹ï¼š èº«ä»½è¯ é©¾é©¶è¯ äººæ°‘å¸ ï¼ˆå¤§æ¦‚å…±è®¡ 15+10+10 å…ƒï¼Œä¸€å…±å¸¦50æˆ–100å·¦å³å°±å¤Ÿäº† æ³¨æ„ï¼šæœ€å¥½æ˜¯å¸¦é›¶é’±ï¼Œè¦å¸¦ä¸ªæ•´çš„50å…ƒæˆ–100å…ƒè¿‡å»ï¼Œå…‰æ‰¾é›¶é’±å°±å¾ˆæµªè´¹æ—¶é—´äº†ï¼›å†è€…ï¼Œå¤§å®¶éƒ½å¸¦æ•´é’±ä¸ä¸€å®šèƒ½æ‰¾å¼€â€¦ åŠç†æµç¨‹å› ä¸ºæˆ‘æ˜¯ç¬¬ä¸€æ¬¡å»ï¼Œå¯¹äºåŠç†çš„æµç¨‹åˆšå¼€å§‹ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä¹Ÿæ˜¯ä¸€ç‚¹ä¸€ç‚¹çš„çœ‹ç€åˆ«äººæ˜¯æ€ä¹ˆå¼„å¾—ï¼Œç„¶åè‡ªå·±ä¹Ÿè·Ÿç€å»åšï¼Œæ…¢æ…¢çš„å°±äº†è§£äº†ã€‚ èº«ä»½è¯å¤å°ä»¶é¦–å…ˆå‘¢ï¼Œè¦æœ‰èº«ä»½è¯å¤å°ä»¶ã€‚è¿™ä¸ªåœ¨å¤§å…çš„è¿›é—¨å·¦æ‰‹è¾¹æ˜¯æœ‰ä¸€å°èº«ä»½è¯å¤å°æœºçš„ã€‚ ä½“æ£€å…¶æ¬¡ï¼Œéœ€è¦è¿›è¡Œä½“æ£€ã€‚åœ¨å¤§å…çš„è¿›é—¨å·¦æ‰‹è¾¹æœ‰ä¸€æ¡é€šé“ï¼Œè¿›å»ç¬¬ä¸€ä¸ªé—¨å£å°±æ˜¯äº†ï¼Œå†™ç€ä½“æ£€å‘¢ã€‚ è¿›å»åæ˜¯å…ˆåœ¨é—¨å£å¤„ç¼´è´¹ï¼Œç„¶åå»æ—è¾¹ç¬¬äºŒä¸ªåŠå…¬äººå‘˜é‚£é‡Œç­‰ç€å«åå­—ï¼ŒæŒ‰ç…§å¥¹çš„è¦æ±‚å»åšå°±å¥½äº†ã€‚ç„¶åæ˜¯åˆ°æ—è¾¹ç¬¬ä¸‰ä¸ªäººé‚£é‡Œæµ‹è§†åŠ›ã€‚ æœ€åé€šè¿‡åä¼šç»™ä½ ä¸€å¼ å•å­ï¼Œç­¾åç„¶åå»å¤§å…æ’é˜Ÿæ‹¿å·ã€‚ æ’é˜Ÿæ‹¿å·åœ¨å¤§å…é‡Œï¼Œè¿›é—¨å³æ‰‹è¾¹æ˜¯æ’é˜Ÿæ‹¿å·çš„åœ°æ–¹ã€‚ä¹Ÿæ˜¯æœ‰æ‘„åƒå¤´é€šè¿‡äººè„¸è¯†åˆ«ç»™å·ã€‚ è¿™é‡Œè¦è¯´ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œæ’é˜Ÿæ‹¿å·å’Œå½“æ—¶è¿›é—¨æ—¶åˆ·èº«ä»½è¯äººè„¸æ¯”å¯¹å±äºå…ˆåçš„æ­¥éª¤ã€‚å¦‚æœä½ åœ¨è¿›é—¨æ—¶æ²¡æœ‰åˆ·ä¸Šæˆ–äººè„¸æ¯”å¯¹ä¸æˆåŠŸå°±è¿›æ¥äº†ï¼Œåœ¨è¿™é‡Œæ‹¿å·çš„æ—¶å€™å°±æ²¡æœ‰ä½ çš„ä¿¡æ¯ã€‚æˆ‘åœ¨æ’é˜Ÿæ—¶çœ‹åˆ°å¥½å‡ äººå»åˆé‡æ–°å»é—¨å£åˆ·äº†ä¸€éæ‰èƒ½æ‹¿å·ã€‚ æ‹¿å®Œå·åè¿›å…¥ä¸šåŠ¡å¤§å…ç­‰ç€å«å·å°±è¡Œäº†ã€‚ éœ€è¦å¤šä¹…æ€»çš„æ¥è¯´ï¼Œä»æˆ‘è¿›å…¥åŠè¯å¤§å…ï¼Œåˆ°æˆ‘åŠå¥½è¯ä»¶èµ°å‡ºå¤§å…ï¼Œå¤§æ¦‚æ˜¯èŠ±äº†50åˆ†é’Ÿå·¦å³ã€‚å½“ç„¶ï¼Œè¿™æ˜¯å¯¹äºä¸€ä¸ªåƒæˆ‘è¿™æ ·çš„ç¬¬ä¸€æ¬¡æ¢è¯çš„å°ç™½è€Œè¨€çš„ï¼Œæ¯•ç«Ÿæˆ‘åœ¨é‡Œé¢æµªè´¹äº†å¾ˆå¤šâ€œå­¦ä¹ â€çš„æ—¶é—´ã€‚ ä½ è¯´æˆ‘æƒ³å¿«ç‚¹åŠï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆç§˜ç±å‘¢ï¼Ÿ å½“ç„¶ï¼Œç§˜ç±å½“ç„¶æœ‰äº†ã€‚é‚£ä¹ˆä¸‹é¢ï¼Œæˆ‘å°±æŠŠæˆ‘æ€»ç»“çš„ â€œå¿«é€Ÿæ¢è¯â€ ç§˜ç±å‘Šè¯‰ä½ ã€‚ å¦‚ä½•å¿«é€Ÿæ¢è¯ å¸¦å¥½ èº«ä»½è¯ é©¾é©¶è¯ äººæ°‘å¸ åˆ·èº«ä»½è¯è¿›å…¥å¤§å…åï¼Œå…ˆå»å¤§å…å…¥å£å·¦æ‰‹è¾¹çš„ â€œèº«ä»½è¯å¤å°æœºâ€ å»å¤å°èº«ä»½è¯ï¼ŒæŒ‰ç…§æœºå™¨ä¸Šçš„è¦æ±‚åšå°±å¥½äº†ã€‚ å¦‚æœè‡ªå·±æœ‰æºå¸¦ç…§ç‰‡ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰æºå¸¦ç…§ç‰‡ï¼Œåœ¨ â€œèº«ä»½è¯å¤å°æœºâ€ æ—è¾¹æœ‰ä¸¤å° â€œç›¸ç‰‡å¿«ç…§æœºâ€ ï¼Œç›´æ¥è¿›å»ç…§ç›¸ã€‚ å»æ—è¾¹çš„é€šé“é‡Œçš„ç¬¬ä¸€ä¸ªæˆ¿é—´ï¼Œè¿›è¡Œä½“æ£€ã€‚ æ‹¿ç€ èº«ä»½è¯å¤å°ä»¶ å’Œ ç…§ç‰‡ åŠ ä½“æ£€å• åˆ°å¤§å…å…¥å£å³æ‰‹è¾¹å»æ’é˜Ÿæ‹¿å·ã€‚ è¿›å…¥å¤§å…åç­‰ç€å«å·åŠç†å³å¯ã€‚ å¯¹äºç¬¬ä¸€æ¬¡æ¥åŠç†çš„äººæ¥è¯´ï¼Œæ—¶é—´åº”è¯¥å°±æ˜¯æµªè´¹åœ¨äº†æ¥å›çš„å’¨è¯¢ä¸­ï¼Œåƒæ— å¤´è‹è‡é‚£æ ·ã€‚ æˆ‘åˆšè¿›å»çš„æ—¶å€™ï¼Œçœ‹åˆ°å¥½å¤šäººç›´æ¥å°±å¥”ç€å¤§å…å…¥å£å³æ‰‹è¾¹çš„æ’é˜Ÿå«å·å¤„å°±å»äº†ï¼Œåº”è¯¥æ˜¯çœ‹åˆ°äº†ä¸Šé¢å†™ç€â€œä¸šåŠ¡åŠç†â€çš„å­—æ ·ï¼Œç»“æœè¢«å‘ŠçŸ¥å…ˆè¦è¿›è¡Œä½“æ£€æ‰èƒ½æ‹¿å·ã€‚ç­‰æ‰¾åˆ°ä½“æ£€çš„åœ°æ–¹ï¼Œåˆè¢«å‘ŠçŸ¥å¿…é¡»æœ‰ç…§ç‰‡æ‰è¡Œï¼Œå› ä¸ºä½“æ£€å•ä¸Šéœ€è¦è´´ç…§ç‰‡ã€‚ ä½“ä¼šé€šè¿‡è¿™æ¬¡æ¢è¯ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸ªäººçš„ä½“ä¼šï¼Œå½“ç„¶å¹¶ä¸ç®—æ˜¯åæ§½ã€‚ æŒºå¤§çš„ä¸€ä¸ªè½¦ç®¡æ‰€ï¼Œæ²¡æœ‰ä¸€ä¸ªè®©æ¥åŠç†ä¸šåŠ¡çš„ç¾¤ä¼—å¯ä»¥ä¼‘æ¯æˆ–åç€çš„ â€œå‡‰å¿«å„¿â€ çš„åœ°æ–¹ï¼Œæ¯•ç«Ÿå¤§çƒ­çš„å¤©ï¼Œæ„Ÿè§‰éå¸¸ä¸äººæ€§åŒ–ã€‚åŠå…¬äººå‘˜å¯ä»¥åœ¨åŠå…¬å®¤é‡Œå¹ç€ç©ºè°ƒä¼‘æ¯ï¼Œè®©æ¥åŠç†ä¸šåŠ¡çš„ç¾¤ä¼—ä»¬åœ¨å¤–é¢æ™’ç€å¤§å¤ªé˜³ç­‰ç€ã€‚ã€‚ã€‚ åœ¨ä¸šåŠ¡å¤§å…ä¸­æ²¡æœ‰å¯ä»¥å’¨è¯¢çš„å·¥ä½œäººå‘˜ã€‚æˆ‘çœ‹åˆ°çš„åªæœ‰ä¸€ä¸ªæœºå™¨äººã€‚å°±æ˜¯ä½ è¯´ä¸€å¥å®ƒå›ä¸€å¥çš„é‚£ç§ã€‚ æ„Ÿè§‰å¦‚æœæ²¡æœ‰å®‰æ’ç›¸åº”çš„å’¨è¯¢äººå‘˜çš„è¯ï¼Œå¯ä»¥è´´ä¸€å¼ ä¸šåŠ¡åŠç†æµç¨‹å›¾ï¼Œæ ‡æ˜ç¬¬ä¸€äºŒä¸‰æ­¥ï¼Œä¸ä¼šè®©æ¥åŠä¸šåŠ¡çš„ç¾¤ä¼—åœ¨é‡Œé¢å›¢å›¢è½¬ã€‚ åœ¨æ¥åŠç†ä¹‹å‰ä¹Ÿåœ¨ç½‘ä¸ŠæŸ¥åˆ°è¿‡è¿™é‡Œæœ‰æä¾›è‡ªåŠ©æœåŠ¡åŠç†çš„æœºå™¨ã€‚æˆ‘ä¹Ÿçœ‹åˆ°äº†æ˜¯æ‘†æ”¾åœ¨â€œèº«ä»½è¯å¤å°æœºâ€æ—è¾¹çš„ï¼Œæœ‰ä¸¤å°ã€‚æˆ‘å»æ—è¾¹çœ‹äº†çœ‹ï¼Œæ²¡æœ‰æ‰¾åˆ°æ›´æ¢é©¾é©¶è¯çš„æŒ‰é’®æˆ–æ ‡è¯†ï¼Œå€’æ˜¯æœ‰å‡ ä¸ªæ¥åŠç†è¿ç« çš„äººåœ¨é‚£é‡Œæ’é˜Ÿã€‚å› ä¸ºæ—è¾¹ä¹Ÿæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å’¨è¯¢çš„å·¥ä½œäººå‘˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±æ²¡å¤ªå…³æ³¨è¿™ä¸ªã€‚æœ¬æ¥æ¥ä¹‹å‰æ˜¯æƒ³ç€å¦‚æœè¿™ç§è‡ªåŠ©æœåŠ¡æœºä¸Šå¯ä»¥ç›´æ¥åŠç†çš„è¯æˆ‘å°±ç›´æ¥åœ¨æœºå™¨ä¸ŠåŠç†äº†ï¼Œæ¯•ç«Ÿç›¸æ¯”äººå·¥çš„è¦å¿«å¾ˆå¤šã€‚ä¸è¿‡åŠå®Œåæƒ³æƒ³ï¼Œè¿™ä¸ªæµç¨‹ä¸‹æ¥è¦è¿›è¡Œä½“æ£€ï¼Œè´´ç…§ç‰‡ï¼Œå½“åœºåˆ¶ä½œæ–°è¯ä»¶ç­‰ç­‰æ“ä½œï¼Œè¿˜æ˜¯äººå·¥çš„è¦é è°±ä¸€äº›ã€‚ æ„Ÿè§‰åŠå…¬äººå‘˜çš„æœåŠ¡æ€åº¦ä¸æ˜¯å¾ˆå¥½ã€‚ æ€»çš„æ¥è¯´ï¼ŒåŠç†ä¸šåŠ¡è¿˜ç®—éå¸¸å¿«é€Ÿçš„ï¼Œä¸šåŠ¡å¤§å…å†…ä¹Ÿæ˜¯äº•ç„¶æœ‰åºã€‚ å¦‚æœçœŸçš„å¸®åˆ°äº†ä½ ï¼Œåˆ«å¿˜äº†å›æ¥ç»™ä¸ªå°å°çš„é¼“åŠ±å‘€ï¼ï¼ï¼]]></content>
      <tags>
        <tag>äººåœ¨å¸éƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerå…±äº«volumeçš„æƒé™é—®é¢˜]]></title>
    <url>%2F2018%2F06%2F12%2Fdocker-volume-permission%2F</url>
    <content type="text"><![CDATA[æœ‰æ—¶å€™åœ¨åˆ›å»ºDockeå®¹å™¨æ—¶ï¼Œæˆ‘ä¸€èˆ¬éƒ½ä¼šå…ˆåœ¨hostä¸»æœºä¸‹åˆ›å»ºä¸€ä¸ªç”¨æ¥æ˜ å°„åˆ°å®¹å™¨å†…çš„ç›®å½•ä½œä¸º volume æ˜ å°„ç›®å½•ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¿˜è®°æå‰åˆ›å»ºè¯¥ç›®å½•ï¼Œè€Œç›´æ¥æ‰§è¡Œäº† docker run .... -v /data/sites:/app ....ubuntu:latest å‘½ä»¤ã€‚è¯¥å‘½ä»¤ä¼šè‡ªè¡Œåœ¨ host ä¸»æœºä¸‹åˆ›å»ºç›®å½• /data/sites ã€‚ ä½†å½“å‘è¯¥æ–‡ä»¶ä¸­æ‹·è´æ–‡ä»¶æ—¶ï¼Œå°±ä¼šæç¤º permission denied çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºå½“å‰ç”¨æˆ·å¯¹è¯¥ç›®å½•æ²¡æœ‰å¯æ“ä½œæƒé™å¯¼è‡´çš„ã€‚ volume çš„æƒé™åœ¨äºä¸»æœºæ˜¯æ€ä¹ˆç»™çš„ï¼Œå¦‚æœä½ æƒ³è¦ç»™phpfpmæ–‡ä»¶å¤¹ www-data:www-data æƒé™ï¼Œåœ¨ä½ çš„ä¸»æœºæŒ‚è½½ç›®å½•æ‰§è¡Œ chown -R www-data:www-data /data/sites å³å¯ã€‚ åœ¨å®¿ä¸»æœºä¸º volume ç›®å½•é‡æ–°è®¾ç½®hostä¸»æœºä¸‹å½“å‰ç”¨æˆ·çš„æƒé™å³å¯ï¼š å¦‚åœ¨ host ä¸»æœºä¸‹ï¼Œå½“å‰ç”¨æˆ·ä¸º tigerï¼š 1$ chown -R tiger:tiger /data/sites]]></content>
      <categories>
        <category>Dockerå®¹å™¨æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç³»ç»Ÿä¸‹å¿«é€Ÿæœç´¢ç¥å™¨Spotlight]]></title>
    <url>%2F2018%2F05%2F14%2Fspotlight-skills%2F</url>
    <content type="text"><![CDATA[åœ¨Macç³»ç»Ÿä¸‹å¦‚ä½•æ›´å¿«é€Ÿçš„æ‰¾åˆ°æƒ³è¦çš„æ–‡ä»¶ï¼Ÿ æŠ€å·§ ç›´æ¥æŒ‰ä¸‹ Command + Space æ˜¾ç¤º è¾“å…¥æ–‡ä»¶åæˆ–ç›¸å…³å­—ç¬¦ï¼Œå›è½¦ç›´æ¥æ‰“å¼€ã€‚ åˆ—è¡¨æ–‡ä»¶é€šè¿‡ä¸Š/ä¸‹ç®­å¤´é€‰æ‹© æŸ¥çœ‹å…¨éƒ¨æœç´¢ç»“æœï¼Œç‚¹å‡» â€œåœ¨Finderä¸­æ˜¾ç¤ºå…¨éƒ¨â€ åå›è½¦ æŸ¥æ‰¾å¹¶æ‰“å¼€æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ï¼šé€‰ä¸­è¦æŸ¥æ‰¾çš„æ–‡ä»¶åæŒ‰ä¸‹Command+å›è½¦ æ˜¾ç¤ºæ–‡ä»¶å®Œæ•´è·¯å¾„ï¼šé€‰ä¸­è¦æŸ¥æ‰¾çš„æ–‡ä»¶åæŒ‰ä¸‹Commandé”®ï¼Œåœ¨ä¸‹æ–¹å‡ºç°å®Œæ•´è·¯å¾„åï¼› è¿›è¡Œæ•°å­¦è®¡ç®—ã€å•ä½è½¬æ¢ï¼šç›´æ¥è¾“å…¥æ•°å­¦å…¬å¼è¿›è¡Œè®¡ç®—ï¼›ç›´æ¥è¾“å…¥è´§å¸å•ä½è¿›è¡Œè½¬æ¢ï¼› å®šåˆ¶æŸ¥æ‰¾èŒƒå›´ï¼šâ€œç³»ç»Ÿåå¥½è®¾ç½®â€“Spotlightâ€ã€‚ åˆ©ç”¨æ–‡ä»¶ç±»å‹æŸ¥æ‰¾ï¼šâ€œkind:(file type)â€ å¦‚ find:image ã€‚â€œfind typeâ€å¯é€‰ï¼šâ€œimageâ€ã€â€œmovieâ€ã€â€œmusicâ€ã€â€œemailâ€ã€â€œapplicationâ€ã€â€œtextâ€ã€â€œarchiveâ€ç­‰ é€šè¿‡æ–‡ä»¶æ ¼å¼æŸ¥æ‰¾ï¼šâ€œkind:(file format)â€ å¦‚ find:pdfã€‚ â€œfind formatâ€å¯é€‰ï¼šâ€œjpegâ€ã€â€œgifâ€ã€â€œpdfâ€ã€â€œmp3â€ã€â€œmp4â€ã€â€œzipâ€ç­‰ã€‚ è”åˆæ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶åæŸ¥æ‰¾ï¼šâ€œkind:(file type/file fromat) &quot;file name&quot;â€ å¦‚ kind:pdf &quot;python&quot; å³æœç´¢æ–‡ä»¶åå¸¦æœ‰â€œpythonâ€çš„pdfæ–‡ä»¶ã€‚ å‚è€ƒ Spotlightâ€“Macä¸Šçš„æŸ¥è¯¢åˆ©å™¨]]></content>
      <tags>
        <tag>Skill</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒä¸€è®¾å¤‡ä¸‹å¤šé‡SSH Keysç®¡ç†]]></title>
    <url>%2F2018%2F05%2F14%2Fmultiple-ssh-keys-management-under-the-same-device%2F</url>
    <content type="text"><![CDATA[ä¸€èˆ¬æˆ‘ä»¬åœ¨è‡ªå·±çš„ä¸ªäººç”µè„‘ä¸Šä½¿ç”¨gitæ—¶éƒ½ä¼šé€šè¿‡SSHçš„æ–¹å¼æ¥è¿æ¥ä»£ç ç®¡ç†ç«™ç‚¹å¦‚Githubç­‰ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šé‡åˆ°å¤šé‡SSHçš„é—®é¢˜ã€‚ éœ€æ±‚æœ€å¸¸è§çš„æƒ…å†µå°±æ˜¯ä¸€èˆ¬çš„å…¬å¸éƒ½ä¼šæœ‰è‡ªå·±çš„ç§æœ‰gitä»“åº“ï¼Œæ¯”å¦‚ç”¨gitlabæ¥æ­å»ºçš„gitä»“åº“ç«™ç‚¹ã€‚è€Œå…¬å¸é‡Œä¹Ÿä¼šä¸ºæ¯ä½å‘˜å·¥è®¾ç½®ä¸€ä¸ªä¸ªäººä¸“å±çš„å…¬å¸åŸŸåé‚®ç®±ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹å°±é‡åˆ°é—®é¢˜äº†ï¼šæˆ‘ä»¬åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå·²ç»é…ç½®äº†è‡ªå·±çš„é‚®ç®±è´¦å·ä½œä¸ºä¸»åŠ›çš„gitè´¦æˆ·ï¼Œè€Œåœ¨å¼€å‘å…¬å¸çš„é¡¹ç›®æ—¶ï¼Œç”¨æ¥æäº¤gitæ“ä½œçš„æ—¶å€™å°±è¦åˆ‡æ¢ä¸ºå…¬å¸åˆ†é…çš„é‚®ç®±è´¦å·äº†ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ç›®å½•å†…ä½¿ç”¨ git config user.name å’Œ git config user.email æ¥ä¸ºè¯¥é¡¹ç›®æŒ‡å®šå•ç‹¬çš„gitæäº¤è´¦æˆ·ï¼Œä½†åœ¨ git pull å’Œ git push æ—¶ï¼Œæ¯æ¬¡éƒ½éœ€è¦ä½¿ç”¨ http çš„æ–¹å¼è¾“å…¥å¯†ç æ‰è¡Œï¼Œéå¸¸çš„éº»çƒ¦ã€‚ å‡†å¤‡é‚£ä¹ˆç°åœ¨é—®é¢˜å°±æ¥äº†ï¼Œä¸ªäººä½¿ç”¨çš„gitè´¦æˆ·å’Œå…¬å¸åˆ†é…çš„gitè´¦æˆ·åº”è¯¥å¦‚ä½•åœ¨ä¸€å°ç”µè„‘ä¸ŠåŒæ—¶å­˜åœ¨å¹¶ä¿è¯éƒ½èƒ½åˆ†åˆ«ä½¿ç”¨SSHçš„æ–¹å¼æ¥æäº¤ä»£ç å‘¢ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬æŒ‡å®šä¸‹é¢ç¤ºä¾‹ä½¿ç”¨çš„gitè´¦æˆ·ï¼š æˆ‘çš„ä¸ªäººgitè´¦æˆ·: leafney leafney@gmail.com gitä»“åº“ï¼šgithub.comæˆ‘çš„å…¬å¸gitè´¦æˆ·: wuyazi wuyazi@company.com gitä»“åº“ï¼š111.206.223.205:8080 ï¼ˆå…¬å¸é…ç½®çš„gitlabå¯¹åº”ipåœ°å€ï¼‰æˆ‘ä½¿ç”¨çš„Bash : iTerm2+zsh æˆ‘çš„éœ€æ±‚æ˜¯ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ä¸ªäººç”µè„‘ï¼Œæ‰€ä»¥æˆ‘å¸Œæœ›çš„æ˜¯åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä»ç„¶ä½¿ç”¨æˆ‘è‡ªå·±çš„gitè´¦æˆ· leafney@gmail.com ä½œä¸ºå…¨å±€è´¦æˆ·æ¥æäº¤é¡¹ç›®ã€‚å¯¹äºå…¬å¸çš„é¡¹ç›®ï¼Œåˆ™ä½¿ç”¨å…¬å¸çš„gitè´¦æˆ· wuyazi@company.com ä½œä¸ºå±€éƒ¨è´¦æˆ·æ¥ä»…æäº¤å…¬å¸çš„é¡¹ç›®ã€‚ ä¹‹å‰åœ¨æˆ‘çš„macä¸‹å·²ç»è®¾ç½®äº†é»˜è®¤çš„gitè´¦å· leafney@gmail.com å¯¹åº”çš„sshå¯†é’¥ ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰è®¾ç½®è¿‡SSHï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼šLinuxä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github æ–°å¢SSH keyç°åœ¨è¦æ–°å¢ä¸€ä¸ªå·¥ä½œçš„è´¦å·ï¼Œä»¥ wuyazi wuyazi@company.com ä¸ºç¤ºä¾‹è´¦æˆ·æ¥æ·»åŠ ã€‚ æŸ¥çœ‹å·²æ·»åŠ SSHå¯†é’¥æŸ¥çœ‹macä¸‹å·²ç»æ·»åŠ çš„æˆ‘çš„ä¸ªäººgitè´¦å·ä¿¡æ¯: 123~/.sshâœ lsid_rsa id_rsa.pub known_hosts æŸ¥çœ‹ id_rsa.pub å†…å®¹: 12âœ vim id_rsa.pubssh-ras xxxxxxxxxxxx leafney@gmail.com æ–°å¢SSHå¯†é’¥åˆ›å»ºæ–°çš„ ssh keyï¼š 1234// åˆ‡æ¢åˆ° .ssh ç›®å½•ä¸‹âœ cd ~/.ssh// è¾“å…¥å·¥ä½œé‚®ç®±æ¥åˆ›å»ºæ–°çš„ssh key,gitå”¯ä¸€è®¤è¯æ ‡å‡†æ˜¯é‚®ç®±âœ ssh-keygen -t rsa -C &quot;wuyazi@company.com&quot; éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå½“æç¤º Enter file in which to save the key (/Users/leafney/.ssh/id_rsa): æ—¶ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨é»˜è®¤çš„åç§° id_rsa ï¼Œå› ä¸ºè¯¥åç§°æˆ‘ä»¬ä¹‹å‰åœ¨è®¾ç½®ä¸ªäººgitè´¦æˆ·æ—¶å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œæ–°è®¾ç½®ä¸€ä¸ªé’ˆå¯¹äºå…¬å¸gitè´¦æˆ·çš„åç§° id_rsa_workã€‚ æ“ä½œè®°å½•ï¼š 123456789101112131415161718192021222324~/.sshâœ ssh-keygen -t rsa -C &quot;wuyazi@company.com&quot;Generating public/private rsa key pair.Enter file in which to save the key (/Users/leafney/.ssh/id_rsa): id_rsa_workEnter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in id_rsa_work.Your public key has been saved in id_rsa_work.pub.The key fingerprint is:SHA256:gZO6tyeOrp0FLGT5q2kBn3+9Et+P1shzjuyv3rUXWY0 wuyazi@company.comThe key&apos;s randomart image is:+---[RSA 2048]----+| || o ||. + . . || o o . . E .|| B . S o . || o = ... o || . B oo.o o .. || = Ao.oo*++. . || +=B.o+.+BB=.. |+----[SHA256]-----+~/.ssh took 22s å°†å¯†é’¥æ·»åŠ åˆ°ssh agentç®¡ç†é€šè¿‡ssh agentå¯¹å¯†é’¥çš„ç®¡ç†æˆ‘ä»¬å¯ä»¥å®ç°å…å¯†ç æäº¤ã€‚ä½¿ç”¨ ssh-add å‘½ä»¤æ¥å°†æ–°å¢çš„å¯†é’¥æ·»åŠ åˆ° ssh-agent çš„é«˜é€Ÿç¼“å­˜ä¸­ï¼š 12345~/.ssh//æ·»åŠ ä¹‹å‰æ‰€æ–°ç”Ÿæˆçš„ç”¨äºworkçš„å¯†é’¥âœ ssh-add ~/.ssh/id_rsa_workIdentity added: /Users/leafney/.ssh/id_rsa_work (/Users/leafney/.ssh/id_rsa_work) å¯ä»¥é€šè¿‡å‘½ä»¤ ssh-add -l æ¥æŸ¥çœ‹å­˜åœ¨äº ssh-agent å¯†é’¥ç®¡ç†å™¨ä¸­æ‰€æœ‰çš„å¯†é’¥åˆ—è¡¨ï¼š 1234~/.sshâœ ssh-add -l2048 SHA256:gZO6tyeOrp0FLGT5q2kBn3+9Et+P1shzjuyv3rUXWY0 /Users/leafney/.ssh/id_rsa_work (RSA)2048 SHA256:My6EL2r7d20oq01x1PeuRiYJSK2aID3sQlR+xCagPnE /Users/leafney/.ssh/id_rsa (RSA) è¿™é‡Œå¦‚æœå‘ç°ä¹‹å‰çš„ id_rsa çš„å¯†é’¥ä¸å­˜åœ¨ï¼Œå¯ä»¥é‡æ–°æ·»åŠ ä¸€ä¸‹ã€‚ å¦‚æœè¦åˆ é™¤æ‰€æœ‰å·²æ·»åŠ çš„å¯†é’¥ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼šssh-add -D ã€‚ é…ç½®ssh configç¼–è¾‘configSSH ç¨‹åºå¯ä»¥ä»ä»¥ä¸‹é€”å¾„è·å–é…ç½®å‚æ•°ï¼š ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼š~/.ssh/configç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼š/etc/ssh/ssh_config é…ç½®æ–‡ä»¶å¯åˆ†ä¸ºå¤šä¸ªé…ç½®åŒºæ®µï¼Œæ¯ä¸ªé…ç½®åŒºæ®µä½¿ç”¨ Host æ¥åŒºåˆ†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸åŒçš„Hostæ¥åŠ è½½ä¸åŒçš„é…ç½®æ®µã€‚ åœ¨ ~/.ssh ç›®å½•ä¸‹æ‰“å¼€é…ç½®æ–‡ä»¶ config(æ²¡æœ‰åˆ™æ–°å¢è¯¥æ–‡ä»¶)ï¼Œå¦‚ä¸‹æ˜¯æˆ‘çš„é…ç½®ç¤ºä¾‹ï¼š æ–°å¢ï¼š 12âœ cd ~/.ssh/âœ touch config config å†…å®¹: 123456789Host work HostName 111.206.223.205:8080 User git IdentityFile ~/.ssh/id_rsa_workHost github.com HostName github.com User git IdentityFile ~/.ssh/id_rsa é…ç½®é¡¹è¯´æ˜å¸¸ç”¨çš„SSHé…ç½®é¡¹ï¼š Host åˆ«å : Host myhost è¡¨ç¤ºè‡ªå®šä¹‰çš„hostç®€ç§°ï¼Œä»¥åè¿æ¥è¿œç¨‹æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ ssh myhost (æ³¨æ„ä¸‹é¢æœ‰ç¼©è¿›) HostName ä¸»æœºå : ä¸»æœºåå¯ä»¥æ˜¯ipä¹Ÿå¯ä»¥æ˜¯åŸŸå(å¦‚:github.comæˆ–è€…bitbucket.org);å¦‚æœä¸»æœºåä¸­åŒ…å« %h ï¼Œåˆ™å®é™…ä½¿ç”¨æ—¶ä¼šè¢«å‘½ä»¤è¡Œä¸­çš„ä¸»æœºåæ›¿æ¢ã€‚ Port ç«¯å£ : è¡¨ç¤ºæœåŠ¡å™¨open-sshç«¯å£ï¼Œé»˜è®¤22ï¼Œé»˜è®¤æ—¶ä¸€èˆ¬ä¸å†™æ­¤è¡Œ User ç”¨æˆ·å : User git è¡¨ç¤ºç™»å½•sshçš„ç”¨æˆ·åï¼Œå¦‚ git IdentityFile ï¼š è¡¨ç¤ºè¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ ~/.ssh/id_rsa_*) å…¶ä»–SSHé…ç½®é¡¹ï¼š IdentitiesOnly åªæ¥å— SSH Key ç™»å½• å¯é€‰ yes or no PreferredAuthentications å¼ºåˆ¶ä½¿ç”¨Public KeyéªŒè¯ æµ‹è¯•å¦‚ä¸Šï¼Œæˆ‘ç”¨åˆ«å work æŒ‡ä»£äº†å…¬å¸gitlabçš„ipåœ°å€ 111.206.223.205:8080 ï¼Œä½¿ç”¨ ssh -T å‘½ä»¤æ¥éªŒè¯ä¸€ä¸‹ï¼š 123456âœ ssh -T git@workThe authenticity of host &apos;111.206.223.205:8080 (111.206.223.205:8080)&apos; can&apos;t be established.RSA key fingerprint is SHA256:/UwiMSDZVkgF+3yLAxHwMJfYGxK2XGk5DU3txRr+LNg.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;111.206.223.205:8080&apos; (RSA) to the list of known hosts.Welcome to GitLab, æ— å´–å­! ç¬¬ä¸€ç‰ˆç¤ºä¾‹é¡¹ç›®cloneå¦‚ä¸Šçš„æ­¥éª¤é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡sshåˆ«åçš„æ–¹å¼æ¥åŒºåˆ†ä½¿ç”¨ä¸åŒçš„SSH Keyäº†ã€‚ åœ¨ clone é¡¹ç›®åˆ°æœ¬åœ°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ä¸ªå°å°çš„æ”¹åŠ¨ã€‚ ä¹‹å‰çš„cloneå‘½ä»¤ï¼š 1âœ git clone git@111.206.223.205:8080:how_to_use_multiple_git_ssh/you_can_by_this_way.git æ›´æ”¹åçš„cloneå‘½ä»¤ï¼š 1âœ git clone git@work:how_to_use_multiple_git_ssh/you_can_by_this_way.git å³æˆ‘ä»¬å°†åŸæ¥sshåœ°å€ä¸­çš„åŸŸåç”¨æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­çš„åˆ«åæ¥ä»£æ›¿äº†ï¼Œè€Œç›¸åº”çš„åˆ«ååˆå¯¹åº”ç€sshå¯†é’¥æ–‡ä»¶ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ›´ç²¾ç®€ä¸€ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨config æ–‡ä»¶ä¸­å·²ç»æŒ‡å®šäº†ç”¨æˆ·ä¸º git ï¼Œæ‰€ä»¥å¯å°†è·¯å¾„ä¸­çš„ç”¨æˆ·åä¹Ÿçœç•¥æ‰ï¼š 1âœ git clone work:how_to_use_multiple_git_ssh/you_can_by_this_way.git è¿™æ ·ï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯éå¸¸çš„èˆ’æœå‘¢ï¼Ÿ è€Œå¦‚æœæˆ‘è¦cloneè‡ªå·±çš„ä¸ªäººé¡¹ç›®ï¼Œåˆ™ä»ç„¶æŒ‰ç…§ä¹‹å‰çš„æ“ä½œå³å¯ï¼š 1âœ git clone git@github.com:Leafney/docker-alpine-mysql.git è®¾ç½®é¡¹ç›®æäº¤è´¦æˆ·åœ¨å°†é¡¹ç›® clone åˆ°æœ¬åœ°ä¹‹åï¼Œè¿˜è¦ä¸ºè¯¥é¡¹ç›®å•ç‹¬è®¾ç½®commitæäº¤æ—¶ä½¿ç”¨çš„gitè´¦æˆ·ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨ä¹‹å‰å·²ç»æŒ‰ç…§ Linuxä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github æ“ä½œä¸­çš„æ–¹æ³•å°†æˆ‘çš„ä¸ªäººè´¦æˆ· leafney leafney@gmail.com è®¾ç½®ä¸ºäº†å…¨å±€çš„gitè´¦æˆ·ï¼Œåœ¨æäº¤é¡¹ç›®æ—¶å¦‚æœæ²¡æœ‰è®¾ç½®é¡¹ç›®å•ç‹¬çš„gitè´¦æˆ·ï¼Œå°±ä¼šä½¿ç”¨å…¨å±€çš„ï¼Œé‚£è¿™æ ·å°±ä¸å¯¹äº†ã€‚ ä¸åŠ  --global å‚æ•°ï¼Œä¸ºåˆšåˆšcloneä¸‹æ¥çš„å…¬å¸é¡¹ç›®è®¾ç½®å…¬å¸åˆ†é…çš„gitè´¦æˆ·ï¼š 12âœ git config user.name &quot;wuyazi&quot; # åŒå¼•å·æ˜¯ä¸ºäº†é˜²æ­¢nameä¸­å«æœ‰ç©ºæ ¼è€Œå¯¼è‡´é”™è¯¯âœ git config user.email &quot;wuyazi@company.com&quot; è¿™æ ·å°±é…ç½®å®Œæˆäº†ã€‚ è¿˜èƒ½å†å¿«ä¸€ç‚¹å—æ€»ç»“ä¸Šé¢çš„æ“ä½œæ­¥éª¤ï¼Œæ— éæ˜¯è®¾ç½®äº†å¦‚ä¸‹ä¸¤é¡¹ï¼š æŒ‡å®šgité¡¹ç›®ä½¿ç”¨çš„SSH Key æŒ‡å®šgité¡¹ç›®æäº¤æ—¶ä½¿ç”¨çš„gitè´¦æˆ· é‚£ä¹ˆç¬¬ä¸€æ­¥æˆ‘ä»¬å·²ç»åœ¨sshçš„ config ä¸­åšäº†æŒ‡å®šï¼Œè²Œä¼¼å·²ç»æ˜¯æœ€å¿«çš„æ“ä½œäº†ã€‚é‚£å°±çœ‹çœ‹ç¬¬äºŒé¡¹å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ æˆ‘ä»¬æ˜¯åœ¨gité¡¹ç›®cloneåˆ°æœ¬åœ°ä¹‹åï¼Œå†å»ä¸ºè¯¥é¡¹ç›®æ·»åŠ äº†ä½¿ç”¨çš„gitè´¦æˆ·ï¼Œé‚£æ˜¯å¦èƒ½å°†è¿™ä¸¤æ­¥åˆå¹¶ä¸ºä¸€æ­¥å‘¢ï¼Ÿ ç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥çš„ã€‚ è®¾ç½®Base/Zshæ–¹ä¾¿cloneæ“ä½œä¸ºäº†ä»¥åæ–¹ä¾¿ä½¿ç”¨ä¸åŒgitè´¦æˆ· git clone é¡¹ç›®ï¼Œæˆ‘ä»¬åœ¨ bash çš„ ~/.bashrc æˆ–è€… zsh çš„ ~/.zshrc å†…åŠ å…¥ï¼š 1alias work-git-clone=&apos;git clone --config user.name=&quot;wuyazi&quot; --config user.email=&quot;wuyazi@company.com&quot; $@&apos; ä»¥åå°±åªè¦è¾“å…¥ work-git-clone REPO-SSH-URL ï¼Œæ•ˆæœå°±ç›¸å½“äºæ‰§è¡Œäº†å¦‚ä¸‹çš„å‘½ä»¤: 1234git clone REPO-SSH-URLcd REPOgit config user.name &quot;wuyazi&quot;git config user.email &quot;wuyazi@company.com&quot; ç„¶åï¼Œæ›´æ–° Bash/Zsh çš„è®¾ç½®ï¼š 12345# æ›´æ–°Bashè®¾ç½®âœ source ~/.bashrc# æ›´æ–°zshè®¾ç½®âœ source ~/.zshrc å‚è€ƒè‡ªï¼›å¤šé‡ SSH Keys èˆ‡ Github å¸³è™Ÿ ç¬¬äºŒç‰ˆç¤ºä¾‹ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬åœ¨ git clone å…¬å¸çš„gité¡¹ç›®æ—¶ï¼Œåªéœ€è¦æ‰§è¡Œå¦‚ä¸‹ç®€å•çš„ä¸¤æ­¥å³å¯ï¼š ç¬¬ä¸€æ­¥ï¼šæ›´æ”¹SSHåœ°å€ 1234# å°†é¡¹ç›®SSHåœ°å€ï¼šgit@111.206.223.205:8080:how_to_use_multiple_git_ssh/you_can_by_this_way.git# æ›´æ”¹ä¸º:work:how_to_use_multiple_git_ssh/you_can_by_this_way.git ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œ work-git-clone 1âœ work-git-clone work:how_to_use_multiple_git_ssh/you_can_by_this_way.git è€Œæ“ä½œä¸ªäººçš„gité¡¹ç›®ï¼Œå‘½ä»¤åªéœ€è¦ä¸€æ­¥ï¼š 1âœ git clone git@github.com:Leafney/docker-alpine-mysql.git æ–°çš„å¤æ‚éœ€æ±‚ä¸Šé¢çš„éœ€æ±‚å¯èƒ½æ˜¯ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¸¸è§è€Œä¸”æ™®é€šçš„ä¸€ç§æƒ…å†µäº†ï¼Œé‚£ä¹ˆä¸‹é¢çš„éœ€æ±‚ç®—æ˜¯ä¸€ç§ç¨å¾®å¤æ‚çš„æƒ…å†µäº†ã€‚ å› ä¸ºåœ¨Githubä¸Šå‘å¸ƒç§æœ‰çš„é¡¹ç›®ï¼Œæ˜¯éœ€è¦ä»˜è´¹çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬é’ˆå¯¹äºä¸ªäººçš„ç§æœ‰é¡¹ç›®ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©è‡ªå·±è´­ä¹°æœåŠ¡å™¨æ¥æ­å»ºå±äºè‡ªå·±çš„ç§æœ‰ä¸ªäººä»“åº“ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±çš„ gogit.itfanr.cc å°±æ˜¯æˆ‘ç”¨å¼€æºé¡¹ç›® Gogs æ¥æ­å»ºçš„ã€‚æœ‰å…´è¶£å¯æŸ¥çœ‹æˆ‘çš„å¼€æºé¡¹ç›®ï¼šDocker Ubuntu-Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»GogsæœåŠ¡ã€‚ ã€‚ é‚£ä¹ˆï¼Œç°åœ¨å°±å‡ºç°äº†ä¸‹é¢çš„å››ç§æƒ…å†µï¼š å¯¹äºæˆ‘ä¸ªäººæƒ³è¦å¼€æºçš„ä»£ç é¡¹ç›®ï¼Œæˆ‘ä¼šé€‰æ‹©ä½¿ç”¨ä¸ªäººè´¦æˆ·å‘å¸ƒåˆ° github.com ç«™ç‚¹ä¸‹ï¼› å¯¹äºæˆ‘ä¸ªäººçš„ç§æœ‰ä»£ç é¡¹ç›®ï¼Œæˆ‘ä¼šé€‰æ‹©ä½¿ç”¨ä¸ªäººè´¦æˆ·å‘å¸ƒåˆ°æˆ‘è‡ªå·±æ­å»ºçš„ gogit.itfanr.cc ä»“åº“ç«™ç‚¹ä¸‹ï¼› å¯¹äºå…¬å¸çš„ç§æœ‰é¡¹ç›®ï¼Œæˆ‘è¦é€‰æ‹©ä½¿ç”¨å…¬å¸åˆ†é…çš„gitè´¦æˆ·å‘å¸ƒåˆ°å…¬å¸æ­å»ºçš„ç§æœ‰ä»“åº“ 111.206.223.205:8080 ç«™ç‚¹ä¸‹ï¼› å¯¹äºæˆ‘åœ¨å·¥ä½œä¸­çš„ä¸€äº›ç§¯ç´¯æˆ–ç§äººçš„é¡¹ç›®ï¼Œæˆ‘æƒ³ä½¿ç”¨å…¬å¸åˆ†é…çš„gitè´¦æˆ·å‘å¸ƒåˆ°æˆ‘ä¸ªäººçš„ gogit.itfanr.cc ä»“åº“ç«™ç‚¹ä¸‹ï¼› ä¿®æ”¹ssh configç»è¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çš„å°±çŸ¥é“æƒ³è¦å®ç°ä¸Šé¢çš„éœ€æ±‚ï¼Œåªéœ€è¦é€šè¿‡ä¿®æ”¹SSHçš„é…ç½®æ–‡ä»¶ config ä¸­çš„é…ç½®å³å¯å®ç°ã€‚ å¯¹äºå…¬å¸çš„é¡¹ç›®ï¼Œé’ˆå¯¹äºä¸Šé¢ç¬¬3ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬ä»ç„¶å¦‚ä¹‹å‰çš„é…ç½®å³å¯ï¼š config : 12345# company repo accountHost work HostName 111.206.223.205:8080 User git IdentityFile ~/.ssh/id_rsa_work é‚£ä¹ˆåœ¨cloneé¡¹ç›®æ—¶çš„æ“ä½œå¦‚ä¸‹ï¼š æ›´æ”¹é¡¹ç›®SSHåœ°å€ä¸­çš„åŸŸåéƒ¨åˆ†ï¼› æ‰§è¡Œå‘½ä»¤ï¼š 1âœ work-git-clone work:how_to_use_multiple_git_ssh/you_can_by_this_way.git å¯¹äºå·¥ä½œä¸­çš„ç§äººé¡¹ç›®ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨å…¬å¸çš„gitè´¦æˆ·æ¥å‘å¸ƒåˆ°æˆ‘çš„ä¸ªäººä»“åº“ç«™ç‚¹ gogit.itfanr.ccã€‚é…ç½®æ—¶æˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šä½¿ç”¨å¯†é’¥ id_rsa_work ï¼š config : 12345# wuyazi private repo accountHost wuyazigogit HostName gogit.itfanr.cc User git IdentityFile ~/.ssh/id_rsa_work é‚£ä¹ˆåœ¨cloneé¡¹ç›®æ—¶çš„æ“ä½œå¦‚ä¸‹ï¼š æ›´æ”¹é¡¹ç›®SSHåœ°å€ä¸­çš„åŸŸåéƒ¨åˆ†ï¼› 1234# å¦‚å°†: ssh://git@gogit.itfanr.cc:9527/wuyazi/repo_for_myself.git# æ›´æ”¹ä¸º:ssh://git@wuyazigogit:9527/wuyazi/repo_for_myself.git æ‰§è¡Œå‘½ä»¤ï¼š 1work-git-clone ssh://git@wuyazigogit:9527/wuyazi/repo_for_myself.git 2019-02-11-æ›´æ–° åœ¨ä¸Šé¢çš„ é…ç½®é¡¹è¯´æ˜ ä¸­ä¹Ÿæœ‰æŒ‡å‡ºï¼Œå¦‚æœä½ çš„sshé“¾æ¥ä¸­ä¸æ˜¯é»˜è®¤çš„ç«¯å£ 22 å¦‚ ssh://git@gogit.itfanr.cc:9527/wuyazi/repo_for_myself.git ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å‚æ•° Port æ¥æŒ‡å®šï¼š 123456# wuyazi private repo accountHost wuyazigogit HostName gogit.itfanr.cc Port 9527 User git IdentityFile ~/.ssh/id_rsa_work åˆ™ï¼Œåé¢æ‰§è¡Œçš„å‘½ä»¤å°±æ˜¯ï¼š 1work-git-clone ssh://git@wuyazigogit/wuyazi/repo_for_myself.git è¿™æ ·ï¼Œçœ‹èµ·æ¥æ›´ç®€æ´ä¸€äº›äº†ã€‚ å› ä¸ºæˆ‘çš„ä¸ªäººè´¦æˆ·æ˜¯ä½œä¸ºå…¨å±€è´¦æˆ·æ¥ä½¿ç”¨çš„ï¼Œå°±æ˜¯è¯´åœ¨ config æ–‡ä»¶ä¸­å¦‚æœä¸Šé¢çš„ Host éƒ¨åˆ†æ²¡æœ‰åŒ¹é…ä¸Šï¼Œé‚£ä¹ˆè¦ä¿è¯æœ€åä¸€ä¸ª Host åŒ¹é…åˆ°æˆ‘çš„ä¸ªäººgitè´¦æˆ·ã€‚å†æ¬¡å›é¡¾ config é…ç½®é¡¹ä¸­çš„å¸¸ç”¨å‚æ•°ï¼Œæˆ‘ä»¬å‘ç° HostName é™¤äº†å¯ä»¥è®¾ç½®åŸŸåæˆ–ipåœ°å€ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸º %h ï¼Œè¡¨ç¤ºå®é™…ä½¿ç”¨æ—¶ä¼šè¢«å‘½ä»¤è¡Œä¸­çš„ä¸»æœºåæ›¿æ¢ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†å®ç°ä¸Šé¢çš„ç¬¬1ç§å’Œç¬¬2ç§æƒ…å†µï¼Œä»¥åŠå®ç°å¯¹æœªç‰¹æ®Šè¯´æ˜çš„é¡¹ç›®çš„é»˜è®¤åŒ¹é…ï¼Œæˆ‘ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥é…ç½®ï¼š 12345# leafney default account for github.com or gogit.itfanr.ccHost github.com gogit.itfanr.cc HostName %h User git IdentityFile ~/.ssh/id_rsa å¦‚ä¸Šï¼Œé’ˆå¯¹äºä¸åŒä¸»æœºåœ°å€ä½¿ç”¨åŒä¸€ç§é’¥è¿›è¡Œç™»å½•çš„æƒ…å†µï¼Œå¯ä»¥åœ¨ Host ä¸­æŒ‡å®šå¤šä¸ªåˆ«åæ¥åŒ¹é…ï¼Œè€Œ HostName ä¸­çš„ %h ä¼šè‡ªåŠ¨åŒ¹é…ç”¨æˆ·è¾“å…¥çš„sshåœ°å€ä¸­çš„åŸŸåéƒ¨åˆ†ï¼Œæ¥åŒ¹é…åˆ°å¯¹åº”çš„å¯†é’¥ã€‚ é‚£ä¹ˆåœ¨cloneé¡¹ç›®æ—¶çš„æ“ä½œå¦‚ä¸‹ï¼š 1git clone git@github.com:Leafney/ubuntu-gogs.git ç»¼ä¸Šï¼Œæˆ‘çš„ config é…ç½®å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617# company repo accountHost work HostName 111.206.223.205:8080 User git IdentityFile ~/.ssh/id_rsa_work# wuyazi private repo accountHost wuyazigogit HostName gogit.itfanr.cc User git IdentityFile ~/.ssh/id_rsa_work# leafney default account for github.com or gogit.itfanr.ccHost github.com gogit.itfanr.cc HostName %h User git IdentityFile ~/.ssh/id_rsa æ–°å¢é¡¹ç›®é…ç½®ä¸Šé¢çš„æ“ä½œä¸­è¯´åˆ°çš„æ–¹æ³•ä¸€èˆ¬é€‚ç”¨çš„åœºæ™¯æ¯”å¦‚ä½ å»åˆ°ä¸€å®¶æ–°å…¬å¸ï¼Œç„¶åä¼šç»™ä½ åˆ†é…å…¬å¸çš„é‚®ç®±åŠgitè´¦å·ï¼Œä»¥åŠå…¬å¸é¡¹ç›®çš„ç§æœ‰gitç«™ç‚¹ï¼Œç›´æ¥ä»ç«™ç‚¹ä¸Šé¢ clone é¡¹ç›®åˆ°ä½ çš„å¼€å‘ç”µè„‘ä¸Šï¼Œè¿™äº›é¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯å…¬å¸å·²æœ‰çš„é¡¹ç›®äº†ã€‚ æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä½ æ–°å¢ä¸€ä¸ªå…¬å¸çš„é¡¹ç›®ï¼Œé‚£å¯¹äºæ–°å¢å…¬å¸çš„é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¦å¦‚ä½•ä½¿ç”¨æŒ‡å®šçš„SSHè´¦æˆ·æ¥æ“ä½œå‘¢ï¼Ÿ ä¸€èˆ¬çš„æ­¥éª¤å¦‚ä¸‹ï¼š åˆå§‹åŒ–é¡¹ç›®åœ¨ä½ çš„å¼€å‘ç”µè„‘ä¸Šï¼Œæ–°å¢ä¸€ä¸ªgitç®¡ç†çš„é¡¹ç›®ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹ä½¿ç”¨ git init æ¥åˆå§‹åŒ–ã€‚ è®¾ç½®é¡¹ç›®gitè´¦æˆ·æ³¨æ„ï¼Œè¿™é‡Œå°±æ˜¯æœ€å…³é”®çš„ä¸€æ­¥äº†ã€‚æˆ‘ä»¬è¦ä¸ºè¯¥æ–°å¢çš„é¡¹ç›®åˆ›å»ºé’ˆå¯¹äºè¯¥é¡¹ç›®çš„gitè´¦æˆ·ã€‚åœ¨ä¸Šé¢çš„æµç¨‹ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œè¦ä½¿ç”¨ä¸åŠ  --global çš„å‘½ä»¤æ¥è®¾ç½®ï¼š 12git config user.name &quot;wuyazi&quot;git config user.email &quot;wuyazi@company.com&quot; åˆ›å»ºè¿œç«¯é¡¹ç›®ç„¶åå°±æ˜¯åœ¨å…¬å¸çš„ç§æœ‰gitç«™ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ã€‚ä¸€èˆ¬åœ¨åˆ›å»ºå®Œæˆåéƒ½ä¼šæœ‰ç±»ä¼¼äºä¸‹é¢çš„ä¸€ä¸ªæç¤ºé¡µé¢ï¼š 1234567891011ä»å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“touch README.mdgit initgit add README.mdgit commit -m &quot;first commit&quot;git remote add origin ssh://git@111.206.223.205:8080:how_to_use_multiple_git_ssh/new.gitgit push -u origin masterä»å‘½ä»¤è¡Œæ¨é€å·²ç»åˆ›å»ºçš„ä»“åº“git remote add origin ssh://git@111.206.223.205:8080:how_to_use_multiple_git_ssh/new.gitgit push -u origin master æäº¤åˆ°è¿œç«¯ä»“åº“å¯¹äºåªæœ‰ä¸€ä¸ªSSHå¯†é’¥çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦å°†æœ¬åœ°é¡¹ç›®æäº¤åˆ°è¿œç«¯ï¼Œåªè¦æ‰§è¡Œé¡µé¢ä¸­åé¢è¿™ä¸¤å¥å°±å¯ä»¥äº†ã€‚è€Œç°åœ¨æˆ‘ä»¬è¦å°†æœ¬åœ°æ–°å¢çš„å…¬å¸é¡¹ç›®ä½¿ç”¨æˆ‘çš„å…¬å¸gitè´¦æˆ·æäº¤åˆ°å…¬å¸çš„ç§æœ‰gitç«™ç‚¹ä¸Šï¼Œé¦–å…ˆå‘¢è¿˜æ˜¯éœ€è¦æ›´æ”¹ä¸€ä¸‹æäº¤çš„é¡¹ç›®åœ°å€ï¼š 1234# å°†é¡¹ç›®SSHåœ°å€ï¼šssh://git@111.206.223.205:8080:how_to_use_multiple_git_ssh/new.git# æ›´æ”¹ä¸º:ssh://work:how_to_use_multiple_git_ssh/new.git ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œä¸Šé¢ä¸¤æ¡å‘½ä»¤äº†ï¼š 12git remote add origin ssh://work:how_to_use_multiple_git_ssh/new.gitgit push -u origin master æœ‰æ²¡æœ‰ç®€æ´å‘½ä»¤å¯èƒ½æœ‰çš„æœ‹å‹ä¼šæƒ³äº†ï¼Œåœ¨ä¹‹å‰ clone å·²æœ‰é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€æ¡ç®€æ´çš„å‘½ä»¤ï¼š work-git-clone work:how_to_use_multiple_git_ssh/you_can_by_this_way.git æ¥ç›´æ¥çœç•¥äº†å•ç‹¬è®¾ç½®gitæ“ä½œè´¦æˆ·çš„æ­¥éª¤ï¼Œé‚£åœ¨æ–°å¢æ—¶ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥æœ‰ç±»ä¼¼çš„æ“ä½œå‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚ å› ä¸º git clone å‘½ä»¤æ˜¯å¯ä»¥æ¥æ”¶ --config å‚æ•°çš„ï¼Œä»¥ä¾¿åœ¨cloneçš„åŒæ—¶æŒ‡å®šé…ç½®ï¼›è€Œ git push å‘½ä»¤å´æ˜¯æ²¡æœ‰è¯¥é¡¹çš„ã€‚å…·ä½“çš„å¯ä»¥é€šè¿‡å‘½ä»¤ git clone help å’Œ git push help æ¥è¯¦ç»†äº†è§£ã€‚ è‡³æ­¤ï¼Œåé¢çš„æ“ä½œå°±æ˜¯å¸¸ç”¨çš„ pull å’Œ push ç­‰æ“ä½œäº†ã€‚ ç›¸å…³å‚è€ƒ åŒä¸€è®¾å¤‡å¤šä¸ªgitè´¦å·çš„sshç®¡ç† Gitå¤šå¸å·é…ç½® åˆ©ç”¨SSHçš„ç”¨æˆ·é…ç½®æ–‡ä»¶Configç®¡ç†SSHä¼šè¯ å¤šé‡ SSH Keys èˆ‡ Github å¸³è™Ÿ]]></content>
      <categories>
        <category>Gitæ“ä½œç³»åˆ—</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢åŠŸèƒ½ä¼˜åŒ–äºŒ]]></title>
    <url>%2F2018%2F03%2F11%2Fhexo-blog-optimization-two%2F</url>
    <content type="text"><![CDATA[ä»‹ç»Hexoåšå®¢åŠŸèƒ½ä¼˜åŒ–é¡¹ã€‚ å°†â€œæ‰“èµâ€ä¸¤å­—æ›´æ”¹ä¸ºâ€œé¼“åŠ±â€ä¸€ç›´è§‰å¾— â€œæ‰“èµâ€ ä¸¤ä¸ªå­—ä¸å¤ªé€‚åˆåšå®¢è¿™ç§è¯­å¢ƒï¼Œæå¾—åƒæ˜¯æ‚è€å®Œäº†å‘å›´è§‚ç¾¤ä¼—è¦èµé’±çš„æ„Ÿè§‰ï¼šâ€œæœ‰é’±çš„æ§ä¸ªé’±åœºï¼Œæ²¡é’±çš„æ§ä¸ªäººåœºâ€¦â€ ã€‚å†™ä½œï¼Œæœ¬æ¥å°±æ˜¯åœ¨å­¦ä¹ æŠ€æœ¯çš„è·¯ä¸Šä¸€æ¬¡æ¬¡æ€»ç»“ï¼Œäº¦æˆ–å’Œå¿—åŒé“åˆçš„æŠ€æœ¯äººçš„ä¸€æ¬¡æ¬¡è®¨è®ºï¼Œæ— å…³é‡‘é’±æˆ–å…¶ä»–ã€‚è€Œâ€œé¼“åŠ±â€åˆ™æ›´é€‚åˆè¿™ç§è¯­å¢ƒã€‚å¦‚æœæˆ‘çš„æ–‡ç« å¸®åˆ°äº†ä½ ï¼Œè™½ç„¶ä¸èƒ½æ”¹å˜ä¸–ç•Œï¼Œä½†ä¹Ÿè®¸ä¸ºä½ èŠ‚çœäº†ä¸€äº›æ—¶é—´ï¼Œäº¦æˆ–åœ¨ä½ è¿›å…¥ä¸€ä¸ªæŠ€æœ¯æ­»è§’ä¸€ç›´å‡ºä¸æ¥çš„æƒ…å†µä¸‹ï¼Œå¸¦æ¥çš„ä¸€ç‚¹ç‚¹å¸Œæœ›æˆ–æ˜¯çµæ„Ÿã€‚ä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ å¸¦æ¥äº†å¸®åŠ©ï¼Œé€æˆ‘ä¸€æ¯å’–å•¡ï¼Œæˆ‘å†…å¿ƒæ˜¯éå¸¸é«˜å…´åœ°ã€‚å¦‚æœä½ è¿˜æƒ³å¤šèŠä¸¤å¥ï¼Œæˆ‘ä¹Ÿä¼šæ„Ÿåˆ°éå¸¸è£å¹¸ã€‚ ç›¸åº”çš„ä¿®æ”¹æ–¹æ³•æ˜¯ï¼š æ‰¾åˆ°é¡¹ç›®ç›®å½•ä¸‹ /themes/next/languages/zh-Hans.yml æ–‡ä»¶ï¼Œå› ä¸ºæˆ‘çš„åšå®¢é‡‡ç”¨çš„æ˜¯ä¸­æ–‡ã€‚è¿™é‡Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„åšå®¢è®¾ç½®é€‰æ‹©ç›¸åº”çš„è¯­è¨€æ–‡ä»¶ã€‚ 12345reward: donate: é¼“åŠ± #æ‰“èµ wechatpay: å¾®ä¿¡æ”¯ä»˜ alipay: æ”¯ä»˜å® bitcoin: æ¯”ç‰¹å¸ æ‰¾åˆ° reward éƒ¨åˆ†ï¼Œå°† donate çš„å€¼ä¿®æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„å†…å®¹å³å¯ã€‚è¿™é‡Œæˆ‘æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæœ€é•¿æ˜¯4ä¸ªæ±‰å­—ï¼Œå¦åˆ™å°±è¦ä¿®æ”¹æŒ‰é’®çš„æ ·å¼äº†ã€‚ å…³äºè¯„è®ºè‡ªæ­¤è¯„è®ºæ’ä»¶ â€œå¤šè¯´â€ å…³é—­ä¹‹åï¼Œæˆ‘å°±æŠŠåšå®¢ä¸­çš„è¯„è®ºåŠŸèƒ½å»æ‰äº†ï¼Œå› ä¸ºç¡®å®æ²¡æœ‰æ‰¾åˆ°ä¸€æ¬¾å¿ƒä»ªçš„è¯„è®ºæ’ä»¶ã€‚ ç›®å‰çš„è¯ï¼Œä¹Ÿåªæ˜¯åœ¨åšå®¢çš„ â€œå…³äºâ€ é¡µé¢åŠ äº†ä¸€ä¸ª email åœ°å€èƒ½å¤Ÿç«‹å³è”ç³»åˆ°æˆ‘ã€‚ å› ä¸ºæˆ‘çš„é‚®ç®±æ‰‹æœºå®¢æˆ·ç«¯æ˜¯24å°æ—¶åœ¨çº¿çš„ï¼Œè®©æˆ‘æ„Ÿåˆ°é«˜å…´çš„æ˜¯ç¡®å®è¿˜æœ‰ä¸€äº›æœ‹å‹é€šè¿‡é‚®ä»¶å‘æˆ‘å’¨è¯¢æŠ€æœ¯é—®é¢˜ï¼Œæˆ‘éƒ½ä¸€ä¸€ä¸ºä»–ä»¬åšäº†è§£ç­”ã€‚ä¹‹å‰è¿˜è§‰å¾—è¿™ä¸ªé‚®ç®±åœ°å€æ”¾åœ¨â€œå…³äºâ€ é¡µé¢ä¼šæ¯”è¾ƒéšè”½ï¼Œä»Šå¤©ç¨å¾®æ”¹ç‰ˆäº†ä¸€ä¸‹ï¼Œåœ¨æ¯ç¯‡æ–‡ç« çš„æœ«å°¾éƒ½åŠ ä¸Šäº† email åœ°å€ï¼Œä»¥æ–¹ä¾¿äº¤æµã€‚ è¿™æ®µæç¤ºæ–‡å­—æˆ‘æ˜¯ç›´æ¥åŠ åœ¨äº† next ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.yml ä¸­çš„ Reward æ‰“èµåŠŸèƒ½ éƒ¨åˆ†ã€‚ åŸæ¥çš„æ‰“èµåŠŸèƒ½æç¤ºæ–‡å­— reward_comment å‚æ•°ï¼Œå¦‚æœæ·»åŠ çš„å­—ç¬¦å¤ªå¤šçš„è¯ï¼Œå°±ä¼šå¯¼è‡´è‡ªåŠ¨æ¢è¡Œã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä¿®æ”¹äº†ä¸€ä¸‹é¡µé¢æ–‡ä»¶ã€‚ æ‰¾åˆ°ç›®å½•ä¸‹ /themes/next/layout/_macro/reward.swig æ–‡ä»¶ï¼Œæ‰¾åˆ°ç¬¬äºŒè¡Œçš„ 1&lt;div&gt;&#123;&#123; theme.reward_comment &#125;&#125;&lt;/div&gt; éƒ¨åˆ†å†å¤åˆ¶ä¸€è¡Œï¼Œå¦‚ä¸‹ï¼š 123456789&lt;div style=&quot;padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;&quot;&gt; &lt;div&gt;&#123;&#123; theme.reward_comment &#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123; theme.reward_comment2 &#125;&#125;&lt;/div&gt; &lt;button id=&quot;rewardButton&quot; disable=&quot;enable&quot; onclick=&quot;var qr = document.getElementById(&apos;QR&apos;); if (qr.style.display === &apos;none&apos;) &#123;qr.style.display=&apos;block&apos;;&#125; else &#123;qr.style.display=&apos;none&apos;&#125;&quot;&gt; &lt;span&gt;&#123;&#123; __(&apos;reward.donate&apos;) &#125;&#125;&lt;/span&gt; &lt;/button&gt; &lt;div id=&quot;QR&quot; style=&quot;display: none;&quot;&gt;...... æˆ‘è¿™é‡Œå°±ç›´æ¥æ”¹æˆäº† theme.reward_comment2 ã€‚ç„¶ååœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ä¹Ÿæ·»åŠ ä¸€ä¸ª reward_comment2 éƒ¨åˆ†å³å¯ã€‚ 12345# Reward æ‰“èµåŠŸèƒ½reward_comment: åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼reward_comment2: å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦æŠ€æœ¯è®¨è®ºï¼Œè¯·å‘é‚®ä»¶åˆ° service@itfanr.ccwechatpay: /images/wechat-reward-image.jpg... é¡µé¢è½½å…¥è¿›åº¦è¿™ä¸ªæ•ˆæœä¹Ÿæ˜¯åˆšåˆšæŸ¥çœ‹é…ç½®æ–‡ä»¶çš„æ—¶å€™å¶ç„¶çœ‹åˆ°çš„ã€‚ ä¹‹å‰å°±æ›¾çœ‹åˆ«äººçš„åšå®¢åšçš„ç‰¹åˆ«ç‚«ã€‚é¡µé¢å¤´éƒ¨å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªåŠ è½½è¿›åº¦æ¡ï¼Œéå¸¸çš„ç¾¡æ…•ã€‚ åœ¨ next ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ _config.yml ä¸­ æ‰¾åˆ° pace: false å°†å…¶æ”¹ä¸º pace: true å³å¯ã€‚ åœ¨ä¸‹é¢å¯ä»¥é€‰æ‹©ä¸åŒçš„åŠ è½½ä¸»é¢˜æ ·å¼ï¼Œé€šè¿‡ pace_theme å‚æ•°è®¾ç½®ã€‚ 123456pace: true# Themes list:#pace-theme-big-counter#pace-theme-bounce# ...pace_theme: pace-theme-flash æ„Ÿè°¢æ”¯æŒæˆªæ­¢ç›®å‰ä¸ºæ­¢ï¼Œå…±æ”¶åˆ°äº†3ä½æœ‹å‹çš„æ‰«ç çº¢åŒ…é¼“åŠ±ï¼Œåœ¨è¿™é‡Œå¯¹ä»–ä»¬è¡¨ç¤ºæ„Ÿè°¢ã€‚ä¹Ÿå¾ˆé«˜å…´æˆ‘çš„æ–‡ç« å¸®åŠ©åˆ°äº†ä»–ä»¬ã€‚ ä¸è¿‡ç”±äºå¾®ä¿¡æ‰«ç æ”¯ä»˜æ— æ³•æŸ¥çœ‹åˆ°æ”¯ä»˜è€…çš„å¾®ä¿¡è´¦å·ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±æ²¡æœ‰åˆ—å‡ºä»–ä»¬çš„æ˜µç§°ç­‰ä¿¡æ¯ã€‚å…·ä½“åˆ—è¡¨å¯æŸ¥çœ‹ å…³äº é¡µé¢ã€‚]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç™¾ä¸‡è‹±é›„ï¼Œçœ‹ç¨‹åºå‘˜å¸¦ä½ å¦‚ä½•ä»»æ€§åƒç“œ(1)]]></title>
    <url>%2F2018%2F01%2F16%2Fchi-gua-qun-zhong-bu-chi-gua-one%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©ä¸­åˆçš„æ—¶å€™æ²¡äº‹ï¼Œéšæ‰‹æ‰“å¼€æ˜é‡‘appæ‰“ç®—çœ‹çœ‹æœ€è¿‘æœ‰ä»€ä¹ˆå¥½æ–‡ç« ã€‚çœ‹åˆ°çƒ­é—¨æ¨èä¸‹æœ‰ä¸€ç¯‡æ–‡ç« åä¸º qanswerï¼šå†²é¡¶å¤§ä¼šç­‰æ¸¸æˆç­”é¢˜ç¥å™¨ï¼ˆGolangï¼‰ å·ç§°ã€Šå†²é¡¶å¤§ä¼šã€‹,ã€Šç™¾ä¸‡è‹±é›„ã€‹ç­‰ç­”é¢˜æ¸¸æˆçš„ç­”é¢˜ç¥å™¨ï¼Œè®©äººé¡ºåˆ©åƒé¸¡ï¼ å› ä¸ºæˆ‘æœ€è¿‘ä¹Ÿä¸€ç›´åœ¨å…³æ³¨è¥¿ç“œè§†é¢‘é‡Œçš„â€œç™¾ä¸‡è‹±é›„â€è¿™ä¸ªâ€œå…¨æ°‘ç›´æ’­ç­”é¢˜åƒç“œâ€çš„æ´»åŠ¨ï¼Œä½†æ— å¥ˆè‡ªå·±çš„çŸ¥è¯†å‚¨å¤‡é‡å¤ªå°‘ï¼Œæœ€é«˜çš„ä¸€æ¬¡ç­”åˆ°ç¬¬9é¢˜å°±è¢«killäº†ã€‚çœ‹åˆ°è¿™ç¯‡æ–‡ç« é¡¿æ—¶æ¥äº†å…´è¶£ï¼Œå‡†å¤‡å¥½å¥½ç ”ç©¶ä¸€ç•ªã€‚ è¯¥é¡¹ç›®çš„githubåœ°å€ä¸º silenceper/qanswer ã€‚åœ¨ README.md ä¸­ä¹Ÿè®°å½•äº†å¦‚ä½•æ¥éƒ¨ç½²è¿è¡Œï¼Œä¸‹é¢æŠŠæˆ‘çš„éƒ¨ç½²æµç¨‹ç®€å•çš„è®°å½•å¦‚ä¸‹ã€‚ qansweréƒ¨ç½²æˆ‘ä½¿ç”¨çš„è®¾å¤‡æ˜¯ MacBook Proï¼Œæ‰‹æœºæ˜¯ çº¢ç±³Note4x é«˜é€šç‰ˆï¼Œåˆ†è¾¨ç‡ä¸º1920x1080ã€‚ å¯¹äºå…¶ä»–å¹³å°å¦‚ Winæˆ–Linuxï¼Œæˆ‘ä¹Ÿä¼šé¡ºå¸¦æä¸€ä¸‹ã€‚ å®‰è£…goç¯å¢ƒé…ç½®golangè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„åšå®¢æ–‡ç« æ¥å®‰è£…ï¼šGolangè¿è¡Œç¯å¢ƒé…ç½® å®‰å“è®¾å¤‡è¿æ¥å®‰å“è®¾å¤‡æ—¶éœ€è¦å®‰è£…ä¸€ä¸ªé©±åŠ¨ç±»å·¥å…·adbã€‚adbå…¨ç§°ä¸º Android Debug Bridge ,å³Androidè°ƒè¯•æ¡¥ã€‚Android è°ƒè¯•æ¡¥ (adb) æ˜¯ä¸€ä¸ªé€šç”¨å‘½ä»¤è¡Œå·¥å…·ï¼Œå…¶å…è®¸æ‚¨ä¸æ¨¡æ‹Ÿå™¨å®ä¾‹æˆ–è¿æ¥çš„ Android è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚å®ƒå¯ä¸ºå„ç§è®¾å¤‡æ“ä½œæä¾›ä¾¿åˆ©ï¼Œå¦‚å®‰è£…å’Œè°ƒè¯•åº”ç”¨ï¼Œå¹¶æä¾›å¯¹ Unix shellï¼ˆå¯ç”¨æ¥åœ¨æ¨¡æ‹Ÿå™¨æˆ–è¿æ¥çš„è®¾å¤‡ä¸Šè¿è¡Œå„ç§å‘½ä»¤ï¼‰çš„è®¿é—®ã€‚ Macç³»ç»Ÿå®‰è£…adbé€šè¿‡ homebrew æ¥å®‰è£…ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ brew cask install android-platform-tools å½“çœ‹åˆ°æç¤º android-platform-tools was successfully installed! ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚ å‘½ä»¤ adb devices å¯ä»¥ç”¨æ¥æŸ¥çœ‹å½“å‰è¿æ¥çš„å®‰å“è®¾å¤‡ï¼š 1234$ adb devicesList of devices attached* daemon not running; starting now at tcp:5037* daemon started successfully å¯è§å½“å‰å¹¶æ²¡æœ‰è¿æ¥çš„è®¾å¤‡ã€‚ Ubuntuå®‰è£…adbä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤æ¥å®‰è£…ï¼š 123sudo add-apt-repository ppa:nilarimogard/webupd8sudo apt-get updatesudo apt-get install android-tools-adb Winå®‰è£…adbç›´æ¥ä¸‹è½½è§£å‹åå°±å¯ä½¿ç”¨ Download the ADB ZIP file for Windows iosè®¾å¤‡å¯¹äºiosè®¾å¤‡ï¼Œéœ€è¦å®‰è£…WDAã€‚ å…·ä½“çš„å®‰è£…æ–¹æ³•å¯å‚è€ƒé¡¹ç›®ä¸­ç»™å‡ºçš„æ–‡ç«  iOS çœŸæœºå¦‚ä½•å®‰è£… WebDriverAgent å¼€å¯å°ç±³æ‰‹æœº MIUI9 USBè°ƒè¯•æ¨¡å¼ä¸ºäº†èƒ½å¤Ÿè°ƒè¯•æ‰‹æœºï¼Œéœ€è¦æ‰“å¼€å°ç±³æ‰‹æœºæˆ–å…¶ä»–å®‰å“æ‰‹æœºçš„USBè°ƒè¯•æ¨¡å¼ã€‚ å°ç±³æ‰‹æœº MIUI9ç³»ç»Ÿçš„å¼€å¯æ–¹æ³•ï¼š æ‰“å¼€ â€œè®¾ç½®â€ â€“ â€œæˆ‘çš„è®¾å¤‡â€ â€“ â€œå…¨éƒ¨å‚æ•°â€ é¡µé¢ ç„¶åè¿ç»­ä¸‰æ¬¡ä»¥ä¸Šç‚¹å‡»â€œMIUIç‰ˆæœ¬â€ä¸€æ ï¼Œä¼šå‡ºç° å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€çš„æç¤ºä¿¡æ¯ è¿”å›è®¾ç½®ä¸»ç•Œé¢ï¼Œè¿›å…¥â€œæ›´å¤šè®¾ç½®â€ï¼Œåœ¨æ— éšœç¢é€‰é¡¹ä¸‹é¢å‡ºç°äº†â€œå¼€å‘è€…é€‰é¡¹â€ï¼Œç‚¹å‡»è¿›å…¥ åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å°±å¯ä»¥æ‰¾åˆ°â€œUSBè°ƒè¯•â€ï¼Œå¯ç”¨å³å¯ é€šè¿‡æ•°æ®çº¿è¿æ¥æ‰‹æœºï¼Œå†æ¬¡æ‰§è¡Œä¸Šé¢å‘½ä»¤ï¼š 1234$ adb devicesList of devices attacheda1529b810604 device å¯ä»¥çœ‹åˆ°å‘ç°äº†æˆ‘çš„å®‰å“æ‰‹æœºï¼Œå¹¶è¿æ¥ä¸Šäº†ã€‚ æ–‡å­—è¯†åˆ«å¯¹äºæ–‡å­—å›¾åƒè¯†åˆ«ï¼Œé¡¹ç›®ä¸­å®ç°äº†ä¸¤ç§æ–¹å¼ï¼šç™¾åº¦ocr å’Œ tesseractã€‚è¿™é‡Œæˆ‘é‡‡ç”¨ç™¾åº¦ocræ¥å®ç°ã€‚ ä»ç™¾åº¦çš„æ–‡å­—è¯†åˆ«æ¥å£ç½‘ç«™ ç™¾åº¦æ–‡å­—è¯†åˆ« ä¸­ï¼Œç™»å½•ç™¾åº¦äº‘ç®¡ç†å¹³å°åï¼Œåœ¨å·¦ä¾§é€‰æ‹©â€œäº§å“æœåŠ¡â€â€“â€œäººå·¥æ™ºèƒ½â€â€“â€œæ–‡å­—è¯†åˆ«â€ ä¸€é¡¹ï¼Œé€‰æ‹© â€œåˆ›å»ºåº”ç”¨â€ å°±å¯ä»¥è·å¾—éœ€è¦çš„api key å’Œsecret keyã€‚ ç™¾åº¦çš„æ–‡å­—è¯†åˆ«æ¥å£æœ‰ 500æ¬¡/å¤© çš„å…è´¹ä½¿ç”¨æƒé™ï¼Œä¸€èˆ¬ä¹Ÿå¤Ÿç”¨äº†ã€‚ è¿è¡Œå°†é¡¹ç›®å…‹éš†åˆ° gopath ç›®å½•ä¸‹ git clone https://github.com/silenceper/qanswer.gitï¼Œå¦‚æˆ‘è¿™é‡Œæ˜¯ /Go/xgo_workspace/src ç›®å½•ä¸‹ï¼Œç„¶åæ·»åŠ é¡¹ç›®å¼•ç”¨ï¼š 1$ go get github.com/silenceper/qanswer æ‰§è¡Œç¼–è¯‘ï¼š 123$ cd qanswer/cmd$ go build -o ../qanswer ç„¶åä¼šåœ¨ qanswer ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º qanswer çš„æ‰§è¡Œæ–‡ä»¶ã€‚ æ‰§è¡Œè¯¥ç¨‹åºï¼š 1$ ./qanswer ç»“æœè¾“å‡ºï¼š 1234é…ç½®æ–‡ä»¶ï¼š./config.ymlè®¾å¤‡ï¼šios; å›¾ç‰‡è¯†åˆ«æ–¹å¼ï¼šbaiduè¯·æŒ‰ç©ºæ ¼é”®å¼€å§‹æœç´¢ç­”æ¡ˆ... è®¾ç½®é…ç½®æ–‡ä»¶ç¨‹åºè¿è¡Œç”¨åˆ°çš„é…ç½®æ–‡ä»¶æ˜¯åœ¨å½“å‰ç›®å½•ä¸‹çš„ config.yml æ–‡ä»¶ã€‚ é…ç½®å‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š 123456789101112131415161718192021# æ˜¯å¦å¼€å§‹è°ƒè¯•æ¨¡å¼debug: false# å¯¹åº”çš„è®¾å¤‡ç±»å‹ï¼šios or androiddevice: ios# ä½¿ç”¨çš„ocrå·¥å…·ï¼šbaidu or tesseractocr_type: baidu# ios è®¾å¤‡è¿æ¥wdaçš„åœ°å€wda_address: &apos;127.0.0.1:8100&apos;# æˆªå–é¢˜ç›®çš„ä½ç½® ï¼šquestion_x: 30question_y: 310question_w: 650question_h: 135# æˆªå–ç­”æ¡ˆçš„ä½ç½®answer_x: 30answer_y: 500answer_w: 680answer_h: 370#å½“é€‰ç”¨baidu ocræ—¶ï¼Œéœ€è¦æ‰§è¡Œapi_keyå’Œsecret_keybaidu_api_key: &quot;xxx....&quot;baidu_secret_key: &quot;xxx....&quot; æˆåŠŸçš„å…³é”®åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå…³é”®çš„ä¸€ç‚¹å°±æ˜¯é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„å¯¹äºä¸åŒæ‰‹æœºç±»å‹åŠä¸åŒåˆ†è¾¨ç‡çš„åæ ‡è®¾å®šäº†ã€‚ ä½ éœ€è¦æ ¹æ®è‡ªå·±æ‰‹æœºå¯¹ç›´æ’­é—®ç­”é¡µé¢è¿›è¡Œæˆªå›¾åè·å–çš„åæ ‡ç‚¹åŠåƒç´ é•¿åº¦æ¥è®¾å®šã€‚ 12345678910# æˆªå–é¢˜ç›®çš„ä½ç½®question_x: 30question_y: 310question_w: 650question_h: 135# æˆªå–ç­”æ¡ˆçš„ä½ç½®answer_x: 30answer_y: 500answer_w: 680answer_h: 370 å¯¹ç›´æ’­ç­”é¢˜ç•Œé¢æˆªå±ï¼Œç„¶åé€šè¿‡Macç³»ç»Ÿè‡ªå¸¦çš„å›¾ç‰‡é¢„è§ˆå¯ä»¥å¾—åˆ°è¯¥ç•Œé¢ä¸­é¢˜ç›®å·¦ä¸Šè§’é¡¶ç‚¹çš„xåæ ‡ä½ç½®å’Œyåæ ‡ä½ç½®ä»¥åŠé¢˜ç›®åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ã€‚åŒç†èƒ½å¤Ÿè·å¾—ç­”æ¡ˆéƒ¨åˆ†çš„å€¼ã€‚ è¿™é‡Œè¦æä¸€ä¸‹çš„æ˜¯ï¼Œè¿™é‡Œçš„åæ ‡æ˜¯å‘å³ä¸ºxè½´æ­£æ–¹å‘ï¼Œå‘ä¸‹ä¸ºyè½´æ­£æ–¹å‘ã€‚æ‰€ä»¥å€¼å‡ä¸ºæ­£æ•°ã€‚ ç»è¿‡æµ‹é‡ï¼Œæˆ‘çš„æ‰‹æœºçš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š 123456789101112131415# ç™¾ä¸‡è‹±é›„ çº¢ç±³Note4x é«˜é€šç‰ˆ 1920x1080debug: truedevice: androidocr_type: baiduwda_address: &apos;127.0.0.1:8100&apos;question_x: 80question_y: 270question_w: 920question_h: 400answer_x: 80answer_y: 680answer_w: 920answer_h: 580baidu_api_key: xxx...baidu_secret_key: xxx... å¦å¤–ï¼Œbaidu_api_key å’Œ baidu_secret_key è®¾ç½®æˆåœ¨ç™¾åº¦æ–‡æœ¬è¯†åˆ«ä¸­åˆ›å»ºåº”ç”¨çš„å¯¹åº”å€¼ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ tesseract è¿™ä¸¤é¡¹åˆ™ä¸ç”¨ç®¡ã€‚ æ‰§è¡Œæ•ˆæœ1234567891011121314151617181920212223242526272829é…ç½®æ–‡ä»¶ï¼š./config.ymlè®¾å¤‡ï¼šandroid; å›¾ç‰‡è¯†åˆ«æ–¹å¼ï¼šbaiduè¯·æŒ‰ç©ºæ ¼é”®å¼€å§‹æœç´¢ç­”æ¡ˆ...æ­£åœ¨å¼€å§‹æœç´¢....2018/01/16 13:33:27 image.go:41: [debug] ä¿å­˜questionæˆªå›¾æˆåŠŸ2018/01/16 13:33:27 image.go:51: [debug] ä¿å­˜answeræˆªå›¾æˆåŠŸ2018/01/16 13:33:27 image.go:22: [debug] ä¿å­˜å®Œæ•´æˆªå›¾æˆåŠŸï¼Œ./images/screenshot.png2018/01/16 13:33:28 qanswer.go:144: [debug] æ–—æ“ä¸œæŒ‡,å¤©ä¸‹çš†å†¬åŒ—æ–—ä¸€æ˜Ÿä¸ºå¤©æƒç‰è¡¡æ˜Ÿæ˜¯ä¸ƒæ˜Ÿä¸­æœ€äº®çš„æ˜Ÿ2018/01/16 13:33:28 qanswer.go:133: [debug] 2.å…³äºåŒ—ä¸ƒæ–—ä¸ƒæ˜Ÿ,ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯?è¯†åˆ«é¢˜ç›®ï¼šå…³äºåŒ—ä¸ƒæ–—ä¸ƒæ˜Ÿ,ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯?è¯†åˆ«ç­”æ¡ˆï¼š[æ–—æ“ä¸œæŒ‡,å¤©ä¸‹çš†å†¬ åŒ—æ–—ä¸€æ˜Ÿä¸ºå¤©æƒ ç‰è¡¡æ˜Ÿæ˜¯ä¸ƒæ˜Ÿä¸­æœ€äº®çš„æ˜Ÿ]================ç™¾åº¦æœç´¢==============å…³äºåŒ—ä¸ƒæ–—ä¸ƒæ˜Ÿ,ä¸‹åˆ—è¯´æ³•æ­£ç¡®çš„æ˜¯?ç­”æ¡ˆï¼šæ–—æ“ä¸œæŒ‡,å¤©ä¸‹çš†å†¬ : ç»“æœæ€»æ•° 7400 ï¼Œ ç­”æ¡ˆå‡ºç°é¢‘ç‡ï¼š 0åŒ—æ–—ä¸€æ˜Ÿä¸ºå¤©æƒ : ç»“æœæ€»æ•° 189000 ï¼Œ ç­”æ¡ˆå‡ºç°é¢‘ç‡ï¼š 0ç‰è¡¡æ˜Ÿæ˜¯ä¸ƒæ˜Ÿä¸­æœ€äº®çš„æ˜Ÿ : ç»“æœæ€»æ•° 383000 ï¼Œ ç­”æ¡ˆå‡ºç°é¢‘ç‡ï¼š 0======================================è€—æ—¶ï¼š7.24113sè¯·æŒ‰ç©ºæ ¼é”®å¼€å§‹æœç´¢ç­”æ¡ˆ... å¦å¤–é™„ä¸Šä¸€äº›æ‰§è¡Œè¿‡ç¨‹æˆªå›¾ï¼š å‡ºç°çš„é—®é¢˜åœ¨å®é™…çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä¹Ÿå‘ç°äº†è¯¥é¡¹ç›®çš„ä¸€äº›é—®é¢˜ã€‚ åˆ¤æ–­é€»è¾‘çš„å¯è¡Œæ€§ç›®å‰è¯¥é¡¹ç›®ä¸­ä½¿ç”¨çš„æœç´¢å¼•æ“æ˜¯ç™¾åº¦ã€‚ è€Œç¨‹åºå½“å‰å¯¹é—®é¢˜ç­”æ¡ˆè·å–çš„åå°é€»è¾‘æ˜¯ï¼šé€šè¿‡å°†é—®é¢˜å’Œä¸‰ä¸ªä¸åŒçš„ç­”æ¡ˆæ‹¼æ¥è¾“å‡ºåˆ°æœç´¢å¼•æ“ä¸­è¿›è¡Œæœç´¢æŸ¥è¯¢ï¼Œå¦‚ä½¿ç”¨ç™¾åº¦ï¼Œåœ¨æœç´¢ç»“æœé¡µé¢ä¸­ä¼šè¾“å‡ºï¼šâ€œç™¾åº¦ä¸ºæ‚¨æ‰¾åˆ°ç›¸å…³ç»“æœçº¦487,000ä¸ªâ€ ç±»ä¼¼è¿™æ ·çš„ä¸€æ®µè¯ã€‚è€Œç­”æ¡ˆçš„åˆ¤æ–­é€»è¾‘å°±æ˜¯çœ‹ä¸‰ç§ç­”æ¡ˆå¯¹åº”çš„æœç´¢ç»“æœçš„æ•°æ®æ€»æ¡æ•°æ¥é¢„æµ‹è¯¥ç­”æ¡ˆå¯èƒ½ä¸ºæ­£ç¡®çš„ç­”æ¡ˆã€‚ ä½†è¿™æ ·çš„æ–¹æ³•å¹¶ä¸ä¸€å®šèƒ½ä¿è¯å®Œå…¨çš„æ­£ç¡®ï¼Œå¦‚ä¸‹é¢çš„ä¸€ä¸ªé—®é¢˜ï¼š å¦‚æœæŒ‰ç…§æ¨èçš„ç­”æ¡ˆï¼Œè¦é€‰ â€œæ¢æˆˆâ€ ã€‚è€Œè¿™é“é¢˜çš„æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ â€œæ£®å·´â€ ã€‚ åæ¥ï¼Œæˆ‘åˆå¯¹å…¶ä»–å¸¸ç”¨çš„æœç´¢å¼•æ“åšäº†å¯¹æ¯”ã€‚å¦‚æˆ‘å¯¹æ¯”äº† Baidu ã€Bingå›½å†…ç‰ˆ ã€ Bingå›½é™…ç‰ˆ å’Œ Googleï¼ˆéœ€FQï¼‰ ï¼Œç»“æœå‘ç°è¿™å››ç§æœç´¢ç»“æœçš„æ­£ç¡®ç‡ä¸ºï¼š Google &gt; Bingå›½é™…ç‰ˆ &gt; Bingå›½å†…ç‰ˆ &gt; Baidu ä½†æ˜¯åæ¥æˆ‘å¢åŠ äº†é—®é¢˜çš„æµ‹è¯•æ•°é‡ï¼Œå‘ç°Googleå¯¹äºç­”æ¡ˆçš„åˆ¤æ–­æ­£ç¡®ç‡ä¹Ÿæ¯”è¾ƒä½ã€‚ ä¾‹å¦‚å…¶ä¸­çš„ä¸€ä¸ªé—®é¢˜ï¼š å“ªä¸€ç§ååº”å±äºåŒ–å­¦ååº”? é£Ÿç‰©è…çƒ‚å†°åŒ–æ°´ç»ç’ƒç¢æˆå— é€šè¿‡ç™¾åº¦æµ‹è¯•ï¼Œå¯¹äºä¸‰ä¸ªç­”æ¡ˆçš„æœç´¢ç»“æœæ•°é‡ä¸ºï¼š å¯è§ï¼ŒæŒ‰ç…§æœç´¢æ•°é‡ç»“æœæ¥çœ‹çš„è¯ï¼Œè¦é€‰ â€œç»ç’ƒç¢æˆå—â€ ï¼Œä½†æ­£ç¡®çš„ç­”æ¡ˆåº”è¯¥æ˜¯ â€œé£Ÿç‰©è…çƒ‚â€ã€‚ åæ¥æˆ‘åˆä½¿ç”¨ google è¿›è¡Œäº†æµ‹è¯•: é£Ÿç‰©è…çƒ‚ 98400å†°åŒ–æ°´ 483000ç»ç’ƒç¢æˆå— 116000 å¯è§åœ¨Googleä¸‹è¿™ç§æ–¹å¼å¾—åˆ°çš„ç­”æ¡ˆä¹Ÿä¸æ­£ç¡®ã€‚ æ‰€ä»¥ï¼Œæˆ‘è§‰å¾—è¿™ç§åˆ¤æ–­é€»è¾‘åªèƒ½ç»™å‡º70%çš„æ­£ç¡®ç‡ï¼Œåœ¨ç­”é¢˜è¿‡ç¨‹ä¸­ä¹Ÿä»…ä»…ä½œä¸ºå‚è€ƒç­”æ¡ˆï¼Œè€Œä¸èƒ½ä¸€å‘³çš„ç›¸ä¿¡ã€‚ å¦å®šå¥å¦‚æœé‡åˆ°æ ‡é¢˜æ˜¯å¦å®šå¥å¼çš„æƒ…å†µï¼Œé€šè¿‡ä¸Šé¢è¿™ç§æœç´¢çš„å½¢å¼å°±æ— æ³•æ‰¾åˆ°æ­£ç¡®çš„ç­”æ¡ˆäº†ï¼Œä¸€èˆ¬æœç´¢å‡ºæ¥çš„ä¹Ÿæ˜¯â€œè‚¯å®šå¥å¼â€ä¸‹çš„ç­”æ¡ˆã€‚ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š æ­£ç¡®çš„ç­”æ¡ˆåº”è¯¥æ˜¯ çˆ±å¦‚æ½®æ°´ã€‚ æ–‡å­—è¯†åˆ«å‡ºé”™è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯å›¾åƒæ–‡å­—æ²¡æœ‰è¯†åˆ«å‡ºæ¥çš„æƒ…å†µï¼Œæœ€åä¹Ÿå°±ä¸èƒ½ç»™å‡ºç›¸åº”çš„ç­”æ¡ˆäº†ã€‚ å…¶ä»–æ–¹æ³•å®ç°ä¸ªäººè®¤ä¸ºç±»ä¼¼è¿™ç§é—®ç­”ç±»çš„é¢˜ç›®ï¼Œå¯è¡Œçš„æ–¹å¼æ¯”å¦‚å¯¹é—®é¢˜è¿›è¡Œåˆ†è¯å¤„ç†ï¼Œç„¶åå¯¹å…³é”®è¯å»æœç´¢åŒ¹é…ï¼Œé€šè¿‡è¯é¢‘æ¥åˆ¤æ–­ï¼›æˆ–è€…å¼¹å‡ºæµè§ˆå™¨ç”±ç”¨æˆ·è‡ªå·±å»åˆ¤æ–­æœ€ç»ˆçš„ç­”æ¡ˆï¼Œä¸€èˆ¬åƒæœç´¢å¼•æ“çš„æœç´¢ç»“æœé¡µé¢ï¼Œéƒ½ä¼šæœ‰æ ‡é¢˜å’Œç®€çŸ­çš„å†…å®¹ï¼Œå†…å®¹ä¸­çš„å…³é”®å­—ä¼šè¢«æ ‡çº¢æ˜¾ç¤ºï¼Œç”±ç”¨æˆ·è‡ªå·±å»åˆ¤æ–­ï¼Œå‡†ç¡®æ€§ä¼šæ›´é«˜ä¸€äº›ï¼Œä½†è¿™æ ·è€—è´¹çš„æ—¶é—´ä¹Ÿä¼šç‰¹åˆ«é•¿ã€‚åº”è¯¥è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•å§ã€‚ ç›®å‰æˆ‘ä¹Ÿåœ¨ç”¨pythonæ¥å®ç°ä¸€ç§å¯èƒ½çš„æ–¹æ³•ï¼Œæˆ‘ä¼šåœ¨åç»­çš„æ–‡ç« ä¸­è¯¦ç»†è¯´æ˜ï¼Œæ•¬è¯·æœŸå¾…å§ï¼ æœ€åå†è¯´ä¸€å¥ã€‚å¦‚æœçœ‹åˆ°è¿™ç¯‡æ–‡ç« åä½ ä¹Ÿå¯¹è¿™ç§â€œç­”é¢˜åƒç“œâ€çš„ç›´æ’­é—®é¢˜æ´»åŠ¨äº§ç”Ÿäº†å…´è¶£ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘çš„é‚€è¯·ç æ¥è·å¾—ä¸€å¼ å¤æ´»å¡çš„æœºä¼šï¼Œè¾“å…¥ä¸‹é¢çš„é‚€è¯·ç å³å¯ã€‚ ç›¸å…³å‚è€ƒ qanswer How to Install ADB on Windows, macOS, and Linux Android è°ƒè¯•æ¡¥ åœ¨ MAC OS X å®‰è£… ADB (Androidè°ƒè¯•æ¡¥)]]></content>
      <tags>
        <tag>ç›´æ’­é—®ç­”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(ä¸‰)-ä»»åŠ¡]]></title>
    <url>%2F2017%2F12%2F10%2Fcelery-distributed-task-queue-introduction-third%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸Šä¸€ç¯‡ Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(äºŒ)-ç¯å¢ƒé…ç½® ä¸­ä»‹ç»äº†ä¸€ç§ç®€å•ä»»åŠ¡çš„åˆ›å»ºæ–¹æ³•ã€‚ å¯¹äºä»»åŠ¡ï¼Œåœ¨Celeryä¸­ä¸»è¦åˆ†ä¸º å¼‚æ­¥ä»»åŠ¡ å’Œ å®šæ—¶ä»»åŠ¡ï¼Œä¸‹é¢è¯¦ç»†çš„æ¥è¯´è¯´ã€‚ é…ç½®Celeryä¸­çš„é…ç½®å¯ä»¥ç›´æ¥åœ¨åº”ç”¨ä¸Šè®¾ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„é…ç½®æ¨¡å—ã€‚ ç›´æ¥é…ç½®ä¾‹å¦‚ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ CELERY_TASK_SERIALIZER é€‰é¡¹æ¥é…ç½®åºåˆ—åŒ–ä»»åŠ¡è½½è·çš„é»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ï¼š 1app.conf.CELERY_TASK_SERIALIZER = &apos;json&apos; ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªé€‰é¡¹ï¼Œä½ å¯ä»¥ä½¿ç”¨ update() æ–¹æ³•ï¼š 1234567app.conf.update( CELERY_TASK_SERIALIZER=&apos;json&apos;, CELERY_ACCEPT_CONTENT=[&apos;json&apos;], # Ignore other content CELERY_RESULT_SERIALIZER=&apos;json&apos;, CELERY_TIMEZONE=&apos;Europe/Oslo&apos;, CELERY_ENABLE_UTC=True,) ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526from celery import CeleryCELERY_CONFIG = &#123; &apos;CELERY_TIMEZONE&apos;: &apos;Asia/Shanghai&apos;, &apos;CELERY_ENABLE_UTC&apos;: True, # content &apos;CELERY_TASK_SERIALIZER&apos;: &apos;json&apos;, &apos;CELERY_RESULT_SERIALIZER&apos;: &apos;json&apos;, &apos;CELERY_ACCEPT_CONTENT&apos;: [&apos;json&apos;], &apos;CELERYD_MAX_TASKS_PER_CHILD&apos;: 1&#125;SETTINGS = &#123; &apos;user&apos;: &apos;www-data&apos;, &apos;password&apos;: &apos;www-data&apos;, &apos;host&apos;: &apos;127.0.0.1&apos;, &apos;port&apos;: &apos;5672&apos;, &apos;vhost&apos;: &apos;t_celery&apos;&#125;app = Celery( &apos;test_celery&apos;, broker=&apos;amqp://&#123;user&#125;:&#123;password&#125;@&#123;host&#125;:&#123;port&#125;/&#123;vhost&#125;&apos;.format( **SETTINGS))app.conf.update(**CELERY_CONFIG) ç‹¬ç«‹é…ç½®æ¨¡å—å¯¹äºå¤§å‹é¡¹ç›®ï¼Œé‡‡ç”¨ç‹¬ç«‹é…ç½®æ¨¡å—æ›´ä¸ºæœ‰æ•ˆã€‚ å¯ä»¥è°ƒç”¨ config_from_object() æ¥è®© Celery å®ä¾‹åŠ è½½é…ç½®æ¨¡å—ï¼š 1app.config_from_object(&apos;celeryconfig&apos;) é…ç½®æ¨¡å—é€šå¸¸ç§°ä¸º celeryconfig ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„æ¨¡å—åã€‚åä¸º celeryconfig.py çš„æ¨¡å—å¿…é¡»å¯ä»¥ä»å½“å‰ç›®å½•æˆ– Python è·¯å¾„åŠ è½½ã€‚ celeryconfig.py æ ¼å¼ä¸€èˆ¬ä¸ºï¼š 12345678BROKER_URL = &apos;amqp://&apos;CELERY_RESULT_BACKEND = &apos;amqp://&apos;CELERY_TASK_SERIALIZER = &apos;json&apos;CELERY_RESULT_SERIALIZER = &apos;json&apos;CELERY_ACCEPT_CONTENT=[&apos;json&apos;]CELERY_TIMEZONE = &apos;Europe/Oslo&apos;CELERY_ENABLE_UTC = True æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•é”™è¯¯ï¼Œå¯ä»¥ï¼š 1$ python -m celeryconfig æ›´å¤šé…ç½®å‚æ•°å‚è€ƒï¼šConfiguration and defaults æœ‰å…³é…ç½®çš„ä½¿ç”¨å¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« ä¸­çš„è¯¦ç»†ä»‹ç»ã€‚ å¼‚æ­¥ä»»åŠ¡åœ¨åˆçº§ç¯‡ä¸­æˆ‘ä»¬åˆ›å»ºçš„ç®€å•ä»»åŠ¡ tasks.py å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚tasks.py ï¼š 1234567891011121314#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )@app.taskdef add(x, y): return x + y åˆ›å»ºäº†ä¸€ä¸ª Celery å®ä¾‹ app ï¼ŒæŒ‡å®šåç§°ä¸º tasks æŒ‡å®šæ¶ˆæ¯ä¸­é—´ä»¶ broker ä½¿ç”¨ RabbitMQ ï¼ŒæŒ‡å®šç»“æœå­˜å‚¨ backend ä½¿ç”¨ RabbitMQ åˆ›å»ºäº†ä¸€ä¸ª Celery ä»»åŠ¡ addï¼Œå½“å‡½æ•°è¢« @app.task è£…é¥°åï¼Œå°±æˆä¸ºå¯è¢« Celery è°ƒåº¦çš„ä»»åŠ¡ è¿è¡Œ workeråœ¨ tasks.py æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š 1$ celery -A tasks worker --loglevel=info è¿™ä¸ªå‘½ä»¤ä¼šå¼€å¯ä¸€ä¸ªåœ¨å‰å°è¿è¡Œçš„ workerã€‚ å‚æ•°è¯´æ˜ï¼š worker : è¿è¡Œ worker æ¨¡å— -A: â€“app=APP æŒ‡å®šä½¿ç”¨çš„ Celery å®ä¾‹æ‰€åœ¨çš„æ–‡ä»¶æ¨¡å— -l: -â€“loglevel=INFO æŒ‡å®šæ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ä¸º WARNINGï¼Œå¯é€‰ï¼šDEBUG, INFO, WARNING, ERROR, CRITICAL, FATAL å¦‚æœæ˜¯åˆ›å»ºä»»åŠ¡æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å—åç§°æ¥å¯åŠ¨ï¼š 1$ celery -A proj worker -l info æˆ–è€…ä½¿ç”¨å®Œæ•´å‘½ä»¤ï¼š 1$ celery worker --app=proj -l info æŸ¥çœ‹å®Œæ•´çš„å¸®åŠ©ä¿¡æ¯ï¼š 1$ celery worker --help ç¤ºä¾‹ï¼š 12345678910111213root@b792ae940e3e:/app# celery worker --helpusage: celery worker [options] Start worker instance.Examples: $ celery worker --app=proj -l info $ celery worker -A proj -l info -Q hipri,lopri $ celery worker -A proj --concurrency=4 $ celery worker -A proj --concurrency=1000 -P eventlet $ celery worker --autoscale=10,0 Workers Guide celery.bin.worker æ‰©å±• å¯¹äºå‚æ•° -A: â€“app=APP è¡¨ç¤ºæŒ‡å®šä½¿ç”¨çš„ Celery å®ä¾‹ã€‚å³æŒ‡pyæ–‡ä»¶çš„æ–‡ä»¶åï¼ˆä¸åŒ…æ‹¬æ‰©å±•å.pyï¼‰æˆ–é¡¹ç›®çš„æ¨¡å—å æ¯”å¦‚é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š 12345testcelery/ |- src/ |- __init__.py |- app.py |- task.py é‚£ä¹ˆå¯åŠ¨workerä»»åŠ¡ task.py çš„å‘½ä»¤å³ä¸ºï¼š 1$ celery worker -A src.task -l info è°ƒç”¨ Taskdelayè°ƒç”¨åœ¨å¼‚æ­¥è°ƒç”¨æ–¹å¼ä¸­ï¼Œå¯ä»¥é€šè¿‡ delay æˆ–è€… apply_async æ¥å®ç°ã€‚ 123from tasks import addadd.delay(3, 4) ç¤ºä¾‹ï¼Œåˆ›å»ºæ–‡ä»¶ client.py : 1234567#!/usr/bin/env python3# -*- coding: utf-8 -*-from tasks import addif __name__ == &apos;__main__&apos;: add.delay(1, 5) æ‰§è¡Œ $ python3 client.py å°±èƒ½è°ƒç”¨æ‰§è¡Œäº†ã€‚ apply_async12345678#!/usr/bin/env python3# -*- coding: utf-8 -*-from tasks import addif __name__ == &apos;__main__&apos;: # add.delay(1, 5) add.apply_async(args=(5, 6)) delay å’Œ apply_async è¿™ä¸¤ç§è°ƒç”¨æ–¹å¼ç­‰ä»·ï¼Œdelay æ˜¯ apply_async çš„ç®€å†™ã€‚ç”¨äºä¸€ä¸ªä»»åŠ¡æ¶ˆæ¯ï¼ˆtask messageï¼‰ã€‚ä¹‹å‰çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬å‘ç° add ä»»åŠ¡å¹¶æ²¡æœ‰è¿”å› â€œè®¡ç®—ç»“æœâ€ï¼Œè€Œæ˜¯è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ AsyncResultï¼Œå®ƒçš„ä½œç”¨æ˜¯è¢«ç”¨æ¥æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ï¼Œç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æˆ–è·å–ä»»åŠ¡ç»“æœï¼Œå¦‚æœä»»åŠ¡å¤±è´¥ï¼Œå®ƒä¼šè¿”å›å¼‚å¸¸ä¿¡æ¯æˆ–è€…è°ƒç”¨æ ˆã€‚ apply_async å‚æ•° apply_async ç›¸æ¯” delayçš„ä¼˜ç‚¹å°±æ˜¯ï¼Œapply_asyncæ”¯æŒæ›´å¤šçš„å‚æ•°ã€‚ 1apply_async(args=(), kwargs=&#123;&#125;, route_name=None, **options) apply_async å¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ï¼š countdown ï¼šä»»åŠ¡å»¶è¿Ÿæ‰§è¡Œçš„ç§’æ•°ï¼Œé»˜è®¤ç«‹å³æ‰§è¡Œï¼› 1task1.apply_async(args=(2, 3), countdown=5) # 5 ç§’åæ‰§è¡Œä»»åŠ¡ eta ï¼šä»»åŠ¡è¢«æ‰§è¡Œçš„ç»å¯¹æ—¶é—´ï¼Œå‚æ•°ç±»å‹æ˜¯ datetime 1234from datetime import datetime, timedelta# å½“å‰ UTC æ—¶é—´å†åŠ  10 ç§’åæ‰§è¡Œä»»åŠ¡task1.multiply.apply_async(args=[3, 7], eta=datetime.utcnow() + timedelta(seconds=10)) expires : ä»»åŠ¡è¿‡æœŸæ—¶é—´ï¼Œå‚æ•°ç±»å‹å¯ä»¥æ˜¯ intï¼Œä¹Ÿå¯ä»¥æ˜¯ datetime 1task1.multiply.apply_async(args=[3, 7], expires=10) # 10 ç§’åè¿‡æœŸ æ›´å¤šçš„å‚æ•°åˆ—è¡¨å¯ä»¥åœ¨ å®˜æ–¹æ–‡æ¡£ ä¸­æŸ¥çœ‹ã€‚ send_taskè°ƒç”¨é™¤äº†ä½¿ç”¨ delay çš„æ–¹å¼ï¼Œè¿˜å·²é€šè¿‡ send_task() çš„æ–¹å¼æ¥è°ƒç”¨ã€‚åŒæ—¶ send_task() ä¹Ÿæ”¯æŒè®¾ç½®æ›´å¤šçš„å‚æ•°ã€‚ ç¤ºä¾‹ï¼Œclient.py : 123456789#!/usr/bin/env python3# -*- coding: utf-8 -*-from tasks import appif __name__ == &apos;__main__&apos;: # add.delay(1, 5) # add.apply_async(args=(5, 6)) app.send_task(&apos;tasks.add&apos;, args=(12, 23),) æ³¨æ„ï¼Œè¿™é‡Œå¼•å…¥çš„æ˜¯ app å®ä¾‹ã€‚args å‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„ç±»å‹ã€‚ç›¸åº”çš„æ‰§è¡Œç»“æœä¸ºï¼š 12[2017-12-10 07:11:38,057: INFO/MainProcess] Received task: tasks.add[83fd530f-d800-43c7-bcfe-920a176812e2] [2017-12-10 07:11:43,217: INFO/ForkPoolWorker-1] Task tasks.add[83fd530f-d800-43c7-bcfe-920a176812e2] succeeded in 5.1578904589996455s: 35 AsyncResultæ–¹æ³•ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°è¿‡è¿”å›å¯¹è±¡ AsyncResult çš„ ready() æ–¹æ³•ï¼Œç»§ç»­æ¥çœ‹ä¸€ä¸‹å…¶ä»–çš„æ–¹æ³•ï¼š ready ä¸º True è¡¨ç¤ºå·²ç»è¿”å›ç»“æœäº† 12&gt;&gt;&gt; result.ready()True status è¡¨ç¤ºä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ï¼Œå¤±è´¥è¿˜æ˜¯æˆåŠŸ 12&gt;&gt;&gt; result.status&apos;SUCCESS&apos; result å’Œ get() è¡¨ç¤ºè¿”å›çš„ç»“æœ 12345&gt;&gt;&gt; result.result7&gt;&gt;&gt; result.get() 7 id ç”¨æ¥æŸ¥çœ‹ä»»åŠ¡çš„idå±æ€§ï¼š 12&gt;&gt;&gt; result.id&apos;c178619e-3af3-41ed-8d2c-6371de80a601&apos; å®šæ—¶ä»»åŠ¡Celery Beat è¿›ç¨‹é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œå‘¨æœŸæ€§åœ°å°†å®šæ—¶ä»»åŠ¡å‘å¾€ä»»åŠ¡é˜Ÿåˆ—ã€‚ åœ¨Celeryçš„å®šæ—¶ä»»åŠ¡ä¸­ï¼Œé‡è¦çš„ä¸¤ä¸ªæ–¹æ³•æ˜¯ å®šæ—¶å™¨ å’Œ æ‰§è¡Œå™¨ï¼š å®šæ—¶å™¨ï¼Œä¹Ÿå«ä½œ beaterï¼Œä¹Ÿå°±æ˜¯å¸®åŠ©æˆ‘ä»¬è®¡ç®—ä»€ä¹ˆæ—¶å€™æ‰§è¡Œä»€ä¹ˆæ“ä½œ æ‰§è¡Œå™¨ï¼Œä¹Ÿå«ä½œ workerï¼ŒçœŸæ­£æ‰§è¡Œä»»åŠ¡çš„åœ°æ–¹ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡éƒ½æ˜¯é€šè¿‡è¿™ä¸ªè¿è¡Œçš„ åˆ›å»ºCeleryå®šæ—¶ä»»åŠ¡æœ‰å¤šä¸­æ–¹æ³•ã€‚ é€šè¿‡é…ç½®æ–‡ä»¶æ–¹å¼å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ CELERYBEAT_SCHEDULE è®¾ç½®å®šæ—¶ã€‚ ç®€å•å®šæ—¶ä»»åŠ¡åˆ›å»ºä¸€ä¸ªCeleryçš„ä»»åŠ¡ tasks.pyï¼š 1234567891011121314151617181920212223242526#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )app.conf.update( # é…ç½®å®šæ—¶ä»»åŠ¡ CELERYBEAT_SCHEDULE=&#123; &apos;my_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 60, &apos;args&apos;: (22, 34), &#125; &#125;)@app.taskdef add(x, y): return x + y ç„¶åï¼Œå¯åŠ¨è¿™ä¸ª worker è¿›ç¨‹ï¼š 1# celery -A tasks worker -l info æ¥ç€ï¼Œå¯åŠ¨ Celery Beat è¿›ç¨‹ï¼Œå®šæ—¶å°†ä»»åŠ¡å‘é€åˆ° Broker ï¼Œåœ¨å¦ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ä¸‹æ‰§è¡Œï¼š 1# celery beat -A tasks -l info å¯ä»¥çœ‹åˆ°æç¤ºä¿¡æ¯ï¼š 123456789101112root@b792ae940e3e:/app# celery beat -A tasks -l infocelery beat v4.1.0 (latentcall) is starting.__ - ... __ - _LocalTime -&gt; 2017-12-10 08:48:29Configuration -&gt; . broker -&gt; amqp://myuser:**@localhost:5672/hellohost . loader -&gt; celery.loaders.app.AppLoader . scheduler -&gt; celery.beat.PersistentScheduler . db -&gt; celerybeat-schedule . logfile -&gt; [stderr]@%INFO . maxinterval -&gt; 5.00 minutes (300s)[2017-12-10 08:48:29,141: INFO/MainProcess] beat: Starting... ä¸€æ®µæ—¶é—´åï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œç»“æœï¼š beat æ‰§è¡Œç»“æœï¼š 1234567[2017-12-10 08:49:29,277: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:50:29,289: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:51:29,322: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:52:29,334: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:53:29,375: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:54:29,411: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 08:55:29,426: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add) workder æ‰§è¡Œç»“æœï¼š 1234567891011[2017-12-10 08:41:37,839: INFO/MainProcess] celery@b792ae940e3e ready.[2017-12-10 08:49:29,290: INFO/MainProcess] Received task: tasks.add[1667ee3b-58c8-4a1a-be9f-0c20c3086bde] [2017-12-10 08:49:29,321: INFO/ForkPoolWorker-1] Task tasks.add[1667ee3b-58c8-4a1a-be9f-0c20c3086bde] succeeded in 0.029423292000501533s: 56[2017-12-10 08:50:29,295: INFO/MainProcess] Received task: tasks.add[db2d9ead-c22f-4efe-8d1c-6995f0ce9148] [2017-12-10 08:50:29,345: INFO/ForkPoolWorker-1] Task tasks.add[db2d9ead-c22f-4efe-8d1c-6995f0ce9148] succeeded in 0.046812374001092394s: 56[2017-12-10 08:51:29,324: INFO/MainProcess] Received task: tasks.add[7b23af5f-a467-4263-9cd0-87486f2df25d] [2017-12-10 08:51:29,338: INFO/ForkPoolWorker-1] Task tasks.add[7b23af5f-a467-4263-9cd0-87486f2df25d] succeeded in 0.011024585000996012s: 56[2017-12-10 08:52:29,336: INFO/MainProcess] Received task: tasks.add[2f3489e4-625e-460a-bc57-3fdf13456d97] [2017-12-10 08:52:29,349: INFO/ForkPoolWorker-1] Task tasks.add[2f3489e4-625e-460a-bc57-3fdf13456d97] succeeded in 0.01185457899919129s: 56[2017-12-10 08:53:29,381: INFO/MainProcess] Received task: tasks.add[ec7377fb-1859-4980-861b-2592422aad8c] [2017-12-10 08:53:29,408: INFO/ForkPoolWorker-1] Task tasks.add[ec7377fb-1859-4980-861b-2592422aad8c] succeeded in 0.021194035000007716s: 56 ä¸Šé¢å®šæ—¶ä»»åŠ¡çš„é…ç½®ä¿¡æ¯è¡¨ç¤ºï¼š 12345678# é…ç½®å®šæ—¶ä»»åŠ¡CELERYBEAT_SCHEDULE=&#123; &apos;my_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 60, &apos;args&apos;: (22, 34), &#125;&#125; å…¶ä¸­ï¼š my_task è¡¨ç¤ºå½“å‰ä»»åŠ¡çš„åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰æŒ‡å®š task è¡¨ç¤º tasks.py æ¨¡å—ä¸‹çš„ add æ–¹æ³• schedule è¡¨ç¤º ä»»åŠ¡æ‰§è¡Œçš„é—´éš”ï¼Œå¦‚æœä½¿ç”¨ int ç±»å‹ï¼Œåˆ™å•ä½æ˜¯ç§’ï¼›è¿˜å¯ä»¥ä½¿ç”¨ timedelta ç±»å‹ args è¡¨ç¤ºä»»åŠ¡å‡½æ•°å‚æ•°ï¼Œæ³¨æ„å‚æ•°ç±»å‹ä¸ºå…ƒç»„ å¦‚æœä¸é€šè¿‡ update æ¥ä¿®æ”¹ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½® beat_schedule é…ç½®é¡¹æ¥è®¾ç½®ã€‚ 1234567891011121314151617181920212223#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )app.conf.beat_schedule = &#123; &apos;my_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 60, &apos;args&apos;: (1, 2), &#125;&#125;app.conf.timezone = &apos;UTC&apos;@app.taskdef add(x, y): return x + y å¤šé¡¹å®šæ—¶ä»»åŠ¡æˆ‘ä»¬è¿˜å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­åŒæ—¶å®šä¹‰å¤šä¸ªå®šæ—¶ä»»åŠ¡ï¼Œåªéœ€è¦åœ¨ CELERYBEAT_SCHEDULE é¡¹ä¸­æ·»åŠ å³å¯: 12345678910111213# é…ç½®å®šæ—¶ä»»åŠ¡CELERYBEAT_SCHEDULE=&#123; &apos;my_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 60, &apos;args&apos;: (22, 34), &#125;, &apos;your_task&apos;:&#123; &apos;task&apos;:&apos;tasks,add&apos;, &apos;schedule&apos;:30, &apos;args&apos;:(1,4), &#125;&#125; ç›¸åº”çš„æ‰§è¡Œç»“æœï¼š beat æ‰§è¡Œç»“æœï¼š 12345678910root@b792ae940e3e:/app# celery beat -A tasks -l info[2017-12-10 09:34:50,113: INFO/MainProcess] beat: Starting...[2017-12-10 09:35:20,151: INFO/MainProcess] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 09:35:50,145: INFO/MainProcess] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 09:35:50,149: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 09:36:20,166: INFO/MainProcess] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 09:36:50,187: INFO/MainProcess] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 09:36:50,188: INFO/MainProcess] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 09:37:20,208: INFO/MainProcess] Scheduler: Sending due task your_task (tasks.add) worker æ‰§è¡Œç»“æœï¼š 1234567891011121314151617root@b792ae940e3e:/app# celery worker -A tasks -l info[2017-12-10 09:34:45,833: INFO/MainProcess] celery@b792ae940e3e ready.[2017-12-10 09:35:20,165: INFO/MainProcess] Received task: tasks.add[2b236ccf-c4af-430c-8d4e-a5cbaf331123] [2017-12-10 09:35:20,213: INFO/ForkPoolWorker-1] Task tasks.add[2b236ccf-c4af-430c-8d4e-a5cbaf331123] succeeded in 0.04618659699917771s: 5[2017-12-10 09:35:50,151: INFO/MainProcess] Received task: tasks.add[01f843bc-8506-4d61-97ce-5f989c576509] [2017-12-10 09:35:50,159: INFO/MainProcess] Received task: tasks.add[f3230694-ce5a-4bc3-9c92-eea71b9c4949] [2017-12-10 09:35:50,187: INFO/ForkPoolWorker-1] Task tasks.add[01f843bc-8506-4d61-97ce-5f989c576509] succeeded in 0.03170933700130263s: 5[2017-12-10 09:35:50,214: INFO/ForkPoolWorker-2] Task tasks.add[f3230694-ce5a-4bc3-9c92-eea71b9c4949] succeeded in 0.04673135899975023s: 56[2017-12-10 09:36:20,168: INFO/MainProcess] Received task: tasks.add[410e86bf-2e06-4a7d-965d-92d2e6a72c12] [2017-12-10 09:36:20,186: INFO/ForkPoolWorker-1] Task tasks.add[410e86bf-2e06-4a7d-965d-92d2e6a72c12] succeeded in 0.01682951399925514s: 5[2017-12-10 09:36:50,191: INFO/MainProcess] Received task: tasks.add[d2b32ff2-8e8e-4903-ad8f-7d12da132739] [2017-12-10 09:36:50,193: INFO/MainProcess] Received task: tasks.add[dc7fc344-374e-438b-8a0f-85f9e9f08aac] [2017-12-10 09:36:50,207: INFO/ForkPoolWorker-1] Task tasks.add[d2b32ff2-8e8e-4903-ad8f-7d12da132739] succeeded in 0.013693080998564255s: 5[2017-12-10 09:36:50,211: INFO/ForkPoolWorker-2] Task tasks.add[dc7fc344-374e-438b-8a0f-85f9e9f08aac] succeeded in 0.017022554000504897s: 56[2017-12-10 09:37:20,213: INFO/MainProcess] Received task: tasks.add[49113d2d-a36d-44b0-92dc-9ad0382c26a2] [2017-12-10 09:37:20,246: INFO/ForkPoolWorker-1] Task tasks.add[49113d2d-a36d-44b0-92dc-9ad0382c26a2] succeeded in 0.027591496000241023s: 5 åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªå‘½ä»¤å¯åŠ¨äº† Worker è¿›ç¨‹å’Œ Beat è¿›ç¨‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­ï¼š 1$ celery -B -A tasks worker --loglevel=info ç›¸åº”çš„æ‰§è¡Œç»“æœä¸ºï¼š 123456789101112131415root@b792ae940e3e:/app# celery -B -A tasks worker -l info[2017-12-10 10:07:36,153: INFO/MainProcess] celery@b792ae940e3e ready.[2017-12-10 10:07:36,158: INFO/Beat] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 10:07:36,169: INFO/MainProcess] Received task: tasks.add[d92a952e-e3f6-4224-9e8b-dda771740fe2] [2017-12-10 10:07:36,221: INFO/ForkPoolWorker-2] Task tasks.add[d92a952e-e3f6-4224-9e8b-dda771740fe2] succeeded in 0.049944616001084796s: 5[2017-12-10 10:08:06,148: INFO/Beat] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 10:08:06,151: INFO/MainProcess] Received task: tasks.add[678c33ae-9d2d-40c1-b5ce-25ffbdf763d8] [2017-12-10 10:08:06,175: INFO/ForkPoolWorker-2] Task tasks.add[678c33ae-9d2d-40c1-b5ce-25ffbdf763d8] succeeded in 0.02311466900027881s: 5[2017-12-10 10:08:36,148: INFO/Beat] Scheduler: Sending due task your_task (tasks.add)[2017-12-10 10:08:36,149: INFO/Beat] Scheduler: Sending due task my_task (tasks.add)[2017-12-10 10:08:36,150: INFO/MainProcess] Received task: tasks.add[b05841b8-a382-4a1a-a583-3695e6d369d2] [2017-12-10 10:08:36,152: INFO/MainProcess] Received task: tasks.add[baebd820-4a22-496c-8c39-6b9f52d2f22b] [2017-12-10 10:08:36,195: INFO/ForkPoolWorker-2] Task tasks.add[b05841b8-a382-4a1a-a583-3695e6d369d2] succeeded in 0.04302837300019746s: 5[2017-12-10 10:08:36,198: INFO/ForkPoolWorker-3] Task tasks.add[baebd820-4a22-496c-8c39-6b9f52d2f22b] succeeded in 0.0449830910001765s: 56 æ—¶åŒºCeleryå®šæ—¶ä»»åŠ¡é»˜è®¤ä½¿ç”¨UTCæ—¶åŒºã€‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ¥è®¾ç½®ã€‚æœ€ç»ˆçš„ tasks.py æ–‡ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132333435363738#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )app.conf.update( # é…ç½®æ‰€åœ¨æ—¶åŒº CELERY_TIMEZONE=&apos;Asia/Shanghai&apos;, CELERY_ENABLE_UTC=True, # å®˜ç½‘æ¨èæ¶ˆæ¯åºåˆ—åŒ–æ–¹å¼ä¸ºjson CELERY_ACCEPT_CONTENT=[&apos;json&apos;], CELERY_TASK_SERIALIZER=&apos;json&apos;, CELERY_RESULT_SERIALIZER=&apos;json&apos;, # é…ç½®å®šæ—¶ä»»åŠ¡ CELERYBEAT_SCHEDULE=&#123; &apos;my_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 60, &apos;args&apos;: (22, 34), &#125;, &apos;your_task&apos;: &#123; &apos;task&apos;: &apos;tasks.add&apos;, &apos;schedule&apos;: 30, &apos;args&apos;: (1, 4), &#125; &#125;)@app.taskdef add(x, y): return x + y é€šè¿‡on_after_configureå®šä¹‰ä½¿ç”¨ on_after_configure å¤„ç†ç¨‹åºæ¥è£…é¥°å®šæ—¶ä»»åŠ¡ã€‚å¦‚ tasks.py æ–‡ä»¶ï¼š 123456789101112131415161718192021#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )@app.on_after_configure.connectdef setup_periodic_tasks(sender, **kwargs): # Calls test(&apos;hello&apos;) every 10 seconds. sender.add_periodic_task(10.0, add.s(&apos;hello&apos;), name=&apos;add every 10&apos;)@app.taskdef add(arg): print(arg) return arg æ‰§è¡Œç¤ºä¾‹ï¼š 123456789101112root@b792ae940e3e:/app# celery -B -A tasks worker -l info[2017-12-10 10:53:30,420: INFO/MainProcess] celery@b792ae940e3e ready.[2017-12-10 10:53:30,596: INFO/Beat] beat: Starting...[2017-12-10 10:53:30,620: INFO/Beat] Scheduler: Sending due task add every 10 (tasks.add)[2017-12-10 10:53:30,628: INFO/MainProcess] Received task: tasks.add[315383b8-5bd7-48ab-8dd2-c5d39e71f058] [2017-12-10 10:53:30,630: WARNING/ForkPoolWorker-3] hello[2017-12-10 10:53:30,667: INFO/ForkPoolWorker-3] Task tasks.add[315383b8-5bd7-48ab-8dd2-c5d39e71f058] succeeded in 0.03778552899893839s: &apos;hello&apos;[2017-12-10 10:53:40,602: INFO/Beat] Scheduler: Sending due task add every 10 (tasks.add)[2017-12-10 10:53:40,607: INFO/MainProcess] Received task: tasks.add[5f8ef21e-fbfd-4c82-8dbd-6fa2aeaf4fa4] [2017-12-10 10:53:40,610: WARNING/ForkPoolWorker-3] hello[2017-12-10 10:53:40,631: INFO/ForkPoolWorker-3] Task tasks.add[5f8ef21e-fbfd-4c82-8dbd-6fa2aeaf4fa4] succeeded in 0.022007824998581782s: &apos;hello&apos; åŒæ—¶ï¼Œadd_periodic_task() æ–¹æ³•ä¹Ÿèƒ½è®¾ç½®å…¶ä»–å‚æ•°ï¼š 12# Calls test(&apos;world&apos;) every 30 secondssender.add_periodic_task(30.0, add.s(&apos;world&apos;), expires=10) æˆ–è€…ä¹Ÿèƒ½é€šè¿‡ crontab() æ¥åº”ç”¨ cron è¡¨è¾¾å¼ï¼Œå®ç°å¤šç§æ—¶é—´çš„è®¾å®šã€‚ 12345# Executes every Monday morning at 7:30 a.m.sender.add_periodic_task( crontab(hour=7, minute=30, day_of_week=1), add.s(&apos;Happy Mondays!&apos;),) ç›¸å…³å‚è€ƒ Periodic Tasks å¼‚æ­¥ä»»åŠ¡ç¥å™¨ Celery]]></content>
      <categories>
        <category>Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(äºŒ)-ç¯å¢ƒé…ç½®]]></title>
    <url>%2F2017%2F12%2F10%2Fcelery-distributed-task-queue-introduction-second%2F</url>
    <content type="text"><![CDATA[å®è·µåœ¨Dockerå®¹å™¨ä¸­é…ç½®Celeryè¿è¡Œç¯å¢ƒã€‚ åˆ›å»ºDockerå®¹å™¨åœ¨å®¹å™¨ Ubuntu:16.04 ç³»ç»Ÿä¸­æ¥æ­å»ºï¼Œåˆ›å»ºå®¹å™¨ï¼š 1$ docker run -it --name celery1 -p 5672:5672 -p 15673:15672 -v /home/tiger/dckerfile/celery1:/app ubuntu /bin/bash éœ€è¦æ³¨æ„çš„æ˜¯åœ¨Dockerå®¹å™¨ä¸­ä¸éœ€è¦ sudo å‘½ä»¤ï¼Œé»˜è®¤å³æ˜¯ root æƒé™ã€‚ä¸‹é¢çš„å‘½ä»¤è¯·æ ¹æ®è‡ªå·±æ‰€åœ¨ç³»ç»Ÿç±»å‹è‡ªè¡Œæ·»åŠ  sudo æ“ä½œã€‚ æ›´æ–°è½¯ä»¶æº12345# echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list# echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list# apt-get update å®‰è£…Erlangä¾èµ–Erlangå¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼Œæˆ–è€…ç›´æ¥ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å®‰è£…åŒ…æ¥å®‰è£…ã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š 123456cd /tmpwget http://packages.erlang-solutions.com/ubuntu/erlang_solutions.asc# apt-key add erlang_solutions.asc# apt-get update# apt-get install erlang# apt-get install erlang-nox æˆ–è€…ç›´æ¥ä»ç½‘ç«™ Erlang Downloads ä¸‹è½½ .deb å®‰è£…åŒ…æ¥å®‰è£…ã€‚ å®‰è£…RabbitMQæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é€šè¿‡åŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼š 123456# echo &quot;deb https://dl.bintray.com/rabbitmq/debian xenial main&quot; | tee /etc/apt/sources.list.d/bintray.rabbitmq.list# wget -O- https://www.rabbitmq.com/rabbitmq-release-signing-key.asc | apt-key add -# apt-get update# apt-get install rabbitmq-server å‘ç°é€šè¿‡ä¸Šé¢æ–¹æ³•å®‰è£…çš„ Erlang Version ä¸º Erlang/OTP 18 [erts-7.3] [source] [64-bit] [smp:2:2] ï¼ŒRabbitMQ Version ä¸º &quot;RabbitMQ&quot;,&quot;3.5.7&quot; éƒ½ä¸æ˜¯å®˜ç½‘ä¸Šçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½†åœ¨è½¯ä»¶æºä¸­æ¥è¯´å·²æ˜¯å¯å®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦å®‰è£…å®˜æ–¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥é‡‡ç”¨ç›´æ¥ä»å®˜ç½‘è·å–å®‰è£…åŒ…çš„æ–¹å¼æ¥å®‰è£…ã€‚ å®‰è£…å®˜æ–¹æœ€æ–°ç‰ˆåœ¨Ubuntuç³»ç»Ÿä¸‹ç›´æ¥ä¸‹è½½ rabbitmq çš„ *.deb å®‰è£…åŒ…ï¼š ä»åœ°å€ Installing on Debian / Ubuntu çœ‹åˆ°æœ€æ–°ç‰ˆæœ¬æ˜¯ 3.7.0 rabbitmq-server_3.7.0-1_all.deb ä¹Ÿå¯ä»¥ä»ç½‘å€ Released Artifacts é€‰æ‹©å…¶ä»–æŒ‡å®šç‰ˆæœ¬ã€‚ ä¸‹é¢ä»¥ rabbitmq-server_3.7.0-1_all.deb ä¸ºä¾‹å®‰è£…ï¼š 12# wget https://dl.bintray.com/rabbitmq/all/rabbitmq-server/3.7.0/rabbitmq-server_3.7.0-1_all.deb# dpkg -i rabbitmq-server_3.7.0-1_all.deb å¦‚æœæç¤ºä¾èµ–å…¶ä»–çš„åŒ…ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…: 1# apt-get -f install ç„¶åå†æ¬¡æ‰§è¡Œå®‰è£…ï¼š 1# dpkg -i rabbitmq-server_3.7.0-1_all.deb æˆ‘åœ¨æ‰§è¡Œ apt-get -f install æ—¶é‡åˆ°é—®é¢˜ï¼Œè¾“å‡ºæç¤ºæ˜¯è¦ç§»é™¤ rabbitmq-server ï¼Œå¹¶æ²¡æœ‰è‡ªåŠ¨å®‰è£…å…¶ä»–ä¾èµ–ï¼š 123456789101112131415161718192021222324252627282930root@b792ae940e3e:/app# dpkg -i rabbitmq-server_3.7.0-1_all.deb Selecting previously unselected package rabbitmq-server.(Reading database ... 7744 files and directories currently installed.)Preparing to unpack rabbitmq-server_3.7.0-1_all.deb ...Unpacking rabbitmq-server (3.7.0-1) ...dpkg: dependency problems prevent configuration of rabbitmq-server: rabbitmq-server depends on erlang-nox (&gt;= 1:19.3) | esl-erlang (&gt;= 1:19.3); however: Package erlang-nox is not installed. Package esl-erlang is not installed. rabbitmq-server depends on logrotate; however: Package logrotate is not installed. rabbitmq-server depends on socat; however: Package socat is not installed.dpkg: error processing package rabbitmq-server (--install): dependency problems - leaving unconfiguredProcessing triggers for systemd (229-4ubuntu21) ...Errors were encountered while processing: rabbitmq-serverroot@b792ae940e3e:/app# apt-get -f installReading package lists... DoneBuilding dependency tree Reading state information... DoneCorrecting dependencies... DoneThe following packages will be REMOVED: rabbitmq-server0 upgraded, 0 newly installed, 1 to remove and 2 not upgraded.1 not fully installed or removed.After this operation, 13.3 MB disk space will be freed.Do you want to continue? [Y/n] æ‰€ä»¥ï¼Œæˆ‘é€‰æ‹©æ‰‹åŠ¨å®‰è£… Erland çš„ .deb åŒ…ã€‚ ä» ç½‘ç«™ RabbitMQ Erlang Version Requirements ä¸­å¯ä»¥çœ‹åˆ°RabbitMQå’ŒErlangç‰ˆæœ¬ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚è¿™é‡Œä¸Šé¢çš„æˆ‘æŒ‰ç…§çš„æ˜¯RabbitMQçš„ 3.7.0 ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥é€‰æ‹©Erlangçš„æœ€æ–°ç‰ˆå³ 20.1.7 ç‰ˆæœ¬å®‰è£…ã€‚ä¸‹è½½åœ°å€è§ï¼šErlang Downloads ã€‚ 123# wget http://packages.erlang-solutions.com/site/esl/esl-erlang/FLAVOUR_1_general/esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb# dpkg -i esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb è¿™æ¬¡å®‰è£…æ—¶ä¹Ÿæç¤ºç¼ºå°‘ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘æ‰§è¡Œï¼š 1# apt-get -f install ç»“æœæ˜¯æ‰¾åˆ°äº†ç›¸å…³çš„ä¾èµ–åŒ…ï¼Œè¾“å…¥ y è¿›è¡Œå®‰è£…ã€‚ 12345678910111213141516171819202122232425262728293031root@b792ae940e3e:/app# lsesl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb rabbitmq-server_3.7.0-1_all.debroot@b792ae940e3e:/app# dpkg -i esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb Selecting previously unselected package esl-erlang.(Reading database ... 7744 files and directories currently installed.)Preparing to unpack esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb ...Unpacking esl-erlang (1:20.1.7) ...dpkg: dependency problems prevent configuration of esl-erlang: esl-erlang depends on libwxbase2.8-0 | libwxbase3.0-0 | libwxbase3.0-0v5; however: Package libwxbase2.8-0 is not installed. Package libwxbase3.0-0 is not installed. Package libwxbase3.0-0v5 is not installed. esl-erlang depends on libwxgtk2.8-0 | libwxgtk3.0-0 | libwxgtk3.0-0v5; however: Package libwxgtk2.8-0 is not installed. Package libwxgtk3.0-0 is not installed. Package libwxgtk3.0-0v5 is not installed. esl-erlang depends on libsctp1; however: Package libsctp1 is not installed.dpkg: error processing package esl-erlang (--install): dependency problems - leaving unconfiguredErrors were encountered while processing: esl-erlangroot@b792ae940e3e:/app# apt-get -f installReading package lists... DoneBuilding dependency tree Reading state information... DoneCorrecting dependencies... DoneThe following additional packages will be installed:............ ç„¶åå†æ¬¡å®‰è£… esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb åŒ…ï¼š 1# dpkg -i esl-erlang_20.1.7-1~ubuntu~xenial_amd64.deb æœ€åï¼Œå®‰è£…RabbitMQçš„åŒ…ï¼š 1# dpkg -i rabbitmq-server_3.6.14-1_all.deb å¦‚æœä¸­é€”å†å‡ºç°ç¼ºå°‘ä¾èµ–åŒ…çš„é—®é¢˜ï¼Œé€šè¿‡ apt-get -f install æ¥è§£å†³ã€‚ 1234567891011121314151617181920212223242526272829303132root@b792ae940e3e:/app# dpkg -i rabbitmq-server_3.7.0-1_all.deb Selecting previously unselected package rabbitmq-server.(Reading database ... 29232 files and directories currently installed.)Preparing to unpack rabbitmq-server_3.7.0-1_all.deb ...Unpacking rabbitmq-server (3.7.0-1) ...dpkg: dependency problems prevent configuration of rabbitmq-server: rabbitmq-server depends on logrotate; however: Package logrotate is not installed. rabbitmq-server depends on socat; however: Package socat is not installed.dpkg: error processing package rabbitmq-server (--install): dependency problems - leaving unconfiguredProcessing triggers for systemd (229-4ubuntu21) ...Errors were encountered while processing: rabbitmq-serverroot@b792ae940e3e:/app# apt-get -f install Reading package lists... DoneBuilding dependency tree Reading state information... DoneCorrecting dependencies... DoneThe following additional packages will be installed: cron libpopt0 libwrap0 logrotate socat tcpdSuggested packages: anacron checksecurity exim4 | postfix | mail-transport-agent mailxThe following NEW packages will be installed: cron libpopt0 libwrap0 logrotate socat tcpd0 upgraded, 6 newly installed, 0 to remove and 2 not upgraded.1 not fully installed or removed.Need to get 522 kB of archives.After this operation, 1674 kB of additional disk space will be used.Do you want to continue? [Y/n] Downloading and Installing RabbitMQ RabbitMQå®‰è£…æ–¹å¼åŠå¸¸ç”¨å‘½ä»¤ â˜† Erlang Downloads Run RabbitMQ Serverå¯åŠ¨ RabbitMQ æœåŠ¡:1# service rabbitmq-server start å®‰è£… RabbitMQWeb ç®¡ç†æ’ä»¶ï¼š12# rabbitmq-plugins enable rabbitmq_management # service rabbitmq-server restart æ‰“å¼€æµè§ˆå™¨ç™»å½•ï¼šhttp://127.0.0.1:15672ï¼Œç™»å½•è´¦å·å¯†ç é»˜è®¤éƒ½æ˜¯ guest 12345678910111213root@730778dc65bd:/app# rabbitmq-plugins enable rabbitmq_managementThe following plugins have been enabled: mochiweb webmachine rabbitmq_web_dispatch amqp_client rabbitmq_management_agent rabbitmq_managementApplying plugin configuration to rabbit@730778dc65bd... started 6 plugins.root@730778dc65bd:/app# service rabbitmq-server restart * Restarting RabbitMQ Messaging Server rabbitmq-server [ OK ] root@730778dc65bd:/app# æµ‹è¯•ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940## æŸ¥çœ‹rabbitmqçŠ¶æ€root@730778dc65bd:/app# rabbitmqctl statusStatus of node rabbit@730778dc65bd ...Error: unable to connect to node rabbit@730778dc65bd: nodedownDIAGNOSTICS===========attempted to contact: [rabbit@730778dc65bd]rabbit@730778dc65bd: * connected to epmd (port 4369) on 730778dc65bd * epmd reports: node &apos;rabbit&apos; not running at all no other nodes on 730778dc65bd * suggestion: start the nodecurrent node details:- node name: &apos;rabbitmq-cli-9223@730778dc65bd&apos;- home dir: /var/lib/rabbitmq- cookie hash: MwPrvM8WUeAkWCiIWYw2fg==root@730778dc65bd:/app# root@730778dc65bd:/app# service rabbitmq-server start * Starting RabbitMQ Messaging Server rabbitmq-server [ OK ] root@730778dc65bd:/app# rabbitmqctl statusStatus of node rabbit@730778dc65bd ...[&#123;pid,9527&#125;, &#123;running_applications,[&#123;rabbit,&quot;RabbitMQ&quot;,&quot;3.5.7&quot;&#125;, &#123;mnesia,&quot;MNESIA CXC 138 12&quot;,&quot;4.13.3&quot;&#125;, &#123;xmerl,&quot;XML parser&quot;,&quot;1.3.10&quot;&#125;, &#123;os_mon,&quot;CPO CXC 138 46&quot;,&quot;2.4&quot;&#125;, &#123;sasl,&quot;SASL CXC 138 11&quot;,&quot;2.7&quot;&#125;, &#123;stdlib,&quot;ERTS CXC 138 10&quot;,&quot;2.8&quot;&#125;, &#123;kernel,&quot;ERTS CXC 138 10&quot;,&quot;4.2&quot;&#125;]&#125;, &#123;os,&#123;unix,linux&#125;&#125;, &#123;erlang_version,&quot;Erlang/OTP 18 [erts-7.3] [source] [64-bit] [smp:2:2] [async-threads:64] [kernel-poll:true]\n&quot;&#125;, &#123;memory,[&#123;total,83922208&#125;, &#123;connection_readers,0&#125;, &#123;connection_writers,0&#125;, RabbitMQä¸­çš„vitrual hostVirtual hostï¼Œæ˜¯èµ·åˆ°éš”ç¦»ä½œç”¨çš„ã€‚æ¯ä¸€ä¸ª vhost éƒ½æœ‰è‡ªå·±çš„ exchanges å’Œ queuesï¼Œå®ƒä»¬äº’ä¸å½±å“ã€‚ä¸åŒçš„åº”ç”¨å¯ä»¥è·‘åœ¨ç›¸åŒçš„ rabbitmq ä¸Šï¼Œä½¿ç”¨ vhost æŠŠå®ƒä»¬éš”ç¦»å¼€å°±è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œrabbitmq å®‰è£…åï¼Œé»˜è®¤çš„ vhost æ˜¯ /ã€‚ åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®è™šæ‹Ÿä¸»æœºå¯ä»¥å‘ç°ä¸Šé¢æˆ‘ä»¬é€šè¿‡ guest ç”¨æˆ·åœ¨å…¶ä»–ç”µè„‘ä¸Šæˆ–å¤–ç½‘æ®µè®¿é—®æ—¶ï¼Œä¼šæç¤º User can only log in via localhost ï¼Œè¿™æ˜¯å› ä¸º guest æ˜¯ä»…å…è®¸åœ¨ localhost ä¸‹æ‰èƒ½ç™»é™†çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨å¤–éƒ¨è®¿é—®ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„è´¦æˆ·ã€‚ åˆ›å»ºç”¨æˆ·çš„åŒæ—¶ä¸ºè¯¥ç”¨æˆ·æŒ‡å®šå…è®¸è®¿é—®çš„è™šæ‹Ÿä¸»æœº myvhost 123# rabbitmqctl add_user myuser mypassword# rabbitmqctl add_vhost myvhost# rabbitmqctl set_permissions -p myvhost myuser &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; æ­¤æ—¶ï¼Œæ–°åˆ›å»ºçš„è´¦æˆ· myuser ä¹Ÿå¹¶æ²¡æœ‰æƒé™åœ¨å¤–ç½‘è®¿é—®ï¼Œå¯ä»¥ç”¨ set_user_tags ä¸ºç”¨æˆ·è®¾ç½®è§’è‰²ï¼š 1# rabbitmqctl set_user_tags myuser administrator ç„¶åæˆ‘ä»¬å°±èƒ½åœ¨å¤–ç½‘é€šè¿‡åœ°å€ http://192.168.5.107:15673/ æ¥è®¿é—®ç®¡ç†ç«¯äº†ã€‚ ç¤ºä¾‹ï¼š 1234567891011# User: myuser # UserPwd: hello# VHost: hellohostroot@b792ae940e3e:/app# rabbitmqctl add_user myuser helloAdding user &quot;myuser&quot; ...root@b792ae940e3e:/app# rabbitmqctl add_vhost hellohostAdding vhost &quot;hellohost&quot; ...root@b792ae940e3e:/app# rabbitmqctl set_permissions -p hellohost myuser &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;Setting permissions for user &quot;myuser&quot; in vhost &quot;hellohost&quot; ...root@b792ae940e3e:/app# ç„¶åé‡å¯æœåŠ¡ï¼š 1# service rabbitmq-server restart CeleryCeleryå®˜æ–¹æ¨èä½¿ç”¨ RabbitMQ æˆ– Redis æ¥ä½œä¸ºä¸­é—´ä»¶ã€‚è®¾ç½®ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡ broker å’Œ backend å‚æ•°å³å¯ç»‘å®šã€‚ broker å’Œ backendå¯ä»¥ç”¨RabbitMQå’ŒRedisæ¥ä½œä¸ºbrokeræˆ–backendï¼š 1app = Celery(&apos;tasks&apos;, backend=&apos;amqp&apos;, broker=&apos;amqp://&apos;) 1app = Celery(&apos;tasks&apos;, backend=&apos;redis://localhost&apos;, broker=&apos;amqp://&apos;) æ³¨æ„ï¼Œè™½ç„¶æ¨èä½¿ç”¨RabbitMQæ¥ä½œä¸º brokerï¼Œä½†ä¸æ¨èå…¶ä½œä¸º backend ã€‚å…·ä½“åŸå› æˆ‘ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¯´æ˜ã€‚ ä¸­é—´äººRabbitMQRabbitMQ åŠŸèƒ½å®Œå¤‡ã€ç¨³å®šï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¯é çš„é€‰æ‹©ã€‚ 123BROKER_URL =transport://userid:password@hostname:port/virtual_hostBROKER_URL = &apos;amqp://guest:guest@localhost:5672//&apos; å®Œæ•´çš„æ ¼å¼ä¸ºï¼š 1CELERY_BROKER_URL = &apos;amqp://[YOUR_NAME]:[PASSWORD]@localhost:[PORT]/[VHOST_NAME]&apos; ä¸­é—´äººRedisä¸ RabbitMQ ç›¸æ¯”ï¼Œä½¿ç”¨ Redis ä½œä¸º broker ç¼ºç‚¹æ˜¯å¯èƒ½å› ä¸ºæ‰ç”µæˆ–å¼‚å¸¸é€€å‡ºå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä¼˜ç‚¹æ˜¯ä½¿ç”¨ç®€å•ã€‚ ä»¥ä¸‹å‘½ä»¤å¯ä»¥åŒæ—¶å®‰è£… celery å’Œ redis ç›¸å…³çš„ä¾èµ–ï¼Œä½†æ˜¯ redis server è¿˜æ˜¯å¿…é¡»å•ç‹¬å®‰è£…çš„ã€‚ 1$ pip install -U celery[redis] # -U çš„æ„æ€æ˜¯æŠŠæ‰€æœ‰æŒ‡å®šçš„åŒ…éƒ½å‡çº§åˆ°æœ€æ–°çš„ç‰ˆæœ¬ 1BROKER_URL = &apos;redis://localhost:6379//&apos; å®‰è£…celeryå…ˆå®‰è£… python3 pip3 ç­‰ä¾èµ–: 1# apt-get install -y python3 python3-pip 123# pip3 install celery# æˆ–è€…ï¼š# pip3 install -U Celery åˆ›å»ºä¸€ä¸ª tasks.py æ–‡ä»¶: 1234567from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://guest@localhost//&apos;)@app.taskdef add(x, y): return x + y æ³¨æ„ï¼Œå…¶ä¸­çš„ï¼š 1app = Celery(&apos;tasks&apos;, broker=&apos;amqp://guest@localhost//&apos;) ä¸­ broker è¦æ”¹ä¸ºä¸Šé¢è®¾ç½®çš„RabbitMQçš„ä¿¡æ¯ï¼Œæ‰€ä»¥ç»“æœä¸ºï¼š 1app = Celery(&apos;tasks&apos;,broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;) Celery çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰æ¨¡å—çš„åç§°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ï¼Œè¿™æ ·çš„è¯åç§°å¯ä»¥è‡ªåŠ¨ç”Ÿæˆã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸­é—´äººå…³é”®å­—å‚æ•°ï¼ŒæŒ‡å®šä½ æ‰€ä½¿ç”¨çš„æ¶ˆæ¯ä¸­é—´äººçš„ URLã€‚ ä¿å­˜ç»“æœæ‰§è¡Œå®Œæˆåçš„ç»“æœï¼ŒCelery éœ€è¦åœ¨æŸä¸ªåœ°æ–¹å­˜å‚¨æˆ–å‘é€ä»»åŠ¡å¤„ç†åçš„çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡ backend å‚æ•°æ¥æŒ‡å®šã€‚æ ¼å¼å’Œ broker ä¸€è‡´ã€‚ å®Œæ•´çš„ tasks.py: 1234567891011121314#!/usr/bin/env python3# -*- coding: utf-8 -*-from celery import Celeryapp = Celery(&apos;tasks&apos;, broker=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos;, backend=&apos;amqp://myuser:hello@localhost:5672/hellohost&apos; )@app.taskdef add(x, y): return x + y è¿è¡ŒCeleryç”¨ worker å‚æ•°æ‰§è¡Œç¨‹åº: 1$ celery -A tasks worker --loglevel=info è¾“å‡ºï¼š 123456789101112131415161718192021222324252627282930313233343536root@b792ae940e3e:/app# celery -A tasks worker --loglevel=info/usr/local/lib/python3.5/dist-packages/celery/platforms.py:795: RuntimeWarning: You&apos;re running the worker with superuser privileges: this isabsolutely not recommended!Please specify a different user using the -u option.User information: uid=0 euid=0 gid=0 egid=0 uid=uid, euid=euid, gid=gid, egid=egid,/usr/local/lib/python3.5/dist-packages/celery/backends/amqp.py:68: CPendingDeprecationWarning: The AMQP result backend is scheduled for deprecation in version 4.0 and removal in version v5.0. Please use RPC backend or a persistent backend. alternative=&apos;Please use RPC backend or a persistent backend.&apos;) -------------- celery@b792ae940e3e v4.1.0 (latentcall)---- **** ----- --- * *** * -- Linux-4.4.0-42-generic-x86_64-with-Ubuntu-16.04-xenial 2017-12-09 13:50:06-- * - **** --- - ** ---------- [config]- ** ---------- .&gt; app: tasks:0x7f97a8360dd8- ** ---------- .&gt; transport: amqp://myuser:**@localhost:5672/hellohost- ** ---------- .&gt; results: amqp://- *** --- * --- .&gt; concurrency: 2 (prefork)-- ******* ---- .&gt; task events: OFF (enable -E to monitor tasks in this worker)--- ***** ----- -------------- [queues] .&gt; celery exchange=celery(direct) key=celery [tasks] . tasks.add[2017-12-09 13:50:06,121: INFO/MainProcess] Connected to amqp://myuser:**@127.0.0.1:5672/hellohost[2017-12-09 13:50:06,137: INFO/MainProcess] mingle: searching for neighbors[2017-12-09 13:50:07,178: INFO/MainProcess] mingle: all alone[2017-12-09 13:50:07,228: INFO/MainProcess] celery@b792ae940e3e ready. å¯ä»¥çœ‹åˆ° celery çš„ worker å·²ç»å‡†å¤‡å°±ç»ªäº†ã€‚ æŸ¥çœ‹ worker å®Œæ•´çš„å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨: 123$ celery worker --help## æˆ–è€…ï¼š$ celery help è°ƒç”¨ä»»åŠ¡ä½¿ç”¨ delay() æ–¹æ³•æ¥è°ƒç”¨ä»»åŠ¡ã€‚ æ–°æ‰“å¼€ä¸€ä¸ªæ§åˆ¶å°ç•Œé¢ï¼Œ 1$ docker exec -it celery1 /bin/bash æ‰§è¡Œï¼š 1234# python3&gt;&gt;&gt; from tasks import add&gt;&gt;&gt; add.delay(4, 4) ç¤ºä¾‹ï¼š 12345678root@b792ae940e3e:/app# python3Python 3.5.2 (default, Nov 23 2017, 16:37:01) [GCC 5.4.0 20160609] on linuxType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.&gt;&gt;&gt; from tasks import add&gt;&gt;&gt; add.delay(3,4)&lt;AsyncResult: e1ae8ea3-8a8f-47c5-befb-e6ba975f0580&gt;&gt;&gt;&gt; æ‰§è¡Œç»“æœï¼š åŒæ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ RabbitMQ web ç®¡ç†é¡µé¢çœ‹åˆ°æ–°å¢äº†ä¸€ä¸ªä»»åŠ¡å¹¶å­˜å‚¨äº†å¤„ç†ç»“æœï¼š ä¸ºäº†å¾—åˆ°è°ƒç”¨ä»»åŠ¡åè¿”å›çš„ AsyncResult å®ä¾‹ï¼Œé€šè¿‡ä¸€ä¸ªå‚æ•°æ¥æ¥æ”¶ï¼š 1&gt;&gt;&gt; result=add.delay(3,4) ready() æ–¹æ³•æŸ¥çœ‹ä»»åŠ¡æ˜¯å¦å®Œæˆå¤„ç†: 12&gt;&gt;&gt; result.ready()True #ç»“æœè¿”å› `True` è¡¨ç¤ºä»»åŠ¡å¤„ç†å®Œæˆ è¿™é‡Œæ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è¿”å›çš„ç»“æœï¼Œé‚£ä¹ˆè¦ç­‰ ready çŠ¶æ€ä¸º True æ‰è¡Œã€‚ æ‰§è¡Œç»“æœï¼š 12345[2017-12-09 13:50:07,228: INFO/MainProcess] celery@b792ae940e3e ready.[2017-12-09 14:00:33,132: INFO/MainProcess] Received task: tasks.add[e1ae8ea3-8a8f-47c5-befb-e6ba975f0580] [2017-12-09 14:00:33,163: INFO/ForkPoolWorker-1] Task tasks.add[e1ae8ea3-8a8f-47c5-befb-e6ba975f0580] succeeded in 0.02956800399988424s: 7[2017-12-09 14:17:21,033: INFO/MainProcess] Received task: tasks.add[c178619e-3af3-41ed-8d2c-6371de80a601] [2017-12-09 14:17:21,058: INFO/ForkPoolWorker-1] Task tasks.add[c178619e-3af3-41ed-8d2c-6371de80a601] succeeded in 0.024445844999718247s: 7 ç›¸å…³å‚è€ƒ Celery åˆæ­¥]]></content>
      <categories>
        <category>Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Celery</tag>
        <tag>Docker</tag>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(ä¸€)-ç†è®º]]></title>
    <url>%2F2017%2F12%2F10%2Fcelery-distributed-task-queue-introduction-first%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰æ›¾åœ¨å…¬å¸çš„ä¸€ä¸ªåˆ†å¸ƒå¼çˆ¬è™«é¡¹ç›®ä¸­ä½¿ç”¨ Celery å’Œ RabbitMQ å®ç°è¿‡åˆ†å¸ƒå¼çˆ¬è™«çš„åŠŸèƒ½ã€‚æœ€è¿‘åœ¨æ•´ç†ä¹‹å‰çš„å¼€å‘ç¬”è®°æ—¶ï¼Œçœ‹åˆ°ä¹‹å‰å†™çš„å…³äº Celery çš„æ–‡ç« ï¼Œå†³å®šè¶ç€æœ‰æ—¶é—´å†æŠŠå…³äºCeleryç›¸å…³çš„å†…å®¹å¥½å¥½çš„æ•´ç†ä¸€ç•ªï¼Œæ²¡æƒ³åˆ°è¶Šå†™è¶Šæƒ³æŠŠç›¸å…³çš„ç‚¹éƒ½ç†æ¸…æ¥šï¼Œä¹Ÿå°±æœ‰äº†è¿™ä¸ªCeleryç³»åˆ—æ–‡ç« ã€‚ Celery æ˜¯ä¸€ä¸ªç®€å•ã€çµæ´»ä¸”å¯é çš„ï¼Œå¤„ç†å¤§é‡æ¶ˆæ¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¹¶ä¸”æä¾›ç»´æŠ¤è¿™æ ·ä¸€ä¸ªç³»ç»Ÿçš„å¿…éœ€å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸“æ³¨äºå®æ—¶å¤„ç†çš„ä»»åŠ¡é˜Ÿåˆ—ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä»»åŠ¡è°ƒåº¦ã€‚ ä¸»è¦æ¨¡å— ä»»åŠ¡æ¨¡å— TaskåŒ…å«å¼‚æ­¥ä»»åŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚å…¶ä¸­ï¼Œå¼‚æ­¥ä»»åŠ¡é€šå¸¸åœ¨ä¸šåŠ¡é€»è¾‘ä¸­è¢«è§¦å‘å¹¶å‘å¾€ä»»åŠ¡é˜Ÿåˆ—ï¼Œè€Œå®šæ—¶ä»»åŠ¡ç”± Celery Beat è¿›ç¨‹å‘¨æœŸæ€§åœ°å°†ä»»åŠ¡å‘å¾€ä»»åŠ¡é˜Ÿåˆ—ã€‚ æ¶ˆæ¯ä¸­é—´ä»¶ Brokerä¸€ä¸ªæ¶ˆæ¯ä¼ è¾“çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé‚®ç®±ï¼Œä½œä¸ºæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹é—´çš„æ¡¥æ¢ã€‚æ¥æ”¶ä»»åŠ¡ç”Ÿäº§è€…å‘æ¥çš„æ¶ˆæ¯ï¼ˆå³ä»»åŠ¡ï¼‰ï¼Œå°†ä»»åŠ¡å­˜å…¥é˜Ÿåˆ—ã€‚Celery æœ¬èº«ä¸æä¾›é˜Ÿåˆ—æœåŠ¡ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ RabbitMQ å’Œ Redis ç­‰ã€‚ ä»»åŠ¡æ‰§è¡Œå•å…ƒ WorkerWorker æ˜¯æ‰§è¡Œä»»åŠ¡çš„å¤„ç†å•å…ƒï¼Œå®ƒå®æ—¶ç›‘æ§æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè·å–é˜Ÿåˆ—ä¸­è°ƒåº¦çš„ä»»åŠ¡ï¼Œå¹¶æ‰§è¡Œå®ƒã€‚ ä»»åŠ¡ç»“æœå­˜å‚¨ BackendBackend ç”¨äºå­˜å‚¨ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œä»¥ä¾›æŸ¥è¯¢ã€‚åŒæ¶ˆæ¯ä¸­é—´ä»¶ä¸€æ ·ï¼Œå­˜å‚¨ä¹Ÿå¯ä½¿ç”¨ RabbitMQ, Redis å’Œ MongoDB ç­‰ã€‚ ç³»åˆ—æ–‡ç« ç›®å½• Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(ä¸€)-ç†è®º Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(äºŒ)-ç¯å¢ƒé…ç½® Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨(ä¸‰)-ä»»åŠ¡ æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚]]></content>
      <categories>
        <category>Celeryåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢åŠŸèƒ½ä¼˜åŒ–]]></title>
    <url>%2F2017%2F12%2F06%2Fhexo-blog-optimization%2F</url>
    <content type="text"><![CDATA[ä»‹ç»Hexoåšå®¢åŠŸèƒ½ä¼˜åŒ–é¡¹ï¼Œå¦‚ æ–‡ç« ç½®é¡¶ã€æ˜¾ç¤ºç‰ˆæƒã€è®¿é—®ç»Ÿè®¡ã€å­—æ•°ç»Ÿè®¡ã€æ˜¾ç¤ºæ›´æ–°æ—¶é—´ç­‰ æ–‡ç« ç½®é¡¶åœ¨Hexoåšå®¢ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦å°†ä¸€äº›ç‰¹åˆ«çš„æ–‡ç« ä¸€ç›´ç½®é¡¶åœ¨é¦–é¡µã€‚Hexoåšå®¢ä¸­ï¼Œé»˜è®¤çš„æƒ…å†µæ˜¯æŒ‰ç…§æ—¶é—´å€’åºæ¥æ’åˆ—çš„ï¼Œå³æ–°å‘å¸ƒçš„æ–‡ç« æ’åœ¨å‰é¢ã€‚è™½ç„¶æœ‰ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯æ›´æ”¹æ–‡ç« çš„å‘å¸ƒæ—¶é—´åˆ°ä¸€ä¸ªâ€œæœªæ¥â€çš„æ—¶é—´ç‚¹ï¼Œè¿™æ ·è™½ç„¶èƒ½è®©æ–‡ç« ä¸€ç›´ç½®é¡¶ï¼Œä½†æ˜¯ç»™äººçš„ä½“éªŒå’Œæ„Ÿè§‰æ˜¯éå¸¸ä¸å¥½çš„ã€‚ ä»Šå¤©ä»‹ç»ä¸€ç§éå¸¸ç®€å•è€Œä¸”ä½“éªŒä¸Šä¹Ÿéå¸¸å¥½çš„æ–¹æ³•ã€‚ å®‰è£…nodeæ’ä»¶12$ npm uninstall hexo-generator-index --save$ npm install hexo-generator-index-pin-top --save æ·»åŠ æ ‡è®°åœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„ Front-matter ä¸­åŠ ä¸Š top: true å³å¯ã€‚ æ¯”å¦‚ï¼š 12345678910---title: ä»0åˆ°1å­¦Golangä¹‹åŸºç¡€--Go æ•°ç»„date: 2017-05-24 22:07:58tags: - Golangcategories: - ä»0åˆ°1å­¦Golangdescription: Golangä¸‹çš„æ•°ç»„æ“ä½œtop: true--- okï¼Œç°åœ¨å‘å¸ƒæ–‡ç« ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„æ–‡ç« å·²ç»ç½®é¡¶æ˜¾ç¤ºäº†ï¼Œå³ä½¿æ˜¯ä¹‹å‰å‘å¸ƒçš„æ–‡ç« ï¼ŒåŒæ—¶æ—¥æœŸä¹Ÿä¸ä¼šè¢«æ›´æ”¹ã€‚ ç›¸å…³å‚è€ƒ è§£å†³Hexoç½®é¡¶é—®é¢˜ hexo-generator-index-pin-top ä½¿ç”¨HexoåŸºäºGitHub Pagesæ­å»ºä¸ªäººåšå®¢ï¼ˆä¸‰ï¼‰ å¦‚ä½•ç½®é¡¶postï¼Ÿ æ˜¾ç¤ºç‰ˆæƒä¿¡æ¯ä¸€èˆ¬åœ¨ç½‘ç»œä¸Šå‘è¡¨æ–‡ç« æ—¶ï¼Œéƒ½è¦æ—¶åˆ»æé˜²ç€ç½‘ç»œçˆ¬è™«çš„æŠ“å–ã€‚ç‰¹åˆ«æ˜¯æœ‰äº›ç½‘ç«™åœ¨æŠ“å–åˆ°ä½ çš„æ–‡ç« åè¿›è¡Œä¸€äº›è¯è¯­ã€æ®µè½çš„ä¿®æ”¹ï¼Œå…¬ç„¶æ”¹ä¸ºè‡ªå·±å‘è¡¨çš„æ–‡ç« ã€‚å®Œå…¨æ— è§†åŸä½œè€…çš„è¾›è‹¦ã€‚ ä¸ºäº†æ›´å¥½çš„æ ‡æ˜æ–‡ç« çš„ç‰ˆæƒï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šåœ¨æ–‡ç« ä¸­æ·»åŠ ä¸Šæ–‡ç« çš„é“¾æ¥ã€ç‰ˆæƒå£°æ˜ç­‰ä¿¡æ¯ï¼Œè™½ç„¶ä¸èƒ½å®Œå…¨å½»åº•çš„æŠµåˆ¶æ–‡ç« æŠ„è¢­çš„æƒ…å†µï¼Œä¹Ÿç®—æ˜¯â€œé˜²å›å­ä¸é˜²å°äººâ€å§ã€‚ å¯ç”¨ç‰ˆæƒæˆ‘ä½¿ç”¨çš„æ˜¯ Hexo çš„ Next ä¸»é¢˜ã€‚æ‰¾åˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ï¼Œæ›´æ”¹ä»¥ä¸‹éƒ¨åˆ†ï¼š 12345# Declare license on postspost_copyright: enable: false license: CC BY-NC-SA 3.0 license_url: https://creativecommons.org/licenses/by-nc-sa/3.0/ å°†å…¶ä¸­çš„ enable: false æ”¹ä¸º enable: true å³å¯ã€‚ ä½†æ˜¯æ”¹å®Œåï¼Œä½¿ç”¨ hexo s -g é¢„è§ˆï¼Œå‘ç° â€œæœ¬æ–‡é“¾æ¥â€ éƒ¨åˆ†æœ‰é—®é¢˜ã€‚ è¿™å°±éœ€è¦æˆ‘ä»¬ä¿®æ”¹ä¸»ç«™ç‚¹çš„é…ç½®æ–‡ä»¶äº†ã€‚æ‰“å¼€ä¸»ç«™ç‚¹çš„ _config.yml æ–‡ä»¶ï¼Œä¿®æ”¹ï¼š å°† url éƒ¨åˆ†æ”¹æˆè‡ªå·±ç«™ç‚¹çš„åŸŸååœ°å€å³å¯ã€‚ ç›¸å…³å‚è€ƒ HexoæŒç»­ä¼˜åŒ–-åœ¨æ–‡ç« å°¾éƒ¨æ·»åŠ ç‰ˆæƒå£°æ˜ä¿¡æ¯ è®¿é—®ç»Ÿè®¡åŠŸèƒ½åœ¨åšå®¢ä¸­æˆ‘ä»¬ä¸€èˆ¬éƒ½æ¯”è¾ƒåœ¨æ„è‡ªå·±åšå®¢çš„è®¿é—®é‡ï¼Œæˆ–è€…å“ªç¯‡æ–‡ç« æ¯”è¾ƒå—æ¬¢è¿ä¹‹ç±»çš„ã€‚ åœ¨Hexoçš„ Next ä¸»é¢˜ä¸‹å¸¦æœ‰å¤šç§ç»Ÿè®¡å’Œåˆ†æçš„åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘é€‰æ‹© ä¸è’œå­ç»Ÿè®¡æ¥æ˜¾ç¤ºæ–‡ç« çš„è®¿å®¢æ•°ã€æµè§ˆé‡ç­‰ä¿¡æ¯ã€‚ å¯ç”¨ç»Ÿè®¡æ‰¾åˆ° Next ä¸»é¢˜ä¸‹çš„é…ç½®æ–‡ä»¶ _config.yml ï¼Œæ‰¾åˆ° busuanzi_count éƒ¨åˆ†ï¼š 1234567891011121314151617# Show PV/UV of the website/page with busuanzi.# Get more information on http://ibruce.info/2015/04/04/busuanzi/busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site site_uv: true site_uv_header: è®¿å®¢æ•° &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; site_uv_footer: äººæ¬¡ # custom pv span for the whole site site_pv: true site_pv_header: è®¿é—®é‡ &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; site_pv_footer: æ¬¡ # custom pv span for one page only page_pv: true page_pv_header: é˜…è¯»é‡ &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; page_pv_footer: æ¬¡ å½“ enable: true æ—¶ï¼Œä»£è¡¨å¼€å¯å…¨å±€å¼€å…³ã€‚ å½“ site_uv: true æ—¶ï¼Œä»£è¡¨åœ¨é¡µé¢åº•éƒ¨æ˜¾ç¤ºç«™ç‚¹çš„UVå€¼ã€‚å½“ site_pv: true æ—¶ï¼Œä»£è¡¨åœ¨é¡µé¢åº•éƒ¨æ˜¾ç¤ºç«™ç‚¹çš„PVå€¼ã€‚å½“ page_pv: true æ—¶ï¼Œä»£è¡¨åœ¨æ–‡ç« é¡µé¢çš„æ ‡é¢˜ä¸‹æ˜¾ç¤ºè¯¥é¡µé¢çš„PVå€¼ï¼ˆé˜…è¯»æ•°ï¼‰ã€‚ ç›¸å…³å‚è€ƒ ä¸è’œå­ç»Ÿè®¡ æ˜¾ç¤ºæ–‡ç« æ›´æ–°æ—¶é—´åœ¨æ–‡ç« åˆ—è¡¨ä¸­æˆ‘ä»¬ä¸€èˆ¬éƒ½èƒ½çœ‹çš„æ–‡ç« çš„å‘å¸ƒæ—¶é—´ã€‚å¯¹äºä¸€äº›æ–‡ç« æ¥è¯´ï¼Œæ¯”å¦‚æ¶‰åŠåˆ°æ–‡ç« ä¸­çš„å†…å®¹è¿‡æœŸï¼Œæˆ–è€…è½¯ä»¶çš„å‡çº§ç­‰ç­‰ï¼Œæˆ‘ä»¬éƒ½ä¼šè¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±åƒæŠŠæ–‡ç« çš„æ›´æ–°æ—¥æœŸä¹Ÿæ˜¾ç¤ºå¤„ç†ï¼Œä¹Ÿèƒ½è®©è¯»è€…çœ‹çš„æˆ‘ä»¬å†™çš„ä¹‹å‰çš„æ–‡ç« ä¹Ÿæ˜¯æœ‰æ›´æ–°çš„ï¼Œä¸ä¼šè¿‡æ—¶çš„ã€‚ æ˜¾ç¤ºæ›´æ–°æ—¥æœŸåœ¨ Next ä¸»é¢˜ä¸‹æ·»åŠ æ˜¾ç¤ºæ›´æ–°æ—¶é—´éå¸¸ç®€å•ï¼Œæ‰¾åˆ°ä¸»é¢˜ä¸‹çš„é…ç½®æ–‡ä»¶ _config.yml çš„ post_meta éƒ¨åˆ†ï¼š 123456# Post meta display settingspost_meta: item_text: true created_at: true updated_at: false categories: true å°† updated_at: false ä¿®æ”¹ä¸º updated_at: true å³å¯ã€‚ é€šè¿‡ hexo s -g é¢„è§ˆï¼Œå¯ä»¥çœ‹åˆ°å·²ç»è‡ªåŠ¨æ·»åŠ ä¸Šäº†æ›´æ–°æ—¥æœŸã€‚ è‡ªå®šä¹‰æ˜¾ç¤ºæ›´æ–°æ—¥æœŸå¯¹äºæŸäº›ç‰¹æ®Šçš„æ–‡ç« ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³èƒ½å¤Ÿè‡ªå®šä¹‰è¿™ä¸ªæ›´æ–°çš„æ—¥æœŸã€‚å½“ç„¶ï¼Œæ›´æ”¹èµ·æ¥ä¹Ÿéå¸¸çš„ç®€å•ï¼ŒHexoé»˜è®¤å°±æ”¯æŒæ›´æ–°æ—¥æœŸçš„é…ç½®ã€‚ åœ¨æ¯ä¸€ç¯‡æ–‡ç« çš„ Front-matter éƒ¨åˆ†ï¼Œåªè¦æ·»åŠ  updated å‚æ•°å³å¯ã€‚ 12345678910---title: ä»0åˆ°1å­¦Golangä¹‹åŸºç¡€--Go æ•°ç»„date: 2017-05-24 22:07:58updated: 2017-12-01 10:35:18tags: - Golangcategories: - ä»0åˆ°1å­¦Golangdescription: Golangä¸‹çš„æ•°ç»„æ“ä½œ--- è¿™æ ·æˆ‘ä»¬å°±è‡ªå®šä¹‰äº†è¿™ç¯‡æ–‡ç« çš„æ›´æ–°æ—¶é—´ã€‚ ç›¸å…³å‚è€ƒ Front-matter æ·»åŠ æ–‡ç« å­—æ•°ç»Ÿè®¡ä¸€èˆ¬ä¸ºäº†è®©è¯»è€…å¤§æ¦‚ä¼°è®¡é˜…è¯»æ–‡ç« çš„æ—¶é—´ï¼Œæœ‰çš„æ–‡ç« åœ¨å¤´éƒ¨ä¼šæ˜¾ç¤ºæ€»çš„å­—æ•°ç»Ÿè®¡ã€‚ å¯ç”¨å­—æ•°ç»Ÿè®¡é¦–å…ˆå®‰è£…ä¸€ä¸ªä¾èµ–æ’ä»¶ï¼š 1npm i --save hexo-wordcount ç„¶åä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.yml ä¸­çš„ post_wordcount éƒ¨åˆ†ï¼š 12345678# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount: item_text: true //åº•éƒ¨æ˜¯å¦æ˜¾ç¤ºâ€œæ€»å­—æ•°â€å­—æ · wordcount: false //æ–‡ç« å­—æ•°ç»Ÿè®¡ min2read: false //æ–‡ç« é¢„è®¡é˜…è¯»æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ totalcount: false //ç½‘ç«™æ€»å­—æ•°ï¼Œä½äºåº•éƒ¨ separated_meta: true //æ˜¯å¦å°†æ–‡ç« çš„å­—æ•°ç»Ÿè®¡ä¿¡æ¯æ¢è¡Œæ˜¾ç¤º å°† wordcount: false æ”¹ä¸º wordcount: true å³å¯æ˜¾ç¤ºå•ç¯‡æ–‡ç« çš„æ€»å­—æ•°äº†ã€‚å¦å¤–ï¼Œtotalcount æ˜¯ç”¨æ¥ç»Ÿè®¡æ•´ç«™æ€»çš„å­—æ•°çš„ã€‚ ç›¸å…³å‚è€ƒ hexo-wordcount ç•…ç©Hexoâ€”â€”2ï¼šéªšèµ·æ¥å§ï¼ŒNexT]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç™¾åº¦äººå·¥æ™ºèƒ½å¼€æ”¾å¹³å°DuerOSåˆä½“éªŒ]]></title>
    <url>%2F2017%2F12%2F05%2Fthe-initial-experience-of-dueros-open-platform%2F</url>
    <content type="text"><![CDATA[ä»Šå¹´11æœˆåˆçš„æ—¶å€™åœ¨ç™¾åº¦DuerOSå¼€æ”¾å¹³å°ä¸Šç”³è¯·äº†DuerOSçš„â€œå¼€å‘å¥—ä»¶ä¸ªäººç‰ˆâ€çš„å¼€å‘æ¿ï¼Œå‰å‡ å¤©æ­£å¼æ”¶åˆ°äº†è¯¥å¼€å‘æ¿ï¼Œç»è¿‡å‡ å¤©çš„æ‘¸ç´¢ï¼Œå‘ç°DuerOSå¼€æ”¾å¹³å°è¿˜æ˜¯æœ‰å¾ˆå¤šå¯æŒ–æ˜çš„åŠŸèƒ½çš„ã€‚åœ¨æ­¤å°†è¿™å‡ å¤©çš„ç ”ç©¶æˆæœè®°å½•ä¸€ä¸‹ã€‚ åŒåä¸€çš„æ—¶å€™åœ¨å¤©çŒ«ä¸Šä¹°äº†ä¸€ä¸ªé˜¿é‡Œçš„å¤©çŒ«ç²¾çµï¼Œé€šè¿‡å¯¹æ¯”å°ç±³çš„å°çˆ±åŒå­¦ï¼Œé˜¿é‡Œçš„å¤©çŒ«ç²¾çµï¼Œå’Œç™¾åº¦çš„DuerOSå¼€å‘æ¿æ¯”èµ·æ¥ï¼Œä¸ªäººæ„Ÿè§‰DuerOSå¼€å‘æ¿è¦æ›´è´´è¿‘äºå¼€å‘è€…ï¼Œå¯ä»¥è®©å¼€å‘è€…è‡ªå·±åŠ¨æ‰‹å»å®ç°æƒ³è¦çš„æ™ºèƒ½åŒ–çš„åŠŸèƒ½ã€‚ DuerOSå”¤é†’ç™¾åº¦çš„DuerOSå¼€å‘å¥—ä»¶ä¸ªäººç‰ˆéœ€è¦ç”¨æˆ·è‡ªå¤‡ä¸€ä¸ªæ ‘è“æ´¾3Bæ¥ç»“åˆä½¿ç”¨ã€‚å¼€å‘æ¿ä¸Šå¸¦æœ‰2é¢—é«˜çµæ•åº¦MEMSéº¦å…‹é£ï¼Œæ­è½½ç™¾åº¦DuerOS SDKï¼Œå¯ä¸ºç”¨æˆ·æä¾›ç™¾åº¦æµ·é‡çš„ä¿¡æ¯æœåŠ¡èƒ½åŠ›ã€‚ æŒ‰ç…§å®˜æ–¹ç»™çš„ç¡¬ä»¶å®‰è£…æ–‡æ¡£å’Œæä¾›çš„é•œåƒç³»ç»Ÿå°†è®¾å¤‡ç»„åˆæˆåŠŸï¼Œæ’å…¥åˆ·å¥½ç³»ç»Ÿçš„å†…å­˜å¡ï¼Œé€šç”µç­‰å¾…ç³»ç»Ÿå¼€æœºã€‚åœ¨åˆæ¬¡è¿æ¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç™¾åº¦æä¾›çš„ â€œå°åº¦ä¹‹å®¶appâ€ å°†ç³»ç»Ÿæ¥å…¥ç½‘ç»œã€‚ å°åº¦è”ç½‘æˆåŠŸåï¼Œç›´æ¥è¯´ â€œå°åº¦å°åº¦+å†…å®¹â€ å³å¯å®ç°è¯­éŸ³å¼çš„å¯¹è¯äº¤äº’æ“ä½œã€‚ æ€»ä½“æ¥è¯´ï¼Œå”¤é†’å°åº¦çš„è¿™ä¸€æ­¥éå¸¸çš„ç®€å•ï¼Œé™„ä¸Šä¸€å¼ è®¾å¤‡çš„åˆå½±ã€‚ æ¥å…¥Python SDKDuerOSå¼€å‘å¹³å°ä¸­ä¹Ÿæä¾›äº†ç›¸åº”çš„Python SDKï¼Œä»¥ä¾¿äºä¸ªäººå¼€å‘è€…é€šè¿‡è¯¥SDKæ¥å®ç°æƒ³è¦çš„æŠ€èƒ½ã€‚ é€šè¿‡SSHç™»é™†å®˜æ–¹æä¾›çš„DuerOSé•œåƒç³»ç»Ÿæ˜¯åŸºäºRaspbianç³»ç»Ÿçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‰ç…§åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…Raspbianç³»ç»Ÿçš„æ–¹å¼æ¥é…ç½®SSHæœåŠ¡ã€‚ ä¸ºäº†æ‰¾åˆ°æ ‘è“æ´¾çš„IPåœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Fing è¿™ä¸ªappæ¥æŸ¥çœ‹å½“å‰å±€åŸŸç½‘ä¸Šè¿æ¥çš„æ‰€æœ‰è®¾å¤‡ã€‚ ç„¶åé€šè¿‡SSHä½¿ç”¨é»˜è®¤çš„ç”¨æˆ·å pi å¯†ç  raspberry ç™»é™†DuerOSç³»ç»Ÿã€‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ Xshellï¼Œä¹Ÿå¯ä»¥é€‰æ‹© Putty ç­‰å…¶ä»–è½¯ä»¶ã€‚ åœ¨å½“å‰çš„ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨äºåé¢çš„æ“ä½œã€‚æ¯”å¦‚æˆ‘è¿™é‡Œåˆ›å»ºçš„ç›®å½•åä¸º Leafneyï¼š 12$ mkdir Leafney$ cd Leafney åœæ­¢ç°æœ‰å°åº¦åŠŸèƒ½ï¼Œå› ä¸ºä¼šå ç”¨MICèµ„æº12$ sudo systemctl disable duer$ sudo systemctl stop duer å®‰è£…éœ€è¦çš„ä¾èµ–æ›´æ¢åœ°å€æºåœ¨æ“ä½œä¹‹å‰ï¼Œå»ºè®®å…ˆæ›´æ¢åœ°å€æºã€‚å› ä¸ºDuerOSç³»ç»Ÿæ˜¯åŸºäº Raspbian jessie ç‰ˆæœ¬çš„ï¼Œæ“ä½œå¦‚ä¸‹ï¼š 1$ sudo vim /etc/apt/sources.list æŠŠåŸæ¥çš„ç¬¬ä¸€è¡Œç”¨#æ³¨é‡Šæ‰ï¼Œåœ¨æœ«å°¾æ·»åŠ ä¸‹é¢ä¸€è¡Œï¼š 1deb http://mirrors.aliyun.com/raspbian/raspbian/ jessie main contrib non-free rpi è¿˜éœ€è¦æ›´æ”¹debçš„æºåœ°å€ï¼Œè¿™é‡Œå¯é€‰æ‹©æ¸…åçš„æº: 1deb https://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ jessie main ui æˆ–ä¸­ç§‘å¤§çš„æºï¼š 1deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ jessie main ui ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶æ·»åŠ :1$ sudo vim /etc/apt/sources.list.d/raspi.list updateæ›´æ–°ä¿®æ”¹å®Œæˆåï¼Œæ›´æ–°ï¼š 1$ sudo apt-get update å…¶ä»–ä¾èµ–åŒ…å®‰è£…å…¶ä»–çš„ä¾èµ–åŒ…ï¼š hyperåº“ç”¨æ¥æ”¯æŒhttp2.0 client, pyaudioç”¨æ¥æ”¯æŒå½•éŸ³ï¼Œtornadoç”¨æ¥å®Œæˆoauthè®¤è¯ã€‚ 12$ sudo apt-get install python-dateutil gir1.2-gstreamer-1.0 python-pyaudio libatlas-base-dev python-dev$ sudo pip install tornado hyper ä¸‹è½½ç¼–è¯‘å¥½çš„opensslå’ŒPythonå®‰è£…åŒ…ç”±äºDuerOSè¿è¡Œæ‰€éœ€è¦çš„ä¾èµ–ç¯å¢ƒè·Ÿå¹³å°æ˜¯ç›¸å…³çš„ã€‚æ¯”å¦‚DuerOSæ˜¯åŸºäºHttp2 ALPNçš„ï¼Œä½†æ ‘è“æ´¾å®˜æ–¹é•œåƒçš„OpenSSLå¹¶ä¸æ”¯æŒï¼Œè€Œå¯¹åº”çš„Pythonåº“ä¾èµ–äºOpenSSLã€‚ä¸ºäº†åœ¨æ ‘è“æ´¾å¹³å°ä¸Šæ”¯æŒPythonçš„DuerOS SDKï¼Œä¸“é—¨äº¤å‰ç¼–è¯‘äº†OpenSSLå’ŒPythonã€‚ ä»å¦‚ä¸‹åœ°å€ä¸‹è½½opensslå®‰è£…åŒ…(é“¾æ¥: https://pan.baidu.com/s/1skAP6WH å¯†ç : wknz)ä»å¦‚ä¸‹åœ°å€ä¸‹è½½python2.7.14å®‰è£…åŒ…(é“¾æ¥: https://pan.baidu.com/s/1o8MHkzK å¯†ç : ngx4) å°†ä¸‹è½½çš„ä¸¤ä¸ªæ–‡ä»¶ç”¨ FileZilla ä¼ è¾“åˆ°æ ‘è“æ´¾çš„ /home/pi/Leafney ç›®å½•ä¸‹ï¼š ç„¶ååˆ†åˆ«è§£å‹ï¼š 1$ sudo tar -zxvf openssl1.1.tar.gz -C /usr 1$ sudo tar -zxvf python2.7.14.tar.gz -C /usr/local/ æ›¿æ¢å·²æœ‰çš„pythonï¼š 12$ sudo rm -rf /usr/bin/python$ sudo ln -s /usr/local/python2.7.14/bin/python /usr/bin/python ä¸‹è½½Python SDKå’Œç¤ºä¾‹ä»£ç 123$ git clone https://github.com/MyDuerOS/DuerOS-Python-Client.git$ cd DuerOS-Python-Client$ git checkout raspberry-dev åˆæ¬¡æˆæƒå¦‚æœç›´æ¥æŒ‰ç…§å®˜æ–¹ç»™å‡ºçš„æ•™ç¨‹é…ç½® Step by Stepå¸¦ä½ ç©è½¬DuerOS - Python DuerOS SDK[æ ‘è“æ´¾å¹³å°] (3)ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æˆæƒæ“ä½œäº†ã€‚ 1$ ./auth.sh æ‰§è¡Œååœ¨ Xshell ä¸­æœ‰æç¤º A web page should is opened. If not, go to http://127.0.0.1:3000 to start ã€‚ å› ä¸ºè¿™é‡Œæ˜¯è¦æ±‚è®¿é—® 127.0.0.1 ï¼Œæ‰€ä»¥å¿…é¡»åœ¨æ ‘è“æ´¾ç³»ç»Ÿä¸­é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®ã€‚æˆ‘åœ¨Windowsç³»ç»Ÿä¸‹é€šè¿‡ æ ‘è“æ´¾IP+ç«¯å£3000 çš„æ–¹å¼è®¿é—®ï¼Œä¼šæç¤º â€œæˆæƒå›è°ƒé¡µåœ°å€é”™è¯¯â€ çš„é”™è¯¯é¡µé¢ã€‚ æˆ‘å¹¶æ²¡æœ‰å¤šä½™çš„HDMIæ•°æ®çº¿æ¥ç›´æ¥è¿æ¥æ ‘è“æ´¾å’Œæ˜¾ç¤ºå™¨ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ç”¨è¿œç¨‹æ¡Œé¢çš„æ–¹å¼æ¥é…ç½®ã€‚ å®‰è£…è¿œç¨‹æ¡Œé¢æ ‘è“æ´¾ä¸‹çš„è¿œç¨‹æ¡Œé¢æˆ‘ä»¬é€‰æ‹© xrdp æˆ–è€… VNC æ¥å®ç°ã€‚ xrdpxrdp å¯ä»¥ä½¿ç”¨ windowsä¸‹çš„è¿œç¨‹æ¡Œé¢ç›´æ¥è¿æ¥ï¼Œä¸è¿‡è¿™ç§æ–¹å¼åªé€‚åˆäºWindowsç³»ç»Ÿä¸‹è¿æ¥ã€‚ åœ¨æ ‘è“æ´¾ä¸‹æ‰§è¡Œå®‰è£…ï¼š 1$ sudo apt-get install xrdp æ‰“å¼€windowsç³»ç»Ÿçš„ â€œè¿œç¨‹æ¡Œé¢è¿æ¥â€ ç¨‹åºï¼Œè¾“å…¥æ ‘è“æ´¾çš„IPåœ°å€è¿›è¡Œè¿æ¥ã€‚ åœ¨å¼¹å‡ºçš„ Login to xrdp çª—å£ä¸­ï¼Œè¾“å…¥æ ‘è“æ´¾çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡» OK è¿æ¥ã€‚ VNCå¦‚æœä½ æ˜¯MACç³»ç»Ÿæˆ–è€…ä¸å–œæ¬¢Windowsè‡ªå¸¦çš„è¿œç¨‹æ¡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨é€‚åˆäºå…¨å¹³å°çš„ VNC ã€‚ VNCåˆå§‹åŒ–åœ¨æ ‘è“æ´¾ä¸‹æ‰§è¡Œå®‰è£…ï¼š 1$ sudo apt-get install tightvncserver å¢åŠ ä¸€ä¸ªæ¡Œé¢ï¼Œæ‰§è¡Œï¼š 1$ tightvncserver ä¼šè¦æ±‚è®¾ç½®ä¸€ä¸ªè¿æ¥çš„å¯†ç å¹¶é‡å¤è¾“å…¥ã€‚ ä¼šè¯¢é—®æ˜¯å¦è®¾ç½®ä¸€ä¸ªåªè¯»æ–¹å¼çš„å¯†ç ï¼Œä¸€èˆ¬é€‰æ‹©å¦ n ã€‚ è¿æ¥ä»ç½‘ç«™ vncViewer ä¸‹è½½vncViewerã€‚æ‰“å¼€ç¨‹åºåè¿æ¥ï¼š 1234your Pi IP:1# æ¯”å¦‚æˆ‘çš„è®¾ç½®ï¼š192.168.5.130:1 å…³é—­æ¡Œé¢å…³é—­VNCæ¡Œé¢åªéœ€è¦åœ¨æ ‘è“æ´¾ä¸­å°†VNCçš„æœåŠ¡killæ‰å³å¯ã€‚åœ¨ Xshell ä¸­æ“ä½œï¼š 1$ vncserver -kill :1 å†æ¬¡æˆæƒå†æ¬¡è¿›å…¥æ ‘è“æ´¾çš„ /home/pi/Leafney/DuerOS-Python-Client ç›®å½•ï¼Œå¯åŠ¨æˆæƒï¼š 123$ cd /home/pi/Leafney/DuerOS-Python-Client$ ./auth.sh é€šè¿‡è¿œç¨‹æ¡Œé¢è®¿é—®ï¼Œåœ¨æ ‘è“æ´¾çš„æ¡Œé¢ç³»ç»Ÿä¸‹æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® 127.0.0.1:3000 åœ°å€ï¼Œä¼šå‡ºç° â€œç™¾åº¦è´¦å·çš„ç™»é™†æˆæƒé¡µé¢â€ ã€‚ ä¸è¿‡è¿™ä¸ªæ˜¯å®˜æ–¹çš„æµ‹è¯•è´¦å· GitHubé¡¹ç›®æµ‹è¯•è´¦å·ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦é…ç½®è‡ªå·±çš„è®¾å¤‡ï¼Œè¿˜æ˜¯éœ€è¦å»ç”³è¯·è‡ªå·±çš„client_idå’Œclient_secretæ¥è°ƒç”¨ã€‚ è¿™é‡Œæˆ‘ä¸åœ¨ç»§ç»­å¾€ä¸‹æ“ä½œï¼Œå…ˆå»ç”³è¯·è‡ªå·±çš„ClientIDä¿¡æ¯ã€‚ åœ¨ Xshell ä¸­æŒ‰ Ctrl+C åœæ­¢å¯åŠ¨çš„webæœåŠ¡ã€‚ åˆ›å»ºè®¾å¤‡æ‰“å¼€ DuerOSå¼€æ”¾å¹³å°å®˜ç½‘ DuerOSå¼€æ”¾å¹³å° ï¼Œé€‰æ‹©å³ä¸Šè§’ â€œæ§åˆ¶å°â€ â€“ â€œè®¾å¤‡æ§åˆ¶å°â€ â€“ åœ¨æ‰“å¼€çš„æ–°é¡µé¢é€‰æ‹© â€œé…ç½®æ–°è®¾å¤‡â€ ã€‚ ç„¶ååœ¨ è¯·é€‰æ‹©ç»ˆç«¯åœºæ™¯ ä¸­é€‰æ‹© â€œéŸ³ç®±â€ ç‚¹å‡» â€œä¸‹ä¸€æ­¥â€ ã€‚ åœ¨ è¯·é€‰æ‹©æ“ä½œç³»ç»Ÿ ç•Œé¢é€‰æ‹©ç¬¬ä¸€é¡¹ â€œLinuxâ€ æˆ–è€…ä¹Ÿå¯ä»¥é€‰æ‹©æœ€ä¸‹é¢çš„ â€œç‚¹å‡»è¿™é‡Œâ€ ï¼Œæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚ è¾“å…¥ â€œäº§å“åç§°â€ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘å–åå« è´¾ç»´æ–¯ ï¼ˆç”µå½±é’¢é“ä¾ é‡Œçš„äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼‰ï¼Œç‚¹å‡» â€œç”³è¯·ClientIDâ€ ï¼Œä¸‹é¢ä¼šæ˜¾ç¤ºå‡ºç›¸åº”çš„ client_id å’Œ client_secretç­‰ä¿¡æ¯ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å…ˆå°†è¿™ä¸¤é¡¹è®°ä¸‹æ¥ä»¥å¾…åé¢ä½¿ç”¨ã€‚ æ¥ä¸‹æ¥æ˜¯é…ç½® â€œç«¯èƒ½åŠ›â€çš„é¡µé¢ï¼Œå¯ä»¥è‡ªå®šä¹‰é€‰æ‹©ï¼Œæˆ–è€…ç›´æ¥ä¿æŒé»˜è®¤ä¸‹ä¸€æ­¥å³å¯ã€‚ ç„¶åä¼šå¼¹å‡º BOTé…ç½® é¡µé¢ã€‚ å¯ä»¥çœ‹åˆ°ä¸Šé¢æ˜¯ä¸€äº› éŸ³ä¹ æœ‰å£°ç‚¹æ’­ æœ‰å£°ç›´æ’­ ç­‰ç­‰é€‰é¡¹ï¼›ä¸‹é¢æœ‰ èŠå¤©å®šåˆ¶ è¯­éŸ³å”¤é†’æœåŠ¡ è‡ªå®šä¹‰æ§åˆ¶æŒ‡ä»¤ è¿™äº›ï¼Œå¦‚æœçœ‹ä¸æ‡‚å‘¢å¯ä»¥ä¸ç”¨ç®¡ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ã€‚åé¢ä¼šè¯¢é—®æ˜¯å¦ä¸‹è½½SDKï¼Œä¹Ÿä¸ç”¨ç®¡ï¼Œç›´æ¥ç‚¹å‡»ä¸‹é¢çš„ â€œå®Œæˆâ€ ä¼šæç¤º â€œåˆ›å»ºäº§å“æˆåŠŸâ€ ã€‚ è¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½äº†è‡ªå·±çš„client_idå’Œclient_secretã€‚ è®¾ç½®ä¸ªäººçš„ClientIDä¿¡æ¯ä½¿ç”¨ FileZilla è½¯ä»¶ï¼Œåœ¨æ ‘è“æ´¾çš„ç›®å½• /home/pi/Leafney/DuerOS-Python-Client ä¸‹æ‰¾åˆ° app/auth.py è¿™ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºåœ¨æ§åˆ¶å°ç•Œé¢ä¸‹ä¸å¤ªæ–¹ä¾¿ç¼–è¾‘æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹©å°†è¯¥æ–‡ä»¶ä¸‹è½½åˆ°Windowsæœ¬åœ°æ¥ç¼–è¾‘ã€‚ å°† auth.py ä¸‹è½½åˆ°æœ¬åœ°åï¼Œæ¨èä½¿ç”¨ SublimeText æˆ– NotePad++ æ¥è¿›è¡Œç¼–è¾‘ã€‚ æ‰¾åˆ° å¼€å‘è€…æ³¨å†Œä¿¡æ¯ éƒ¨åˆ†ï¼Œæ›¿æ¢æˆåˆšåˆšç”³è¯·çš„ä¿¡æ¯ï¼š 123# å¼€å‘è€…æ³¨å†Œä¿¡æ¯CLIENT_ID = &apos;XXXXX&apos;CLIENT_SECRET = &apos;XXXXXX&apos; ç„¶åå°†ä¸‹é¢çš„ ä½¿ç”¨å¼€å‘è€…æ³¨å†Œä¿¡æ¯ ä¸€è¡Œä¸‹é¢ä»£ç æ®µå‰é¢çš„äº•å· # å»æ‰ï¼Œè§£æ³¨é‡Šè¿™ä¸€è¡Œã€‚ 12# ä½¿ç”¨å¼€å‘è€…æ³¨å†Œä¿¡æ¯auth.auth_request(CLIENT_ID, CLIENT_SECRET) å†å°†ä¸‹é¢çš„ ä½¿ç”¨é»˜è®¤çš„CLIENT_IDå’ŒCLIENT_SECRET ä¸€è¡Œä¸‹é¢ä»£ç è¡Œå‰é¢åŠ ä¸€ä¸ªäº•å· # æ³¨é‡Šæ‰è¿™ä¸€è¡Œã€‚ 12# ä½¿ç”¨é»˜è®¤çš„CLIENT_IDå’ŒCLIENT_SECRET# auth.auth_request() ç„¶åä½¿ç”¨ FileZilla å°†æˆ‘ä»¬åˆšåˆšæ”¹å¥½çš„ auth.py ä¸Šä¼ åˆ°æ ‘è“æ´¾ä¸­ã€‚ è®¾ç½®æˆæƒå›è°ƒåœ°å€åœ¨æµè§ˆå™¨ä¸­è®¿é—® æ§åˆ¶å° â€“ è®¾å¤‡æ§åˆ¶å° é¡µé¢ è®¾å¤‡æ§åˆ¶å° , é€‰æ‹©æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„äº§å“ç‚¹å‡» â€œç¼–è¾‘â€ é€‰é¡¹ã€‚ åœ¨ åŸºç¡€ä¿¡æ¯ é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹åˆšåˆšåˆ›å»ºè®¾å¤‡çš„ client_id ç­‰ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘ä»¬ç‚¹å‡» OAUTH CONFIG URL è¿™ä¸ªé“¾æ¥ï¼š åœ¨æ–°é¡µé¢çš„å·¦ä¾§ç‚¹å‡» å®‰å…¨è®¾ç½® é€‰é¡¹ï¼Œåœ¨ æˆæƒå›è°ƒé¡µ çš„è¾“å…¥æ¡†ä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼Œç„¶åç‚¹å‡» ç¡®å®š ä¿å­˜ä¿®æ”¹ã€‚ 1http://127.0.0.1:3000/authresponse ä½¿ç”¨ä¸ªäººè®¾å¤‡æˆæƒå®Œæˆä¸Šé¢çš„é…ç½®åï¼Œå›åˆ° Xshell ä¸­ï¼Œåœ¨æ ‘è“æ´¾çš„ /home/pi/Leafney/DuerOS-Python-Client ç›®å½•ä¸‹ï¼Œå†æ¬¡æ‰§è¡Œæˆæƒå‘½ä»¤ï¼š 12$ ./auth.shA web page should is opened. If not, go to http://127.0.0.1:3000 to start ç„¶ååœ¨æ ‘è“æ´¾ç³»ç»Ÿæµè§ˆå™¨è¾“å…¥ 127.0.0.1:3000 è®¿é—®ã€‚ å¯ä»¥çœ‹åˆ°é¡µé¢å³ä¾§çš„æˆæƒåº”ç”¨å˜æˆäº†æˆ‘è‡ªå·±åˆ›å»ºçš„è®¾å¤‡åç§°ã€‚ å¦‚æœä½ çš„æˆæƒé¡µé¢ä¸­è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ç©ºçš„ï¼Œé‚£æ˜¯å› ä¸ºä½ ç”¨çš„æ˜¯ä¸­æ–‡åç§°ã€‚åœ¨â€œåŸºç¡€ä¿¡æ¯â€ çš„ â€œåç§°â€é‚£é‡Œéœ€è¦å†æ¬¡æ·»åŠ ä¸€ä¸‹åç§°ã€‚å¦‚æœæ˜¯è‹±æ–‡çš„è¯ï¼Œè¿™ä¸ªåç§°ä¼šç›´æ¥æ˜¾ç¤ºã€‚æˆ‘è§‰å¾—è¿™é‡Œå¯èƒ½æ˜¯ä¸€ä¸ªbugã€‚ åœ¨æˆæƒé¡µé¢è¾“å…¥æˆ‘çš„ç™¾åº¦è´¦å·å’Œå¯†ç è¿›è¡Œæˆæƒã€‚ çœ‹åˆ°æç¤º Succeed to login DuerOS Voice Service çš„ä¿¡æ¯å°±è¯´æ˜æˆæƒæˆåŠŸäº†ã€‚ åŒæ—¶åœ¨ Xshell ä¸‹æˆ‘ä»¬ä¼šçœ‹åˆ°è¾“å‡ºç›¸åº”çš„æˆæƒä¿¡æ¯ã€‚ è¯­è¨€å”¤é†’æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ ./wakeup_trigger_start.sh ä½¿ç”¨å”¤é†’è¯ å°åº¦å°åº¦ å°±èƒ½å”¤é†’äº†ã€‚ å› ä¸ºæˆ‘åœ¨ Xshell ä¸‹æ“ä½œæ—¶å‘ç°å‘½ä»¤è¡Œä¸‹çš„ä¸­æ–‡ä¼šæœ‰ä¹±ç çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘æ”¹ç”¨è¿œç¨‹æ¡Œé¢ä¸‹æ ‘è“æ´¾ä¸Šè‡ªå¸¦çš„ Terminal ç¨‹åºæ¥æ‰§è¡Œã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨enteræŒ‰é”®å”¤é†’ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š 1$ ./enter_trigger_start.sh ä½¿ç”¨enteré”®å›è½¦å”¤é†’ã€‚ è¿™é‡Œæˆ‘å°è¯•äº†ä¸Šé¢çš„ä¸¤ç§å”¤é†’æ–¹å¼ï¼Œå‘ç°ä¸çŸ¥é“æ˜¯å“ªé‡Œçš„é—®é¢˜ï¼ŒéŸ³ç®±éƒ½æ²¡æœ‰å£°éŸ³è¾“å‡ºã€‚æŸ¥çœ‹è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯æ˜¯èƒ½çœ‹åˆ°æœ‰éŸ³é¢‘æ–‡ä»¶ä¸‹è½½æˆåŠŸå¹¶æ’­æ”¾çš„ã€‚ è§£å†³æ²¡æœ‰å£°éŸ³çš„é—®é¢˜æˆ‘ä½¿ç”¨ alsamixer ç„¶åæŒ‰ F6 åˆ‡æ¢ä½¿ç”¨çš„å£°å¡ï¼Œå‘ç°æ— è®ºå¦‚ä½•åˆ‡æ¢ï¼Œä¼¼ä¹éƒ½æ²¡æœ‰æ•ˆæœã€‚ åæ¥æˆ‘è€ƒè™‘å°†éŸ³ç®±çº¿æ¢åˆ°æ ‘è“æ´¾æœ¬èº«çš„éŸ³é¢‘æ¥å£ä¸Šï¼Œå‘ç°å±…ç„¶æœ‰å£°éŸ³è¾“å‡ºäº†ã€‚ä¸è¿‡æ ‘è“æ´¾è‡ªå¸¦çš„éŸ³é¢‘è¾“å‡ºæ‚éŸ³è¿˜æ˜¯å¾ˆåµçš„ã€‚ è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ä¸èƒ½åœ¨æ ‘è“æ´¾é€šç”µçš„æƒ…å†µä¸‹åˆ‡æ¢éŸ³é¢‘å£ï¼Œæˆ‘å‘ç°å¦‚æœç›´æ¥å°†éŸ³é¢‘çº¿ä»DuerOSæ¿å­çš„éŸ³é¢‘å£æ¢åˆ°æ ‘è“æ´¾çš„éŸ³é¢‘å£ä¸Šæ—¶ï¼Œåˆšä¸€æ¥è§¦çš„æ—¶å€™å™ªéŸ³æ˜¯éå¸¸å¤§çš„ï¼Œæ‰€ä»¥æœ€åæˆ‘æ˜¯å°†æ ‘è“æ´¾å…³æœºç„¶ååˆ‡æ¢çš„ã€‚ æ„Ÿå— ä½¿ç”¨Python SDK æœ€åå”¤é†’çš„æ—¶å€™éœ€è¦å°†éŸ³é¢‘æ¥å£æ’åˆ°æ ‘è“æ´¾çš„éŸ³é¢‘æ¥å£ä¸Šï¼Œè¿™ä¸€ç‚¹åœ¨è®ºå›çš„æ–‡æ¡£ä¸­æ²¡æœ‰è¯´æ˜ï¼Œå¯èƒ½ä¼šç»™ä¸€äº›äººæ“ä½œæ—¶å¸¦æ¥å›°æƒ‘ã€‚ ä¸ªäººè®¤ä¸ºåº”è¯¥æ˜¯æœ‰æ–¹æ³•ä½¿ç”¨DuerOSå¼€å‘ç‰ˆçš„éŸ³é¢‘æ¥å£çš„ï¼Œæ¯•ç«Ÿæ²¡æœ‰æ‚éŸ³å˜›ã€‚éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶ä¸€ä¸‹ã€‚ å‘ç°åœ¨ä½¿ç”¨ Python SDK å”¤é†’å°åº¦æ—¶ï¼Œè¯­è¨€è¯†åˆ«çš„æ•ˆæœä¸å¦‚é•œåƒç³»ç»Ÿä¸­è¯­éŸ³çš„è¯†åˆ«å‡†ç¡®åº¦é«˜ã€‚]]></content>
      <categories>
        <category>DuerOSå¼€æ”¾å¹³å°</category>
      </categories>
      <tags>
        <tag>DuerOS</tag>
        <tag>æ™ºèƒ½å®¶å±…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³Hexoåšå®¢æœç´¢å¼‚å¸¸]]></title>
    <url>%2F2017%2F11%2F24%2Fresolve-hexo-blog-search-exception%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨æ›´æ–°åšå®¢æ–‡ç« æ—¶å‘ç°ä¹‹å‰æ–°æ·»åŠ çš„æœç´¢åŠŸèƒ½ä¸å¤ªå¥½ç”¨äº†ã€‚æ¯æ¬¡ç‚¹å‡»äº†æœç´¢æŒ‰é’®ä¹‹åï¼Œæœç´¢å¼¹æ¡†ä¸€ç›´æ˜¾ç¤º â€œåŠ è½½ä¸­â€ çš„çŠ¶æ€ã€‚ å°è¯•å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ hexo çš„ Next ä¸»é¢˜ä¸­çš„ Local Search æœç´¢åŠŸèƒ½ï¼Œæ‰€ä»¥å°±å» Next ä¸»é¢˜çš„githubä¸­æŸ¥æ‰¾äº†ç±»ä¼¼çš„ issues ï¼Œå‘ç°ç±»ä¼¼é—®é¢˜ä¸‹ä½œè€…æ˜¯å»ºè®®é‡æ–°å®‰è£…è¯¥æœç´¢ç»„ä»¶æ¥è§£å†³çš„ã€‚ äºæ˜¯æˆ‘å°±å¸è½½äº†è¯¥ç»„ä»¶ï¼Œç„¶åé‡æ–°å®‰è£…ï¼š 123$ npm uninstall hexo-generator-searchdb --save$ npm install hexo-generator-searchdb --save ç»“æœé—®é¢˜ä¾æ—§ã€‚ æ¢ç©¶åæ¥æˆ‘å‘ç° Local Search çš„æœç´¢åŠŸèƒ½æ˜¯åŠ è½½çš„é¡¹ç›®ç›®å½•ä¸‹çš„ search.xml æ–‡ä»¶ï¼šhttp://localhost:4000/search.xmlã€‚äºæ˜¯æˆ‘åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå±…ç„¶æœ‰æŠ¥é”™æç¤ºã€‚ æŒ‰ç…§é”™è¯¯ä¿¡æ¯çš„è¯´æ˜ï¼Œæˆ‘æ‰¾åˆ°äº†å‡ºé”™çš„ç¬¬ 47 è¡Œç¬¬ 35 åˆ—ï¼Œå‘ç°å’Œå…¶ä»–å†…å®¹ä¸åŒçš„æ˜¯è¿™é‡Œå±…ç„¶å¤šäº†ä¸€ä¸ª â€œçº¢ç‚¹â€ï¼Œé‚£ä¹ˆæœç´¢å¼¹çª—å‡ºä¸æ¥çš„é—®é¢˜åº”è¯¥å°±æ˜¯è¿™ä¸ª â€œçº¢ç‚¹â€ æçš„é¬¼äº†ã€‚ æˆ‘é€šè¿‡ Sublime Text æ‰“å¼€äº†æºåšå®¢æ–‡ä»¶ï¼Œå‘ç°åœ¨æ®µè½çš„å¼€å¤´å±…ç„¶å¤šäº†ä¸¤ä¸ªå¥‡è‘©çš„å­—ç¬¦ï¼šBSã€‚ æˆ‘è§‰å¾—å¯èƒ½æ˜¯ä»€ä¹ˆæ—¶å€™å¤åˆ¶æ–‡ä»¶æ—¶ç»™åŠ ä¸Šçš„ã€‚åˆ é™¤åï¼Œå†æ¬¡ç”Ÿæˆã€‚é—®é¢˜è§£å†³ã€‚ å†æ¬¡è®¿é—®æœç´¢çš„xmlæ–‡ä»¶ http://localhost:4000/search.xml ï¼Œå‘ç°å·²ç»ä¸ä¼šå†æŠ¥ä¹‹å‰çš„é”™è¯¯äº†ã€‚ éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼šæˆ‘åœ¨æŸ¥çœ‹æºåšå®¢æ–‡ä»¶æ—¶ä¹Ÿä½¿ç”¨äº† VS Code ç¼–è¾‘å™¨ï¼Œä½†æ˜¯ VS Code å´æ— æ³•æ˜¾ç¤ºå‡ºæ¥å‰é¢çš„ç‰¹æ®Šå­—ç¬¦ BSï¼Œé€šè¿‡ Sublime Text æ‰æŸ¥çœ‹åˆ°ã€‚ æ‰©å±•åœ¨Hexoåšå®¢æ–‡ä»¶çš„é¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸€ä¸ª node_modules ç›®å½•ã€‚æ¯æ¬¡åœ¨windowsç³»ç»Ÿä¸‹åˆ é™¤ (æ‹·è´æˆ–è€…ç§»åŠ¨) è¯¥ç›®å½•æ—¶éƒ½ä¼šæŠ¥ æ–‡ä»¶åæˆ–æ‰©å±•åå¤ªé•¿ï¼Œç›®å½•å±‚æ¬¡è¶…è¿‡é™åˆ¶ ç­‰é”™è¯¯è€Œå¯¼è‡´æ“ä½œå¤±è´¥ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜åªéœ€è¦ä½¿ç”¨ unix æˆ–è€… linux ä¸‹çš„ rm -rfï¼ˆå¼ºåˆ¶åˆ é™¤ï¼‰ å‘½ä»¤æ¥åˆ é™¤å³å¯ï¼Œä½†è¦æ³¨æ„æ“ä½œæ—¶ä¸€å®šè¦æ…é‡ï¼Œä¸è¦è¯¯åˆ å…¶ä»–æ–‡ä»¶ã€‚ åœ¨ node_modules æ–‡ä»¶å¤¹æ‰€åœ¨ç›®å½•ä¸‹å³é”®æ‰“å¼€ Git Bash çª—å£ï¼Œæ‰§è¡Œï¼š 1$ rm -rf ./node_modules/ ç­‰å¾…å®Œæˆï¼Œå³å¯ã€‚ ç›¸å…³å‚è€ƒ how to uninstall npm modules in node js? windowsåˆ é™¤node_modules[æ–‡ä»¶åæˆ–æ‰©å±•åå¤ªé•¿ï¼Œç›®å½•å±‚æ¬¡è¶…è¿‡æ— æ³•åˆ é™¤çš„é—®é¢˜]]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç©è½¬ç¾¤æ™–NAS--ä¸‹è½½ç¥å™¨aria2]]></title>
    <url>%2F2017%2F11%2F17%2Fplaying-synology-nas-of-docker-aria2%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« è¯´äº†å¦‚ä½•é…ç½®DockeråŠ é€Ÿå™¨ï¼Œç°åœ¨ä¸‹è½½Dockeré•œåƒæ–‡ä»¶å·²ç»éå¸¸çš„å¿«äº†ã€‚ä½†æ˜¯å¯¹äºå…¶ä»–çš„ä¸€äº›æ–‡ä»¶æ¯”å¦‚ç”µå½±ã€ç¨‹åºæ–‡ä»¶ç­‰æ¥è¯´ï¼Œå¦‚ä½•åœ¨NASä¸­æ¥å¿«é€Ÿçš„ä¸‹è½½å‘¢ï¼Ÿ è™½ç„¶ç¾¤æ™–ä¸­å·²ç»è‡ªå¸¦äº†ä¸‹è½½å¥—ä»¶ï¼Œä¸è¿‡çœ‹åˆ°é‚£ä¸ªç•Œé¢æˆ‘å°±æœ‰ç§ä¸æƒ³ç”¨çš„æ„Ÿè§‰ã€‚è¿™é‡Œæ¨èä¸€ä¸ªå¼€æºçš„ä¸‹è½½ç¥å™¨ â€“ aria2ï¼Œå·ç§°è¿…é›·çš„æ›¿ä»£è€…ã€‚ è¿™é‡Œæˆ‘è¿˜é€‰æ‹©åœ¨Dockerä¸­æ¥é…ç½®ï¼Œé€‰æ‹©çš„é•œåƒä¸ºæˆ‘ä¹‹å‰åˆ›å»ºçš„ leafney/debian-aria2-kode é•œåƒã€‚è¯¥é•œåƒè‡ªå¸¦äº† aria2ä¸‹è½½ç¨‹åºã€ariaNgç®¡ç†é¡µé¢ä»¥åŠKodExploreræ–‡ä»¶ç®¡ç†é¡µé¢ã€‚ å…·ä½“å¯ä»¥è®¿é—®ï¼šLeafney/debian-aria2-kode åˆ›å»ºaria2å®¹å™¨æ‰“å¼€ç¾¤æ™–çš„dockerå¥—ä»¶ï¼Œé€‰æ‹© â€œæ³¨å†Œè¡¨â€ é¡¹ï¼Œæœç´¢å¹¶ä¸‹è½½é•œåƒ leafney/debian-aria2-kode ã€‚ ä¸‹è½½å®Œæˆåï¼Œé€‰ä¸­è¯¥é•œåƒï¼Œç‚¹å‡» â€œå¯åŠ¨â€ èœå•ï¼Œæ‰“å¼€ â€œåˆ›å»ºå®¹å™¨â€ ç•Œé¢ã€‚ ä¸ºè¯¥å®¹å™¨è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„åç§°ï¼Œæˆ‘è¿™é‡Œå‘½åä¸º aria2-kodeï¼Œç„¶åæ‰“å¼€ â€œé«˜çº§è®¾ç½®â€ çª—å£ã€‚ åœ¨ â€œé«˜çº§è®¾ç½®â€ é€‰é¡¹å¡ï¼Œé€‰ä¸­ â€œå¯ç”¨è‡ªåŠ¨é‡æ–°å¯åŠ¨â€ åŠ â€œåˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼â€ ã€‚ è‡ªåŠ¨é‡æ–°å¯åŠ¨æ˜¯åœ¨å®¹å™¨ä¸å½“å…³æœºçš„æƒ…å†µä¸‹å›å°è¯•è‡ªåŠ¨é‡å¯çš„æ“ä½œã€‚ åœ¨ â€œå·â€ èœå•ä¸­ï¼Œä¸ºåˆ›å»ºçš„å®¹å™¨æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥ç®¡ç†å’ŒæŸ¥çœ‹æˆ‘ä»¬é€šè¿‡aria2ä¸‹è½½çš„æ–‡ä»¶ã€‚å› ä¸ºè¦å­˜å‚¨æ–°æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¸è¦å‹¾é€‰ â€œåªè¯»â€ é¡¹ã€‚ åœ¨ â€œç«¯å£è®¾ç½®â€ èœå•ä¸­ï¼Œå·²ç»åˆ—å‡ºäº†é•œåƒä¸­é¢„è®¾çš„ç«¯å£ä¿¡æ¯ï¼Œåœ¨ â€œæœ¬åœ°ç«¯å£â€ é¡¹ä¸‹ï¼Œæˆ‘ä»¬ä¸ºå…¶æŒ‡å®šç›¸åº”çš„ç«¯å£ï¼Œä¸é€‰æ‹©é»˜è®¤çš„ â€œè‡ªåŠ¨â€ ã€‚ ç„¶åç‚¹å‡» â€œåº”ç”¨â€ æŒ‰é’®ã€‚ å›åˆ° â€œåˆ›å»ºå®¹å™¨â€ ç•Œé¢ï¼Œç‚¹å‡» â€œä¸‹ä¸€æ­¥â€ ã€‚æŸ¥çœ‹æˆ‘ä»¬è®¾ç½®çš„å®¹å™¨ä¿¡æ¯ï¼Œå‹¾é€‰å·¦ä¸‹è§’çš„ â€œå‘å¯¼å®Œæˆåè¿è¡Œæ­¤å®¹å™¨â€ é¡¹ï¼Œç„¶åç‚¹å‡» â€œåº”ç”¨â€ ç­‰å¾…å®¹å™¨å¯åŠ¨ã€‚ æŸ¥çœ‹å®¹å™¨ä¿¡æ¯é€‰æ‹©å·¦ä¾§ â€œå®¹å™¨â€ é¡¹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„å®¹å™¨å·²ç»å¯åŠ¨äº†ã€‚ ç‚¹å‡»é¡¶éƒ¨çš„ â€œè¯¦æƒ…â€ é€‰é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹å®¹å™¨ aria2-kode çš„ä¿¡æ¯ã€‚ åœ¨ â€œæ—¥å¿—â€ é¡¹ä¸‹ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰å®¹å™¨è¿è¡Œæ—¶è¾“å‡ºçš„æ—¥å¿—è®°å½•ã€‚ é…ç½®KodExploreråœ¨æµè§ˆå™¨ä¸­è¾“å…¥ ç¾¤æ™–ip:6860 ï¼Œæ‰“å¼€ KodExplorer çš„ç™»å½•ç•Œé¢ã€‚çœ‹åˆ° â€œè¿è¡Œç¯å¢ƒæ£€æµ‹â€ ä¸‹è¾“å‡º â€œSuccessful!â€ è¯´æ˜æˆ‘ä»¬çš„å®¹å™¨å·²ç»æ­£å¸¸çš„è·‘èµ·æ¥äº†ã€‚ é¦–å…ˆè¦è®¾ç½® KodExplorer èµ„æºç®¡ç†å™¨çš„ç®¡ç†å‘˜ admin çš„å¯†ç ã€‚ ç„¶åä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•ã€‚ç™»å½•åå¯ä»¥çœ‹åˆ° KodExplorer çš„æ–‡ä»¶ç®¡ç†é¡µé¢å’Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„èµ„æºç®¡ç†å™¨é¡µé¢éå¸¸çš„ç›¸ä¼¼ï¼Œæ“ä½œèµ·æ¥ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚ é…ç½®aria2åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ ç¾¤æ™–ip:6801 ,æ‰“å¼€ AriaNg çš„ç®¡ç†é¡µé¢ã€‚è¿›å…¥åä¼šå¼¹å‡º â€œè®¤è¯å¤±è´¥â€ çš„é”™è¯¯å¼¹çª—ï¼Œä¸ç”¨ç®¡å®ƒã€‚ é€‰æ‹©å·¦ä¾§ â€œç³»ç»Ÿè®¾ç½®â€ ä¸‹çš„ â€œAriaNg è®¾ç½®â€ é¡¹ã€‚åœ¨å³ä¾§é€‰æ‹© â€œRPC(192.168.x.xxâ€¦â€ çš„èœå•ï¼Œç„¶åé…ç½®ä¹‹å‰åˆ›å»ºå®¹å™¨æ—¶è®¾ç½®çš„ â€œAria2 RPC åœ°å€â€ ç«¯å£å·å’Œ â€œAria2 RPC å¯†é’¥â€ é¡¹ã€‚ RPCå¯†é’¥é»˜è®¤æ˜¯ 123456 ã€‚è®¾ç½®å®Œæˆåç‚¹å‡» â€œé‡æ–°åŠ è½½é¡µé¢â€ åº”ç”¨é…ç½®ã€‚ ç„¶åå¯ä»¥çœ‹åˆ° Aria2 çŠ¶æ€ å·²ç»æ˜¾ç¤ºä¸º â€œå·²è¿æ¥â€ çš„çŠ¶æ€äº†ã€‚ è‡³æ­¤ï¼Œaria2å°±é…ç½®å®Œæˆäº†ã€‚é€‰æ‹©å·¦ä¾§çš„ â€œæ­£åœ¨ä¸‹è½½â€ é¡¹æ–°å»ºä¸‹è½½ä»»åŠ¡å³å¯ã€‚ ç®¡ç†ä¸‹è½½æ–‡ä»¶è¿™é‡Œæˆ‘ä»¥ä¸‹è½½ BaiduExporter ä¸ºä¾‹æ¥ç¤ºèŒƒå¦‚ä½•ç®¡ç†ä¸‹è½½çš„æ–‡ä»¶ã€‚ BaiduExporter ä¸‹è½½æ–‡ä»¶æ‰“å¼€ BaiduExporter çš„githubé¡µé¢ï¼Œåœ¨masteråˆ†æ”¯ä¸‹ï¼Œé€‰æ‹©å³ä¾§çš„ Clone or download é¡¹ä¸‹çš„ Download Zip ï¼Œå³å‡»é€‰æ‹© â€œå¤åˆ¶é“¾æ¥åœ°å€â€ ã€‚ æ‰“å¼€ â€œAriaNgâ€ é¡µé¢ï¼Œåœ¨ â€œæ­£åœ¨ä¸‹è½½â€ é¡µé¢ â€œæ–°å»ºâ€ ä¸‹è½½ä»»åŠ¡ã€‚ç²˜è´´ä¸‹è½½é“¾æ¥ï¼Œç‚¹å‡» â€œç«‹å³ä¸‹è½½â€ å¼€å§‹ã€‚ ä¸‹è½½å®Œæˆåï¼Œä¼šåœ¨ â€œå·²å®Œæˆ/å·²åœæ­¢â€ èœå•ä¸­æ˜¾ç¤ºã€‚ KodExploreræ–‡ä»¶ç®¡ç†è¦æŸ¥çœ‹æˆ‘ä»¬åˆšåˆšä¸‹è½½çš„æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ KodExplorer é¡µé¢ï¼Œé€‰æ‹©ä¸Šé¢çš„ç›®å½•è·¯å¾„ï¼Œç‚¹å‡»æ ¹ç›®å½•é¡¹ï¼ŒæŸ¥çœ‹æ‰€æœ‰çš„æ–‡ä»¶åŠç›®å½•ã€‚ æ‰¾åˆ° app ç›®å½•ï¼Œæ‰“å¼€é‡Œé¢çš„ aria2down ç›®å½•å³å¯æŸ¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšä¸‹è½½çš„æ–‡ä»¶äº†ã€‚ åœ¨ç¾¤æ™–DSMä¸­æŸ¥çœ‹ä¸‹è½½æ–‡ä»¶åœ¨åˆ›å»ºå®¹å™¨æ—¶æˆ‘ä»¬ä¸ºå®¹å™¨æŒ‡å®šäº†ç¾¤æ™–æœ¬åœ°çš„ä¸‹è½½æ–‡ä»¶ç›®å½•ã€‚æ‰“å¼€ç¾¤æ™–DSMç•Œé¢ â€“ â€œFile Stationâ€ æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ‰¾åˆ°æˆ‘ä»¬è®¾ç½®çš„ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°å®¹å™¨ä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºäº†ä¸‰ä¸ªç›®å½•ï¼Œåœ¨ aria2down ä¸‹å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬åˆšåˆšä¸‹è½½çš„æ–‡ä»¶äº†ã€‚ ç™¾åº¦ç½‘ç›˜æ–‡ä»¶ä¸‹è½½çŸ¥é“äº†å¦‚ä½•ä¸‹è½½å’Œå¦‚ä½•ç®¡ç†æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å…·ä½“çš„åº”ç”¨ã€‚å› ä¸ºä¹‹å‰ç½‘ç›˜åˆšå…´èµ·çš„æ—¶å€™ï¼Œæˆ‘æŠŠå¤§éƒ¨åˆ†çš„æ–‡ä»¶éƒ½æ”¾åœ¨åˆ°äº†ç™¾åº¦ç½‘ç›˜é‡Œï¼Œä½†åæ¥ç½‘ç›˜é€æ¸è¡°è½ï¼Œç™¾åº¦ç½‘ç›˜çš„å®¢æˆ·ç«¯ä¸‹è½½æ–‡ä»¶è¿˜ä¼šé™é€Ÿï¼Œé™¤éä½ å†²è¶…çº§ä¼šå‘˜æ‰è¡Œã€‚ ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç”¨aria2æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å®‰è£…æ’ä»¶æƒ³è¦ä¸‹è½½ç™¾åº¦ç½‘ç›˜ä¸­çš„æ–‡ä»¶ï¼Œé¦–å…ˆéœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æˆ‘ä»¬å·²ç»ä¸‹è½½çš„ BaiduExporterã€‚ åœ¨ KodExplorer ç®¡ç†ç•Œé¢æˆ–ç¾¤æ™–çš„ DSM ç•Œé¢ï¼Œé€‰ä¸­æ–‡ä»¶ BaiduExporter-master.zip å³å‡»é€‰æ‹©ä¸‹è½½å‡å¯å°†è¯¥æ–‡ä»¶ä¸‹è½½åˆ°å½“å‰ç”µè„‘ä¸Šï¼Œè§£å‹åçœ‹åˆ°ä¸€ä¸ªåä¸º BaiduExporter.crx çš„æ–‡ä»¶ã€‚ æ‰“å¼€ Chrome æµè§ˆå™¨ â€“ â€œæ›´å¤šå·¥å…·â€ â€“ â€œæ‰©å±•ç¨‹åºâ€ ç•Œé¢ã€‚å°† BaiduExporter.crx æ‹–æ”¾åˆ°è¯¥é¡µé¢ä»¥å®‰è£…ã€‚ æ‰“å¼€ç™¾åº¦ç½‘ç›˜é¡µé¢ï¼Œåœ¨é¡¶éƒ¨èœå•æ ä¸­å¯ä»¥çœ‹åˆ°å¤šå‡ºäº†ä¸€é¡¹ â€œå¯¼å‡ºä¸‹è½½â€ çš„æŒ‰é’®ã€‚ è®¾ç½®ARIA2 RPCä»åœ¨ç™¾åº¦ç½‘ç›˜é¡µé¢ï¼Œé€‰æ‹©èœå• â€œå¯¼å‡ºä¸‹è½½â€ â€“ â€œè®¾ç½®â€ é¡¹ï¼Œåœ¨ ARIA2 RPC å³ä¾§è¾“å…¥RPCåœ°å€ï¼Œæ ¼å¼ä¸º ï¼šhttp://192.168.5.120:6800/jsonrpc ã€‚ å› ä¸ºæˆ‘çš„aria2æ˜¯æ·»åŠ äº†å¯†é’¥çš„ï¼Œæ‰€ä»¥æœ€åçš„rpcåœ°å€æ ¼å¼åº”ä¸ºï¼šhttp://token:RPCå¯†é’¥@192.168.5.120:6800/jsonrpc ï¼Œå³ è®¾ç½®å¯†ç ä»¥åéœ€è¦åœ¨å¯¼å‡ºä¸‹é¢çš„è®¾ç½®é‡Œåœ¨ JSONRPC çš„åœ°å€çš„ http:// åé¢ localhost å‰é¢åŠ ä¸Š token:ä½ çš„å¯†ç @ã€‚ ä¸‹è½½ç‚¹å‡»åº”ç”¨åï¼Œå‹¾é€‰ç™¾åº¦ç½‘ç›˜ä¸­è¦ä¸‹è½½çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œé€‰æ‹© â€œå¯¼å‡ºä¸‹è½½â€ èœå•ä¸‹çš„ â€œARIA2 RPCâ€ï¼Œä¼šå¼¹å‡º â€œä¸‹è½½æˆåŠŸï¼Œèµ¶ç´§å»çœ‹çœ‹å§ï¼â€ çš„æç¤ºä¿¡æ¯ã€‚åˆ‡æ¢åˆ° AriaNg é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ç™¾åº¦ç½‘ç›˜ä¸Šé€‰æ‹©çš„æ–‡ä»¶å·²ç»åœ¨ä¾æ¬¡ä¸‹è½½äº†ã€‚ å¦å¤–åœ¨ KodExplorer å’Œç¾¤æ™–DSMçš„èµ„æºç®¡ç†ç•Œé¢ï¼Œéƒ½å¯ä»¥çœ‹åˆ°æ­£åœ¨ä¸‹è½½çš„æ–‡ä»¶ã€‚ æ³¨æ„è¿™é‡Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœåœ¨ Mac10.13 ç³»ç»Ÿä¸Šä½¿ç”¨releaseä¸‹çš„ v0.8.5 çš„ç‰ˆæœ¬åœ¨ç™¾åº¦ç½‘ç›˜é¡µé¢é€‰ä¸­æ–‡ä»¶åï¼Œâ€œå¯¼å‡ºä¸‹è½½â€ çš„æŒ‰é’®å°±æ¶ˆå¤±äº†ã€‚æ›´æ–°æˆå½“å‰çš„masterç‰ˆæœ¬ v0.9.10 åæ²¡æœ‰é—®é¢˜ã€‚æ‰€ä»¥ä¸Šé¢ç›´æ¥æ¨èå®‰è£…masterç‰ˆæœ¬ã€‚ å…·ä½“å¯ä»¥çœ‹ github issuesï¼šmac os 10.13 æ— æ³•ä½¿ç”¨äº† ç›¸å…³å‚è€ƒ Aria2cé‚£è¾¹è®¾ç½®rpc-secretåï¼Œchromeé‡Œçš„ariaæŒ‰é’®ç‚¹å‡»åå°±ä¸èƒ½æ— æ³•ä¸‹è½½äº†ï¼ŒæŠ¥ï¼šæ˜¯ä¸æ˜¯æ²¡æœ‰å¯åŠ¨aria2]]></content>
      <categories>
        <category>ç©è½¬ç¾¤æ™–NAS</category>
      </categories>
      <tags>
        <tag>SynologyNAS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç©è½¬ç¾¤æ™–NAS--DockeråŠ é€Ÿ]]></title>
    <url>%2F2017%2F11%2F17%2Fplaying-synology-nas-of-docker-accelerator%2F</url>
    <content type="text"><![CDATA[ç¾¤æ™–çš„DSMç³»ç»Ÿä¸Šå®‰è£…Dockerå¥—ä»¶éå¸¸çš„ç®€å•ï¼Œåªè¦ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±è¡Œäº†ã€‚ ä½†æ˜¯ç”±äºæŸäº› â€œä½ æ‡‚çš„â€ åŸå› ï¼ŒDockerHubçš„ç½‘ç«™æ˜¯åœ¨å›½å¤–çš„ï¼Œè€Œåœ¨å›½å†…è®¿é—®èµ·æ¥å°±ä¼šç‰¹åˆ«çš„æ…¢ã€‚ä¹‹å‰æˆ‘ä¹Ÿå†™è¿‡åœ¨å…¶ä»–Linuxç³»ç»Ÿå¦‚Ubuntuä¸‹é…ç½®DockeråŠ é€Ÿå™¨çš„æ–¹æ³•ï¼Œä½†ç»è¿‡ä¸€ç•ªç ”ç©¶å‘ç°ç¾¤æ™–NASä¸‹çš„Dockerå¥—ä»¶é…ç½®åŠ é€Ÿå™¨çš„æ–¹æ³•è¿˜æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ã€‚ å¯ç”¨Dockerå¥—ä»¶è¿›å…¥ç¾¤æ™–çš„ DSM ç³»ç»Ÿåï¼Œé€‰æ‹©æ¡Œé¢çš„ â€œå¥—ä»¶ä¸­å¿ƒâ€ å›¾æ ‡ï¼ˆæˆ–åœ¨ â€œä¸»èœå•â€ ç•Œé¢ä¸­é€‰æ‹© â€œå¥—ä»¶ä¸­å¿ƒâ€ï¼‰ï¼Œåœ¨å·¦ä¾§æ‰¾åˆ° â€œå®ç”¨å·¥å…·â€ ä¸€é¡¹ï¼Œå³ä¾§å¾€ä¸‹æ‹‰åœ¨ â€œç¬¬ä¸‰æ–¹â€ ä¸€æ ä¸‹æ‰¾åˆ° â€œDockerâ€ çš„å›¾æ ‡ï¼Œç‚¹å‡» â€œå®‰è£…å¥—ä»¶â€ ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚ å®‰è£…å®Œæˆåï¼Œé€‰æ‹© â€œä¸»èœå•â€ æ‰¾åˆ° â€œDockerâ€ å›¾æ ‡å¹¶æ‰“å¼€ã€‚ å…·ä½“çš„æ“ä½œå¯ä»¥æŸ¥çœ‹ DSM çš„å¸®åŠ©ç•Œé¢ï¼Œè¿™é‡Œä¸»è¦è¯´æ˜é‡ç‚¹çš„é¡¹ï¼š æ€»è§ˆ èƒ½çœ‹åˆ°å½“å‰ç¾¤æ™–çš„ â€œCPU ä½¿ç”¨ç‡â€ å’Œ â€œå†…å­˜ä½¿ç”¨ç‡â€ ä»¥åŠæ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨ã€‚ æ³¨å†Œè¡¨ å¯¹åº”äº Docker æ¥è¯´å°±æ˜¯â€œDocker Hubâ€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæœç´¢ä»¥åŠä¸‹è½½é•œåƒã€‚ æ˜ åƒ å¯¹åº”äº Docker æ¥è¯´å°±æ˜¯â€œé•œåƒâ€ï¼Œç”¨æ¥ç®¡ç†é•œåƒï¼Œåˆ›å»ºå®¹å™¨ç­‰æ“ä½œã€‚ å®¹å™¨ æ˜¯å¯¹åˆ›å»ºçš„å®¹å™¨è¿›è¡Œç®¡ç†ã€‚ æœªå¯ç”¨åŠ é€Ÿå™¨è¦åœ¨Dockerå¥—ä»¶ä¸­åˆ›å»ºå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·¦ä¾§èœå• â€œæ³¨å†Œè¡¨â€ é¡¹æœç´¢ç›¸åº”çš„é•œåƒåç§°ï¼ŒåŒå‡»ä¸‹è½½ã€‚ä½†æ˜¯æˆ‘ä»¬å‘ç°ä¸‹è½½ä¸­çš„é•œåƒå³ä¾§çš„ä¸‹è½½å›¾æ ‡åœ¨ä¸€æ®µæ—¶é—´ä¹‹å†…ä¸€ç›´æ˜¾ç¤º â€œ0 Bâ€ çš„æƒ…å†µï¼Œç„¶åå°±è‡ªåŠ¨æ¶ˆå¤±äº†ã€‚ åŒæ—¶åœ¨ â€œæ˜ åƒâ€ ä¸­ä¹Ÿä¼šæç¤º â€œæ‚¨æœªä¸‹è½½ä»»ä½•æ˜ åƒï¼Œè¯·è¿›å…¥æ³¨å†Œè¡¨é€‰é¡¹å¡ä»¥ä¸‹è½½ã€‚â€ï¼š ä¸€è¿è¯•è¿‡å‡ æ¬¡ï¼Œéƒ½æ˜¯ä¸‹è½½ä¸­é€”é•œåƒå°±è‡ªåŠ¨æ¶ˆå¤±äº†ã€‚ å¯ç”¨SSHè¦é…ç½®Dockerçš„é…ç½®æ–‡ä»¶ï¼Œè¿˜å¾—éœ€è¦åœ¨å‘½ä»¤è¡Œä¸‹æ¥æ“ä½œã€‚ç¾¤æ™–NASé»˜è®¤æ²¡æœ‰å¼€å¯SSHåŠŸèƒ½ï¼Œå¾—éœ€è¦æˆ‘ä»¬å…ˆå¼€å¯æ‰è¡Œã€‚ æ‰“å¼€ â€œæ§åˆ¶é¢æ¿â€ å›¾æ ‡ï¼Œé€‰æ‹© â€œåº”ç”¨ç¨‹åºâ€ â€“ â€œç»ˆç«¯æœºå’ŒSNMPâ€ â€“ å‹¾é€‰ â€œå¯ç”¨ SSH åŠŸèƒ½â€ ã€‚ç«¯å£å¯ä»¥é€‰æ‹©é»˜è®¤æˆ–è‡ªå®šä¹‰ï¼Œç„¶åç‚¹å‡»åº”ç”¨ã€‚ å¯ç”¨ç”¨æˆ·ä¸»ç›®å½•æœåŠ¡è¿™æ—¶å¦‚æœä½ ä»¥ä»»ä½•ç”¨æˆ·èº«ä»½é€šè¿‡ç»ˆç«¯ä½¿ç”¨SSHæ–¹å¼è®¿é—®NASçš„ipåœ°å€ï¼Œç™»é™†åä¸€èˆ¬ä¼šçœ‹åˆ°ä¸€æ¡è­¦å‘Šæç¤ºï¼š 1Could not chdir to home directory /var/services/homes/tiger: No such file or directory å‘ç”Ÿæ­¤è­¦å‘Šæ˜¯å› ä¸ºä¸»ç›®å½•ç”±DSMçš„â€œç”¨æˆ·ä¸»ç›®å½•æœåŠ¡â€æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹è¯¥ä¸»ç›®å½•æœåŠ¡æ˜¯ç¦ç”¨çš„ã€‚è¦é˜²æ­¢é”™è¯¯ï¼Œè¯·é€šè¿‡é€‰ä¸­ â€œæ§åˆ¶é¢æ¿â€ â€“ â€œç”¨æˆ·è´¦æˆ·â€èœå• â€“ â€œé«˜çº§è®¾ç½®â€é€‰é¡¹å¡ â€“ â€œå®¶ç›®å½•â€ç»„ â€“ â€œå¯ç”¨å®¶ç›®å½•æœåŠ¡â€ å¤é€‰æ¡†æ¥å¯ç”¨ç”¨æˆ·ä¸»ç›®å½•æœåŠ¡ã€‚ è¿™æ ·å†æ¬¡å°è¯•ç™»é™†ï¼Œä¼šçœ‹åˆ°è­¦å‘Šä¿¡æ¯æ²¡æœ‰äº†ã€‚ å³ä½¿æ‚¨ä¸æ‰“ç®—ä½¿ç”¨è¯¥å®¶ç›®å½•ï¼Œä½†è¿˜æ˜¯å»ºè®®æ‚¨é€‰æ‹©å¯ç”¨ç”¨æˆ·ä¸»ç›®å½•æœåŠ¡ï¼Œä»¥é˜²å½±å“å…¶ä»–æŸäº›ç¨‹åºçš„è¿è¡Œã€‚ ä¸´æ—¶æ€§DockeråŠ é€Ÿå¦‚æœæ˜¯ä¸´æ—¶æ€§çš„æƒ³è¦ â€œåŠ é€Ÿâ€ ä¸‹è½½é•œåƒï¼Œå¯ä»¥é€‰æ‹©é€šè¿‡å‘½ä»¤çš„æ–¹å¼ï¼Œæ‰§è¡Œ docker pull æ—¶åŠ å…¥å›½å†…æºåœ°å€ï¼Œæ ¼å¼ä¸ºï¼š 1$ docker pull registry.docker-cn.com/myname/myrepo:mytag ä¾‹å¦‚: 1$ docker pull registry.docker-cn.com/library/ubuntu:16.04 è™½ç„¶èƒ½å®ç°åŠ é€Ÿæ•ˆæœï¼Œä½†æ˜¯å¯¹äºåœ¨ç¾¤æ™–NASä¸­æ“ä½œDockeræ¥è¯´ï¼Œæ¯æ¬¡ä¸‹è½½é•œåƒéƒ½è¦å…ˆå»ç™»é™†SSHï¼Œåœ¨å‘½ä»¤è¡Œä¸­ä¸‹è½½å¥½äº†é•œåƒå†å›åˆ° DSM ç•Œé¢æ¥æ“ä½œï¼Œè¿™æ ·çš„æµç¨‹æœªå…æœ‰äº›å¤ªç¹çäº†ã€‚ é…ç½®DockeråŠ é€Ÿå™¨æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½® Docker å®ˆæŠ¤è¿›ç¨‹é»˜è®¤ä½¿ç”¨ Docker å®˜æ–¹é•œåƒåŠ é€Ÿã€‚ æŸ¥çœ‹ç¾¤æ™–ä¸‹Dockerç‰ˆæœ¬è¿™é‡Œæˆ‘ä½¿ç”¨ admin è´¦å·é€šè¿‡SSHç™»é™†åˆ°ç¾¤æ™–çš„å‘½ä»¤æ¨¡å¼ä¸‹æ¥æ“ä½œã€‚ ä½¿ç”¨å‘½ä»¤ docker info æŸ¥çœ‹dockerè¯¦ç»†ä¿¡æ¯ï¼š å¦‚æœæç¤º Cannot connect to the Docker daemon. Is the docker daemon running on this host? è¯´æ˜å½“å‰çš„è´¦å·æ²¡æœ‰ root æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ sudo ææƒæ¥æ“ä½œï¼Œæˆ–è€…å¯ä»¥é€šè¿‡åˆ‡æ¢åˆ° root è´¦æˆ·ä¸‹æ¥æ“ä½œï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©åè€…ã€‚ é€šè¿‡ admin è´¦å·ç™»å½•åï¼Œæ‰§è¡Œ sudo su - åˆ‡æ¢åˆ° root è´¦æˆ·ä¸‹(æ³¨æ„è¿™ä¸€æ­¥è¾“å…¥çš„æ˜¯adminè´¦å·çš„å¯†ç )ï¼š ç¤ºä¾‹å‘½ä»¤å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334admin@HomeNAS:/etc$ docker infoCannot connect to the Docker daemon. Is the docker daemon running on this host?admin@HomeNAS:~$ sudo su -Password: # æ³¨æ„è¿™ä¸€æ­¥è¾“å…¥çš„æ˜¯adminè´¦å·çš„å¯†ç root@HomeNAS:~# docker infoContainers: 0 Running: 0 Paused: 0 Stopped: 0Images: 0Server Version: 1.11.2Storage Driver: btrfsLogging Driver: dbCgroup Driver: cgroupfsPlugins: Volume: local Network: host bridge nullKernel Version: 4.4.15+Operating System: &lt;unknown&gt;OSType: linuxArchitecture: x86_64CPUs: 2Total Memory: 1.801 GiBName: HomeNASID: A3DQ:M62X:NLZP:RYMF:NINR:5QBY:7OIJ:L425:3WDR:4V2N:FEFL:OV42Docker Root Dir: /volume1/@dockerDebug mode (client): falseDebug mode (server): falseRegistry: https://index.docker.io/v1/WARNING: No kernel memory limit supportWARNING: No cpu cfs quota supportWARNING: No cpu cfs period supportWARNING: bridge-nf-call-iptables is disabledWARNING: bridge-nf-call-ip6tables is disabled æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Server Version ç›®å‰ç‰ˆæœ¬æ˜¯ 1.11.2 çš„ã€‚ è¦é€€å‡º root è´¦æˆ·æ¨¡å¼ï¼Œæ‰§è¡Œ exit å³å¯ï¼š 123root@HomeNAS:~# exitlogoutadmin@HomeNAS:~$ é…ç½®åŠ é€Ÿå™¨è¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿå™¨ã€‚æ‰“å¼€é˜¿é‡Œäº‘çš„ å¼€å‘è€…å¹³å° , é€‰æ‹© â€œç®¡ç†ä¸­å¿ƒâ€ â€“ â€œé•œåƒåŠ é€Ÿå™¨â€ ï¼Œå¯ä»¥çœ‹åˆ° â€œæ‚¨çš„ä¸“å±åŠ é€Ÿå™¨åœ°å€â€ ã€‚ è€Œä¸”ä¸‹é¢ä¹Ÿç»™å‡ºäº†å…·ä½“çš„æ“ä½œæ–¹æ³•ã€‚ é€šè¿‡ä¸Šä¸€æ­¥æˆ‘ä»¬çœ‹åˆ°ç¾¤æ™–ä¸‹çš„ Docker ç‰ˆæœ¬æ˜¯å¤§äº 1.10.0 çš„ï¼ŒæŒ‰ç…§æ–‡æ¡£æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶ /etc/docker/daemon.json æ¥ä½¿ç”¨åŠ é€Ÿå™¨ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œä¸€å®šè¦è¯´ä½†æ˜¯ï¼Œæ–‡æ¡£ä¸­çš„æ–¹æ³•æ˜¯å¯¹åº”äºåœ¨ Ubuntu ç­‰Linuxç³»ç»Ÿä¸‹é€šè¿‡ Docker å®˜æ–¹çš„å®‰è£…æ–¹å¼å®‰è£…çš„Dockerè€Œè¨€çš„ï¼Œå¯¹äºç¾¤æ™–ä¸‹çš„Dockeræ¥è¯´ï¼Œå¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚ é€šè¿‡æŸ¥æ‰¾æˆ‘å‘ç°ç¾¤æ™–ä¸­Dockerçš„é…ç½®æ–‡ä»¶åœ°å€åœ¨ /var/packages/Docker/etc/dockerd.json ä¸‹ï¼Œ ä½¿ç”¨vimç¼–è¾‘ï¼š 1root@HomeNAS:~# vim /var/packages/Docker/etc/dockerd.json å¯ä»¥çœ‹åˆ°å†…å®¹å¦‚ä¸‹ï¼š 1234&#123; &quot;ipv6&quot;: true, &quot;registry-mirrors&quot;: []&#125; ç„¶åå°†ä»é˜¿é‡Œäº‘è·å¾—çš„åŠ é€Ÿå™¨åœ°å€å¡«å…¥ registry-mirrors éƒ¨åˆ†å³å¯ï¼š 1234&#123; &quot;ipv6&quot;: true, &quot;registry-mirrors&quot;: [&quot;https://xxxxxx.mirror.aliyuncs.com&quot;]&#125; æ³¨æ„ï¼šç½‘å€è¦ç”¨è‹±æ–‡çš„åŒå¼•å·å¼•èµ·æ¥å†æ·»åŠ åˆ°ä¸­æ‹¬å·ä¸­ã€‚ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„åŠ é€Ÿå™¨åœ°å€ã€‚æ¯”å¦‚ä½¿ç”¨Dockerä¸­å›½å®˜æ–¹é•œåƒçš„åŠ é€Ÿåœ°å€ï¼š 1234&#123; &quot;ipv6&quot;: true, &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]&#125; ç„¶åéœ€è¦é‡å¯ç¾¤æ™–ä¸‹çš„DockeræœåŠ¡ã€‚ é‡å¯ç¾¤æ™–ä¸‹çš„DockeræœåŠ¡ä¸Šé¢ä¹Ÿè¯´åˆ°ï¼Œç¾¤æ™–çš„DSMç³»ç»Ÿå¹¶ä¸åƒå…¶ä»–çš„linuxç³»ç»Ÿå¦‚ Ubuntu é‚£æ ·ï¼Œç®¡ç†æœåŠ¡å¯ä»¥ä½¿ç”¨ systemctl(Ubuntu16.04åç‰ˆæœ¬) æˆ– service æ¥æ“ä½œ: 12345root@HomeNAS:~# systemctl-ash: systemctl: command not foundroot@HomeNAS:~# service-ash: service: command not foundroot@HomeNAS:~# å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå‘½ä»¤åœ¨ç¾¤æ™–ä¸‹éƒ½æ˜¯æ‰¾ä¸åˆ°çš„ã€‚ é‚£æ˜¯å› ä¸ºåœ¨ç¾¤æ™–ä¸‹çš„æ“ä½œå‘½ä»¤éƒ½è¦åŠ ä¸Š syno å‰ç¼€æ¥æ“ä½œï¼Œæ‰§è¡Œå‘½ä»¤ synoservice æˆ– synoservice --helpï¼š 123456789101112131415161718192021222324252627root@HomeNAS:~# synoserviceCopyright (c) 2003-2017 Synology Inc. All rights reserved.SynoService Tool Help (Version 15217)Usage: synoservice --help Show this help --help-dev More specialty functions for deveplopment --is-enabled [ServiceName] Check if the service is enabled --status [ServiceName] Get the status of specified services --enable [ServiceName] Set runkey to yes and start the service (alias to --start) --disable [ServiceName] Set runkey to no and stop the service (alias to --stop) --hard-enable [ServiceName] Set runkey to yes and start the service and its dependency (alias to --hard-start) --hard-disable [ServiceName] Set runkey to no and stop the service and its dependency (alias to --hard-stop) --restart [ServiceName] Restart the given service --reload [ServiceName] Reload the given service --pause [ServiceName] Pause the given service --resume [ServiceName] Resume the given service --pause-by-reason [ServiceName] [Reason] Pause the service by given reason --resume-by-reason [ServiceName] [Reason] Resume the service by given reason --pause-all (-p) [Reason] (Event) Pause all service by given reason with optional event(use -p to include packages) --pause-all-no-action (-p) [Reason] (Event) Set all service runkey to no but leave the current service status(use -p to include packages) --resume-all (-p) [Reason] Resume all service by given reason(use -p to include packages) --reload-by-type [type] (buffer) Reload services with specified type --restart-by-type [type] (buffer) Restart services with specified type Type may be &#123;file_protocol|application&#125; Sleep $buffer seconds before exec the command (default is 0)root@HomeNAS:~# å¥½çš„ï¼Œç°åœ¨å·²ç»çŸ¥é“äº†å¦‚ä½•åœ¨ç¾¤æ™–ä¸‹ç®¡ç†æœåŠ¡ï¼Œé‚£ä¹ˆæŒ‰ç…§æ­¥éª¤ï¼Œä¸‹ä¸€æ­¥åªéœ€è¦é‡å¯DockeræœåŠ¡ä½¿å…¶åº”ç”¨ä¸ŠåŠ é€Ÿå™¨åœ°å€å³å¯ã€‚ æŒ‰ç…§ä¸Šé¢çš„è§„å¾‹å¯æƒ³è€ŒçŸ¥ï¼Œåœ¨ç¾¤æ™–ä¸‹Dockerçš„å®ˆæŠ¤è¿›ç¨‹æœåŠ¡åç§°è‚¯å®šä¼šå’Œåœ¨ Ubuntu ä¸‹çš„åç§°ä¸ä¸€æ ·ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•æ¥æ‰¾åˆ°å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡ synoservicecfg --list å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ç¾¤æ™–ç³»ç»Ÿä¸‹æ‰€æœ‰è¿è¡Œçš„æœåŠ¡ï¼š 1234567891011121314151617root@HomeNAS:~# synoservicecfg --listDSMapparmoratalkavahibluetoothdbonjour......pkgctl-Dockerpkgctl-FileStationpkgctl-LogCenterpkgctl-PDFViewerpkgctl-PHP7.0pkgctl-PhotoStation...... å¯ä»¥çœ‹åˆ°é€šè¿‡ç¾¤æ™–çš„ â€œå¥—ä»¶ä¸­å¿ƒâ€ æ·»åŠ çš„å¥—ä»¶ç¨‹åºçš„æœåŠ¡åç§°å‡ä»¥ pkgctl- ä¸ºå‰ç¼€æ¥å‘½åã€‚ ç„¶åé‡å¯ç¾¤æ™–çš„dockeræœåŠ¡ï¼š 12root@HomeNAS:~# synoservice --restart pkgctl-Dockerroot@HomeNAS:~# å¦‚æœæ²¡æœ‰é”™è¯¯æç¤ºï¼Œè¯´æ˜dockeræœåŠ¡é‡å¯æ­£å¸¸ã€‚ ç°åœ¨æˆ‘ä»¬å†æ¬¡å›åˆ° DSM æ“ä½œç•Œé¢ä¸­ï¼Œé‡æ–°ä¸‹è½½æˆ‘ä»¬éœ€è¦çš„Dockeré•œåƒå³å¯ã€‚ å¯ä»¥çœ‹åˆ°ç°åœ¨åé¢çš„å®¹é‡å¤§å°ä¸€ç›´åœ¨å¢åŠ ï¼Œå¾ˆå¿«æˆ‘ä»¬å°±çœ‹åˆ° â€œæ¶ˆæ¯é€šçŸ¥â€ é‡Œæç¤ºæˆ‘ä»¬é•œåƒä¸‹è½½å®Œæˆäº†ã€‚ åé¢å°±æ˜¯é€šè¿‡é•œåƒæ¥åˆ›å»ºå®¹å™¨äº†ï¼Œåæ–‡ç»§ç»­ã€‚ ç›¸å…³å‚è€ƒ Synology DSM 6 (terminal) service control restart WebServer bash command Documentation for /var/packages/Docker/etc config files? Docker ä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ]]></content>
      <categories>
        <category>ç©è½¬ç¾¤æ™–NAS</category>
      </categories>
      <tags>
        <tag>SynologyNAS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç©è½¬ç¾¤æ™–NAS--å¼€ç¯‡]]></title>
    <url>%2F2017%2F11%2F17%2Fplaying-synology-nas-of-start%2F</url>
    <content type="text"><![CDATA[åŒåä¸€çš„æ—¶å€™åœ¨å¤©çŒ«ä¸Šå…¥æ‰‹äº†ä¸€å°ç¾¤æ™–çš„ DS218+ NASä¸»æœºï¼Œä¹Ÿç®—æ˜¯å¾ˆæ—©å°±æ‰“ç®—å…¥æ‰‹çš„ä¸€å°è®¾å¤‡ã€‚å†åŠ ä¸Šå»å¹´åŒåä¸€çš„æ—¶å€™åœ¨äº¬ä¸œè´­ç½®çš„ä¸¤ä¸ª4Tçš„ç¡¬ç›˜ï¼Œå°±å¼€å§‹äº†æˆ‘çš„ç©è½¬ç¾¤æ™–NASä¹‹æ—…ã€‚ å¯¹äºå¼€ç¯‡æ–‡ç« å‘¢ï¼Œä¹Ÿä¸æƒ³è¯´å¤ªå¤šå§ï¼Œä¸»è¦å°±æ˜¯ä½œä¸ºä¸€ä¸ª â€œç©è½¬ç¾¤æ™–NASâ€ ç³»åˆ—çš„ç›®å½•æ¥å±•ç¤ºï¼ŒåŒæ—¶ä¹Ÿç®—æ˜¯æ—¶åˆ»çš„æé†’è‡ªå·±è¿˜æ˜¯è¦å¤šå†™å†™ç¬”è®°çš„ã€‚ å¯¹äºç¾¤æ™–çš„â€œ+â€ç³»åˆ—NASï¼Œæœ€å€¼å¾—æŠŠç©çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯æ”¯æŒçš„Dockerå¥—ä»¶äº†ã€‚Dockerç®€ç›´å°±æ˜¯ä¸€ä¸ª â€œç¥å™¨â€ã€‚è‡³äºæœ‰å¤šä¹ˆç¥ï¼Œå°½ç®¡çœ‹æˆ‘åé¢çš„æ–‡ç« å§ï¼ ç›®å½• ç©è½¬ç¾¤æ™–NASâ€“å¼€ç¯‡ ç©è½¬ç¾¤æ™–NASâ€“DockeråŠ é€Ÿ ç©è½¬ç¾¤æ™–NASâ€“ä¸‹è½½ç¥å™¨aria2]]></content>
      <categories>
        <category>ç©è½¬ç¾¤æ™–NAS</category>
      </categories>
      <tags>
        <tag>SynologyNAS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡è·¯ç”±å™¨æ‰¾å›å¿˜è®°çš„å®½å¸¦å¯†ç ]]></title>
    <url>%2F2017%2F11%2F13%2Fretrieve-forgotten-broadband-passwords-through-routers%2F</url>
    <content type="text"><![CDATA[å¯èƒ½æ˜¯å› ä¸ºèµ¶ä¸Šäº†åŒåä¸€çš„ç¼˜æ•…,æœ€è¿‘æˆ‘çš„å®½å¸¦ç½‘ç»œæ€»æ˜¯æ—¶å¥½æ—¶åçš„,ç»™å®½å¸¦å®¢æœæ‰“äº†ç”µè¯,è¯´ä¼šæ‰¾å¸ˆå‚…è¿‡æ¥ç»™æˆ‘çœ‹çœ‹.çªç„¶é—´æƒ³èµ·æ¥å¥½åƒæˆ‘çš„å®½å¸¦è‡ªä»å®‰è£…ä¸Šä»¥å,æˆ‘å°±æ²¡å†æ”¹åŠ¨è¿‡,æ€ä¹ˆä¹Ÿæƒ³ä¸èµ·æ¥å®½å¸¦çš„å¯†ç äº†.è´¦å·çš„è¯å¯ä»¥åœ¨è·¯ç”±å™¨ä¸­ç›´æ¥çœ‹åˆ°,è€Œå¯†ç å´æ˜¯æ˜¾ç¤ºæˆæ˜Ÿå·,è¿˜ä¸èƒ½å¤åˆ¶å‡ºæ¥. æ‰€ä»¥ç‰¹æ„ä¸Šç½‘æ‰¾äº†æ‰¾æ–¹æ³•,è®°å½•äºæ­¤. å¤‡ä»½è·¯ç”±å™¨é…ç½®æˆ‘çš„è·¯ç”±å™¨æ˜¯ TP-Link WR847N å‹å·çš„ï¼Œå…¶ä»–è·¯ç”±å™¨çš„æ–¹æ³•ç±»ä¼¼ã€‚ ç¬¬ä¸€æ­¥ï¼šåœ¨æµè§ˆå™¨è¾“å…¥è·¯ç”±å™¨ç½‘å…³åœ°å€ï¼ˆä¸€èˆ¬æ˜¯192.168.1.1ï¼‰è¿›å…¥è·¯ç”±å™¨ç™»å½•ç•Œé¢ ç¬¬äºŒæ­¥ï¼šè¾“å…¥è·¯ç”±å™¨è´¦å·å’Œå¯†ç ç™»å½•ï¼ˆå¦‚æœæœªæ›´æ”¹è¿‡ä¸€èˆ¬éƒ½æ˜¯adminï¼‰åˆ°è·¯ç”±å™¨ç®¡ç†ç•Œé¢ ç¬¬ä¸‰æ­¥ï¼šåœ¨å·¦èœå•æ ç‚¹å‡» â€œç³»ç»Ÿå·¥å…·â€ â€“ â€œå¤‡ä»½å’Œè½½å…¥é…ç½®â€ ç¬¬å››æ­¥ï¼šåœ¨å³ä¾§å¯¹è¯æ¡†ä¸­ç‚¹å‡» â€œå¤‡ä»½é…ç½®æ–‡ä»¶â€ æŒ‰é’® ç¬¬äº”æ­¥ï¼šä¿å­˜é…ç½®æ–‡ä»¶ï¼Œåç§°ä¸º config.bin ã€‚ é€šè¿‡é…ç½®æ–‡ä»¶æ‰¾å›ç¬¬å…­æ­¥ï¼šä»ç½‘ç«™ RouterPassView ä¸‹è½½è½¯ä»¶RouterPassViewã€‚ RouterPassView æ˜¯ NirSoft å‡ºå“çš„ä¸€æ¬¾è·¯ç”±å¯†ç æ¢å¤è½¯ä»¶ï¼Œå¯ä»¥æŸ¥çœ‹ç»å¤§å¤šæ•°å®¶ç”¨è·¯ç”±çš„é…ç½®æ–‡ä»¶ä¸­ä¿å­˜çš„å¯†ç ã€‚ ç¬¬ä¸ƒæ­¥ï¼šç”¨ RouterPassViewæ‰“å¼€å¤‡ä»½çš„é…ç½®æ–‡ä»¶ config.bin, å°±èƒ½çœ‹åˆ°å½“å‰è·¯ç”±å™¨ä¸Šå·²é…ç½®çš„æ‰€æœ‰è´¦å·å’Œå¯†ç äº†ã€‚ é™„ä»¶ç™¾åº¦ç½‘ç›˜é“¾æ¥: Download å¯†ç : hwpx]]></content>
      <tags>
        <tag>Skill</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¢ç±³Note4Xé«˜é€šç‰ˆå‡çº§MIUI9]]></title>
    <url>%2F2017%2F11%2F12%2FRedmiNote4X-HP-version-upgrade-miui9%2F</url>
    <content type="text"><![CDATA[åŒåä¸€å½“å¤©åœ¨äº¬ä¸œä¸Šä¹°äº†ä¸€ä¸ªçº¢ç±³Note4Xé«˜é€šç‰ˆçš„æ‰‹æœº,æ”¶åˆ°è´§åå‘ç°ç³»ç»Ÿä»ç„¶æ˜¯MIUI8çš„ç¨³å®šç‰ˆ.ä¹‹å‰çœ‹è¿‡MIUI9çš„ä»‹ç»è§†é¢‘,å®˜æ–¹ç»™å‡ºçš„æ ‡è¯­æ˜¯â€å¿«å¦‚é—ªç”µâ€,æ‰€ä»¥å°±æƒ³ä½“éªŒä¸€æŠŠ.æˆ‘çš„æ–¹æ³•æ˜¯é‡‡ç”¨ å¡åˆ· çš„æ–¹å¼ï¼Œä¸éœ€è¦BLè§£é”ã€‚ å½“å‰ç³»ç»Ÿç‰ˆæœ¬åœ¨æ‰‹æœºçš„â€è®¾ç½®â€â€“â€æˆ‘çš„è®¾å¤‡â€ ä¸‹æŸ¥çœ‹å½“å‰çš„MIUIç‰ˆæœ¬: 1MIUI 8.5 ç¨³å®šç‰ˆ 8.5.6.0(MCFCNED) å…ˆä»ç¨³å®šç‰ˆå‡çº§å¼€å‘ç‰ˆä¸èƒ½ç›´æ¥åˆ·æœ€æ–°ç‰ˆå› ä¸ºå°ç±³Note4xç¨³å®šç‰ˆ8.5çš„ç³»ç»Ÿæ˜¯åŸºäºAndroid6.0å¼€å‘çš„ï¼Œè€Œæœ€æ–°çš„MIUI9æ˜¯åŸºäºAndroid7.0å¼€å‘çš„ï¼ŒAndroidç‰ˆæœ¬ä¸ä¸€è‡´ä¹Ÿå°±å¯¼è‡´æ— æ³•ç›´æ¥å¡åˆ·åˆ°æœ€æ–°ç‰ˆï¼Œä¼šæŠ¥é”™ã€‚ å¯è¡Œçš„æ–¹æ³•æ˜¯å¯ä»¥å…ˆå¡åˆ·MIUI8 7.4.6 çš„å¼€å‘ç‰ˆï¼ˆåŸºäºAndroid6.0ï¼‰ï¼Œç„¶åå†åˆ·MIUI9æœ€æ–°çš„å¼€å‘ç‰ˆã€‚ å¡åˆ·Android6.0å¼€å‘ç‰ˆä¸‹è½½ 7.4.6 å¼€å‘ç‰ˆå¡åˆ·åŒ…,ç„¶åæ‹·è´åˆ°æ‰‹æœºçš„å†…ç½®å­˜å‚¨ä¸­ã€‚ åœ¨æ‰‹æœºç«¯é€‰æ‹© è®¾ç½® â€“ æˆ‘çš„è®¾å¤‡ â€“ MIUIç‰ˆæœ¬ â€“ è¿›å…¥ â€œç³»ç»Ÿå‡çº§â€ ç•Œé¢ ç‚¹å‡» å³ä¸Šè§’ä¸‰ç‚¹ ï¼Œé€‰æ‹© æ‰‹åŠ¨é€‰æ‹©å®‰è£…åŒ… é€‰æ‹©åˆšåˆšä¸‹è½½çš„å¡åˆ·åŒ…ï¼Œç¡®å®šã€‚ç­‰å¾…å…¶è§£å¯†å¹¶è‡ªåŠ¨å‡çº§ã€‚ å‡çº§å®Œæˆåï¼Œåœ¨ è®¾ç½® â€“ æˆ‘çš„è®¾å¤‡ â€“ MIUIç‰ˆæœ¬ â€“ è¿›å…¥ â€œç³»ç»Ÿå‡çº§â€ ç•Œé¢ è¿™æ—¶å¦‚æœç‚¹å‡» â€œæ£€æŸ¥æ›´æ–°â€ çš„è¯ï¼Œæ”¶åˆ°çš„åº”è¯¥æ˜¯MIUI8çš„æœ€æ–°å¼€å‘ç‰ˆçš„æ›´æ–°åŒ…,æ‰€ä»¥è¿™é‡Œä¸ç‚¹å‡»â€œç«‹å³æ›´æ–°â€ã€‚(MIUIè®ºå›ä¸­å®˜æ–¹ç»™å‡ºçš„è¯´æ³•æ˜¯ç°åœ¨MIUI8å¼€å‘ç‰ˆå¯ä»¥ç›´æ¥è‡ªåŠ¨æ£€æŸ¥å‡çº§åˆ°MIUI9çš„æœ€æ–°å¼€å‘ç‰ˆäº†,ä¸çŸ¥é“æˆ‘è¿™é‡Œä¸ºä»€ä¹ˆä¸è¡Œ?å¦‚æœä½ çš„å¯ä»¥,é‚£å°±ç›´æ¥å‡çº§å³å¯,å¦åˆ™ç»§ç»­ä¸‹é¢çš„æ“ä½œ) å¡åˆ·MIUI9æœ€æ–°å¼€å‘ç‰ˆä»ç½‘å€ http://www.miui.com/download-326.html ä¸‹è½½ çº¢ç±³Note4X(é«˜é€šå¹³å°) çš„æœ€æ–°å¼€å‘ç‰ˆçš„å®Œæ•´å¡åˆ·åŒ…ï¼Œç„¶åæ‹·è´åˆ°æ‰‹æœºä¸­ï¼Œä¾ç…§ä¸Šä¸€æ­¥çš„æ“ä½œæ–¹æ³•é€šè¿‡ æ‰‹åŠ¨æ›´æ–° çš„æ–¹å¼æ¥å‡çº§ã€‚ æˆ‘è¿™é‡Œä¸‹è½½åˆ°çš„æ˜¯å½“å‰çš„æœ€æ–°ç‰ˆæœ¬ MIUI9å¼€å‘ç‰ˆ 7.11.9 çš„ç‰ˆæœ¬ : miui_HMNote4X_7.11.9_71db0b04ec_7.0.zip ã€‚ ç­‰å¾…å…¶è§£å¯†å®‰è£…åŒ…å¹¶è‡ªåŠ¨æ›´æ–°å®Œæˆå³å¯ã€‚ ä¸Šé¢çš„æ•´ä¸ªå‡çº§è¿‡ç¨‹è¦ä¿è¯æ‰‹æœºç”µé‡å……è¶³,æŒ‰ç…§æ­¥éª¤æ“ä½œå³å¯,éå¸¸é€‚åˆå°ç™½å‡çº§. é™„ä»¶ç™¾åº¦ç½‘ç›˜ Download å¯†ç : d2v7 MIUI8(Android6.0)_7.4.6.zip MIUI9(Android7.0)_7.11.9.zip]]></content>
      <tags>
        <tag>XiaoMI</tag>
        <tag>Skill</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢æ·»åŠ æœç´¢åŠŸèƒ½]]></title>
    <url>%2F2017%2F10%2F27%2Fadd-search-function-to-hexo-blog%2F</url>
    <content type="text"><![CDATA[æ¸æ¸çš„éšç€hexoåšå®¢ä¸­æ–‡ç« è¶Šæ¥è¶Šå¤šäº†ä¹‹å,å¹³æ—¶æƒ³è¦æŸ¥æ‰¾ä¸€ç¯‡æ–‡ç« æ—¶,ä¸€èˆ¬éƒ½æ˜¯è®°å¾—éƒ¨åˆ†æ ‡é¢˜å†…å®¹æˆ–è€…æŸäº›å…³é”®è¯,è€Œåœ¨â€å½’æ¡£â€ä¸‹é€šè¿‡æ ‡é¢˜ä¸€é¡µä¸€é¡µçš„æ‰¾åˆéå¸¸çš„éº»çƒ¦.æ‰€ä»¥è€ƒè™‘ä¸ºåšå®¢å¢åŠ æœç´¢åŠŸèƒ½. ä»Nextä¸»é¢˜ç½‘ç«™ä¸Šæˆ‘ä»¬å¯ä»¥æœç´¢å¤šæ¬¾æœç´¢æ’ä»¶ ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ â€“ Nextæ–‡æ¡£,ä¸ªäººæ„Ÿè§‰ â€œLocal Searchâ€ å’Œ â€œAlgoliaâ€ è¿™ä¸¤æ¬¾æœç´¢æ’ä»¶æ¯”è¾ƒå’Œæˆ‘çš„å¿ƒæ„. ä¸‹é¢ç®€è¦çš„ä»‹ç»ä¸ºhexoåšå®¢æ·»åŠ æœç´¢æ’ä»¶çš„è¿‡ç¨‹. å‡çº§Nextä¸»é¢˜ç‰ˆæœ¬æˆ‘çš„hexoä¸»é¢˜å®‰è£…çš„æ˜¯ Next ä¸»é¢˜,å½“å‰ç‰ˆæœ¬ä¸º v5.0.1 .æœ€æ–°ç‰ˆæœ¬ä¸º 5.1.3. å› ä¸ºæˆ‘çš„hexoä¸»é¢˜ç‰ˆæœ¬å·®è·å¤ªå¤§,è€Œä¸”æˆ‘åœ¨ next ä¸»é¢˜ç›®å½•ä¸‹çš„ .git ç›®å½•æˆ‘å·²ç»åˆ é™¤äº†,æ‰€ä»¥æˆ‘é‡‡ç”¨å®Œå…¨æ›´æ–°çš„æ–¹å¼. å…ˆå¤‡ä»½æœ¬åœ°çš„ hexo ä¸»é¢˜ç›®å½• your-hexo-site/themes/next ,å…¶å®åªéœ€è¦å¤‡ä»½ _config.yml ä¸€ä¸ªæ–‡ä»¶å³å¯,ä¸ºäº†ä¿é™©è¿™é‡Œæˆ‘å°†æ•´ä¸ªç›®å½•éƒ½å¤‡ä»½ä¸€ä¸‹. å¦å¤–è¿˜è¦æ³¨æ„å¦‚æœä½ ä¹‹å‰æ·»åŠ äº†è‡ªå®šä¹‰å¤´åƒåŠæ‰“èµåŠŸèƒ½ç­‰æ‰€éœ€å›¾ç‰‡,æ·»åŠ çš„å›¾ç‰‡æ˜¯åœ¨ /themes/next/source/images/ ç›®å½•ä¸‹çš„,ä¹Ÿè¦è®°å¾—åšå¥½å¤‡ä»½. å¦‚æœä½ æœ¬åœ°çš„ä¸»é¢˜ next ç›®å½•ä¸‹çš„ .git ç›®å½•æ²¡æœ‰åˆ é™¤,ä½ å¯ä»¥ç›´æ¥é€šè¿‡ git pull å‘½ä»¤æ¥æ›´æ–°: 12$ cd themes/next$ git pull å®Œå…¨æ›´æ–°å…ˆåˆ é™¤æœ¬åœ°ç°åœ¨çš„ next ä¸»é¢˜ç›®å½•: 12$ cd &lt;your-hexo-site&gt;$ rm -rf ./themes/next ä»githubä¸‹è½½ hexo ä¸»é¢˜æ–‡ä»¶æœ€æ–°ç‰ˆæœ¬: 12$ cd &lt;your-hexo-site&gt;$ git clone https://github.com/iissnan/hexo-theme-next themes/next æ¯”ç…§æ–°çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ _config.yml ,å°†æ—§çš„ä¸»é¢˜æ–‡ä»¶ä¸­çš„å†…å®¹æ·»åŠ åˆ°æ–°æ–‡ä»¶ä¸­. æˆ‘è¿™é‡Œæ›´æ”¹çš„åœ°æ–¹æœ‰: menu scheme social sidebar highlight_theme tencent_analytics æ‰“èµåŠŸèƒ½ reward_comment wechatpay alipay ç«™ç‚¹å»ºç«‹æ—¶é—´ since æ›´æ”¹å,æ¸…é™¤ç¼“å­˜,ç„¶åå†æŸ¥çœ‹: 12345$ hexo clean$ hexo s -gINFO Start processingINFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. æ‰“å¼€æµè§ˆå™¨,æŸ¥çœ‹é¡µé¢ä¸­æ˜¯å¦æœ‰é”™è¯¯å¹¶ä¿®æ”¹. LocalSearchæœç´¢å®‰è£… hexo-generator-searchdbï¼Œåœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1$ npm install hexo-generator-searchdb --save ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ–°å¢ä»¥ä¸‹å†…å®¹åˆ°ä»»æ„ä½ç½®ï¼š 12345search: path: search.xml field: post format: html limit: 10000 ç¼–è¾‘ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æœ¬åœ°æœç´¢åŠŸèƒ½ï¼š 123# Local searchlocal_search: enable: true ç„¶å é‡æ–°ç”Ÿæˆ æŸ¥çœ‹: 12345$ hexo clean$ hexo s -gINFO Start processingINFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. è¿™æ ·,æœç´¢åŠŸèƒ½å°±æ·»åŠ ä¸Šäº†. Algoliaæœç´¢è¯¦æƒ…å¯å‚è€ƒå®˜æ–¹æ•™ç¨‹,è¿™é‡Œä¸å†è¯¦è¿°. Algolia â€“ Nextæ–‡æ¡£ ç›¸å…³é“¾æ¥ æœç´¢æœåŠ¡ â€“ Nextæ–‡æ¡£ hexo-generator-search hexo-algoliasearch Hexoé›†æˆAlgoliaæœç´¢æ’ä»¶]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Search</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç³»ç»Ÿä¸‹é…ç½®Hexoåšå®¢è¿è¡Œç¯å¢ƒé‡åˆ°çš„é—®é¢˜]]></title>
    <url>%2F2017%2F10%2F27%2Fproblems-for-configuring-hexo-blog-in-mac%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨Macä¸‹æ›´æ–°hexoåšå®¢æ—¶,é‡åˆ°äº†ä¸€äº›å®‰è£… Node.js å’Œå®‰è£… hexo ç›¸å…³çš„å°é—®é¢˜,ç‰¹æ­¤è®°å½•ä¸‹æ¥. Macä¸‹é…ç½®Node.jsç¯å¢ƒå®‰è£… node.js æœ‰å¤šç§æ–¹æ³•ï¼šä½¿ç”¨ homebrew å®‰è£…æˆ–è€…ç›´æ¥ä¸‹è½½ å®‰è£…åŒ…ã€‚ å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ä»node.jså®˜ç½‘ Node.js ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…,æ‰“å¼€ä¼šæç¤ºå®‰è£…ä½ç½®: 123This package will install: â€¢ Node.js v8.8.1 to /usr/local/bin/node â€¢ npm v5.4.2 to /usr/local/bin/npm æŒ‰ç…§æ­¥éª¤å®‰è£…å³å¯. homebrewå®‰è£…é€šè¿‡ homebrew å®‰è£…,ç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: 1$ brew install node æ£€æµ‹å®‰è£…æ˜¯å¦æˆåŠŸç»ˆç«¯è¾“å…¥ -v , æˆåŠŸåˆ™æ˜¾ç¤ºç‰ˆæœ¬å·: 12345$ node -vv8.8.1$ npm -v5.4.2$ Macç³»ç»Ÿä¸‹Finderæ˜¾ç¤ºéšè—æ–‡ä»¶æ¶‰åŠåˆ°ä¸€äº›ä»¥ . å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•(å¦‚.gitç›®å½•)æˆ–è€…éšè—æ–‡ä»¶,é»˜è®¤åœ¨Finderä¸‹æ˜¯çœ‹ä¸åˆ°çš„. æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤ Command+Shift+. æ¥åœ¨Finderä¸­å¿«é€Ÿçš„åˆ‡æ¢æ˜¾ç¤ºå‡ºéšè—çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹,å†æŒ‰ä¸€æ¬¡,æ¢å¤éšè—. æ›´æ¢Node.jsé•œåƒæºç”±äºnpmçš„å®˜æ–¹é•œåƒæºåœ¨å›½å¤–,è€Œç”±äºå›½å†…â€ä¼—æ‰€å‘¨çŸ¥çš„â€çš„ç½‘ç»œåŸå› ,è®¿é—®é»˜è®¤çš„å®˜æ–¹é•œåƒæºå¸¸å¸¸ä¼šå‡ºé—®é¢˜.æˆ‘ä»¬å¯ä»¥æ›´æ”¹ä¸ºå›½å†…çš„é•œåƒæºæ¥åŠ é€Ÿè½¯ä»¶çš„å®‰è£…. æ·˜å®npmé•œåƒç›®å‰å›½å†…æ¨èçš„æ˜¯æ·˜å®çš„npmé•œåƒ: æœç´¢åœ°å€ï¼šhttp://npm.taobao.org/ registryåœ°å€ï¼šhttp://registry.npm.taobao.org/ å¦‚ä½•ä½¿ç”¨ä¸´æ—¶ä½¿ç”¨ä»¥ä¸‹è½½ express è½¯ä»¶ä¸ºä¾‹: 1npm --registry https://registry.npm.taobao.org install express æŒä¹…ä½¿ç”¨1npm config set registry https://registry.npm.taobao.org é…ç½®åå¯é€šè¿‡ä¸‹é¢æ–¹å¼æ¥æŸ¥çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸ: 1npm config get registry æˆ‘çš„æ“ä½œè®°å½•: 123456$ npm config get registryhttps://registry.npmjs.org/$ npm config set registry https://registry.npm.taobao.org$ npm config get registryhttps://registry.npm.taobao.org/$ æé†’ : æˆ‘åœ¨å®é™…æ“ä½œæ—¶å‘ç°æ·˜å®çš„npmé•œåƒæºæœ‰æ—¶å€™ä¹Ÿä¼šè¯·æ±‚å¤±è´¥,ç„¶ååˆåˆ‡æ¢å›äº†å®˜æ–¹æº(npm config set registry https://registry.npmjs.org/)å‘ç°èƒ½å¤Ÿæ“ä½œæˆåŠŸäº†.æ‰€ä»¥æ˜¯å¦æ›´æ¢é•œåƒæºè¿˜è¦æ ¹æ®å®é™…æƒ…å†µæ¥å®š. 123456789101112131415161718192021222324252627282930313233343536373839$ npm config get registryhttps://registry.npm.taobao.org/$ npm installnpm ERR! code ENOTFOUNDnpm ERR! errno ENOTFOUNDnpm ERR! network request to https://registry.npm.taobao.org/hexo-generator-category failed, reason: getaddrinfo ENOTFOUND registry.npm.taobao.org registry.npm.taobao.org:443npm ERR! network This is a problem related to network connectivity.npm ERR! network In most cases you are behind a proxy or have bad network settings.npm ERR! networknpm ERR! network If you are behind a proxy, please make sure that thenpm ERR! network &apos;proxy&apos; config is set properly. See: &apos;npm help config&apos;npm ERR! A complete log of this run can be found in:npm ERR! /Users/xxx/.npm/_logs/2017-10-26T14_59_23_770Z-debug.log$ $ $ npm config set registry https://registry.npmjs.org/$ npm installnpm WARN deprecated swig@1.4.2: This package is no longer maintained&gt; dtrace-provider@0.8.5 install /Users/xxx/Project17/Leafney.github.io/node_modules/dtrace-provider&gt; node scripts/install.js&gt; fsevents@1.1.2 install /Users/xxx/Project17/Leafney.github.io/node_modules/fsevents&gt; node install[fsevents] Success: &quot;/Users/xxx/Project17/Leafney.github.io/node_modules/fsevents/lib/binding/Release/node-v57-darwin-x64/fse.node&quot; already installedPass --update-binary to reinstall or --build-from-source to recompile&gt; hexo-util@0.6.1 postinstall /Users/xxx/Project17/Leafney.github.io/node_modules/hexo-util&gt; npm run build:highlight&gt; hexo-util@0.6.1 build:highlight /Users/xxx/Project17/Leafney.github.io/node_modules/hexo-util&gt; node scripts/build_highlight_alias.js &gt; highlight_alias.jsonnpm notice created a lockfile as package-lock.json. You should commit this file.added 430 packages in 119.035s Mac install hexo use sudo but sitll permission deniedå®‰è£…æŠ¥é”™å‚ç…§hexoå®˜ç½‘ Hexo å®‰è£…hexoæ—¶,ä½¿ç”¨å‘½ä»¤ npm install hexo-cli -g å´æŠ¥æ²¡æœ‰æƒé™: 123456789101112131415161718$ npm install hexo-cli -gnpm WARN checkPermissions Missing write access to /usr/local/lib/node_modulesnpm ERR! path /usr/local/lib/node_modulesnpm ERR! code EACCESnpm ERR! errno -13npm ERR! syscall accessnpm ERR! Error: EACCES: permission denied, access &apos;/usr/local/lib/node_modules&apos;npm ERR! &#123; Error: EACCES: permission denied, access &apos;/usr/local/lib/node_modules&apos;npm ERR! stack: &apos;Error: EACCES: permission denied, access \&apos;/usr/local/lib/node_modules\&apos;&apos;,npm ERR! errno: -13,npm ERR! code: &apos;EACCES&apos;,npm ERR! syscall: &apos;access&apos;,npm ERR! path: &apos;/usr/local/lib/node_modules&apos; &#125;npm ERR!npm ERR! Please try running this command again as root/Administrator.npm ERR! A complete log of this run can be found in:npm ERR! /Users/xxx/.npm/_logs/2017-10-27T01_21_01_871Z-debug.log ç„¶åæˆ‘æ¢ç”¨ç®¡ç†å‘˜æƒé™,åŠ ä¸Š sudo ,æ‰§è¡Œå¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465$ sudo npm install hexo-cli -gPassword:/usr/local/bin/hexo -&gt; /usr/local/lib/node_modules/hexo-cli/bin/hexo&gt; dtrace-provider@0.8.5 install /usr/local/lib/node_modules/hexo-cli/node_modules/dtrace-provider&gt; node scripts/install.jsfs.js:768 return binding.rename(pathModule._makeLong(oldPath), ^Error: EACCES: permission denied, rename &apos;/usr/local/lib/node_modules/hexo-cli/node_modules/dtrace-provider/compile.py&apos; -&gt; &apos;/usr/local/lib/node_modules/hexo-cli/node_modules/dtrace-provider/binding.gyp&apos; at Object.fs.renameSync (fs.js:768:18) at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/hexo-cli/node_modules/dtrace-provider/scripts/install.js:14:4) at Module._compile (module.js:612:30) at Object.Module._extensions..js (module.js:623:10) at Module.load (module.js:531:32) at tryModuleLoad (module.js:494:12) at Function.Module._load (module.js:486:3) at Function.Module.runMain (module.js:653:10) at startup (bootstrap_node.js:187:16) at bootstrap_node.js:608:3&gt; fsevents@1.1.2 install /usr/local/lib/node_modules/hexo-cli/node_modules/fsevents&gt; node install[fsevents] Success: &quot;/usr/local/lib/node_modules/hexo-cli/node_modules/fsevents/lib/binding/Release/node-v57-darwin-x64/fse.node&quot; already installedPass --update-binary to reinstall or --build-from-source to recompile&gt; hexo-util@0.6.1 postinstall /usr/local/lib/node_modules/hexo-cli/node_modules/hexo-util&gt; npm run build:highlight&gt; hexo-util@0.6.1 build:highlight /usr/local/lib/node_modules/hexo-cli/node_modules/hexo-util&gt; node scripts/build_highlight_alias.js &gt; highlight_alias.jsonsh: highlight_alias.json: Permission deniednpm ERR! code ELIFECYCLEnpm ERR! errno 1npm ERR! hexo-util@0.6.1 build:highlight: `node scripts/build_highlight_alias.js &gt; highlight_alias.json`npm ERR! Exit status 1npm ERR!npm ERR! Failed at the hexo-util@0.6.1 build:highlight script.npm ERR! This is probably not a problem with npm. There is likely additional logging output above.â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ npm update check failed â”‚â”‚ Try running with sudo or get access â”‚â”‚ to the local update config store via â”‚â”‚ sudo chown -R $USER:$(id -gn $USER) /Users/xxx/.config â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜npm WARN optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.8.5 (node_modules/hexo-cli/node_modules/dtrace-provider):npm WARN optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.8.5 install: `node scripts/install.js`npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1npm ERR! code ELIFECYCLEnpm ERR! errno 1npm ERR! hexo-util@0.6.1 postinstall: `npm run build:highlight`npm ERR! Exit status 1npm ERR!npm ERR! Failed at the hexo-util@0.6.1 postinstall script.npm ERR! This is probably not a problem with npm. There is likely additional logging output above.npm ERR! A complete log of this run can be found in:npm ERR! /Users/xxx/.npm/_logs/2017-10-27T02_56_29_887Z-debug.log è§£å†³æ–¹æ³•ç¬¬ä¸€æ­¥,èµ‹äºˆç›®å½•æƒé™: 1$ sudo chown -R `whoami` /usr/local/lib/node_modules ç¬¬äºŒæ­¥,å®‰è£…hexo: 1$ npm install hexo-cli -g éœ€è¦æ³¨æ„çš„ç‚¹: åœ¨å®‰è£…hexoæ—¶,ä¸è¦ç”¨ sudo å‘½ä»¤. ç›¸å…³å‚è€ƒ å›½å†…ä¼˜ç§€npmé•œåƒæ¨èåŠä½¿ç”¨ Mac install hexo use sudo but sitll permission denied npm update -g fails and causes /usr/local/lib/node_modules to be deleted]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker-Ubuntu-Gogsæ•°æ®åº“åŠåˆå§‹åŒ–é…ç½®]]></title>
    <url>%2F2017%2F09%2F07%2Fdocker-ubuntu-gogs-initialization%2F</url>
    <content type="text"><![CDATA[Ubuntu-Gogs é¦–æ¬¡è¿è¡Œå®‰è£…ç¨‹åºé…ç½®åŠå¤šæ•°æ®åº“é…ç½®æ–¹æ³•æ•´ç†ã€‚ app.iniä¸­æ•°æ®åº“é…ç½®è¯´æ˜ åç§° æè¿° DB_TYPE æ•°æ®åº“ç±»å‹ï¼Œå¯ä»¥æ˜¯ mysqlã€postgresã€mssql æˆ– sqlite3 HOST æ•°æ®åº“ä¸»æœºåœ°å€ä¸ç«¯å£ NAME æ•°æ®åº“åç§° USER æ•°æ®åº“ç”¨æˆ·å PASSWD æ•°æ®åº“ç”¨æˆ·å¯†ç  SSL_MODE ä»…é™ PostgreSQL ä½¿ç”¨ PATH ä»…é™ SQLite3 ä½¿ç”¨ï¼Œæ•°æ®åº“æ–‡ä»¶è·¯å¾„ åˆæ¬¡å¯åŠ¨æ—¶æ•°æ®åº“è®¾ç½®Gogs è¦æ±‚å®‰è£… MySQLã€PostgreSQLã€SQLite3ã€MSSQL æˆ– TiDBã€‚ SQLite3æ•°æ®åº“è®¾ç½® æ•°æ®åº“ç±»å‹ ï¼šSQLite3 æ•°æ®åº“æ–‡ä»¶è·¯å¾„ ï¼šå¯ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š/app/gogs/data/gogs.db æˆ–è€… ç›¸å¯¹è·¯å¾„ï¼šdata/gogs.db ï¼ˆæ¨èä½¿ç”¨ç»å¯¹è·¯å¾„ï¼‰ app.iniä¸­é…ç½®ç»“æœ12345678[database]DB_TYPE = sqlite3HOST = 127.0.0.1:3306NAME = gogsUSER = rootPASSWD = SSL_MODE = disablePATH = /app/gogs/data/gogs.db ç¤ºä¾‹å®¹å™¨1$ docker run --name gogs1 -d -p 10080:3000 -p 10022:22 -v /home/tiger/gogsfile:/app leafney/ubuntu-gogs MySQLæ•°æ®åº“è®¾ç½® æ•°æ®åº“ç±»å‹ ï¼šMySQL æ•°æ®åº“ä¸»æœº ï¼š127.0.0.1:3306 æ•°æ®åº“ç”¨æˆ· ï¼šroot æ•°æ®åº“ç”¨æˆ·å¯†ç  : ******* æ•°æ®åº“åç§° ï¼šgogs app.iniä¸­é…ç½®ç»“æœ12345678[database]DB_TYPE = mysqlHOST = 127.0.0.1:3306NAME = gogsUSER = rootPASSWD = `123456`SSL_MODE = disablePATH = data/gogs.db ç¤ºä¾‹å®¹å™¨ç¬¬ä¸€ç§æ–¹æ³•ï¼šåˆ›å»ºmysqlå®¹å™¨å’Œgogså®¹å™¨ï¼Œè®©gogså®¹å™¨é€šè¿‡ --link ç›´æ¥é“¾æ¥mysqlå®¹å™¨ã€‚ åˆ›å»ºmysqlå®¹å™¨ï¼Œå¹¶è®¾ç½®rootè´¦æˆ·å¯†ç ï¼š123456ï¼›æ–°ç”¨æˆ·ï¼šgogs123ï¼›å¯†ç ï¼šgogs123ï¼›æ–°ç”¨æˆ·æ•°æ®åº“ï¼šgogs ï¼š 1$ docker run --name mysqlgogs -v /home/tiger/mysqldb/:/var/lib/mysql -v /home/tiger/mysqldbase/:/home/mysqldbase/ -d -e MYSQL_ROOT_PWD=&quot;123456&quot; -e MYSQL_USER=gogs123 -e MYSQL_USER_PWD=&quot;gogs123&quot; -e MYSQL_USER_DB=&quot;gogs&quot; leafney/docker-alpine-mysql åˆ›å»ºgogså®¹å™¨å¹¶é“¾æ¥ï¼š 1$ docker run --name gogs2 -d -p 10080:3000 -p 10022:22 --link mysqlgogs:mydb -v /home/tiger/gogsfile:/app leafney/ubuntu-gogs ç›¸å¯¹åº”çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š æ•°æ®åº“ç±»å‹ ï¼šMySQL æ•°æ®åº“ä¸»æœº ï¼šmydb:3306 æ•°æ®åº“ç”¨æˆ· ï¼šgogs123 æ•°æ®åº“ç”¨æˆ·å¯†ç  : ******* æ•°æ®åº“åç§° ï¼šgogs ç¬¬äºŒç§æ–¹æ³•ï¼šè®©gogså®¹å™¨é“¾æ¥å·²æœ‰mysqlåœ°å€ã€‚ åœ¨åˆ›å»ºgogså®¹å™¨ä¹‹å‰ï¼Œå…ˆåˆ›å»ºmysqlæ•°æ®åº“ï¼š åœ¨ä¸‹è½½çš„ gogs å‹ç¼©åŒ…ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸º mysql.sql çš„æ–‡ä»¶ï¼Œæ˜¯ç”¨æ¥åˆå§‹åŒ–mysqlæ•°æ®åº“çš„ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12DROP DATABASE IF EXISTS gogs;CREATE DATABASE IF NOT EXISTS gogs CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci; ä½¿ç”¨ root è´¦æˆ·ç™»å½•ï¼Œç„¶åæ‰§è¡Œ mysql -u root -p &lt; mysql.sql ï¼ˆéœ€è¦è¾“å…¥å¯†ç ï¼‰å³å¯åˆå§‹åŒ–å¥½æ•°æ®åº“ã€‚ è¿˜è¦æ³¨æ„ï¼šä½¿ç”¨ MySQL æ•°æ®åº“æ—¶ï¼Œå¿…é¡»è¦ä¿è¯mysqlçš„å­˜å‚¨å¼•æ“ä¸º INNODB ä¸” ç¼–ç æ ¼å¼ä¸º utf8_general_ci ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­å¥æ¥è®¾ç½®ï¼š 12use gogs;set global storage_engine=INNODB; æˆ–è€…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ•°æ®åº“ gogs åŠæ–°ç”¨æˆ· gogsUser, å¹¶å°†æ•°æ®åº“ gogs çš„æ‰€æœ‰æƒé™éƒ½èµ‹äºˆè¯¥ç”¨æˆ·,å¯†ç  123456: 123456mysql -u root -pmysql&gt; SET GLOBAL storage_engine = &apos;InnoDB&apos;;mysql&gt; CREATE DATABASE gogs CHARACTER SET utf8 COLLATE utf8_bin;mysql&gt; GRANT ALL PRIVILEGES ON gogs.* TO &apos;gogsUser&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;123456&apos;;mysql&gt; FLUSH PRIVILEGES;mysql&gt; QUITï¼› ä½¿ç”¨ Gogs æ­å»ºè‡ªå·±çš„ Git æœåŠ¡å™¨ - My Nook PostgreSQLæ•°æ®åº“è®¾ç½® æ•°æ®åº“ç±»å‹ ï¼šPostgreSQL æ•°æ®åº“ä¸»æœº ï¼š127.0.0.1:5432 æ•°æ®åº“ç”¨æˆ· ï¼šgogs æ•°æ®åº“ç”¨æˆ·å¯†ç  : ******* æ•°æ®åº“åç§° ï¼šgogs SSL æ¨¡å¼ : Disable (å¯é€‰ï¼šDisable Require Verify Full) app.iniä¸­é…ç½®ç»“æœ12345678[database]DB_TYPE = postgresHOST = 127.0.0.1:5432NAME = gogsUSER = gogsPASSWD = gogsSSL_MODE = disablePATH = data/gogs.db ç¤ºä¾‹å®¹å™¨ç¬¬ä¸€ç§æ–¹æ³•ï¼šåˆ›å»ºpostgersqlå®¹å™¨å’Œgogså®¹å™¨ åˆ›å»ºpostgresqlå®¹å™¨ï¼Œè¿™é‡Œä½¿ç”¨å®¹å™¨ docker pull ananthhh/postgressï¼š 1docker run --name postgress -p 5432:5432 -e POSTGRES_PASSWORD=gogs -e POSTGRES_USER=gogs -d ananthhh/postgress è¯¥postgresqlå®¹å™¨åˆ›å»ºçš„ç”¨æˆ·ä¸ºï¼šgogsï¼›ç”¨æˆ·å¯†ç ï¼šgogs; æ•°æ®åº“ï¼šgogs ã€‚ åˆ›å»ºgogså®¹å™¨å¹¶é€šè¿‡ --link å‚æ•°é“¾æ¥ï¼š 1$ docker run --name gogs3 -d -p 10080:3000 -p 10022:22 -v /home/tiger/gogsfile:/app --link postgress:psqldb leafney/ubuntu-gogs ç›¸å¯¹åº”çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š æ•°æ®åº“ç±»å‹ ï¼šPostgreSQL æ•°æ®åº“ä¸»æœº ï¼špsqldb:5432 æ•°æ®åº“ç”¨æˆ· ï¼šgogs æ•°æ®åº“ç”¨æˆ·å¯†ç  : ******* æ•°æ®åº“åç§° ï¼šgogs SSL æ¨¡å¼ : Disable ç¬¬äºŒç§æ–¹æ³•ï¼šè®©gogså®¹å™¨é“¾æ¥å·²æœ‰PostgreSQLåœ°å€ã€‚ ä½¿ç”¨æŒ‡å®šæ•°æ®åº“è´¦æˆ·ç™»å½•PostgreSQLï¼Œå…ˆåˆ›å»º gogs æ•°æ®åº“ï¼Œé“¾æ¥æˆåŠŸåä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€è¡¨ï¼š 1&gt; CREATE DATABASE gogs MSSqlæ•°æ®åº“è®¾ç½® æ•°æ®åº“ç±»å‹ ï¼šMSSQL æ•°æ®åº“ä¸»æœº ï¼š127.0.0.1, 1433 æ•°æ®åº“ç”¨æˆ· ï¼šsa æ•°æ®åº“ç”¨æˆ·å¯†ç  : ******* æ•°æ®åº“åç§° ï¼šgogs app.iniä¸­é…ç½®ç»“æœ12345678[database]DB_TYPE = mssqlHOST = 127.0.0.1, 1433NAME = gogsUSER = saPASSWD = 123456SSL_MODE = disablePATH = data/gogs.db ç¤ºä¾‹å®¹å™¨åˆ›å»ºgogså®¹å™¨é“¾æ¥å·²æœ‰MSSqlåœ°å€ï¼š 1docker run --name gogs4 -d -p 10080:3000 -p 10022:22 -v /home/tiger/gogsfile:/app leafney/ubuntu-gogs ä½¿ç”¨æŒ‡å®šæ•°æ®åº“è´¦æˆ·ç™»å½•MSSqlï¼Œå…ˆåˆ›å»ºgogsæ•°æ®åº“ï¼Œé“¾æ¥æˆåŠŸåä¼šè‡ªåŠ¨åˆ›å»ºæ‰€éœ€è¡¨ï¼š 1&gt; CREATE DATABASE gogs åº”ç”¨åŸºæœ¬è®¾ç½®ä»¥å¦‚ä¸‹å‘½ä»¤åˆ›å»ºå®¹å™¨ä¸ºä¾‹ï¼š 1$ docker run --name mygogs -d -p 10080:3000 -p 10022:22 -v /home/tiger/gogsfile:/app leafney/ubuntu-gogs ä»“åº“æ ¹ç›®å½•ï¼š æ›´æ”¹ä¸ºç»å¯¹è·¯å¾„ /app/gogs-repositories è¿è¡Œç³»ç»Ÿç”¨æˆ·ï¼š ä½¿ç”¨é»˜è®¤ç”¨æˆ· git åŸŸåï¼š å¡«å†™Dockerå®¿ä¸»æœºçš„ä¸»æœºåæˆ–ç‰©ç†åœ°å€æˆ–è¦ä½¿ç”¨çš„åŸŸå(ä¸å¸¦http/https) å¦‚ 192.168.137.140 SSH ç«¯å£å·ï¼š å¦‚æœä½ æ˜ å°„Dockerå¤–éƒ¨ç«¯å£å¦‚ 10022:22 é‚£ä¹ˆè¿™é‡Œå°±å¡«å†™ 10022 ï¼›ä¸è¦å‹¾é€‰â€œä½¿ç”¨å†…ç½®SSHæœåŠ¡å™¨â€ï¼ˆDonâ€™t tick Use Builtin SSH Serverï¼‰ HTTP ç«¯å£å·ï¼š å¦‚æœæ˜ å°„Dockerå¤–éƒ¨ç«¯å£å¦‚ 10080:3000 è¿™é‡Œè¦ä½¿ç”¨ï¼š3000 åº”ç”¨ URLï¼š ä½¿ç”¨åŸŸåå’Œå…¬å¼€çš„HTTPç«¯å£å€¼çš„ç»„åˆ(å¸¦http/https) å¦‚ http://192.168.137.140:10080 æ—¥å¿—è·¯å¾„ï¼š å¯ä½¿ç”¨è·¯å¾„ /app/gogs/log(æ¨è) æˆ–é»˜è®¤å€¼ /home/git/gogs/log å¯é€‰è®¾ç½®app.iniä¸­é‚®ä»¶(mailer)é…ç½®è¯´æ˜ åç§° æè¿° ENABLED å¯ç”¨è¯¥é€‰é¡¹ä»¥æ¿€æ´»é‚®ä»¶æœåŠ¡ DISABLE_HELO ç¦ç”¨ HELO æ“ä½œ HELO_HOSTNAME HELO æ“ä½œçš„è‡ªå®šä¹‰ä¸»æœºå HOST SMTP ä¸»æœºåœ°å€ä¸ç«¯å£ FROM é‚®ç®±çš„æ¥è‡ªåœ°å€ï¼Œéµå¾ª RFC 5322è§„èŒƒï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå•çº¯çš„é‚®ç®±åœ°å€æˆ–è€… â€œåå­—â€ &#x65;&#109;&#x61;&#105;&#x6c;&#64;&#x65;&#120;&#97;&#x6d;&#x70;&#108;&#x65;&#46;&#99;&#111;&#109; çš„å½¢å¼ USER é‚®ç®±ç”¨æˆ·å PASSWD é‚®ç®±å¯†ç  SKIP_VERIFY ä¸éªŒè¯è‡ªç­¾å‘è¯ä¹¦çš„æœ‰æ•ˆæ€§ USE_PLAIN_TEXT ä½¿ç”¨ text/plain ä½œä¸ºé‚®ä»¶å†…å®¹æ ¼å¼ é‚®ä»¶æœåŠ¡è®¾ç½® SMTP ä¸»æœºï¼š ä»¥163ä¸ºä¾‹ å¦‚ smtp.163.com:25 é‚®ä»¶æ¥è‡ªï¼š æ ¼å¼ä¸º &quot;Name&quot; &lt;email@example.com&gt; å¦‚ GitAdmin &lt;xxxxx@163.com&gt; å‘é€é‚®ç®±ï¼š é‚®ç®±åœ°å€ å¦‚ xxxxx@163.com å‘é€é‚®ç®±å¯†ç  : é‚®ç®±å¯†ç  app.iniä¸­é…ç½®ç»“æœ 123456[mailer]ENABLED = trueHOST = smtp.163.com:25FROM = GitAdmin &lt;xxxxx@163.com&gt;USER = xxxxx@163.comPASSWD = 123456 æœåŠ¡å™¨å’Œå…¶å®ƒæœåŠ¡è®¾ç½® ç¦æ­¢ç”¨æˆ·è‡ªä¸»æ³¨å†Œ æ¿€æ´»è¯¥é€‰é¡¹æ¥ç¦æ­¢ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼Œåªèƒ½ç”±ç®¡ç†å‘˜åˆ›å»ºå¸å· å¯ç”¨éªŒè¯ç æœåŠ¡ è¦æ±‚åœ¨ç”¨æˆ·æ³¨å†Œæ—¶è¾“å…¥é¢„éªŒè¯ç  å¯ç”¨ç™»å½•è®¿é—®é™åˆ¶ åªæœ‰å·²ç™»å½•çš„ç”¨æˆ·æ‰èƒ½å¤Ÿè®¿é—®é¡µé¢ï¼Œå¦åˆ™å°†åªèƒ½çœ‹åˆ°ç™»å½•æˆ–æ³¨å†Œé¡µé¢ ç®¡ç†å‘˜è´¦å·è®¾ç½®åˆ›å»ºç®¡ç†å‘˜å¸å·å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º ID=1 çš„ç”¨æˆ·å°†è‡ªåŠ¨è·å¾—ç®¡ç†å‘˜æƒé™ã€‚ å»ºè®®åœ¨æ­¤å¤„ç›´æ¥åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ã€‚ ç›¸å…³å‚è€ƒ How To Set Up Gogs on Ubuntu 14.04 | DigitalOcean é…ç½®æ–‡ä»¶æ‰‹å†Œ - Gogs]]></content>
      <categories>
        <category>Ubuntu-Gogs</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04ä¸‹å®‰è£…Docker-CEç¤¾åŒºç‰ˆ]]></title>
    <url>%2F2017%2F08%2F25%2Fubuntu-install-docker-ce-and-configure-mirror-accelerator%2F</url>
    <content type="text"><![CDATA[åœ¨2017å¹´3æœˆä»½ï¼ŒDockerå…¬å¸å®£å¸ƒDockerä¼ä¸šç‰ˆï¼ˆEnterprise Edition, EEï¼‰ï¼Œå¹¶å°†å¼€æºç‰ˆæœ¬é‡å‘½åä¸ºDockerç¤¾åŒºç‰ˆï¼ˆCommunity Edition, CEï¼‰ï¼›åŒæ—¶å…¬å¸ƒäº†äº§å“è¿­ä»£è®¡åˆ’ï¼Œè¿™ä¼šä¸ºä¼ä¸šå®¢æˆ·æä¾›é€æ˜çš„ç”Ÿå‘½å‘¨æœŸæ”¯æŒè®¡åˆ’ã€å¹¶å¯¹DockeræŠ€æœ¯çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§æå‡å¸¦æ¥äº†å¸®åŠ©ã€‚ æ³¨ï¼šæ–‡ç« å†™äº 2017å¹´8æœˆ ,æ–‡ä¸­æ‰€è®²æ–¹æ³•å¯èƒ½ä¼šè¿‡æ—¶ï¼Œè¯·æŸ¥çœ‹Dockerå®˜æ–¹æœ€æ–°å®‰è£…æ–‡æ¡£ Get Docker CE for Ubuntu | Docker Documentationï¼Œæœ¬æ–‡ä»…ä¾›å‚è€ƒã€‚ Docker CE è¿˜æ˜¯ Docker EEDocker CEDocker CEè¡¨ç¤ºç¤¾åŒºç‰ˆï¼Œæ˜¯å…è´¹çš„Dockeräº§å“çš„æ–°åç§°ï¼ŒDocker CEåŒ…å«äº†å®Œæ•´çš„Dockerå¹³å°ï¼Œéå¸¸é€‚åˆå¼€å‘äººå‘˜å’Œè¿ç»´å›¢é˜Ÿæ„å»ºå®¹å™¨APPã€‚ Docker EEDocker EEè¡¨ç¤ºä¼ä¸šç‰ˆï¼Œç”±å…¬å¸æ”¯æŒï¼Œå¯åœ¨ç»è¿‡è®¤è¯çš„æ“ä½œç³»ç»Ÿå’Œäº‘æä¾›å•†ä¸­ä½¿ç”¨ï¼Œå¹¶å¯è¿è¡Œæ¥è‡ªDocker Storeçš„ã€ç»è¿‡è®¤è¯çš„å®¹å™¨å’Œæ’ä»¶ã€‚ Docker EEæä¾›ä¸‰ä¸ªæœåŠ¡å±‚æ¬¡ï¼š æœåŠ¡å±‚çº§ åŠŸèƒ½ Basic 1. åŒ…å«ç”¨äºè®¤è¯åŸºç¡€è®¾æ–½çš„Dockerå¹³å° 2. Dockerå…¬å¸çš„æ”¯æŒ 3. ç»è¿‡è®¤è¯çš„ã€æ¥è‡ªDocker Storeçš„å®¹å™¨ä¸æ’ä»¶ Standard 1. æ·»åŠ é«˜çº§é•œåƒä¸å®¹å™¨ç®¡ç† 2. LDAP/ADç”¨æˆ·é›†æˆ 3. åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(Docker Datacenter) Advanced 1. æ·»åŠ Dockerå®‰å…¨æ‰«æ 2. è¿ç»­æ¼æ´ç›‘æ§ ç‰ˆæœ¬è¿­ä»£Dockerä»17.03å¼€å§‹ï¼Œè½¬å‘åŸºäºæ—¶é—´çš„ YY.MM å½¢å¼çš„ç‰ˆæœ¬æ§åˆ¶æ–¹æ¡ˆï¼Œç±»ä¼¼äºCanonicalä¸ºUbuntuæ‰€ä½¿ç”¨çš„ç‰ˆæœ¬æ§åˆ¶æ–¹æ¡ˆã€‚ Docker CEæœ‰ä¸¤ç§ç‰ˆæœ¬ï¼š edgeç‰ˆæœ¬æ¯æœˆå‘å¸ƒä¸€æ¬¡ï¼Œä¸»è¦é¢å‘é‚£äº›å–œæ¬¢å°è¯•æ–°åŠŸèƒ½çš„ç”¨æˆ·ã€‚ stableç‰ˆæœ¬æ¯å­£åº¦å‘å¸ƒä¸€æ¬¡ï¼Œé€‚ç”¨äºå¸Œæœ›æ›´åŠ å®¹æ˜“ç»´æŠ¤çš„ç”¨æˆ·ï¼ˆç¨³å®šç‰ˆï¼‰ã€‚ edgeç‰ˆæœ¬åªèƒ½åœ¨å½“å‰æœˆä»½è·å¾—å®‰å…¨å’Œé”™è¯¯ä¿®å¤ã€‚è€Œstableç‰ˆæœ¬åœ¨åˆå§‹å‘å¸ƒåå››ä¸ªæœˆå†…æ¥æ”¶å…³é”®é”™è¯¯ä¿®å¤å’Œå®‰å…¨é—®é¢˜çš„ä¿®è¡¥ç¨‹åºã€‚è¿™æ ·ï¼ŒDocker CEç”¨æˆ·å°±æœ‰ä¸€ä¸ªæœˆçš„çª—å£æœŸæ¥åˆ‡æ¢ç‰ˆæœ¬åˆ°æ›´æ–°çš„ç‰ˆæœ¬ã€‚ Docker EEå’Œstableç‰ˆæœ¬çš„ç‰ˆæœ¬å·ä¿æŒä¸€è‡´ï¼Œæ¯ä¸ªDocker EEç‰ˆæœ¬éƒ½äº«å—ä¸ºæœŸä¸€å¹´çš„æ”¯æŒä¸ç»´æŠ¤æœŸï¼Œåœ¨æ­¤æœŸé—´æ¥å—å®‰å…¨ä¸å…³é”®ä¿®æ­£ã€‚ å®˜æ–¹å®‰è£…æ–¹æ³•ç³»ç»Ÿè¦æ±‚å®‰è£…Docker CE,éœ€è¦64ä½çš„Ubuntuç³»ç»Ÿï¼š Zesty 17.04 Xenial 16.04 (LTS) Trusty 14.04 (LTS) æˆ‘çš„ç³»ç»Ÿæ˜¯ Ubuntu 16.04.2 LTS ç‰ˆæœ¬ï¼Œé€šè¿‡å‘½ä»¤ lsb_release -a æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°: 1234567$ sudo lsb_release -a[sudo] password for tiger: LSB Version: core-9.20160110ubuntu0.2-amd64Distributor ID: UbuntuDescription: Ubuntu 16.04.2 LTSRelease: 16.04Codename: xenial é€šè¿‡ uname -r æ¥æŸ¥çœ‹å†…æ ¸ä¿¡æ¯ï¼š 12$ uname -r4.4.0-85-generic å¸è½½æ—§ç‰ˆæœ¬Dockeræ—§ç‰ˆæœ¬çš„dockerè¢«ç§°ä¸º docker æˆ–è€… docker-engineï¼Œè€Œç°åœ¨æœ€æ–°çš„Docker CEåŒ…è¢«ç§°ä¸º docker-ceã€‚åœ¨å®‰è£…ä¹‹å‰ï¼Œéœ€è¦å…ˆå¸è½½æ—§ç‰ˆæœ¬(å¦‚æœä¹‹å‰æœ‰å®‰è£…)ï¼š 1$ sudo apt-get remove docker docker-engine docker.io å¦å¤–åŸæ¥ /var/lib/docker/ ç›®å½•ä¸‹çš„é•œåƒï¼Œå®¹å™¨ï¼Œæ•°æ®å·ï¼Œç½‘ç»œç­‰éƒ½ä¼šä¿ç•™ï¼Œæ–°å®‰è£…çš„dockerä»»ç„¶å¯ä»¥ä½¿ç”¨è¿™äº›å†…å®¹ã€‚ 14.04 Trusty éœ€è¦å®‰è£…é¢å¤–åŒ…åœ¨ 14.04 ç³»ç»Ÿç‰ˆæœ¬ä¸‹ï¼Œéœ€è¦å®‰è£… linux-image-extra-* åŒ…ä»¥å…è®¸Dockerä½¿ç”¨ aufs å­˜å‚¨é©±åŠ¨ç¨‹åºï¼š 12345$ sudo apt-get update$ sudo apt-get install \ linux-image-extra-$(uname -r) \ linux-image-extra-virtual å®‰è£… Docker CEæ›´æ–°æº1$ sudo apt-get update å…è®¸é€šè¿‡HTTPSä½¿ç”¨å­˜å‚¨åº“12345$ sudo apt-get install \ apt-transport-https \ ca-certificates \ curl \ software-properties-common å¯¼å…¥å®˜æ–¹ GPG å¯†é’¥1$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - éªŒè¯å¯†é’¥æŒ‡çº¹æ˜¯å¦æ­£ç¡® 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 1$ sudo apt-key fingerprint 0EBFCD88 æ“ä½œè®°å½•å¦‚ä¸‹ï¼š 1234567$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -OK$ sudo apt-key fingerprint 0EBFCD88pub 4096R/0EBFCD88 2017-02-22 Key fingerprint = 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88uid Docker Release (CE deb) &lt;docker@docker.com&gt;sub 4096R/F273FCD8 2017-02-22 é€‰æ‹©ç¨³å®šç‰ˆæœ¬ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ç¨³å®šç‰ˆæœ¬çš„docker-ce,64ä½ç³»ç»Ÿï¼š amd64 or x86_64: 1234$ sudo add-apt-repository \ &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) \ stable&quot; æ›´æ–°æºåˆ—è¡¨1$ sudo apt-get update å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Docker CE1$ sudo apt-get install docker-ce å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Docker CEä½¿ç”¨å‘½ä»¤ $ apt-cache madison docker-ce æŸ¥çœ‹å¯å®‰è£…çš„ç‰ˆæœ¬åˆ—è¡¨ï¼š 123456$ apt-cache madison docker-ce docker-ce | 17.06.1~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages docker-ce | 17.06.0~ce-0~ubuntu | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages docker-ce | 17.03.2~ce-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages docker-ce | 17.03.1~ce-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages docker-ce | 17.03.0~ce-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages ä¸­é—´ä¸€é¡¹ä¸ºç‰ˆæœ¬åç§°ï¼Œæ‰§è¡Œå‘½ä»¤é€‰æ‹©å®‰è£…æŒ‡å®šç‰ˆæœ¬ $ sudo apt-get install docker-ce=&lt;VERSION&gt; ,æ¯”å¦‚ï¼š 1234567$ sudo apt-get install docker-ce=17.06.1~ce-0~ubuntu[sudo] password for tiger: Reading package lists... DoneBuilding dependency tree Reading state information... Donedocker-ce is already the newest version (17.06.1~ce-0~ubuntu).0 upgraded, 0 newly installed, 0 to remove and 34 not upgraded. å®‰è£…å®Œæˆådockerå®ˆæŠ¤è¿›ç¨‹ä¼šè‡ªåŠ¨å¯åŠ¨ã€‚ éªŒè¯æ‰§è¡Œå‘½ä»¤ docker æŸ¥çœ‹å®‰è£…æ˜¯å¦æˆåŠŸï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576$ docker Usage: docker COMMANDA self-sufficient runtime for containersOptions: --config string Location of client config files (default &quot;/home/tiger/.docker&quot;) -D, --debug Enable debug mode --help Print usage -H, --host list Daemon socket(s) to connect to -l, --log-level string Set the logging level (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;) (default &quot;info&quot;) --tls Use TLS; implied by --tlsverify --tlscacert string Trust certs signed only by this CA (default &quot;/home/tiger/.docker/ca.pem&quot;) --tlscert string Path to TLS certificate file (default &quot;/home/tiger/.docker/cert.pem&quot;) --tlskey string Path to TLS key file (default &quot;/home/tiger/.docker/key.pem&quot;) --tlsverify Use TLS and verify the remote -v, --version Print version information and quitManagement Commands: config Manage Docker configs container Manage containers image Manage images network Manage networks node Manage Swarm nodes plugin Manage plugins secret Manage Docker secrets service Manage services stack Manage Docker stacks swarm Manage Swarm system Manage Docker volume Manage volumesCommands: attach Attach local standard input, output, and error streams to a running container build Build an image from a Dockerfile commit Create a new image from a container&apos;s changes cp Copy files/folders between a container and the local filesystem create Create a new container diff Inspect changes to files or directories on a container&apos;s filesystem events Get real time events from the server exec Run a command in a running container export Export a container&apos;s filesystem as a tar archive history Show the history of an image images List images import Import the contents from a tarball to create a filesystem image info Display system-wide information inspect Return low-level information on Docker objects kill Kill one or more running containers load Load an image from a tar archive or STDIN login Log in to a Docker registry logout Log out from a Docker registry logs Fetch the logs of a container pause Pause all processes within one or more containers port List port mappings or a specific mapping for the container ps List containers pull Pull an image or a repository from a registry push Push an image or a repository to a registry rename Rename a container restart Restart one or more containers rm Remove one or more containers rmi Remove one or more images run Run a command in a new container save Save one or more images to a tar archive (streamed to STDOUT by default) search Search the Docker Hub for images start Start one or more stopped containers stats Display a live stream of container(s) resource usage statistics stop Stop one or more running containers tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE top Display the running processes of a container unpause Unpause all processes within one or more containers update Update configuration of one or more containers version Show the Docker version information wait Block until one or more containers stop, then print their exit codesRun &apos;docker COMMAND --help&apos; for more information on a command. ä¸ºå½“å‰ç”¨æˆ·æ·»åŠ ç®¡ç†å‘˜æƒé™Dockerè¿›ç¨‹å¯åŠ¨åï¼Œæ‰§è¡Œdockerå‘½ä»¤éƒ½å¿…é¡»å¸¦ä¸Š sudo æ‰è¡Œï¼Œå¦åˆ™ä¼šæŠ¥ permission denied çš„é”™è¯¯ï¼š 12$ docker infoGot permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.30/info: dial unix /var/run/docker.sock: connect: permission denied è§£å†³æ–¹æ³•æ˜¯å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ° docker ç”¨æˆ·åˆ†ç»„ä¸‹ã€‚ å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker åˆ†ç»„ä¸‹1$ sudo usermod -aG docker &lt;your-user&gt; æˆ–è€…ç›´æ¥ç”¨ $USER è¡¨ç¤ºå½“å‰ç”¨æˆ·ï¼š 1$ sudo usermod -aG docker $USER ç„¶åé‡å¯ç³»ç»Ÿï¼š 1$ sudo reboot å†æ‰§è¡Œæ—¶å°±ä¸ä¼šæŠ¥é”™äº†ï¼š 12345678910111213141516171819$ docker infoContainers: 0 Running: 0 Paused: 0 Stopped: 0Images: 0Server Version: 17.06.1-ceStorage Driver: aufs Root Dir: /var/lib/docker/aufs Backing Filesystem: extfs Dirs: 0 Dirperm1 Supported: trueLogging Driver: json-fileCgroup Driver: cgroupfsPlugins: Volume: local Network: bridge host macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslogSwarm: inactive ä½¿ç”¨é˜¿é‡Œäº‘Docker CEé•œåƒæºå®‰è£…Ubuntu 14.04 16.04 (ä½¿ç”¨apt-getè¿›è¡Œå®‰è£…)12345678910111213141516171819# step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·sudo apt-get updatesudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common# step 2: å®‰è£…GPGè¯ä¹¦curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -# Step 3: å†™å…¥è½¯ä»¶æºä¿¡æ¯sudo add-apt-repository &quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;# Step 4: æ›´æ–°å¹¶å®‰è£… Docker-CEsudo apt-get -y updatesudo apt-get -y install docker-ce# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:# Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:# apt-cache madison docker-ce# docker-ce | 17.03.1~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages# docker-ce | 17.03.0~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages# Step 2: å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.1~ce-0~ubuntu-xenial)# sudo apt-get -y install docker-ce=[VERSION] CentOS 7 (ä½¿ç”¨yumè¿›è¡Œå®‰è£…)12345678910111213141516171819202122# step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·sudo yum install -y yum-utils device-mapper-persistent-data lvm2# Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo# Step 3: æ›´æ–°å¹¶å®‰è£… Docker-CEsudo yum makecache fastsudo yum -y install docker-ce# Step 4: å¼€å¯DockeræœåŠ¡sudo service docker start# å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE:# Step 1: æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬:# yum list docker-ce.x86_64 --showduplicates | sort -r# Loading mirror speeds from cached hostfile# Loaded plugins: branch, fastestmirror, langpacks# docker-ce.x86_64 17.03.1.ce-1.el7.centos docker-ce-stable# docker-ce.x86_64 17.03.1.ce-1.el7.centos @docker-ce-stable# docker-ce.x86_64 17.03.0.ce-1.el7.centos docker-ce-stable# Available Packages# Step2 : å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE: (VERSION ä¾‹å¦‚ä¸Šé¢çš„ 17.03.0.ce.1-1.el7.centos)# sudo yum -y install docker-ce-[VERSION] é…ç½®é˜¿é‡Œäº‘Dockeré•œåƒåŠ é€Ÿå™¨æ‰“å¼€é˜¿é‡Œäº‘ å¼€å‘è€…å¹³å° - ç®¡ç†ä¸­å¿ƒ - Docker Hub é•œåƒç«™ç‚¹ã€‚å¯ä»¥çœ‹åˆ° æ‚¨çš„ä¸“å±åŠ é€Ÿå™¨åœ°å€ https://xxxxx.mirror.aliyuncs.com é…ç½®DockeråŠ é€Ÿå™¨é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶ /etc/docker/daemon.json (æ²¡æœ‰æ—¶æ–°å»ºè¯¥æ–‡ä»¶) æ¥ä½¿ç”¨åŠ é€Ÿå™¨ï¼š 12345678sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;&#123; &quot;registry-mirrors&quot;: [&quot;https://xxxxx.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker æ³¨æ„ï¼šä¸Šæ–‡ä»£ç æ®µä¸­ç»™å‡ºçš„é•œåƒåŠ é€Ÿå™¨åœ°å€ä¸­çš„ xxxxx ä¸ºé˜¿é‡Œäº‘åœ¨ä½ æ³¨å†Œè´¦æˆ·ååˆ†é…çš„æŒ‡å®šåœ°å€åç§°ï¼Œåˆ‡è®°è¦ä¿®æ”¹ä¸ºè‡ªå·±è´¦æˆ·çš„ç»™å®šåœ°å€ã€‚ ç›¸å…³å‚è€ƒ Get Docker CE for Ubuntu | Docker Documentation Docker 17.03ç³»åˆ—æ•™ç¨‹ï¼ˆä¸€ï¼‰Docker EE/Docker CEç®€ä»‹ä¸ç‰ˆæœ¬è§„åˆ’ | å‘¨ç«‹|Spring Cloud Docker CE é•œåƒæºç«™-åšå®¢-äº‘æ –ç¤¾åŒº-é˜¿é‡Œäº‘]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MongoDBå¤‡ä»½ä¸æ¢å¤]]></title>
    <url>%2F2017%2F08%2F22%2Fmongodb-mongodump-and-mongorestore%2F</url>
    <content type="text"><![CDATA[mongodbä¸­æœ‰å·¥å…·mongodumpå’Œmongorestoreæä¾›äº†éå¸¸æ–¹ä¾¿çš„å¯¹æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤åŠŸèƒ½ã€‚å¯ä»¥åœ¨å‘½ä»¤åé¢åŠ  --help é€‰é¡¹æŸ¥çœ‹ä¸¤ä¸ªå·¥å…·çš„å¸®åŠ©æ–‡æ¡£ã€‚ 12345678910111213141516171819/ # mongodump --helpUsage: mongodump &lt;options&gt;Export the content of a running server into .bson files.Specify a database with -d and a collection with -c to only dump that database or collection.See http://docs.mongodb.org/manual/reference/program/mongodump/ for more information.general options: --help print usage --version print the tool version and exitverbosity options: -v, --verbose=&lt;level&gt; more detailed log output (include multiple times for more verbosity, e.g. -vvvvv, or specify a numeric value, e.g. --verbose=N) --quiet hide all log output ... ... MongoDBå¤‡ä»½mongodumpå¤‡ä»½å‘½ä»¤è¯­æ³•: 1&gt; mongodump -h dbhost -d dbname -o dbdirectory -h : MongDBæ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œä¾‹å¦‚ï¼š127.0.0.1ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£å·ï¼š127.0.0.1:27017 -d : éœ€è¦å¤‡ä»½çš„æ•°æ®åº“å®ä¾‹ï¼Œä¾‹å¦‚ï¼štest -o ï¼šå¤‡ä»½çš„æ•°æ®å­˜æ”¾ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\data\dumpï¼Œå½“ç„¶è¯¥ç›®å½•éœ€è¦æå‰å»ºç«‹ å¤‡ä»½æŒ‡å®šæ•°æ®åº“ï¼š 1&gt; mongodump -h 127.0.0.1:27017 -d local -o D:\Test\aatt å¤‡ä»½æ‰€æœ‰æ•°æ®åº“ï¼š 1&gt; mongodump --host 127.0.0.1 --port 27017 å¦‚æœmongodbè®¾ç½®äº†å¯†ç ï¼Œåˆ™å‘½ä»¤æ ¼å¼ä¸ºï¼š 1&gt; mongodump --host localhost --port 27017 -u dbUser -p dbPassword -d mydb --out /home/dbbackup æˆ–è€…å¦‚ä¸‹çš„æ ¼å¼ï¼š 1&gt; mongodump -h 127.0.0.1:27017 -u admin -p 123456 -d test -o /data/backup MongoDBæ¢å¤mongorestore æ¢å¤å¤‡ä»½å‘½ä»¤è¯­æ³•ï¼š 1&gt; mongorestore -h &lt;hostname&gt;&lt;:port&gt; -d dbname &lt;path&gt; --host &lt;:port&gt;, -h &lt;:port&gt; : MongoDBæ‰€åœ¨æœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ä¸ºï¼š localhost:27017 --db , -d ï¼šéœ€è¦æ¢å¤çš„æ•°æ®åº“å®ä¾‹ï¼Œè¯¥åç§°ä¸å¤‡ä»½æ—¶çš„åç§°å¯ä»¥ä¸ä¸€è‡´ --drop : æ¢å¤çš„æ—¶å€™ï¼Œå…ˆåˆ é™¤å½“å‰æ•°æ®ï¼Œç„¶åæ¢å¤å¤‡ä»½çš„æ•°æ®ã€‚ &lt;path&gt; ï¼šmongorestore æœ€åçš„ä¸€ä¸ªå‚æ•°ï¼Œè®¾ç½®å¤‡ä»½æ•°æ®æ‰€åœ¨ä½ç½®ï¼Œä¾‹å¦‚ï¼šc:\data\dump\testã€‚ä½ ä¸èƒ½åŒæ—¶æŒ‡å®š å’Œ â€“dir é€‰é¡¹ï¼Œâ€“dirä¹Ÿå¯ä»¥è®¾ç½®å¤‡ä»½ç›®å½•ã€‚ --dir : æŒ‡å®šå¤‡ä»½çš„ç›®å½• æ¢å¤å¤‡ä»½æ•°æ®åˆ°æŒ‡å®šçš„æœåŠ¡å™¨æ•°æ®åº“ä¸­ï¼š 1&gt; mongorestore -h 127.0.0.1:27017 -d test2 D:\Test\aatt\local Alpineç³»ç»Ÿä¸‹çš„MongoDBå¤‡ä»½ä¸æ¢å¤Alpineç³»ç»Ÿä¸‹ä½¿ç”¨MongoDBï¼Œéœ€è¦å®‰è£…MongoDBåŒ…: apk add mongodb ã€‚å¦‚æœè¦ä½¿ç”¨å¤‡ä»½ä¸æ¢å¤åŠŸèƒ½ï¼Œéœ€è¦å®‰è£… mongodb-tools åŒ…ï¼šapk add mongodb-toolsã€‚ 1234567alpine:edge$ echo http://dl-4.alpinelinux.org/alpine/edge/testing &gt;&gt; /etc/apk/repositories$ apk add --no-cache mongodb mongodb-tools$ ls /usr/bin/]]></content>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangä¸‹é€šè¿‡Ginä½“éªŒWebSocketæ¡†æ¶Melody]]></title>
    <url>%2F2017%2F08%2F14%2Fwebsocket-framework-for-go-melody%2F</url>
    <content type="text"><![CDATA[Melody æ˜¯ä¸€ä¸ª Go è¯­è¨€çš„å¾®å‹ WebSocket æ¡†æ¶ï¼ŒåŸºäº github.com/gorilla/websocket å¼€å‘. Gin-Gonicè·å–åŒ…ï¼š 1&gt; go get github.com/gin-gonic/gin æ·»åŠ å¼•ç”¨ï¼š 1inport &quot;github.com/gin-gonic/gin&quot; åˆ›å»ºGinæµ‹è¯•ç«™ç‚¹ï¼š 12345678910111213141516package mainimport ( &quot;github.com/gin-gonic/gin&quot;)func main() &#123; r := gin.Default() r.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.String(200, &quot;Hello Gin&quot;) &#125;) r.Run(&quot;:8080&quot;)&#125; è¿è¡Œï¼š 1&gt; go run main.go Melodyè·å–åŒ…ï¼š 1&gt; go get gopkg.in/olahol/melody.v1 æ·»åŠ å¼•ç”¨ï¼š 1import &quot;gopkg.in/olahol/melody.v1&quot; Simple Chat Demomain.goï¼š 123456789101112131415161718192021222324252627package mainimport ( &quot;github.com/gin-gonic/gin&quot; &quot;gopkg.in/olahol/melody.v1&quot; &quot;net/http&quot;)func main() &#123; r := gin.Default() m := melody.New() r.GET(&quot;/&quot;, func(c *gin.Context) &#123; http.ServeFile(c.Writer, c.Request, &quot;templates/index.html&quot;) &#125;) //websocket r.GET(&quot;/ws&quot;, func(c *gin.Context) &#123; m.HandleRequest(c.Writer, c.Request) &#125;) m.HandleMessage(func(s *melody.Session, msg []byte) &#123; m.Broadcast(msg) &#125;) r.Run(&quot;:8080&quot;)&#125; index.htmlï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;html&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;WebSocket&lt;/title&gt; &lt;style&gt; #chat &#123; text-align: left; background: #f1f1f1; width: 500px; min-height: 300px; padding: 20px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;center&gt; &lt;h3&gt;Chat&lt;/h3&gt; &lt;pre id=&quot;chat&quot;&gt;&lt;/pre&gt; &lt;input placeholder=&quot;say something&quot; id=&quot;text&quot; type=&quot;text&quot;&gt; &lt;/center&gt; &lt;script&gt; var url = &quot;ws://&quot; + window.location.host + &quot;/ws&quot;; var ws = new WebSocket(url); var name = &quot;Guest&quot; + Math.floor(Math.random() * 1000); var chat = document.getElementById(&quot;chat&quot;); var text = document.getElementById(&quot;text&quot;); var now = function () &#123; var iso = new Date().toISOString(); return iso.split(&quot;T&quot;)[1].split(&quot;.&quot;)[0]; &#125;; ws.onmessage = function (msg) &#123; var line = now() + &quot; &quot; + msg.data + &quot;\n&quot;; chat.innerText += line; &#125;; text.onkeydown = function (e) &#123; if (e.keyCode === 13 &amp;&amp; text.value !== &quot;&quot;) &#123; ws.send(&quot;&lt;&quot; + name + &quot;&gt; &quot; + text.value); text.value = &quot;&quot;; &#125; &#125;; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è¿è¡Œï¼š 1&gt; go run main.go GitHub - olahol/melody: Minimalist websocket framework for Go]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>Gin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²Hexoåšå®¢]]></title>
    <url>%2F2017%2F08%2F09%2Fusing-travis-ci-automatic-deploy-hexo-blogs%2F</url>
    <content type="text"><![CDATA[è‡ªä»ä½¿ç”¨GitHub Pageså’ŒHexoæ¥å‘å¸ƒåšå®¢ä¹‹åï¼Œä¸å¾—ä¸è¯´æ–¹ä¾¿äº†è®¸å¤šï¼Œåªéœ€è¦å‡ ä¸ªç®€å•çš„å‘½ä»¤åšå®¢å°±å‘å¸ƒäº†ã€‚ä½†åœ¨ä¸æ–­çš„ä½¿ç”¨ä¸­å‘ç°æ¯æ¬¡çš„å‘å¸ƒæ“ä½œä¹ŸæŒºè€—æ—¶çš„ã€‚ æˆ‘ä¸€èˆ¬çš„æ“ä½œæ˜¯å°†å¹³æ—¶æ•´ç†å¥½çš„mdæ–‡ä»¶æ”¾åˆ°ç§æœ‰çš„gitä»“åº“ä¸­ï¼ˆæ„Ÿå…´è¶£å¯äº†è§£ Ubuntu-Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»GogsæœåŠ¡ï¼‰ï¼Œæ¯æ¬¡å‘å¸ƒçš„æ—¶å€™éƒ½è¦å…ˆå°†æ–‡ä»¶ clone åˆ°æœ¬åœ°ï¼Œç„¶åé…ç½®ä¸€ä¸‹hexoçš„è¿è¡Œç¯å¢ƒï¼Œæ¥ç€å†æ‰§è¡Œ hexo s -g æ¥é¢„è§ˆå’Œè°ƒæ•´ï¼Œæœ€åæ‰§è¡Œ hexo d å‘½ä»¤å°†åšå®¢å‘å¸ƒä¸Šå»ï¼Œåœ¨è¿™ä¹‹å‰å¦‚æœä½ æ²¡æœ‰é…ç½®è¿‡GitHubçš„ SSH Key,è¿˜è¦èŠ±ä¸€äº›æ—¶é—´æ¥å¼„æƒé™çš„é—®é¢˜ã€‚ä¹…è€Œä¹…ä¹‹å°±å‘ç°è¿™æ ·æ“ä½œèµ·æ¥å®åœ¨æ˜¯å¤ªç¹çäº†ã€‚ åæ¥çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ä»‹ç»å¯ä»¥ä½¿ç”¨Travis CIæ¥è‡ªåŠ¨éƒ¨ç½²hexoçš„åšå®¢ï¼Œåªéœ€è¦å°†mdæ–‡ä»¶ push åˆ°ä»“åº“ä¸­åšå®¢å°±è‡ªåŠ¨å‘å¸ƒå¥½äº†ã€‚è¶ç€è¿™å‡ å¤©å·¥ä½œä»»åŠ¡ä¸å¤ªç€æ€¥ï¼Œç ”ç©¶äº†ä¸€ä¸‹ï¼Œç‰¹çºªå½•åœ¨æ­¤ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æœ‰éœ€è¦çš„æœ‹å‹ã€‚ Travis CI æ˜¯ç›®å‰æ–°å…´çš„å¼€æºæŒç»­é›†æˆæ„å»ºé¡¹ç›®ï¼Œç”¨æ¥æ„å»ºæ‰˜ç®¡åœ¨GitHubä¸Šçš„ä»£ç ã€‚å®ƒæä¾›äº†å¤šç§ç¼–ç¨‹è¯­è¨€çš„æ”¯æŒï¼ŒåŒ…æ‹¬Rubyï¼ŒJavaScriptï¼ŒJavaï¼ŒScalaï¼ŒPHPï¼ŒHaskellå’ŒErlangåœ¨å†…çš„å¤šç§è¯­è¨€ã€‚ é…ç½®GitHub Pageså¦‚æœä½ æ˜¯æ–°æ‰‹æˆ–è€…è¿˜æ²¡æœ‰è‡ªå·±çš„ GitHub Pages åšå®¢ç«™ç‚¹ï¼Œå¯ä»¥å…ˆçœ‹æˆ‘ä¹‹å‰çš„æ–‡ç«  ä½¿ç”¨GitHubæ­å»ºHexoé™æ€åšå®¢ | ITèŒƒå„¿ äº†è§£å¦‚ä½•é…ç½®ï¼Œå…·ä½“è¿‡ç¨‹è¿™é‡Œä¸å†è¯¦è¿°ã€‚ åˆ›å»º hexo åˆ†æ”¯å› ä¸ºæˆ‘ä¹‹å‰çš„åšå®¢æºæ–‡ä»¶æ˜¯å­˜æ”¾åœ¨ç§æœ‰çš„gitç®¡ç†å·¥å…·ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²ï¼Œå¿…é¡»å°†è¿™äº›åšå®¢çš„æºç æ–‡ä»¶æ”¾åˆ°GitHubä¸Šæ‰èƒ½è¢«Travisè®¿é—®åˆ°ã€‚å› ä¸º GitHub Pages é»˜è®¤è¦æ±‚å¿…é¡»ä½¿ç”¨ master åˆ†æ”¯å­˜æ”¾é™æ€æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯¥ä»“åº“ä¸‹ä½¿ç”¨å…¶ä»–åˆ†æ”¯æ¥å­˜æ”¾åšå®¢æºç æ–‡ä»¶ï¼Œæˆ–è€…æ–°åˆ›å»ºä¸€ä¸ªä»“åº“æ¥å•ç‹¬ä¿å­˜ã€‚è¿™é‡Œæˆ‘ä»¬æŠŠhexoåšå®¢çš„æºç æ”¾åœ¨ hexo åˆ†æ”¯ä¸‹ï¼Œåšå®¢çš„é™æ€æ–‡ä»¶éƒ¨ç½²åœ¨ master åˆ†æ”¯ä¸‹ã€‚ å¯¹äºå¦‚ä½•åœ¨GitHubä¸Šåˆ›å»ºåˆ†æ”¯ï¼Œç›¸å…³æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼Œä»…ä¾›å‚è€ƒï¼š 12345# å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°&gt; git clone https://github.com/Leafney/Leafney.github.io.git# åˆ›å»ºå¹¶åˆ‡æ¢åˆ° hexo åˆ†æ”¯&gt; git checkout -b hexo å½“åˆ‡æ¢åˆ° hexo åˆ†æ”¯åï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯éœ€è¦ç”¨ hexo åˆ†æ”¯æ¥å­˜æ”¾åšå®¢æºç æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ï¼Œå°† hexo åˆ†æ”¯ä¸‹çš„æ–‡ä»¶é™¤ .git ç›®å½•å¤–å…¨éƒ¨åˆ é™¤ï¼Œç„¶åå°†åšå®¢æºç æ–‡ä»¶æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ï¼Œå¹¶ commit åˆ° hexo åˆ†æ”¯. ç„¶åæˆ‘ä»¬éœ€è¦å°†æœ¬åœ°çš„ hexo åˆ†æ”¯æäº¤åˆ°è¿œç¨‹ä»“åº“ä¸­ 12# æäº¤æœ¬åœ°hexoåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“çš„hexoåˆ†æ”¯&gt; git push origin hexo:hexo è¿™æ ·æˆ‘ä»¬åœ¨GitHubçš„ä»“åº“ä¸‹å°±èƒ½çœ‹åˆ° hexo åˆ†æ”¯ä¸ºåšå®¢æºæ–‡ä»¶ï¼Œmaster åˆ†æ”¯ä¸ºé™æ€æ–‡ä»¶ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå½“æˆ‘ä»¬æ–°å¢åšå®¢mdæ–‡ä»¶æ—¶ï¼Œè·å–è¿œç¨‹åˆ†æ”¯æ—¶è¦æŒ‡å®šåˆ†æ”¯çš„åç§°ï¼Œå¦åˆ™ä¼šé»˜è®¤è·å– master åˆ†æ”¯ï¼š 1&gt; git pull origin hexo è®¾ç½® Travis CIä½¿ç”¨ GitHubè´¦æˆ·ç™»å½• Travis CIå®˜ç½‘ ï¼Œè¿›å»åèƒ½çœ‹åˆ°å·²ç»è‡ªåŠ¨å…³è”äº† GitHub ä¸Šçš„ä»“åº“ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©éœ€è¦å¯ç”¨çš„é¡¹ç›®ï¼Œå³ yourname/yourname.github.io ã€‚ ç„¶åç‚¹å‡»åé¢çš„é½¿è½®å›¾æ ‡è¿›å…¥è®¾ç½®ç•Œé¢ã€‚ å¦‚æœä½ ä¹‹å‰å·²ç»å‹¾é€‰è¿‡é¡¹ç›®ï¼Œå¯ä»¥è¿›åˆ°é¡¹ç›®ä¸»é¡µä¸­ï¼Œåœ¨å³ä¸Šè§’æ‰¾åˆ° More options é€‰é¡¹ä¸‹çš„ Settings è¿›å…¥è®¾ç½®ç•Œé¢ã€‚ é€šç”¨è®¾ç½®åœ¨ General åŒºåŸŸå¼€å¯ï¼šBuild only if .travis.yml is present è¡¨ç¤ºâ€œåªæœ‰å½“ .travis.yml å­˜åœ¨æ—¶æ‰æ„å»ºâ€ ï¼›å¼€å¯ï¼šBuild branch updates è¡¨ç¤º â€œå½“åˆ†æ”¯æ›´æ–°æ—¶æ„å»ºâ€ ä¸¤ä¸ªé€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š Travis CIåœ¨è‡ªåŠ¨æ„å»ºå®Œæˆåéœ€è¦pushé™æ€æ–‡ä»¶åˆ°ä»“åº“çš„ master åˆ†æ”¯ä¸‹ï¼Œè€Œè®¿é—®GitHubçš„ä»“åº“æ˜¯éœ€è¦æƒé™çš„ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•é…ç½®æƒé™ã€‚ é…ç½® Access Tokenå¦‚ä¸‹å›¾ï¼ŒEnvironment Variables åŒºåŸŸå°±æ˜¯ç”¨æ¥æ·»åŠ æƒé™ä¿¡æ¯çš„ã€‚æˆ‘ä»¬éœ€è¦å¡«å†™ä¸€ä¸ªTokençš„åç§°å’Œå€¼ï¼Œè¯¥åç§°å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä»¥ ${å˜é‡å} æ¥å¼•ç”¨ï¼Œè¯¥Tokenæˆ‘ä»¬éœ€è¦ä»Githubä¸­è·å–ã€‚ ä»GitHubè·å–Access Tokenä¹‹å‰æˆ‘ä»¬åœ¨ä½¿ç”¨å‘½ä»¤ hexo d éƒ¨ç½²hexoåšå®¢åˆ°GitHubä¸Šæ—¶ï¼Œæ˜¯å› ä¸ºæœ¬åœ°æœ‰ SSH keyï¼Œå½“äº¤ç»™ Travis å»è‡ªåŠ¨éƒ¨ç½²æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦è®¾ç½®å¯æ“ä½œæƒé™ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨GitHubæä¾›çš„tokenå˜é‡æ¥å®ç°ã€‚ ç™»é™† GitHub â€“Settings é€‰é¡¹ï¼Œæ‰¾åˆ° Personal access tokens é¡µé¢ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ Generate new token æŒ‰é’®ä¼šç”Ÿæˆæ–°çš„tokenï¼Œç‚¹å‡»åæç¤ºè¾“å…¥å¯†ç åç»§ç»­ï¼Œç„¶åæ¥åˆ°å¦‚ä¸‹ç•Œé¢ï¼Œå–ä¸ªåå­—ï¼ˆæˆ‘è¿™é‡Œå– Travis_Token ä¸‹é¢çš„é…ç½®æ–‡ä»¶ä¸­ä¼šç”¨åˆ°)ï¼Œå‹¾é€‰ç›¸åº”æƒé™ï¼Œè¿™é‡Œåªéœ€è¦ repo ä¸‹å…¨éƒ¨å’Œ user ä¸‹çš„ user:email å³å¯ã€‚ ç”Ÿæˆå®Œæˆåï¼Œå°†è¯¥tokenæ‹·è´ä¸‹æ¥ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è¯¥tokenåªæœ‰è¿™ä¸ªæ—¶å€™æ‰èƒ½çœ‹åˆ°ï¼Œå½“å†æ¬¡è¿›å…¥è¿™ä¸ªé¡µé¢æ—¶å°±åªä¼šæ˜¾ç¤ºä¹‹å‰è®¾ç½®çš„åç§°äº†ã€‚å¦‚æœå¿˜è®°äº†åªèƒ½é‡æ–°ç”Ÿæˆä¸€ä¸ªã€‚ åœ¨Travis CIä¸­é…ç½®å°†ä¸Šé¢è·å–åˆ°çš„tokenæ·»åŠ åˆ° Environment Variables éƒ¨åˆ†ï¼Œå€¼ä¸ºè¯¥ token ,è€Œåç§°å³ä¸ºä¸Šé¢è®¾ç½®çš„ Travis_Token (è¯·æ›´æ”¹ä¸ºä¸ªäººæ‰€è®¾ç½®åç§°)ã€‚ä¸å‹¾é€‰åé¢çš„ Display value in build log . å¦åˆ™ä¼šåœ¨æ—¥å¿—æ–‡ä»¶ä¸­æš´éœ²ä½ çš„ token ä¿¡æ¯ï¼Œè€Œæ—¥å¿—æ–‡ä»¶æ˜¯å…¬å¼€å¯è§çš„ã€‚ è‡³æ­¤æˆ‘ä»¬å·²ç»é…ç½®å¥½äº†è¦æ„å»ºçš„ä»“åº“å’Œè®¿é—®çš„tokenï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ„å»ºçš„é—®é¢˜äº†ã€‚ åˆ›å»º .travis.yml æ–‡ä»¶ä¹‹å‰çš„æ­¥éª¤ä¸­æˆ‘ä»¬å‹¾é€‰äº†ä¸€é¡¹ Build only if .travis.yml is present,æ‰€ä»¥æˆ‘ä»¬è¦åœ¨åšå®¢æºç æ–‡ä»¶çš„ hexo åˆ†æ”¯ä¸‹æ–°å¢ä¸€ä¸ª .travis.yml é…ç½®æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627language: node_js # è®¾ç½®è¯­è¨€node_js: stable # è®¾ç½®ç›¸åº”ç‰ˆæœ¬install: - npm install # å®‰è£…hexoåŠæ’ä»¶script: - hexo clean # æ¸…é™¤ - hexo g # ç”Ÿæˆafter_script: - cd ./public - git init - git config user.name &quot;yourname&quot; # ä¿®æ”¹name - git config user.email &quot;your email&quot; # ä¿®æ”¹email - git add . - git commit -m &quot;Travis CI Auto Builder&quot; - git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master # GH_TOKENæ˜¯åœ¨Travisä¸­é…ç½®tokençš„åç§°branches: only: - hexo #åªç›‘æµ‹hexoåˆ†æ”¯ï¼Œhexoæ˜¯æˆ‘çš„åˆ†æ”¯çš„åç§°ï¼Œå¯æ ¹æ®è‡ªå·±æƒ…å†µè®¾ç½®env: global: - GH_REF: github.com/yourname/yourname.github.io.git #è®¾ç½®GH_REFï¼Œæ³¨æ„æ›´æ”¹yourname æ³¨æ„ï¼šéœ€è¦å°†é…ç½®æ–‡ä»¶ä¸­çš„ GH_TOKEN æ¢æˆæˆ‘ä»¬è‡ªå·±è®¾å®šçš„åç§°ï¼Œè¿™é‡Œæˆ‘çš„é…ç½®åº”è¯¥æ˜¯ Travis_Token å³ - git push --force --quiet &quot;https://${Travis_Token}@${GH_REF}&quot; master:master # GH_TOKENæ˜¯åœ¨Travisä¸­é…ç½®tokençš„åç§°ã€‚ è¿˜è¦æ›´æ”¹ GH_REF ä¸­æˆ‘ä»¬çš„åšå®¢ä»“åº“çš„åœ°å€ã€‚ é…ç½®æ–‡ä»¶ä¸­çš„æ“ä½œä¹Ÿå¾ˆç®€å•ï¼Œè¿™ä¹Ÿæ˜¯ç½‘ä¸Šæ‰¾åˆ°çš„æ¯”è¾ƒå¸¸è§çš„ä¸€ç§é…ç½®æ ¼å¼äº†ã€‚ç„¶è€Œï¼Œè¿™ä»½é…ç½®æ–‡ä»¶ä¸­å´éšè—ç€ä¸€ä¸ªå¤§å‘ã€‚è‡³äºå¦‚ä½•è·³è¿‡å»ï¼Œåé¢å†è¯¦è¯´ã€‚ å®ç°è‡ªåŠ¨éƒ¨ç½²å½“ .travis.yml é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œæˆåï¼Œå°†å…¶æäº¤åˆ°è¿œç¨‹ä»“åº“çš„ hexo åˆ†æ”¯ä¸‹ï¼Œæ­¤æ—¶å¦‚æœä¹‹å‰çš„é…ç½®ä¸€åˆ‡okï¼Œæˆ‘ä»¬åº”è¯¥èƒ½åœ¨ Travis CI çš„åšå®¢é¡¹ç›®ä¸»é¡µé¡µé¢ä¸­çœ‹åˆ°è‡ªåŠ¨æ„å»ºå·²ç»åœ¨å¼€å§‹æ‰§è¡Œäº†ã€‚ä¸Šé¢ä¼šæ˜¾ç¤ºå‡ºæ„å»ºè¿‡ç¨‹ä¸­çš„æ—¥å¿—ä¿¡æ¯åŠçŠ¶æ€ç­‰ã€‚ é‡åˆ°çš„é—®é¢˜é—®é¢˜ä¸€ï¼šæç¤º .travis.yml æ–‡ä»¶æ ¼å¼é”™è¯¯åœ¨ Travis CI çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œå¦‚æœé‡åˆ°ä¸‹é¢çš„é”™è¯¯æç¤ºï¼Œé‚£å¯èƒ½å°±æ˜¯ .travis.yml æ–‡ä»¶çš„æ ¼å¼æœ‰é—®é¢˜ã€‚ 1234ERROR: An error occured while trying to parse your .travis.yml file.Please make sure that the file is valid YAML.http://lint.travis-ci.org can check your .travis.yml.The log message was: Build config file had a parse error: found character that cannot start any token while scanning for the next token at line 6 column 1. é€šè¿‡åœ¨githubä¸ŠæŸ¥è¯¢ï¼Œæˆ‘å‘ç°è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨é…ç½®æ–‡ä»¶ä¸­çš„ç¼©è¿›ä½¿ç”¨äº† tab é”®å¯¼è‡´çš„ã€‚å› ä¸ºåœ¨ä¸åŒçš„ç¼–è¾‘å™¨ä¸‹ï¼Œtab é”®è¡¨ç¤ºçš„å®½åº¦å¯èƒ½ä¸åŒã€‚ è¿™é‡Œå»ºè®®æ˜¯ï¼šä¸è¦ç”¨ tab é”®ï¼Œè€Œæ˜¯ç”¨é€‚å½“çš„ç©ºæ ¼å®ç°ç¼©è¿› found character &#39;\t&#39; that cannot start any token while scanning for the next token at line Â· Issue #136 Â· ruby/psych Â· GitHub é—®é¢˜äºŒï¼šTravis CIçš„è‡ªåŠ¨æ„å»ºæˆåŠŸï¼Œä½†æ˜¯æ„å»ºå®Œæˆåçš„é¡¹ç›®æ²¡æœ‰æ¨é€åˆ°githubä¸­123456......git commit -m &quot;Travis CI Auto Builder&quot;git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:masterremote: Anonymous access to Leafney/Leafney.github.io.git denied.fatal: Authentication failed for &apos;https://@github.com/Leafney/Leafney.github.io.git/&apos; æŸ¥çœ‹æ—¥å¿—æç¤ºæ˜¯æƒé™é—®é¢˜ã€‚ è¿™é‡Œçš„é—®é¢˜æ˜¯æˆ‘åœ¨ .travis.yml é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æŠŠ ${GH_TOKEN} éƒ¨åˆ†æ¢æˆè‡ªå·±åœ¨ Travis CI ä¸­å¡«å†™çš„tokenåç§°è€Œå¯¼è‡´çš„ã€‚æ‰§è¡Œæ—¶æ‰¾ä¸åˆ°tokenï¼Œä¹Ÿå°±æ²¡æ³•è®¾ç½®æƒé™äº†ã€‚ é—®é¢˜ä¸‰ï¼šmaster commit æ ‘è¢«æ¸…ç©º â˜†å¦‚æœä½ æŒ‰ç…§ä¸Šé¢çš„ travis.yml é…ç½®æ–‡ä»¶çš„è®¾ç½®å»è‡ªåŠ¨æ„å»ºä½ çš„åšå®¢ï¼Œä½ ä¼šå‘ç° master åˆ†æ”¯çš„æäº¤è®°å½•åªæœ‰å½“å‰æäº¤çš„è¿™ä¸€æ¡ï¼Œè€Œä¸”æ— è®ºæ“ä½œå¤šå°‘æ¬¡ï¼Œä¹Ÿä»…ä»…åªæœ‰ä¸€æ¡ã€‚è¿™è¿˜çœŸçš„æ˜¯ä¸€ä¸ªå¤§å‘å‘€ï¼ æ¯”å¦‚ä¸‹é¢è¿™ä½ç½‘å‹çš„ç«™ç‚¹ï¼š GitHub - hhstore/hhstore.github.io: ä¸ªäººæŠ€æœ¯åšå®¢ åœ¨ master åˆ†æ”¯ä¸‹å°±åªæœ‰ä¸€æ¡æäº¤è®°å½•ã€‚ .travis.yml éƒ¨åˆ†é…ç½®å†…å®¹ï¼š 12345678after_script: - cd ./public - git init - git config user.name &quot;yourname&quot; - git config user.email &quot;your email&quot; - git add . - git commit -m &quot;update&quot; - git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master ä»”ç»†æŸ¥çœ‹ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å‘ç°æ¯æ¬¡éƒ½æ˜¯å°† public ç›®å½•ä¸‹çš„æ–‡ä»¶é‡æ–°ç”Ÿæˆäº†ä¸€ä¸ªgité¡¹ç›®ï¼Œç„¶åå¼ºåˆ¶è¦†ç›–æäº¤åˆ°äº† master åˆ†æ”¯ä¸‹ï¼Œè¿™å°±æ˜¯é—®é¢˜çš„æ‰€åœ¨ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°†é…ç½®æ–‡ä»¶æ”¹ä¸ºäº†å¦‚ä¸‹çš„å†…å®¹ï¼š 123456789101112after_script: - git clone https://$&#123;GH_REF&#125; .deploy_git - cd .deploy_git - git checkout master - cd ../ - mv .deploy_git/.git/ ./public/ - cd ./public - git config user.name &quot;yourname&quot; - git config user.email &quot;your email&quot; - git add . - git commit -m &quot;Travis CI Auto Builder&quot; - git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master åœ¨ after_script éƒ¨åˆ†ï¼Œæˆ‘å…ˆå°†åšå®¢é¡¹ç›® clone åˆ°æœ¬åœ°çš„ .deploy_git ç›®å½•ä¸‹ï¼ˆç›®å½•åå¯è‡ªå®šä¹‰ï¼‰,ç„¶ååˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œå°† master åˆ†æ”¯ä¸‹çš„ .git ç›®å½•æ‹·è´åˆ°äº† public ç›®å½•ä¸‹ï¼Œæ¥ç€ç»§ç»­åé¢çš„ commit æ“ä½œã€‚ è¿™é‡Œç®—æ˜¯é‡‡ç”¨äº†ä¸€ç§ æ¢ä½ çš„æ–¹å¼ã€‚ä¹‹å‰æˆ‘ä»¬é€šè¿‡gitç®¡ç†æ–‡ä»¶æ—¶å¹¶ä¸ä¼šæ”¹åŠ¨ .git ç›®å½•ï¼Œè€Œåªæ˜¯æ›´æ”¹æ–‡ä»¶ã€‚ä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æäº¤çš„æ˜¯ public ç›®å½•ä¸‹çš„æ–°æ–‡ä»¶ã€‚è¿™æ ·ï¼Œå°±ä¼šä¿ç•™ä¹‹å‰çš„æäº¤è®°å½•äº†ã€‚ é™„ä¸Šæˆ‘åœ¨ä½¿ç”¨çš„é…ç½®æ–‡ä»¶å†…å®¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839language: node_js # è®¾ç½®è¯­è¨€node_js: stable # è®¾ç½®ç›¸åº”ç‰ˆæœ¬cache: apt: true directories: - node_modules # ç¼“å­˜ä¸ç»å¸¸æ›´æ”¹çš„å†…å®¹before_install: - npm install hexo-cli -ginstall: - npm install # å®‰è£…hexoåŠæ’ä»¶script: - hexo clean # æ¸…é™¤ - hexo g # ç”Ÿæˆafter_script: - git clone https://$&#123;GH_REF&#125; .deploy_git - cd .deploy_git - git checkout master - cd ../ - mv .deploy_git/.git/ ./public/ - cd ./public - git config user.name &quot;your name&quot; - git config user.email &quot;your email&quot; - git add . - git commit -m &quot;Travis CI Auto Builder&quot; - git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:masterbranches: only: - hexo # åªç›‘æµ‹hexoåˆ†æ”¯env: global: - GH_REF: github.com/yourname/yourname.github.io.git #è®¾ç½®GH_REFï¼Œæ³¨æ„æ›´æ”¹æˆè‡ªå·±çš„ä»“åº“åœ°å€ æ³¨æ„ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­çš„æŸäº›å‚æ•°æ”¹ä¸ºè‡ªå·±çš„ã€‚ é—®é¢˜å››ï¼šæ·»åŠ  commit æ—¶é—´æˆ³ 2017-8-23 11:25:34 Update: æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•é…ç½® travis.yml çš„å†…å®¹ï¼Œæˆ‘åœ¨ä¸€æ®µæ—¶é—´åå‘ç°åœ¨ master åˆ†æ”¯ä¸‹çš„æäº¤è®°å½•æ˜¯è¿™æ ·çš„ï¼š 1234567Travis CI Auto BuilderTravis CI Auto BuilderTravis CI Auto Builder.... è€Œä¹‹å‰åœ¨ä½¿ç”¨ hexo d ç›´æ¥éƒ¨ç½²çš„æ—¶å€™çš„æäº¤è®°å½•æ˜¯è¿™æ ·çš„ï¼š 1234567Site updated: 2017-06-22 22:29:10Site updated: 2017-04-19 08:13:36Site updated: 2017-03-27 20:54:40... çœ‹åˆ°æ¯æ¬¡çš„æäº¤è®°å½•ä¸­æ²¡æœ‰æäº¤çš„æ—¶é—´æˆ³ï¼Œæ„Ÿè§‰ä¼¼ä¹ç¼ºå°‘äº†äº›ä»€ä¹ˆï¼Œæ‰€ä»¥è€ƒè™‘ç€è¦æŠŠ commit çš„æ—¶é—´æˆ³ç»™åŠ ä¸Šã€‚ é€šè¿‡æŸ¥çœ‹ travis.yml çš„æ–‡æ¡£ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°å¦‚ä½•ç›´æ¥è·å–å½“å‰æ—¶é—´æˆ–è€…å’Œ date æœ‰å…³çš„æ–¹æ³•ï¼Œä½†æ˜¯ script å‘½ä»¤ä¸‹æ˜¯å¯ä»¥æ‰§è¡Œ shell å‘½ä»¤çš„ï¼Œæ‰€ä»¥å¯¹ travis.yml æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ã€‚ åœ¨ shell ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³ï¼Œå¯ä»¥è¿™æ ·ï¼š 1234#/bin/bash&gt; date +&quot;%Y-%m-%d %H:%M&quot;2017-08-23 11:07 éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå‘½ä»¤ä¸­è¦ä¸º publish-to-gh-pages.sh æ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå¦åˆ™ä¼šæŠ¥æ— æƒé™é”™è¯¯ï¼š 1234# travis-ci log$ ./publish-to-gh-pages.sh/home/travis/.travis/job_stages: line 57: ./publish-to-gh-pages.sh: Permission denied å¦å¤–ï¼Œé€šè¿‡åœ¨æµ‹è¯•ä¸­å‘ç°ï¼ŒTravis CI ä¸­ä½¿ç”¨çš„linuxç³»ç»Ÿåœ¨ç¼–è¯‘ç”Ÿæˆæ—¶ä½¿ç”¨çš„æ˜¯UTCæ—¶é—´ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨githubä¸­çš„æäº¤åˆ—è¡¨ä¸­çœ‹åˆ°çš„æäº¤æ—¶é—´å°±ä¼šæ™š8å°æ—¶ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ‰§è¡Œæ—¶å°†æ—¶åŒºæ”¹ä¸ºä¸œå…«åŒºã€‚ è¿™é‡Œé€šè¿‡åœ¨ .travis.yml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç è§£å†³ï¼š 12before_install: - export TZ=&apos;Asia/Shanghai&apos; ä¿®æ”¹åçš„ .travis.yml å†…å®¹ï¼š 12345678910111213141516171819202122232425262728293031language: node_js # è®¾ç½®è¯­è¨€node_js: stable # è®¾ç½®ç›¸åº”ç‰ˆæœ¬cache: apt: true directories: - node_modules # ç¼“å­˜ä¸ç»å¸¸æ›´æ”¹çš„å†…å®¹before_install: - export TZ=&apos;Asia/Shanghai&apos; # æ›´æ”¹æ—¶åŒº - npm install hexo-cli -g - chmod +x ./publish-to-gh-pages.sh # ä¸ºshellæ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™install: - npm install # å®‰è£…hexoåŠæ’ä»¶script: - hexo clean # æ¸…é™¤ - hexo g # ç”Ÿæˆafter_script: - ./publish-to-gh-pages.shbranches: only: - hexo # åªç›‘æµ‹hexoåˆ†æ”¯env: global: - GH_REF: github.com/yourname/yourname.github.io.git #è®¾ç½®GH_REFï¼Œæ³¨æ„æ›´æ”¹æˆè‡ªå·±çš„ä»“åº“åœ°å€ å°† after_script æ®µä¸­çš„å‘½ä»¤ç§»åˆ°äº†å•ç‹¬çš„shellæ–‡ä»¶ä¸­ï¼š æ–‡ä»¶ publish-to-gh-pages.sh å†…å®¹ï¼š 1234567891011121314151617181920#!/bin/bashset -evgit clone https://$&#123;GH_REF&#125; .deploy_gitcd .deploy_gitgit checkout mastercd ../mv .deploy_git/.git/ ./public/cd ./publicgit config user.name &quot;your name&quot;git config user.email &quot;your email&quot;# add commit timestampgit add .git commit -m &quot;Travis CI Auto Builder at `date +&quot;%Y-%m-%d %H:%M&quot;`&quot;git push --force --quiet &quot;https://$&#123;TravisCIToken&#125;@$&#123;GH_REF&#125;&quot; master:master æ³¨æ„ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­çš„æŸäº›å‚æ•°æ”¹ä¸ºè‡ªå·±çš„ã€‚ Customizing the Build - Travis CI travis ci - Permission denied for build.sh file - Stack Overflow Shellä¸­dateå‘½ä»¤ç”¨æ³• | Hom é—®é¢˜äº”ï¼šä½¿ç”¨ x-oauth-basicåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä½ç½‘å‹è§£å†³ â€œmaster commit æ ‘è¢«æ¸…ç©ºâ€ çš„é—®é¢˜æ—¶é‡‡ç”¨äº†å¦å¤–ä¸€ç§æ–¹æ³•ï¼Œå³åœ¨ after_script éƒ¨åˆ†è°ƒç”¨æ‰§è¡Œ hexo d å‘½ä»¤æ¥å‘å¸ƒã€‚è¿™æ ·çš„æ–¹å¼é‡åˆ°çš„é—®é¢˜æ˜¯éœ€è¦è®¾ç½® SSH Key æˆ–è€…å¿…é¡»è·å¾—æƒé™æ‰èƒ½è¿›è¡Œ push æ“ä½œã€‚ æœ‰ä¸€ç§æˆæƒçš„æ–¹å¼æ˜¯é€šè¿‡httpsä½¿ç”¨OAuthéªŒè¯çš„æ–¹å¼å°†tokenæ·»åŠ åˆ°urlä¸­æ¥æäº¤ã€‚å³éœ€è¦æ›´æ”¹ _config.yml ä¸­çš„å¦‚ä¸‹éƒ¨åˆ†ï¼š 12345## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repository: git@github.com:Leafney/Leafney.github.io.git branch: master ä¸ºï¼š 12345## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repository: https://&lt;token&gt;:x-oauth-basic@github.com/owner/repo.git branch: master è€Œè¿™æ ·ä¸€æ¥ token å°±æš´éœ²åœ¨é…ç½®æ–‡ä»¶ä¸­äº†ã€‚æ‰€ä»¥è¿˜éœ€è¦åœ¨æ“ä½œå‘½ä»¤ä¸­ä½¿ç”¨æ›¿æ¢çš„æ–¹å¼åªåœ¨è‡ªåŠ¨éƒ¨ç½²æ—¶æ›´æ”¹è¯¥tokenã€‚ è¿™é‡Œä»…åšä»‹ç»ï¼Œæ›´è¯¦ç»†å¯è®¿é—®ï¼š ä½¿ç”¨Travis Ciä½¿hexoè‡ªåŠ¨ç”Ÿæˆå¹¶éƒ¨ç½² | xingo&#39;s private plot Easier builds and deployments using Git over HTTPS and OAuth Â· GitHub é—®é¢˜å…­ï¼šgit branch åˆ†æ”¯æ“ä½œç›¸å…³å‘½ä»¤1234567891011121314151617181920212223242526# æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯(åˆ†ä¹‹åç§°å‰é¢å¸¦*è¡¨ç¤ºå½“å‰åˆ†æ”¯)&gt; git branch# æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰åˆ†æ”¯&gt; git branch -r# åˆ›å»ºåˆ†æ”¯ blog&gt; git branch blog# åˆ‡æ¢åˆ° blog åˆ†æ”¯&gt; git checkout blog# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯&gt; git checkout -b blog# åˆ é™¤åˆ†æ”¯&gt; git branch -d blog# æäº¤æœ¬åœ°teståˆ†æ”¯ä½œä¸ºè¿œç¨‹çš„teståˆ†æ”¯&gt; git push origin test:test# åˆå¹¶åˆ†æ”¯(å°†åç§°ä¸º[blog]çš„åˆ†æ”¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶)&gt; git merge blog# è·å–è¿œç¨‹æŒ‡å®šåˆ†æ”¯&gt; git pull origin blog é—®é¢˜ä¸ƒï¼šåšå®¢ä»“åº“æºç å¦‚æœæ²¡æœ‰è€å¿ƒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ä¸€æ­¥æ­¥æ“ä½œçš„è¯ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹æˆ‘çš„åšå®¢ä»“åº“æºç ï¼š GitHub - Leafney/Leafney.github.io: blog ç›¸å…³å‚è€ƒ æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²ä½ çš„Hexoåšå®¢åˆ°Githubä¸Š - ç®€ä¹¦ ä½¿ç”¨ Travis CI è‡ªåŠ¨éƒ¨ç½² Hexo - ç®€ä¹¦ ä½¿ç”¨ Travis-CI æ¥è‡ªåŠ¨åŒ–éƒ¨ç½² Hexo Â· ZHOU ç”¨TravisCIæ¥åšæŒç»­é›†æˆ | è¿›å‡»çš„é©¬æ–¯ç‰¹ Customizing the Build - Travis CI è¯¥æ–‡ç« åŒæ­¥å‘è¡¨åœ¨ï¼š ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²Hexoåšå®¢ - é…·å°å­© - åšå®¢å›­ ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²Hexoåšå®¢ | ITèŒƒå„¿]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Travis-CI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[reload-changed-without-restart-for-golang-web-gin]]></title>
    <url>%2F2017%2F08%2F01%2Freload-changed-without-restart-for-golang-web-gin%2F</url>
    <content type="text"><![CDATA[Gin is a HTTP web framework written in Go (Golang)ã€‚ä½†æ˜¯åœ¨è°ƒè¯•Giné¡¹ç›®æ—¶ï¼Œæ¯æ¬¡æ›´æ”¹äº†æ–‡ä»¶å†…å®¹åéƒ½éœ€è¦é‡æ–°è¿è¡Œ go run main.go å‘½ä»¤æ‰èƒ½çœ‹åˆ°æ›´æ”¹ã€‚é¡¹ç›® codegangsta/gin å’Œ pilu/fresh æ˜¯é€šè¿‡é‡‡ç”¨çƒ­æ›´æ–°çš„æ–¹å¼æ¥è°ƒè¯•Giné¡¹ç›®æ¨èåº¦è¾ƒé«˜çš„ä¸¤ä¸ªï¼Œä¸”çœ‹å“ªä¸ªåœ¨æ“ä½œä¸Šæ›´åŠ çš„æ–¹ä¾¿ã€‚ gingithub åœ°å€GitHub - codegangsta/gin: Live reload utility for Go web servers ä¸‹è½½å¹¶å®‰è£…1go get github.com/codegangsta/gin å°† GOPATH/bin ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„ PATH ä¸­ã€‚ é¡¹ç›®æµ‹è¯•123456789101112131415package mainimport &quot;github.com/gin-gonic/gin&quot;func main() &#123; r := gin.Default() r.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.String(200, &quot;hello world\n&quot;) &#125;) r.Run(&quot;:3001&quot;)&#125;# è¿è¡Œ&gt; gin run main.go# æµè§ˆå™¨è®¿é—®http://localhost:3000 æ‰©å±• å› ä¸ºé¡¹ç›® codegangsta/gin å’Œ gin-gonic/gin é‡åï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ç”¨ Reload gin ä»£æŒ‡ codegangsta/gin;ç”¨ Web gin ä»£æŒ‡ gin-gonic/ginã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒReload ginçš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º 3000,å†…éƒ¨å¯¼å‘çš„go webé¡¹ç›®ç«¯å£ä¸º 3001ã€‚å¦‚æœé‡‡ç”¨ Reload gin çš„é»˜è®¤ç«¯å£ï¼Œåˆ™éœ€è¦å°† Web gin çš„ç›‘å¬ç«¯å£æ”¹ä¸º 3001,å³ï¼šr.Run(&quot;:3001&quot;) ã€‚ å¦‚æœéœ€è¦è‡ªå®šä¹‰ç«¯å£ï¼Œé€šè¿‡ gin -h å¯ä»¥çœ‹åˆ° Reload gin çš„å¸¸ç”¨é…ç½®é¡¹ã€‚å…¶ä¸­: 12--port value, -p value port for the proxy server (default: 3000)--appPort value, -a value port for the Go web server (default: 3001) å¯ä»¥åˆ†åˆ«æŒ‡å®šç›‘å¬ç«¯å£å’Œæ˜ å°„ç«¯å£ã€‚ ä¸è¿‡ï¼Œç»è¿‡æµ‹è¯•ï¼Œè‡ªå®šä¹‰ç«¯å£æ—¶æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12345678Î» gin run -p 8082 -a 8080 main.goIncorrect Usage: flag provided but not defined: -pNAME: gin run - Run the gin proxy in the current working directoryUSAGE: gin run [arguments...] å¥½åƒç›®å‰åªèƒ½ä½¿ç”¨é»˜è®¤çš„ 3000 å’Œ 3001 ç«¯å£ã€‚ freshgithubåœ°å€GitHub - pilu/fresh: Build and (re)start go web apps after saving/creating/deleting source files. ä¸‹è½½åŠå®‰è£…1go get github.com/pilu/fresh å°† GOPATH/bin ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„ PATH ä¸­ã€‚ é¡¹ç›®æµ‹è¯•123456789101112131415161718package mainimport &quot;github.com/gin-gonic/gin&quot;func main() &#123; r := gin.Default() r.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.String(200, &quot;hello world\n&quot;) &#125;) r.Run(&quot;:8080&quot;)&#125;# è¿›å…¥é¡¹ç›®æ‰€åœ¨ç›®å½•&gt; cd /path/to/myapp# è¿è¡Œ&gt; fresh# æµè§ˆå™¨è®¿é—®http://localhost:8080 æ‰©å±•åŸé¡¹ç›®ä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨ï¼Œåªéœ€è¦åœ¨åŸé¡¹ç›®çš„ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ fresh å³å¯ã€‚ ç»ä»¥ä¸Šæµ‹è¯•ï¼Œæ¨èä½¿ç”¨ fresh æ¥è¿è¡Œ Gin é¡¹ç›®ã€‚ ç›¸å…³é“¾æ¥ GitHub - codegangsta/gin: Live reload utility for Go web servers GitHub - pilu/fresh: Build and (re)start go web apps after saving/creating/deleting source files. GitHub - gin-gonic/gin: Gin is a HTTP web framework written in Go (Golang). It features a Martini-like API with much better performance â€“ up to 40 times faster. If you need smashing performance, get yourself some Gin.]]></content>
      <tags>
        <tag>Golang</tag>
        <tag>Gin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangç½‘ç«™å¾®æ¡†æ¶Gin]]></title>
    <url>%2F2017%2F07%2F30%2Fgolang-web-framework-gin%2F</url>
    <content type="text"><![CDATA[Gin is a web framework written in Golang. å®‰è£… Ginè·å–åŒ…ï¼š 1&gt; go get github.com/gin-gonic/gin æ·»åŠ å¼•ç”¨ï¼š 1import &quot;github.com/gin-gonic/gin&quot; Gin web å…¥é—¨ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹12345678910111213141516171819202122232425package mainimport ( &quot;github.com/gin-gonic/gin&quot;)func main() &#123; router := gin.Default() router.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.String(200, &quot;hello world!&quot;) &#125;) //http://localhost:8081 postdata: name=tom router.POST(&quot;/&quot;, postHome) router.Run(&quot;:8081&quot;)&#125;func postHome(c *gin.Context) &#123; uName := c.PostForm(&quot;name&quot;) c.JSON(200, gin.H&#123; &quot;say&quot;: &quot;Hello &quot; + uName, &#125;)&#125; è¯·æ±‚æ–¹æ³•åå¿…é¡»å…¨éƒ¨æ˜¯å¤§å†™å­—æ¯1234567router.GET(&quot;/someGet&quot;, getting)router.POST(&quot;/somePost&quot;, posting)router.PUT(&quot;/somePut&quot;, putting)router.DELETE(&quot;/someDelete&quot;, deleting)router.PATCH(&quot;/somePatch&quot;, patching)router.HEAD(&quot;/someHead&quot;, head)router.OPTIONS(&quot;/someOptions&quot;, options) è·å–è·¯ç”±å‚æ•°é€šè¿‡ Context çš„ Param æ–¹æ³•æ¥è·å–ï¼š 12345678910111213141516171819...// http://localhost:8081/user/article/tommyrouter.GET(&quot;/user/:type/:name&quot;, getRouteStr)...func getRouteStr(c *gin.Context) &#123; ctype := c.Param(&quot;type&quot;) cname := c.Param(&quot;name&quot;) c.JSON(200, gin.H&#123; &quot;typeName&quot;: ctype, &quot;username&quot;: cname, &#125;)&#125;//result:&#123; &quot;typeName&quot;: &quot;article&quot;, &quot;username&quot;: &quot;tommy&quot;&#125; è·å–urlå‚æ•°é€šè¿‡ DefaultQuery æˆ– Query æ–¹æ³•è·å–ï¼š Query(&#39;xxx&#39;) å¦‚æœæ²¡æœ‰ç›¸åº”å€¼ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸² DefaultQuery(&quot;xxx&quot;,&quot;defaultValue&quot;) å¯è®¾ç½®é»˜è®¤å€¼,stringç±»å‹ 1234567891011121314151617181920212223242526... router.GET(&quot;/user&quot;, getQueryStrs)...func getQueryStrs(c *gin.Context) &#123; name := c.Query(&quot;name&quot;) //å¦‚æœæ²¡æœ‰ç›¸åº”å€¼ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸² age := c.DefaultQuery(&quot;age&quot;, &quot;0&quot;) //å¯è®¾ç½®é»˜è®¤å€¼,stringç±»å‹ c.JSON(200, gin.H&#123; &quot;name&quot;: name, &quot;age&quot;: age, &#125;)&#125;//result://http://localhost:8081/user?name=tom&amp;age=23&#123; &quot;age&quot;: &quot;23&quot;, &quot;name&quot;: &quot;tom&quot;&#125;//result2://http://localhost:8081/user?name=tom&#123; &quot;age&quot;: &quot;0&quot;, &quot;name&quot;: &quot;tom&quot;&#125; c.Request.URL.Query() å¯è·å–æ‰€æœ‰urlè¯·æ±‚å‚æ•° map[] é›†åˆï¼š 1234567 //è·å–æ‰€æœ‰urlè¯·æ±‚å‚æ•° reqData := c.Request.URL.Query() fmt.Printf(&quot;[info] req url data is %s\n&quot;, reqData)//result://http://localhost:8080?id=3&amp;name=zhangsan&amp;address=beijing[info] req url data is map[name:[zhangsan] address:[beijing] id:[3]] è·å–è¡¨å•å‚æ•°è¡¨å•å‚æ•°é€šè¿‡ PostForm æˆ– DefaultPostForm æ–¹æ³•è·å–ï¼š PostForm() DefaultPostForm(&quot;xxx&quot;,&quot;defaultValue&quot;) 12345678910111213141516171819 ... router.POST(&quot;/&quot;, getFormStr) ...func getFormStr(c *gin.Context) &#123; title := c.PostForm(&quot;title&quot;) cont := c.DefaultPostForm(&quot;cont&quot;, &quot;æ²¡æœ‰å†…å®¹&quot;) c.JSON(200, gin.H&#123; &quot;title&quot;: title, &quot;cont&quot;: cont, &#125;)&#125;//result://http://localhost:8081 postData: title:è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜&#123; &quot;cont&quot;: &quot;æ²¡æœ‰å†…å®¹&quot;, &quot;title&quot;: &quot;è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜&quot;&#125; c.Request.Body è·å–æ‰€æœ‰ post body æ•°æ®ï¼š 1234567891011 //è·å–post body x, _ := ioutil.ReadAll(c.Request.Body) fmt.Printf(&quot;[info] %s&quot;, string(x))//result:// post body type :x-www-form-urlencoded (user=tom pwd=123)[info] user=tom&amp;pwd=123//result:// post body type: raw application/json[info] &#123;&quot;name&quot;:&quot;zhangfei&quot;,&quot;id&quot;:32&#125; go - gin/golang - Empty Req Body - Stack Overflow Print Request Body empty Â· Issue #401 Â· gin-gonic/gin Â· GitHub è·å–æ‰€æœ‰ post data æ•°æ® ï¼ˆmap[] ç±»å‹ï¼‰ 1234567 c.Request.ParseForm() reqBodyData := c.Request.PostForm fmt.Printf(&quot;[info] req body data is %s \n&quot;, reqBodyData)//result:// post body type :x-www-form-urlencoded (user=tom pwd=123)[info] req body data is map[user:[tom] pwd:[123]] go - Gin Gonic array of values from PostForm - Stack Overflow è·¯ç”±ç¾¤ç»„æ”¯æŒ ä¸€çº§ æˆ– å¤šçº§ åˆ†ç»„çš„è·¯ç”±è§„åˆ™ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657 ... //è·¯ç”±åˆ†ç»„ articleGroup := router.Group(&quot;/article&quot;) &#123; articleGroup.GET(&quot;/one/:id&quot;, getArticleByid) articleGroup.GET(&quot;/list&quot;, getArticleList) &#125; //å¤šçº§è·¯ç”±åˆ†ç»„ apiGroup := router.Group(&quot;/api&quot;) apiv1Group := apiGroup.Group(&quot;/v1&quot;) &#123; apiv1Group.GET(&quot;/user&quot;, getApiV1User) &#125; apiv2Group := apiGroup.Group(&quot;/v2&quot;) &#123; apiv2Group.GET(&quot;/order&quot;, getApiV2Order) &#125; ...func getArticleByid(c *gin.Context) &#123; a_id := c.Param(&quot;id&quot;) c.String(200, a_id)&#125;//result://http://localhost:8081/article/one/33func getArticleList(c *gin.Context) &#123; c.JSON(200, gin.H&#123; &quot;a&quot;: &quot;1&quot;, &quot;b&quot;: &quot;2&quot;, &#125;)&#125;//result://http://localhost:8081/article/list&#123; &quot;a&quot;: &quot;1&quot;, &quot;b&quot;: &quot;2&quot;&#125;func getApiV1User(c *gin.Context) &#123; c.String(200, &quot;api/v1/user&quot;)&#125;//result://http://localhost:8081/api/v1/userapi/v1/userfunc getApiV2Order(c *gin.Context) &#123; c.String(200, &quot;api/v2/order&quot;)&#125;//result://http://localhost:8081/api/v2/orderapi/v2/order æ•°æ®ç»‘å®š Bind() BindJSON() 123456789101112131415161718192021222324252627282930 ... //ç»‘å®šæ™®é€šè¡¨å• (user=tom&amp;&amp;pwd=123) router.POST(&quot;/loginform&quot;, func(c *gin.Context) &#123; var form Login if c.Bind(&amp;form) == nil &#123; if form.User == &quot;tom&quot; &amp;&amp; form.Password == &quot;123&quot; &#123; c.JSON(200, gin.H&#123;&quot;status&quot;: &quot;form logined in&quot;&#125;) &#125; else &#123; c.JSON(201, gin.H&#123;&quot;status&quot;: &quot;form no login&quot;&#125;) &#125; &#125; &#125;) //ç»‘å®šJSON (&#123;&quot;user&quot;:&quot;tom&quot;,&quot;pwd&quot;:&quot;123&quot;&#125;) Content-Type:application/json router.POST(&quot;/loginjson&quot;, func(c *gin.Context) &#123; var json Login if c.BindJSON(&amp;json) == nil &#123; if json.User == &quot;tom&quot; &amp;&amp; json.Password == &quot;123&quot; &#123; c.JSON(200, gin.H&#123;&quot;status&quot;: &quot;json logined in&quot;&#125;) &#125; else &#123; c.JSON(201, gin.H&#123;&quot;status&quot;: &quot;json no login&quot;&#125;) &#125; &#125; &#125;) ...type Login struct &#123; User string `form:&quot;user&quot; json:&quot;user&quot;` Password string `form:&quot;pwd&quot; json:&quot;pwd&quot;`&#125; POSTä¸Šä¼ æ–‡ä»¶12345678910111213141516...//è¡¨å•ä¸Šä¼ æ–‡ä»¶ http://localhost:8081/upload // key:upload value: file....//result://&#123; //&quot;filename&quot;: &quot;1009e3ee4bc0919e11d32e00ccf55cdf.jpg&quot;//&#125;router.POST(&quot;/upload&quot;, func(c *gin.Context) &#123; _, header, _ := c.Request.FormFile(&quot;upload&quot;) filename := header.Filename c.JSON(200, gin.H&#123; &quot;filename&quot;: filename, &#125;)&#125;)... æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚ç±»å‹ï¼Œè¿”å›å¯¹åº”çš„å“åº”æ ¼å¼1234567891011121314...router.GET(&quot;/getdata&quot;, func(c *gin.Context) &#123; contentType := c.Request.Header.Get(&quot;Content-Type&quot;) switch contentType &#123; case &quot;application/json&quot;: c.JSON(200, gin.H&#123;&quot;user&quot;: &quot;å¼ é£&quot;, &quot;address&quot;: &quot;é•¿å‚å¡&quot;&#125;) case &quot;application/xml&quot;: c.XML(200, gin.H&#123;&quot;user&quot;: &quot;å¼ é£&quot;, &quot;address&quot;: &quot;é•¿å‚å¡&quot;&#125;) case &quot;application/x-www-form-urlencoded&quot;: c.String(200, &quot;å¼ é£ é•¿å‚å¡&quot;) &#125;&#125;)... å­—ç¬¦ä¸²å“åº”1234import &quot;net/http&quot;c.String(200, &quot;some string&quot;)c.String(http.StatusOK, &quot;some string&quot;) JSON/XML/YAMLç­‰æ ¼å¼å“åº”12345...c.JSON(http.StatusOK, msg)c.XML(http.StatusOK, msg)c.YAML(http.StatusOK, msg)... è§†å›¾å“åº”12345678910111213141516171819202122232425262728293031323334 ... //åŠ è½½æ¨¡æ¿ router.LoadHTMLGlob(&quot;templates/*&quot;) // router.LoadHTMLFiles(&quot;templates/index.html&quot;,&quot;templates/article.html&quot;) router.GET(&quot;/&quot;, func(c *gin.Context) &#123; //æ ¹æ®å®Œæ•´æ–‡ä»¶åæ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¼ é€’å‚æ•° c.HTML(200, &quot;index.html&quot;, gin.H&#123; &quot;say&quot;: &quot;Hello World!&quot;, &#125;) &#125;) ...//index.html:&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h3&gt;&#123;&#123; .say &#125;&#125;&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;//result:&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h3&gt;Hello World!&lt;/h3&gt; &lt;/body&gt;&lt;/html&gt; åŠ è½½å¤šå±‚æ¨¡æ¿è·¯å¾„ç»æµ‹è¯•ï¼šå¦‚æœæ˜¯å¤šå±‚çº§çš„æ¨¡æ¿æ–‡ä»¶ï¼Œè¦åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ä½¿ç”¨1&#123;&#123;define xxx&#125;&#125; &#123;&#123;end&#125;&#125; å°†è¯¥æ¨¡æ¿ä½œä¸ºåµŒå¥—æ¨¡æ¿ï¼š 12345678910111213141516//åŠ è½½æ¨¡æ¿router.LoadHTMLGlob(&quot;templates/**/*&quot;)// router.LoadHTMLFiles(&quot;templates/index.html&quot;,&quot;templates/article.html&quot;)router.GET(&quot;/articles/index&quot;, func(c *gin.Context) &#123; //æ ¹æ®å®Œæ•´æ–‡ä»¶åæ¸²æŸ“æ¨¡æ¿ï¼Œå¹¶ä¼ é€’å‚æ•° c.HTML(200, &quot;articles/index.html&quot;, gin.H&#123; &quot;say&quot;: &quot;Article index!&quot;, &#125;)&#125;)router.GET(&quot;/users/index&quot;, func(c *gin.Context) &#123; c.HTML(200, &quot;/users/index.html&quot;, gin.H&#123; &quot;say&quot;: &quot;User index!&quot;, &#125;)&#125;) templates/articles/index.html: 1234567891011&#123;&#123;define &quot;articles/index.html&quot;&#125;&#125;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h3&gt;&#123;&#123; .say &#125;&#125;&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&#123;&#123;end&#125;&#125; templates/users/index.html: 1234567891011&#123;&#123;define &quot;users/index.html&quot;&#125;&#125;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h3&gt;&#123;&#123; .say &#125;&#125;&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;&#123;&#123;end&#125;&#125; æä¾›é™æ€æ–‡ä»¶ Static() StaticFS() StatucFile() ç¤ºä¾‹: 123456789func main() &#123; router := gin.Default() router.Static(&quot;/assets&quot;, &quot;./assets&quot;) router.StaticFS(&quot;/more_static&quot;, http.Dir(&quot;my_file_system&quot;)) router.StaticFile(&quot;/favicon.ico&quot;, &quot;./resources/favicon.ico&quot;) // Listen and serve on 0.0.0.0:8080 router.Run(&quot;:8080&quot;)&#125; å¾…è¯¦ç»†ç ”ç©¶ã€‚ é‡å®šå‘æ”¯æŒ å†…éƒ¨ å’Œ å¤–éƒ¨ åœ°å€çš„é‡å®šå‘ 123456789101112131415...//è·³è½¬åˆ°å¤–éƒ¨åœ°å€router.GET(&quot;/abc&quot;, func(c *gin.Context) &#123; c.Redirect(302, &quot;http://www.baidu.com&quot;)&#125;)//è·³è½¬åˆ°å†…éƒ¨åœ°å€router.GET(&quot;def&quot;, func(c *gin.Context) &#123; c.Redirect(302, &quot;/home&quot;)&#125;)router.GET(&quot;/home&quot;, func(c *gin.Context) &#123; c.String(200, &quot;home page&quot;)&#125;)... è‡ªå®šä¹‰ä¸­é—´ä»¶åŠä¸­é—´ä»¶çš„ä½¿ç”¨æ–¹å¼12345678910111213141516171819202122232425262728293031323334353637383940414243 ...func main() &#123; // router := gin.Default() router := gin.New() //å…¨å±€ä¸­é—´ä»¶ router.Use(MyLogger()) router.GET(&quot;/test&quot;, func(c *gin.Context) &#123; example := c.MustGet(&quot;example&quot;).(string) c.String(200, example) &#125;) //å•è·¯ç”±ä¸­é—´ä»¶ router.GET(&quot;/abc&quot;,MyMiddelware(),getAbc) //ç¾¤ç»„è·¯ç”±ä¸­é—´ä»¶ aGroup:=router.Group(&quot;/&quot;,MyMiddelware()) //ä¸­é—´ä»¶å¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ª aGroup:=router.Group(&quot;/&quot;,MyMiddelware(),My2Middelware(),My3Middelware()) //æˆ–è€…ï¼šç¾¤ç»„è·¯ç”±ä¸­é—´ä»¶ bGroup:=router.Group(&quot;/&quot;) bGroup.Use(MyMiddelware()) &#123; bGroup.GET(&quot;/v1&quot;,getV1) &#125; router.Run(&quot;:8081&quot;)&#125;func MyLogger() gin.HandlerFunc &#123; return func(c *gin.Context) &#123; c.Set(&quot;example&quot;, &quot;123465&quot;) c.Next() &#125;&#125; å¼‚æ­¥å¤„ç†goroutine ä¸­åªèƒ½ä½¿ç”¨åªè¯»çš„ä¸Šä¸‹æ–‡ c.Copy() 1234567891011121314151617181920...//å¼‚æ­¥router.GET(&quot;/async&quot;, func(c *gin.Context) &#123; // goroutine ä¸­åªèƒ½ä½¿ç”¨åªè¯»çš„ä¸Šä¸‹æ–‡ c.Copy() cCp := c.Copy() go func() &#123; time.Sleep(5 * time.Second) //éœ€è¦ä½¿ç”¨åªè¯»ä¸Šä¸‹æ–‡ log.Println(&quot;Done! in path &quot; + cCp.Request.URL.Path) &#125;()&#125;)//åŒæ­¥router.GET(&quot;/sync&quot;, func(c *gin.Context) &#123; time.Sleep(5 * time.Second) //å¯ä»¥ä½¿ç”¨åŸå§‹ä¸Šä¸‹æ–‡ log.Println(&quot;Done! in path &quot; + c.Request.URL.Path)&#125;)... åˆå§‹åŒ–ä¸å¸¦ä¸­é—´ä»¶å’Œå¸¦æœ‰é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”± r := gin.New() åˆ›å»ºä¸å¸¦ä¸­é—´ä»¶çš„è·¯ç”± r := gin.Default() åˆ›å»ºå¸¦æœ‰é»˜è®¤ä¸­é—´ä»¶çš„è·¯ç”±:æ—¥å¿—ä¸æ¢å¤ä¸­é—´ä»¶ Cookie http://www.grdtechs.com/2016/03/29/gin-setcookie/ å…¶ä»–ç¤ºä¾‹è·å–æ‰€æœ‰è¯·æ±‚å‚æ•° è·å–æ‰€æœ‰URLè¯·æ±‚å‚æ•° 12reqData := c.Request.URL.Query()fmt.Printf(&quot;[info] req url data is %s\n&quot;, reqData) è·å–æ‰€æœ‰Bodyè¯·æ±‚å‚æ•° 123c.Request.ParseForm()reqBodyData := c.Request.PostFormfmt.Printf(&quot;[info] req body data is %s \n&quot;, reqBodyData) è·å–è¯·æ±‚å¤´ä¿¡æ¯123456789// è·å–è¯·æ±‚å¤´Headerä¸­çš„ key sign timestamptoken := c.Request.Header.Get(&quot;X-Auth-Token&quot;)key := c.Request.Header.Get(&quot;X-Auth-Key&quot;)timestamp := c.Request.Header.Get(&quot;X-Auth-TimeStamp&quot;)fmt.Printf(&quot;[info] key is %s ,timestamp is %s\n&quot;, key, timestamp)//è·å–Post putè¯·æ±‚æ¨¡å¼ä¸‹çš„Content-lengthconlength := c.Request.Header.Get(&quot;Content-Length&quot;)fmt.Printf(&quot;[info] Content-Length is %s\n&quot;, conlength) è·å–è¯·æ±‚ Method Host URL ContentLength1234567//åˆ¤æ–­è¯·æ±‚Method// GET POST PUT DELETE OPTIONSfmt.Println(&quot;[info]&quot;, c.Request.Method)fmt.Println(&quot;[info]&quot;, c.Request.Host) // localhost:8080fmt.Println(&quot;[info]&quot;, c.Request.URL) ///?id=3&amp;name=zhangsan&amp;address=beijing//è·å–è¯·æ±‚å¤´ä¸­æ•°æ®é•¿åº¦ ContentLengthfmt.Println(&quot;[info]&quot;, c.Request.ContentLength) // POST for 16 or GET for 0 CORS è·¨åŸŸè¯·æ±‚ (æœªæµ‹è¯•)123456789101112131415 // CORS middleware g.Use(CORSMiddleware())func CORSMiddleware() gin.HandlerFunc &#123; return func(c *gin.Context) &#123; c.Writer.Header().Set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;) c.Writer.Header().Set(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type, Content-Length, Accept-Encoding, X-CSRF-Token, Authorization&quot;) if c.Request.Method == &quot;OPTIONS&quot; &#123; c.Abort(200) return &#125; c.Next() &#125;&#125; Json not work Â· Issue #149 Â· gin-gonic/gin Â· GitHub å®šä¹‰ struct æ—¶ï¼Œå‚æ•°çš„é¦–å­—æ¯è¦å¤§å†™æ‰èƒ½è¢«è®¿é—®åˆ°12345type ReturnMsg struct &#123; Code int `json:&quot;code&quot;` Msg string `json:&quot;msg&quot;` Data interface&#123;&#125; `json:&quot;data&quot;`&#125; Go json.Marshal(struct) returns &quot;{}&quot; - Stack Overflow è¾“å‡ºä¸€ä¸ªstructå¯¹è±¡123456789 ... c.JSON(403, ReturnMsg&#123;Code: 1, Msg: &quot;req error&quot;&#125;) ...type ReturnMsg struct &#123; Code int `json:&quot;code&quot;` Msg string `json:&quot;msg&quot;` Data interface&#123;&#125; `json:&quot;data&quot;`&#125; ginä¸­é—´ä»¶é˜»æ­¢è¯·æ±‚ç»§ç»­è®¿é—®c.Abort() 1234567891011121314151617token := c.Request.Header.Get(&quot;X-Auth-Token&quot;)key := c.Request.Header.Get(&quot;X-Auth-Key&quot;)timestamp := c.Request.Header.Get(&quot;X-Auth-TimeStamp&quot;)//åˆ¤æ–­è¯·æ±‚å¤´ä¸­æ˜¯å¦å«æœ‰å¿…é¡»çš„ä¸‰ä¸ªå‚æ•°if token == &quot;&quot; || key == &quot;&quot; || timestamp == &quot;&quot; &#123; //ç»æµ‹è¯•ï¼Œc.Abort() åœ¨å‰åœ¨åå‡å¯ // c.Abort() // c.JSON(403, ReturnMsg&#123;Code: 1, Msg: &quot;req error&quot;&#125;) c.JSON(403, ReturnMsg&#123;Code: 1, Msg: &quot;req error&quot;&#125;) c.Abort() return //ä¸€å®šè¦åŠ return&#125;c.Next() go - Failed to Abort() context - gin - Stack Overflow ginå®‰è£…æŠ¥é”™å®‰è£… gin åŒ…æ—¶å¯èƒ½ä¼šæŠ¥ x/net ç›¸å…³é”™è¯¯ï¼Œå¯ä»¥å…ˆä¸‹è½½è¯¥å¿…é¡»åŒ…ï¼š 1234567$ mkdir -p $GOPATH/src/golang.org/x/$ cd $GOPATH/src/golang.org/x/$ git clone https://github.com/golang/net.git net$ go install net Gin å®‰è£…æŠ¥é”™ - ç®€ä¹¦ golangä¸­ç›¸å…³æ˜“é”™ç‚¹æ—¶é—´æˆ³è½¬æ¢12345678910111213141516package mainimport ( &quot;fmt&quot; &quot;time&quot; &quot;strconv&quot;)func main() &#123; i, err := strconv.ParseInt(&quot;1405544146&quot;, 10, 64) if err != nil &#123; panic(err) &#125; tm := time.Unix(i, 0) fmt.Println(tm)&#125; date - How to parse unix timestamp in golang - Stack Overflow ä»€ä¹ˆç±»å‹å¯ä»¥å£°æ˜ä¸ºå¸¸é‡åŠåœ¨funcå¤–éƒ¨å£°æ˜å˜é‡æ—¶ä¸èƒ½ä½¿ç”¨:=æ•°å­—ç±»å‹ï¼Œå­—ç¬¦ä¸²æˆ–å¸ƒå°”ç±»å‹å¯ä»¥å£°æ˜ä¸º const å¸¸é‡ï¼›array ,slice æˆ– map ä¸èƒ½å£°æ˜ä¸ºå¸¸é‡ã€‚ mapç±»å‹ä¸èƒ½å£°æ˜ä¸ºå¸¸é‡: 12345678const myString = &quot;hello&quot;const pi = 3.14 // untyped constantconst life int = 42 // typed constant (can use only with ints)const ( First = 1 Second = 2 Third = 4) åœ¨å‡½æ•°funcå¤–éƒ¨å£°æ˜å˜é‡ï¼Œè¦ç”¨å®Œæ•´æ¨¡å¼ï¼š 1234var romanNumeralDict = map[int]string&#123; 1:&quot;a&quot;, 2:&quot;b&quot;,&#125; åœ¨å‡½æ•°funcå†…éƒ¨å£°æ˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ç¼©å†™æ¨¡å¼ï¼š 123romanNumeralDict := map[int]string&#123;...&#125; go - How to declare constant map in golang - Stack Overflow åˆ¤æ–­mapä¸­æ˜¯å¦å­˜åœ¨æŸå€¼ï¼Œå¯ä»¥å†™åœ¨ä¸€è¡Œ123456// æŸ¥æ‰¾é”®å€¼æ˜¯å¦å­˜åœ¨if v, ok := m1[&quot;a&quot;]; ok &#123; fmt.Println(v)&#125; else &#123; fmt.Println(&quot;Key Not Found&quot;)&#125; mapæ’åºmap æ˜¯æ— åºçš„: 1234567891011121314151617181920212223242526272829import ( &quot;fmt&quot; &quot;sort&quot;)func main() &#123; // fmt.Printf(&quot;Hello,æ˜¯æŒ‰æ­&quot;) // fmt.Printf(&quot;niå¥½å‘€&quot;) m := map[string]string&#123; &quot;sign&quot;: &quot;1399dke&quot;, &quot;user&quot;: &quot;zhangsan&quot;, &quot;timestamp&quot;: &quot;36644747373&quot;, &quot;id&quot;: &quot;3&quot;, &#125; fmt.Println(m) var keys []string for k := range m &#123; // fmt.Println(k) keys = append(keys, k) &#125; sort.Strings(keys) // fmt.Println(keys) for _, k := range keys &#123; fmt.Println(&quot;key:&quot;, k, &quot;Value :&quot;, m[k]) &#125;&#125; go - sort golang map values by keys - Stack Overflow for rangefor range å¯ä»¥éå† slice æˆ– mapã€‚å¹¶é€šè¿‡ä¸¤ä¸ªå‚æ•°(indexå’Œvalue)ï¼Œåˆ†åˆ«è·å–åˆ°sliceæˆ–è€…mapä¸­æŸä¸ªå…ƒç´ æ‰€åœ¨çš„indexä»¥åŠå…¶å€¼ã€‚ åœ¨Goçš„ forâ€¦range å¾ªç¯ä¸­ï¼ŒGoå§‹ç»ˆä½¿ç”¨å€¼æ‹·è´çš„æ–¹å¼ä»£æ›¿è¢«éå†çš„å…ƒç´ æœ¬èº«ã€‚ 1234for index, value := range mySlice &#123; fmt.Println(&quot;index: &quot; + index) fmt.Println(&quot;value: &quot; + value)&#125; goè¯­è¨€stringã€intã€int64äº’ç›¸è½¬æ¢12345678#stringåˆ°intint,err:=strconv.Atoi(string)#stringåˆ°int64int64, err := strconv.ParseInt(string, 10, 64)#intåˆ°stringstring:=strconv.Itoa(int)#int64åˆ°stringstring:=strconv.FormatInt(int64,10) http.Request123func getURL(w http.ResponseWriter, r *http.Request) &#123; url := r.URL.String()&#125; How to convert *url.URL to string in GO, Google App Engine - Stack Overflow ä¸­æ–‡ url ç¼–ç é—®é¢˜12345678910import &quot;net/url&quot; //urlç¼–ç  str := &quot;ä¸­æ–‡-_.&quot; unstr := &quot;%2f&quot; fmt.Printf(&quot;url.QueryEscape:%s&quot;, url.QueryEscape(str)) fmt.Println() s, _ := url.QueryUnescape(unstr) fmt.Printf(&quot;url.QueryUnescape:%s&quot;, s) fmt.Println() go ä¸­urlç¼–ç å’Œå­—ç¬¦è½¬ç (ç±»ä¼¼phpä¸­çš„urlencode å’Œhtmlspecialchars): 1234567891011121314151617181920212223242526package mainimport ( &quot;fmt&quot; &quot;html&quot; &quot;net/url&quot; &quot;testing&quot;)func Test_Escape(t *testing.T) &#123;//urlç¼–ç  str := &quot;ä¸­æ–‡-_.&quot; unstr := &quot;%2f&quot; fmt.Printf(&quot;url.QueryEscape:%s&quot;, url.QueryEscape(str)) fmt.Println() s, _ := url.QueryUnescape(unstr) fmt.Printf(&quot;url.QueryUnescape:%s&quot;, s) fmt.Println()//å­—ç¬¦è½¬ç  hstr := &quot;&lt;&quot; hunstr := &quot;&amp;lt&quot; fmt.Printf(&quot;html.EscapeString:%s&quot;, html.EscapeString(hstr)) fmt.Println() fmt.Printf(&quot;html.UnescapeString:%s&quot;, html.UnescapeString(hunstr)) fmt.Println()&#125; go ä¸­urlç¼–ç å’Œå­—ç¬¦è½¬ç (ç±»ä¼¼phpä¸­çš„urlencode å’Œhtmlspecialchars) - coolaf golangä¸­å­—ç¬¦ä¸²æ‹¼æ¥ä¸€ç§è¯´æ³•ï¼š å¦‚æœæ˜¯å°‘é‡å°æ–‡æœ¬æ‹¼æ¥ï¼Œç”¨ â€œ+â€ å°±å¥½å¦‚æœæ˜¯å¤§é‡å°æ–‡æœ¬æ‹¼æ¥ï¼Œç”¨ strings.Joinå¦‚æœæ˜¯å¤§é‡å¤§æ–‡æœ¬æ‹¼æ¥ï¼Œç”¨ bytes.Buffer å­—ç¬¦ä¸²è¿æ¥å“ªä¸€ç§æ–¹å¼æœ€é«˜æ•ˆ - Go æŠ€æœ¯ç¤¾åŒº - golang golang é«˜æ•ˆå­—ç¬¦ä¸²æ‹¼æ¥ - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº goè¯­è¨€ä¸­é«˜æ•ˆå­—ç¬¦ä¸²æ‹¼æ¥ strings åŒ… Goè¯­è¨€å¼€å‘-å­—ç¬¦ä¸²-stringsåŒ… | Plum Wine Blog - é’æ¢…é…’åšå®¢ è·å–å­—ç¬¦ä¸²çš„MD5å€¼12345678910import ( &quot;crypto/md5&quot; &quot;encoding/hex&quot;)func GetMD5Hash(text string) string &#123; hasher := md5.New() hasher.Write([]byte(text)) return hex.EncodeToString(hasher.Sum(nil))&#125; md5 example ç›¸å…³é“¾æ¥ GitHub - gin-gonic/gin: Gin is a HTTP web framework written in Go (Golang). It features a Martini-like API with much better performance â€“ up to 40 times faster. If you need smashing performance, get yourself some Gin. Gin Web Framework gin-doc-cn/README.md at master Â· ningskyer/gin-doc-cn Â· GitHub Goè¯­è¨€webæ¡†æ¶ gin | shanshanpt Gin å®‰è£…æŠ¥é”™ - ç®€ä¹¦ Building Go Web Applications and Microservices Using Gin - Semaphore Build a RESTful API Server with Golang and MySQL - Jinchuriki Golang å¾®æ¡†æ¶ Gin ç®€ä»‹ - ç®€ä¹¦ How to create a basic Restful API in Go â€“ Etienne Rouzeaud â€“ Medium Gin middleware examples - Dan Sosedoff REST Microservices in Go with Gin Go: Templating with the Gin Web Framework ç›¸å…³é—®é¢˜ å…³äºæ•°æ®ç»‘å®š how to bind query string? Â· Issue #742 Â· gin-gonic/gin Â· GitHub å…³äºæ¨¡æ¿æ–‡ä»¶ go - How to make templates work with gin framework? - Stack Overflow]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Gin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker-Ubuntu-Gogså…³äºä½¿ç”¨SSH]]></title>
    <url>%2F2017%2F07%2F21%2Fdocker-ubuntu-gogs-ssh%2F</url>
    <content type="text"><![CDATA[è®°å½•åœ¨Dockerå®¹å™¨ä¸­è¿è¡ŒGogsæ—¶ï¼Œä½¿ç”¨SSHæ“ä½œé‡åˆ°çš„gitå¯†ç é—®é¢˜ã€‚ SSH key passphrasesåœ¨æœ¬åœ°ç”µè„‘ä¸Š(æˆ‘è¿™é‡Œæ˜¯Windowsç³»ç»Ÿ)åˆ›å»º SSH key æ—¶ï¼Œä¼šè¦æ±‚ä½ ä¸ºkeyè®¾ç½®ä¸€ä¸ªå¯†ç ï¼š 123456789Î» ssh-keygen -t rsa -C &quot;xxxxx@qq.com&quot;Generating public/private rsa key pair.Enter file in which to save the key (/c/Users/You/.ssh/id_rsa):Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /c/Users/You/.ssh/id_rsa.Your public key has been saved in /c/Users/You/.ssh/id_rsa.pub.The key fingerprint is:... å³å…¶ä¸­çš„ï¼š 12Enter passphrase (empty for no passphrase):Enter same passphrase again: ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥å›è½¦å³ä¸è®¾ç½®å¯†ç ã€‚ å¦‚æœæ²¡æœ‰è®¾ç½®keyçš„å¯†ç ï¼Œæˆ‘ä»¬åœ¨é€šè¿‡SSHæäº¤ä»£ç æ—¶ï¼Œå¯ä»¥ç›´æ¥æ“ä½œã€‚å¦‚æœè®¾ç½®äº†keyçš„å¯†ç ï¼Œé‚£æˆ‘ä»¬åœ¨æ¯æ¬¡ pull æˆ– push æ—¶éƒ½ä¼šè¦æ±‚ä½ è¾“å…¥keyçš„å¯†ç ï¼š 12$ git pullEnter passphrase for key &apos;/c/Users/You/.ssh/id_rsa&apos;: Docker-Ubuntu-Gogså®¹å™¨ä½¿ç”¨SSHæäº¤æ—¶è¦æ±‚è¾“å…¥gitå¯†ç åœ¨ä½¿ç”¨SSHè·å–æˆ–æäº¤ä»£ç æ—¶ï¼Œå¶å°”ä¼šé‡åˆ°è¦æ±‚è¾“å…¥ git å¯†ç çš„æƒ…å†µï¼š 123456789101112$ git clone ssh://git@gogit.itfanr.cc/haha/wohaha.gitCloning into &apos;wohaha&apos;...git@gogit.itfanr.cc&apos;s password:Permission denied, please try again.git@gogit.itfanr.cc&apos;s password:Permission denied, please try again.git@gogit.itfanr.cc&apos;s password:Permission denied (publickey,password).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. æˆ–è€…ï¼š 12345678910$ git pullgit@gogit.itfanr.cc&apos;s password:Permission denied, please try again.git@gogit.itfanr.cc&apos;s password:Permission denied, please try again.git@gogit.itfanr.cc&apos;s password:fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. ä½†æ˜¯æˆ‘ä»¬é€šè¿‡Dockeråˆ›å»ºçš„gogså®¹å™¨ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸ºgitè´¦æˆ·è®¾ç½®å¯†ç ï¼Œæ‰€ä»¥è¿™é‡Œæ— è®ºè¾“å…¥ä»€ä¹ˆéƒ½æ˜¯é”™è¯¯çš„ã€‚ é€šè¿‡æŸ¥çœ‹ Issues Â· gogits/gogs Â· GitHub ä¸­ç›¸å…³çš„ issues å¯ä»¥äº†è§£åˆ°ï¼Œä½†å‡¡æ˜¯è¦æ±‚è¾“å…¥gitå¯†ç çš„é—®é¢˜ï¼Œåæœ‰å…«ä¹æ˜¯ å…³äº .ssh/authorize_keys æ–‡ä»¶çš„æƒé™ é—®é¢˜ã€‚ gogsçš„æ–‡æ¡£ä¸­è¦æ±‚ï¼š .ssh/ ç›®å½•æƒé™ä¸º 0700 .ssh/authorize_keys æ–‡ä»¶çš„æƒé™ä¸º 0600 ç›¸å…³çš„æ“ä½œå‘½ä»¤ä¸ºï¼š 12$ chmod 0700 /home/git/.ssh$ chmod 0600 /home/git/.ssh/* æ–¹æ³•ä¸€ç™»é™†gogsç«™ç‚¹çš„ç®¡ç†å‘˜è´¦æˆ·ï¼Œé€‰æ‹© ç®¡ç†é¢æ¿ è®¿é—® /admin é¡µé¢ã€‚åœ¨ ç®¡ç†å‘˜æ“ä½œ åŒºåŸŸé€‰æ‹© é‡æ–°ç”Ÿæˆ &#39;.ssh/authorized_keys&#39; æ–‡ä»¶ï¼ˆè­¦å‘Šï¼šä¸æ˜¯ Gogs çš„å¯†é’¥ä¹Ÿä¼šè¢«åˆ é™¤ï¼‰ ç‚¹å‡» æ‰§è¡Œ æŒ‰é’®ã€‚ ç„¶åå†æ¬¡å°è¯•çœ‹æ˜¯å¦èƒ½å¤ŸæˆåŠŸæ“ä½œã€‚ æ–¹æ³•äºŒå¦‚æœ æ–¹æ³•ä¸€ çš„æ“ä½œæ— æ•ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç™»é™†è¯¥gogså®¹å™¨æ‰€åœ¨çš„æœåŠ¡å™¨æ¥è¿›å…¥å¦‚ä¸‹æ“ä½œï¼š è¿›å…¥è¯¥gogså®¹å™¨ï¼Œç„¶ååˆ é™¤ .ssh/authorized_keys æ–‡ä»¶ ã€‚ é‡å¤æ–¹æ³•ä¸€çš„æ“ä½œï¼šç™»é™†ç®¡ç†å‘˜è´¦æˆ·ï¼Œé€‰æ‹© ç®¡ç†é¢æ¿ â€“ ç®¡ç†å‘˜æ“ä½œ â€“ ç‚¹å‡» é‡æ–°ç”Ÿæˆ &#39;.ssh/authorized_keys&#39; æ–‡ä»¶ï¼ˆè­¦å‘Šï¼šä¸æ˜¯ Gogs çš„å¯†é’¥ä¹Ÿä¼šè¢«åˆ é™¤ï¼‰ åçš„ æ‰§è¡Œ æŒ‰é’®ã€‚ ç„¶åå†æ¬¡å°è¯•çœ‹æ˜¯å¦èƒ½å¤ŸæˆåŠŸæ“ä½œã€‚ æˆ‘çš„æ“ä½œè®°å½•ï¼š 12345678910111213141516$ docker exec -it gogs /bin/bashroot@564c5628c7e9:/home/git/gogs# cd ..root@564c5628c7e9:/home/git# cd .ssh/root@564c5628c7e9:/home/git/.ssh# lsauthorized_keysroot@564c5628c7e9:/home/git/.ssh# rm authorized_keys root@564c5628c7e9:/home/git/.ssh# ls# æ­¤æ—¶åœ¨ç®¡ç†åå°é‡æ–°ç”Ÿæˆ authorized_keysroot@564c5628c7e9:/home/git/.ssh# lsauthorized_keysroot@564c5628c7e9:/home/git/.ssh# ls -altotal 12drwx------ 2 git git 4096 Jul 21 14:20 .drwxr-xr-x 6 git git 4096 Jul 21 11:32 ..-rw------- 1 git git 549 Jul 21 14:20 authorized_keys æˆ‘åœ¨ git push æ—¶é‡åˆ°è¦æ±‚è¾“å…¥gitå¯†ç çš„é—®é¢˜æ—¶ï¼Œå…ˆå°† authorized_keys æ–‡ä»¶åˆ é™¤ï¼Œç„¶åé‡æ–°ç”Ÿæˆï¼Œè¿™æ ·æ“ä½œåå°±èƒ½æ­£å¸¸è·å–å’Œæäº¤äº†ã€‚ ç›¸å…³å‚è€ƒ ssh çš„é“¾æ¥åœ°å€ä¸å¯ä»¥ä½¿ç”¨ Â· Issue #545 Â· gogits/gogs Â· GitHub]]></content>
      <categories>
        <category>Ubuntu-Gogs</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangè¿æ¥MongoDBæ•°æ®åº“]]></title>
    <url>%2F2017%2F06%2F28%2Fgolang-connect-to-mongodb%2F</url>
    <content type="text"><![CDATA[ç›®å‰goæ”¯æŒMongoDBæœ€å¥½çš„é©±åŠ¨å°±æ˜¯mgoã€‚ ä¸‹è½½ä¸å¼•ç”¨123go get gopkg.in/mgo.v2import &quot;gopkg.in/mgo.v2&quot; 123go get labix.org/v2/mgoimport &quot;labix.org/v2/mgo&quot; å®‰è£…æ—¶å‘ç°ï¼Œåœ°å€ labix.org/v2/mgo ä¸­çš„mgoç‰ˆæœ¬ä¸­æœ‰äº›æ–¹æ³•ä¸å…¨ï¼Œè€Œåœ°å€ gopkg.in/mgo.v2ä¸­çš„æ–¹æ³•æ˜¯å…¨çš„ï¼Œä½†æ˜¯è¯¥åœ°å€ä¸‹è½½è¶…æ—¶è€Œå¤±è´¥ï¼Œå¿…é¡»ç¿»å¢™æ‰å¯ä»¥è®¿é—®ã€‚å¦‚ labix.org/v2/mgo ä¸­å°±æ²¡æœ‰ mongo, err := mgo.ParseURL(MongoDBUrl) çš„ ParseURL() æ–¹æ³•ã€‚ å¦‚æœæ— æ³•ç¿»å¢™ï¼Œè¿˜å¯ä»¥ä» github ä¸‹è½½ï¼š å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨ mgo çš„ v2 ç‰ˆæœ¬ï¼Œæ‰€ä»¥éœ€è¦è¿å‡º branch:v2 åˆ†æ”¯ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ master åˆ†æ”¯ã€‚ åœ¨ go get å‘½ä»¤åæ·»åŠ  -d å‚æ•°å¯ä»¥åªä¸‹è½½è€Œä¸ä¼šæ‰§è¡Œå®‰è£…å‘½ä»¤ã€‚ æ“ä½œæ­¥éª¤ä¸ºï¼š æ‰§è¡Œå‘½ä»¤ go get -d github.com/go-mgo/mgo æ‰¾åˆ°ä¸Šé¢ clone çš„ç›®å½•ï¼Œè¿å‡ºåˆ†æ”¯ v2 å†æ¬¡è¿è¡Œ go get å‘½ä»¤ï¼Œè¿™æ—¶ä¼šåœ¨è¿å‡ºçš„åˆ†æ”¯ä¸Šæ‰§è¡Œå‘½ä»¤ 12345go get -d github.com/go-mgo/mgogit checkout v2go get github.com/go-mgo/mgo mgo - Rich MongoDB driver for Go mgo.v2 - gopkg.in/mgo.v2 git - How to do &quot;go get&quot; on a specific tag of a github repository - Stack Overflow å®‰è£…bzrå·¥å…·Bazaaræ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚ å®‰è£…mgoä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£… bzr å·¥å…·ï¼Œå¦åˆ™ç›´æ¥æ‰§è¡Œæˆ–æŠ¥é”™ï¼š 123&gt; go get labix.org/v2/mgogo: missing Bazaar command. See https://golang.org/s/gogetcmdpackage labix.org/v2/mgo: exec: &quot;bzr&quot;: executable file not found in %PATH% Winä»ç½‘å€ http://bazaar.canonical.com/en/ ä¸‹è½½å®‰è£…åŒ…ï¼Œé€‰æ‹© Standaloneç‰ˆæœ¬æˆ–å…¶ä»–ç‰ˆæœ¬ã€‚ Ubuntu sudo apt-get install bzr å¤šå¹³å°ç³»ç»Ÿä¸‹å¦‚ä½•å®‰è£…Bazzarå·¥å…· è¿æ¥å­—ç¬¦ä¸²1234MONGODB_URL=&quot;mongodb://user:pass@server.compose.io/db_name&quot;mongodb://localhost:27017/articles_demo_devmongodb://myuser:mypass@localhost:40001,otherhost:40001/mydb æˆ–è€…ï¼š 12345session, err := mgo.Dial(&quot;&quot;) session, err := mgo.Dial(&quot;localhost&quot;) session, err := mgo.Dial(&quot;127.0.0.1&quot;) session, err := mgo.Dial(&quot;localhost:27017&quot;)session, err := mgo.Dial(&quot;127.0.0.1:27017&quot;) åˆ›å»ºè¿æ¥é€šè¿‡Session.DB()æ¥åˆ‡æ¢ç›¸åº”çš„æ•°æ®åº“ 1db := session.DB(&quot;xtest&quot;) //æ•°æ®åº“åç§° é€šè¿‡Database.C()æ–¹æ³•åˆ‡æ¢é›†åˆï¼ˆCollectionï¼‰ï¼š 1collection := db.C(&quot;xtest&quot;) // é›†åˆåç§° æˆ–ç›´æ¥ä¸€æ­¥ï¼š 1c := session.DB(&quot;xtest&quot;).C(&quot;xtest&quot;) æŸ¥è¯¢é€šè¿‡func (c Collection) Find(query interface{}) Queryæ¥è¿›è¡ŒæŸ¥è¯¢é€šè¿‡Query.All()å¯ä»¥è·å¾—æ‰€æœ‰ç»“æœé€šè¿‡Query.One()å¯ä»¥è·å¾—ä¸€ä¸ªç»“æœæ¡ä»¶ç”¨ bson.M{key: value} ï¼Œæ³¨æ„keyå¿…é¡»ç”¨MongoDBä¸­çš„å­—æ®µåï¼Œè€Œä¸æ˜¯structçš„å­—æ®µåã€‚ ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081package mainimport ( &quot;fmt&quot; &quot;labix.org/v2/mgo&quot; &quot;labix.org/v2/mgo/bson&quot;)const ( MONGODB_URL = &quot;127.0.0.1:27017&quot;)func main() &#123; //åˆ›å»ºè¿æ¥ session, err := mgo.Dial(MONGODB_URL) if err != nil &#123; panic(err) &#125; defer session.Close() session.SetMode(mgo.Monotonic, true) // db := session.DB(&quot;xtest&quot;) //æ•°æ®åº“åç§° // collection := db.C(&quot;xtest&quot;) // é›†åˆåç§° c := session.DB(&quot;xtest&quot;).C(&quot;xtest&quot;) // //æ’å…¥æ•°æ® // err = c.Insert(&amp;Person&#123;&quot;Tommy&quot;, &quot;123456&quot;&#125;, &amp;Person&#123;&quot;Hanleilei&quot;, &quot;98765&quot;&#125;, // &amp;Person&#123;&quot;å–œæ´‹æ´‹&quot;, &quot;98765&quot;&#125;, &amp;Person&#123;&quot;ç°å¤ªç‹¼&quot;, &quot;46577&quot;&#125;, // ) // if err != nil &#123; // panic(err) // &#125; // //æŸ¥è¯¢å¹¶èµ‹å€¼ Find().One() // result := Person&#123;&#125; // err = c.Find(bson.M&#123;&quot;name&quot;: &quot;Tommy&quot;&#125;).One(&amp;result) // if err != nil &#123; // panic(err) // &#125; // //è¾“å‡º // fmt.Println(&quot;Phone &quot;, result.Phone) // //é›†åˆä¸­å…ƒç´ æ•°é‡ Count() // countNum, err := c.Count() // fmt.Println(&quot;obj numbers &quot;, countNum) // //æŸ¥è¯¢å¤šæ¡æ•°æ® Find().Iter() // var onep = Person&#123;&#125; // iter := c.Find(nil).Iter() // for iter.Next(&amp;onep) &#123; // fmt.Println(&quot;å§“å &quot;, onep.Name) // &#125; // //æŸ¥è¯¢å¤šæ¡æ•°æ® Find().All() // var personAll []Person // err = c.Find(nil).All(&amp;personAll) // for i := 0; i &lt; len(personAll); i++ &#123; // fmt.Println(&quot;Person &quot;, personAll[i].Name, personAll[i].Phone) // &#125; // //æ›´æ–°æ•°æ® Update() // abc := Person&#123;&#125; // err = c.Find(bson.M&#123;&quot;name&quot;: &quot;Tommy&quot;&#125;).One(&amp;abc) // fmt.Println(&quot;Tommy phone is &quot;, abc.Phone) // err = c.Update(bson.M&#123;&quot;name&quot;: &quot;Tommy&quot;&#125;, bson.M&#123;&quot;$set&quot;: bson.M&#123;&quot;phone&quot;: &quot;10086&quot;&#125;&#125;) // err = c.Find(bson.M&#123;&quot;name&quot;: &quot;Tommy&quot;&#125;).One(&amp;abc) // fmt.Println(&quot;Tommy phone is &quot;, abc.Phone) // //åˆ é™¤æ•°æ® Remove() // fmt.Println(c.Count()) // err = c.Remove(bson.M&#123;&quot;phone&quot;: &quot;46577&quot;&#125;) // fmt.Println(c.Count()) fmt.Println(&quot;end&quot;)&#125;type Person struct &#123; Name string `bson:&quot;name&quot;` Phone string `bson:&quot;phone&quot;`&#125; ç›¸å…³ GitHub - go-mgo/mgo: The MongoDB driver for Go. See http://labix.org/mgo for details. golangä½¿ç”¨mgoè¿æ¥MongoDB]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿›äº¬è¯åŠç†]]></title>
    <url>%2F2017%2F06%2F22%2Fforeign-car-to-beijing%2F</url>
    <content type="text"><![CDATA[åŒ—äº¬å¸‚å…¬å®‰å±€ç›¸å…³è§„å®š é€‚ç”¨èŒƒå›´ï¼šè¿›å…¥åŒ—äº¬å¸‚å…­ç¯è·¯ï¼ˆä¸å«ï¼‰ä»¥å†…è¡Œé©¶çš„å¤–åŸ è½¦è¾†ï¼Œä»¥åŠå‰å¾€æ˜Œå¹³ã€æ€€æŸ”ã€å»¶åº†åŸå…³é•‡è¡Œé©¶çš„å¤–åŸ è½¦è¾†ï¼Œéœ€åŠç†è¿›äº¬é€šè¡Œè¯ã€‚ åŠç†åœ°ç‚¹ï¼šæœ¬å¸‚ä»»æ„è¿›äº¬æ£€æŸ¥ç«™æˆ–åŠè¯å¤„ åŒ—äº¬å¸‚å…¬å®‰å±€å…¬å®‰äº¤é€šç®¡ç†å±€ åŠç†æ—¶é—´ï¼š7*24å°æ—¶ å‘¨æœ«åŠæ³•å®šèŠ‚å‡æ—¥ä¸ä¼‘ æºå¸¦èµ„æ–™ï¼š é©¾é©¶äººèº«ä»½è¯ é©¾é©¶äººé©¾é©¶è¯ è½¦è¾†è¡Œé©¶è¯ äº¤é€šäº‹æ•…è´£ä»»å¼ºåˆ¶ä¿é™©å‡­è¯ å®‰å…¨æŠ€æœ¯æ£€éªŒåˆæ ¼æ ‡å¿— ç»åŒ—äº¬å¸‚ç¯ä¿éƒ¨é—¨ç¡®è®¤çš„è½¦è¾†ç¬¦åˆç¯ä¿è¦æ±‚çš„å‡­è¯ æœ‰æ•ˆæœŸï¼šè¿›äº¬é€šè¡Œè¯æœ‰æ•ˆæœŸä¸º7å¤©ï¼Œå¯å»¶æœŸä¸€æ¬¡ã€‚ æˆ‘æ˜¯å¦‚ä½•åŠç†å®ä½“è¿›äº¬è¯çš„ é©¾é©¶äººèº«ä»½è¯ é©¾é©¶äººé©¾é©¶è¯ è½¦è¾†è¡Œé©¶è¯ æˆ‘ç¬¬ä¸€æ¬¡åŠç†å®ä½“è¿›äº¬è¯æ˜¯åœ¨äº¬æ¸¯æ¾³é«˜é€Ÿçš„å…´ç¤¼æ£€æŸ¥ç«™åŠç†çš„ (2017-6-11)ï¼š æºå¸¦ä»¥ä¸Šä¸‰ä¸ªè¯ä»¶å…ˆç”¨è½¦è¾†è¡Œé©¶è¯å»åŠç†ç¯ä¿è¯æ˜ï¼Œç„¶åæ‹¿ç€ç¯ä¿è¯æ˜å’Œä¸‰ä¸ªè¯ä»¶å»å¦ä¸€ä¸ªçª—å£åŠç†è¿›äº¬è¯ã€‚é‚£é‡Œæœ‰æŒ‡ç¤ºç‰Œå¯å‚è€ƒã€‚ æ³¨æ„è¦ä»”ç»†æ ¸å¯¹ç¯ä¿è¯æ˜æˆ–è¿›äº¬è¯ä¸Šçš„ä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚ ä¸éœ€è¦ä¿é™©å•æˆ–å…¶ä»–ææ–™ã€‚ å®ä½“è¿›äº¬è¯å…è´¹åŠç†ã€‚ ç”µå­è¿›äº¬è¯â€“åŒ—äº¬äº¤è­¦appä¼˜åŠ¿ å¯æå‰1-4å¤©åœ¨çº¿ç”³è¯·åŠç†è¿›äº¬é€šè¡Œè¯ ç”µå­è¿›äº¬è¯çš„æ•ˆåŠ›ä¸å®ä½“è¿›äº¬è¯ç›¸åŒï¼Œå…¶æœ‰æ•ˆæœŸä¸º2è‡³7å¤© ç”µå­è¿›äº¬è¯æ‰€éœ€è¯ä»¶ã€ææ–™ è½¦è¾†å‹å·ï¼ˆè§è¡Œé©¶è¯ï¼‰ è½¦è¾†å‘åŠ¨æœºå·ï¼ˆè§è¡Œé©¶è¯ï¼‰ è¿›äº¬è½¦è¾†è¡Œé©¶è¯æ­£é¢ç…§ç‰‡ è½¦è¾†æ­£é¢ç…§ç‰‡ï¼ˆéœ€éœ²å‡ºè½¦è¾†å·ç‰Œï¼‰ è½¦ä¸»é©¾é©¶è¯æ­£é¢ç…§ç‰‡ è½¦ä¸»æ‰‹æŒèº«ä»½è¯çš„ç…§ç‰‡ï¼ˆå¿…é¡»æ˜¯è½¦ä¸»æœ¬äººï¼‰ å·ç‰Œç±»å‹ æœºåŠ¨è½¦ç±»å‹ æœºåŠ¨è½¦å·ç‰Œ è½¦ä¸»å§“å è½¦ä¸»é©¾é©¶è¯å·ï¼ˆåŒèº«ä»½è¯å·ï¼‰ è¿›äº¬æ—¥æœŸï¼ˆåªèƒ½ä»åä¸€å¤©å¼€å§‹çš„7å¤©å†…ï¼‰ è¿›äº¬æ—¶é•¿(å¯é€‰2-7å¤©) è¿›äº¬è·¯å£ï¼ˆä¾‹å¦‚äº¬æ´¥é«˜é€Ÿï¼‰ é©¾é©¶å‘˜ä¿¡æ¯ ç”µå­è¿›äº¬è¯æ³¨æ„äº‹é¡¹ ç›®å‰åªå…è®¸å¤–åœ°å°å®¢è½¦ç½‘ä¸ŠåŠç†ç”µå­è¿›äº¬è¯ï¼Œå…¶å®ƒè½¦è¾†ä»éœ€åˆ°æ£€æŸ¥ç«™åŠè¯çª—å£åŠç†ã€‚ ç”µå­è¿›äº¬è¯ä¸å®ä½“è¿›äº¬è¯åœ¨åŒä¸€æ—¶æ®µå†…æ— æ³•é‡å¤åŠç†ã€‚ ç”µå­è¿›äº¬è¯æ— æ³•åœ¨åŸåŒºå®‰ç›‘çª—å£ç»­åŠã€‚ ç›®å‰ï¼Œç”µå­è¿›äº¬è¯ä¸€æ—¦ç”³è¯·æˆåŠŸï¼Œæ— æ³•æ›´æ”¹æ—¥æœŸã€‚ æ³¨æ„äº‹é¡¹ å†æ¬¡åŠç†è¿›äº¬è¯çš„æµç¨‹å’Œæ‰€éœ€çš„ææ–™ä¸åˆæ¬¡åŠç†ç›¸åŒã€‚ åœ¨åŠç†è¿›äº¬è¯ä¹‹å‰ï¼Œæ‚¨éœ€è¦å°†å¤–åœ°å·ç‰Œè½¦è¾†ä¹‹å‰åœ¨åŒ—äº¬äº§ç”Ÿçš„æ‰€æœ‰äº¤é€šè¿æ³•éƒ½å¤„ç†å®Œæ¯•ã€‚ ç›¸å…³å‚è€ƒ å¤–åœ°è½¦è¿›äº¬æ³¨æ„äº‹é¡¹ å…³äºé©¾é©¶è¯æ¢æ–°åå› ä¸ºæˆ‘çš„é©¾ç…§è€ƒçš„æ¯”è¾ƒæ—©ï¼Œåˆæ¬¡ç”³è¯·çš„é©¾ç…§åœ¨6å¹´åè¦æ¢æ–°ã€‚åœ¨æ¢é¢†åˆ°æ–°çš„é©¾ç…§ä¹‹åç”³è¯·è¿›äº¬è¯æ—¶è¦æ³¨æ„ï¼š åœ¨æ—§é©¾ç…§åˆ°æœŸæˆªæ­¢æ—¥æœŸä¹‹å‰ï¼Œç”³è¯·è¿›äº¬è¯ä»éœ€è¦ä½¿ç”¨æ—§é©¾ç…§çš„ç…§ç‰‡æ¥ç”³è¯·ã€‚ ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼š æ¯”å¦‚ä½ çš„é©¾ç…§åœ¨ 2018å¹´6æœˆ1æ—¥ åˆ°æœŸï¼Œè§„å®šæ˜¯åœ¨é©¾ç…§åˆ°æœŸå‰çš„90å¤©å†…éƒ½å¯ç”³è¯·æ¢é¢†æ–°é©¾ç…§ã€‚åœ¨90å¤©ä¹‹å†…ï¼Œæ¯”å¦‚ä½ åœ¨ 2018å¹´çš„5æœˆ1æ—¥ å°±å·²ç»æ›´æ¢äº†æ–°é©¾ç…§ã€‚é‚£ä¹ˆåœ¨ 5æœˆ1æ—¥åˆ°6æœˆ1æ—¥ è¿™æ®µæ—¶é—´å†…ï¼Œä½ æ˜¯ä¸èƒ½ä½¿ç”¨æ–°é©¾ç…§çš„ç…§ç‰‡æ¥ç”³è¯·è¿›äº¬è¯çš„ã€‚ å½“ä½ ç”¨æ–°é©¾ç…§çš„ç…§ç‰‡å»ç”³è¯·æ—¶ï¼ŒåŒ—äº¬äº¤è­¦App ç»™å‡ºçš„é”™è¯¯æç¤ºä¿¡æ¯ä¸º â€œç³»ç»Ÿå®¡æ ¸å¤±è´¥ï¼Œè¯·é‡æ–°æäº¤ä¿¡æ¯ç”³è¯·åŠç†ã€‚ å®¡æ ¸å¤±è´¥â€ ã€‚ åªæœ‰å½“ä½ çš„æ—§ç‰ˆé©¾ç…§è¿‡äº†åˆ°æœŸæ—¥æœŸä¹‹åï¼Œæ‰èƒ½ä½¿ç”¨æ¢æ–°åçš„é©¾ç…§æ¥ç”³è¯·ã€‚ ä»¥ä¸Šæ˜¯æˆ‘åœ¨æ¢é¢†æ–°é©¾ç…§ä¹‹ååœ¨ç”³è¯·è¿›äº¬è¯æ—¶é‡åˆ°çš„ä¸€ä¸ªå¾ˆè¿·æƒ‘çš„åœ°æ–¹ï¼Œç‰¹è®°å½•åœ¨æ­¤ã€‚ æ›´æ–°è®°å½• 2017-06-22 Created 2018-07-18 æ·»åŠ æ›´æ¢æ–°é©¾é©¶è¯åç”³è¯·è¿›äº¬è¯æ—¶çš„æ³¨æ„äº‹é¡¹]]></content>
      <tags>
        <tag>äººåœ¨å¸éƒ½</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangå®ç°httpè¯·æ±‚åŠä»£ç†è®¾ç½®]]></title>
    <url>%2F2017%2F06%2F15%2FGolang-implements-HTTP-request-and-proxy-settings%2F</url>
    <content type="text"><![CDATA[ä¸»è¦æ¢ç©¶ 1. ä½¿ç”¨ä»£ç†è¯·æ±‚ 2. è·³è¿‡httpsä¸å®‰å…¨éªŒè¯ 3. è‡ªå®šä¹‰è¯·æ±‚å¤´User-Agentçš„å®ç° ä¸»è¦ç ”ç©¶çš„æŠ€æœ¯ç‚¹ ä½¿ç”¨ä»£ç†è¯·æ±‚ è·³è¿‡httpsä¸å®‰å…¨éªŒè¯ è‡ªå®šä¹‰è¯·æ±‚å¤´ User-Agent é™æ€æ•°æ®è¯·æ±‚å¹¶è®¾ç½®ä»£ç†å®ä¾‹ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108package mainimport ( &quot;crypto/tls&quot; &quot;fmt&quot; &quot;io/ioutil&quot; &quot;net/http&quot; &quot;net/url&quot; &quot;time&quot;)func First() &#123; /* 1. æ™®é€šè¯·æ±‚ */ webUrl := &quot;http://ip.gs/&quot; resp, err := http.Get(webUrl) if err != nil &#123; fmt.Println(err) return &#125; // if resp.StatusCode == http.StatusOK &#123; // fmt.Println(resp.StatusCode) // &#125; time.Sleep(time.Second * 3) defer resp.Body.Close() body, _ := ioutil.ReadAll(resp.Body) fmt.Println(string(body))&#125;func Second(webUrl, proxyUrl string) &#123; /* 1. ä»£ç†è¯·æ±‚ 2. è·³è¿‡httpsä¸å®‰å…¨éªŒè¯ */ // webUrl := &quot;http://ip.gs/&quot; // proxyUrl := &quot;http://115.215.71.12:808&quot; proxy, _ := url.Parse(proxyUrl) tr := &amp;http.Transport&#123; Proxy: http.ProxyURL(proxy), TLSClientConfig: &amp;tls.Config&#123;InsecureSkipVerify: true&#125;, &#125; client := &amp;http.Client&#123; Transport: tr, Timeout: time.Second * 5, //è¶…æ—¶æ—¶é—´ &#125; resp, err := client.Get(webUrl) if err != nil &#123; fmt.Println(&quot;å‡ºé”™äº†&quot;, err) return &#125; defer resp.Body.Close() body, _ := ioutil.ReadAll(resp.Body) fmt.Println(string(body))&#125;func Third(webUrl, proxyUrl string) &#123; /* 1. ä»£ç†è¯·æ±‚ 2. è·³è¿‡httpsä¸å®‰å…¨éªŒè¯ 3. è‡ªå®šä¹‰è¯·æ±‚å¤´ User-Agent */ // webUrl := &quot;http://ip.gs/&quot; // proxyUrl := &quot;http://171.215.227.125:9000&quot; request, _ := http.NewRequest(&quot;GET&quot;, webUrl, nil) request.Header.Set(&quot;Connection&quot;, &quot;keep-alive&quot;) request.Header.Set(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&quot;) proxy, _ := url.Parse(proxyUrl) tr := &amp;http.Transport&#123; Proxy: http.ProxyURL(proxy), TLSClientConfig: &amp;tls.Config&#123;InsecureSkipVerify: true&#125;, &#125; client := &amp;http.Client&#123; Transport: tr, Timeout: time.Second * 5, //è¶…æ—¶æ—¶é—´ &#125; resp, err := client.Do(request) if err != nil &#123; fmt.Println(&quot;å‡ºé”™äº†&quot;, err) return &#125; defer resp.Body.Close() body, _ := ioutil.ReadAll(resp.Body) fmt.Println(string(body))&#125;func main() &#123; webUrl := &quot;http://httpbin.org/user-agent&quot; //&quot;http://ip.gs/&quot; proxyUrl := &quot;http://119.5.0.75:808&quot; Second(webUrl, proxyUrl) // Third(webUrl, proxyUrl)&#125; ç›¸å…³å‚è€ƒ Mocking a HTTP access with http.Transport in Golang - oinume journal Go httpè®¿é—®ä½¿ç”¨ä»£ç† GO HTTP clientå®¢æˆ·ç«¯ä½¿ç”¨ - æµ·è¿çš„åšå®¢ Making Tor HTTP Requests with Go | DevDungeon go - golang: How to do a https request with proxy - Stack Overflow go - Set UserAgent in http request - Stack Overflow åŠ¨æ€æ•°æ®è¯·æ±‚å¹¶è®¾ç½®ä»£ç†åŠ¨æ€æ•°æ®è¯·æ±‚ä½¿ç”¨golangè°ƒç”¨phantomjsæ¥è¯·æ±‚ç½‘é¡µæ•°æ®å†…å®¹å®ç°ã€‚ é€šè¿‡å‘½ä»¤å‚æ•°æ–¹å¼ï¼š 1phantomjs [options] somescript.js [arg1 [arg2 [...]]] ä»£ç†ç›¸å…³çš„é…ç½®å‚æ•°ï¼š --load-images=[true|false] (default is true) --proxy=address:port (eg --proxy=192.168.1.42:8080) --proxy-type=[http|socks5|none] (default is http) --proxy-auth (eg --proxy-auth=username:password) å…¶ä»–å¸¸ç”¨é…ç½®å‚æ•°ï¼š --load-images=[yes|no] Load all inlined images (default is â€˜yesâ€™). --load-plugins=[yes|no] Load all plugins (i.e. â€˜Flashâ€™, â€˜Silverlightâ€™, â€¦) (default is â€˜noâ€™). --proxy=address:port Set the network proxy. --disk-cache=[yes|no] Enable disk cache (at desktop services cache storage location, default is â€˜noâ€™). --ignore-ssl-errors=[yes|no] Ignore SSL errors (i.e. expired or self-signed certificate errors). ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ–¹å¼æ¥è®¾ç½®ï¼š 1phantomjs --config=/path/to/config.json somescript.js [arg1 [...]] å¸¸ç”¨é…ç½®ç›¸å…³å‚è€ƒ Command Line Interface | PhantomJS Proxy Auth In Phantomjs &middot; David Blooman å®ä¾‹ä»£ç  ç»è¿‡æµ‹è¯•ï¼Œå‘ç°ï¼š phantomjs --proxy=address:port somescript.js [args] è¿™ç§æ–¹å¼æ— æ³•æ‰§è¡ŒæˆåŠŸã€‚ ç»è¿‡æµ‹è¯•ï¼Œå‘ç°ï¼šåœ¨ somescript.js ä¸­è®¾ç½® page.setProxy(&quot;http://119.5.0.75:808/&quot;); è¿™ç§æ–¹å¼ä¹Ÿæ— æ•ˆã€‚ ç»è¿‡æµ‹è¯•ï¼Œå‘ç°ï¼šåœ¨ somescript.js ä¸­è®¾ç½® phantom.setProxy(&quot;139.224.237.33&quot;, &quot;8888&quot;, &#39;manual&#39;, &#39;&#39;, &#39;&#39;); è¿™ç§æ–¹å¼å¯è¡Œã€‚ ä¸ä½¿ç”¨ä»£ç†çš„åŠ¨æ€æ•°æ®è¯·æ±‚dynamicproxy.go: 123456789101112131415161718192021222324252627282930313233343536373839package mainimport ( &quot;fmt&quot; &quot;io/ioutil&quot; &quot;os/exec&quot;)func First(webUrl, jsFileName string) &#123; cmd := exec.Command(&quot;phantomjs.exe&quot;, jsFileName, webUrl) out, err := cmd.Output() if err != nil &#123; fmt.Println(err) &#125; fmt.Println(string(out))&#125;func Second(webUrl, jsFileName string) &#123; // cmd := exec.Command(&quot;phantomjs.exe&quot;, &quot;test.js&quot;, &quot;https://www.cnblogs.com/&quot;) cmd := exec.Command(&quot;phantomjs.exe&quot;, jsFileName, webUrl) stdout, err := cmd.StdoutPipe() if err != nil &#123; fmt.Println(err) &#125; cmd.Start() content, err := ioutil.ReadAll(stdout) if err != nil &#123; fmt.Println(err) &#125; fmt.Println(string(content))&#125;func main() &#123; webUrl := &quot;http://httpbin.org/ip&quot; //&quot;http://httpbin.org/ip&quot; // &quot;http://ip.gs/&quot; // &quot;http://httpbin.org/user-agent&quot; jsfileName := &quot;somescript.js&quot; First(webUrl, jsfileName) // Second(webUrl, jsfileName)&#125; somescript.js: 123456789101112131415161718var page =require(&apos;webpage&apos;).create();system=require(&apos;system&apos;);url=system.args[1];page.settings.userAgent = &apos;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36&apos;;page.open(url,function(status)&#123; console.log(&apos;Loading &apos;+system.args[1]); if (status==&quot;success&quot;) &#123; // page.render(&apos;a.png&apos;); //ç½‘é¡µæˆªå± system.stdout.writeLine(page.content); // è·å–ç½‘é¡µå†…å®¹ // system.stdout.writeLine(page.title); // console.log(page.plainText); // æ–‡æœ¬å†…å®¹ // console.log(page.title); // ç½‘é¡µæ ‡é¢˜ &#125;else&#123; system.stdout.writeLine(&quot;request error&quot;); &#125;; phantom.exit();&#125;); ä½¿ç”¨httpä»£ç†çš„åŠ¨æ€æ•°æ®è¯·æ±‚dynamicproxy.go: 1234567891011121314151617181920212223package mainimport ( &quot;fmt&quot; &quot;io/ioutil&quot; &quot;os/exec&quot;)func Third(webUrl, jsFileName,proxyHost,proxyPort string) &#123; // cmd := exec.Command(&quot;phantomjs.exe&quot;, jsFileName, webUrl) cmd := exec.Command(&quot;phantomjs.exe&quot;, jsFileName,proxyHost,proxyPort, webUrl) out, err := cmd.Output() if err != nil &#123; fmt.Println(err) &#125; fmt.Println(string(out))&#125;func main() &#123; webUrl := &quot;http://httpbin.org/ip&quot; //&quot;http://httpbin.org/ip&quot; // &quot;http://ip.gs/&quot; // &quot;http://httpbin.org/user-agent&quot; jsfileName := &quot;somescript.js&quot; Third(webUrl, jsfileName,&quot;139.224.237.33&quot;, &quot;8888&quot;)&#125; somescript.js: 123456789101112131415161718192021222324252627var page =require(&apos;webpage&apos;).create();system=require(&apos;system&apos;);if (system.args.length&lt;4) &#123; system.stdout.writeLine(&quot;somescript.js &lt;proxyHost&gt; &lt;proxyPort&gt; &lt;URL&gt;&quot;); phantom.exit(1);&#125;else&#123; host=system.args[1]; port=system.args[2]; url = system.args[3];// page.setProxy(&quot;http://119.5.0.75:808/&quot;);//è¿™æ ·è®¾ç½®è¯·æ±‚å¤±è´¥// phantom.setProxy(&quot;139.224.237.33&quot;, &quot;8888&quot;, &apos;manual&apos;, &apos;&apos;, &apos;&apos;);//è¿™æ ·è®¾ç½®å¯ä»¥phantom.setProxy(host, port, &apos;manual&apos;, &apos;&apos;, &apos;&apos;);page.settings.userAgent = &apos;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36&apos;;page.open(url,function(status)&#123; if (status==&quot;success&quot;) &#123; system.stdout.writeLine(page.content); // è·å–ç½‘é¡µå†…å®¹ &#125;else&#123; console.log(status); system.stdout.writeLine(&quot;error&quot;); &#125;; phantom.exit();&#125;);&#125; è¯´æ˜ï¼šphantom.setProxy(&quot;139.224.237.33&quot;, &quot;8888&quot;, &#39;manual&#39;, &#39;&#39;, &#39;&#39;); å‚æ•°1ä¸ºä»£ç†host;å‚æ•°2ä¸ºä»£ç†port;å‚æ•°3å¯ä»¥ä¿æŒé»˜è®¤å®šå€¼manual,å‚æ•°4ä¸ºä»£ç†ç±»å‹http socket5ç­‰å¯ä¸ºç©º;å‚æ•°5ä¸çŸ¥é“ä¸ºç©ºã€‚ å¿½ç•¥httpså®‰å…¨éªŒè¯çš„åŠ¨æ€æ•°æ®è¯·æ±‚ æš‚æ—¶åªæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œç›´æ¥è¯·æ±‚httpsç½‘å€ä¸ä½¿ç”¨ä»£ç†èƒ½å¤Ÿè¯·æ±‚æˆåŠŸã€‚ å³å¿½ç•¥httpså®‰å…¨éªŒè¯ï¼Œåˆä½¿ç”¨ä»£ç†ç»æµ‹è¯•è¯·æ±‚å¤±è´¥ã€‚ ç›´æ¥åœ¨å‘½ä»¤çª—å£ä¸­æ‰§è¡Œå¯ä»¥ï¼Œé€šè¿‡golangè°ƒç”¨è¯·æ±‚å¤±è´¥ã€‚ ä½¿ç”¨å‚æ•°ï¼š--ignore-ssl-errors=true --ssl-protocol=any è®¾ç½®ã€‚ å¦‚ä¸‹æ–¹å¼æ‰§è¡ŒæˆåŠŸï¼Œç¤ºä¾‹ä»£ç ï¼š 1phantomjs.exe --ignore-ssl-errors=true --ssl-protocol=any test.js https://kyfw.12306.cn/otn/ test.js: 1234567891011121314var page =require(&apos;webpage&apos;).create();system=require(&apos;system&apos;);url=system.args[1];page.settings.userAgent = &apos;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36&apos;;page.open(url,function(status)&#123; console.log(&apos;Loading &apos;+system.args[1]); if (status==&quot;success&quot;) &#123; system.stdout.writeLine(page.content); // è·å–ç½‘é¡µå†…å®¹ &#125;else&#123; console.log(&quot;request error&quot;); &#125;; phantom.exit();&#125;); ç›¸å…³å‚è€ƒ â€“ignore-ssl-errors not working Â· Issue #12181 Â· ariya/phantomjs Â· GitHub phantomjs Â· GitHub phantomjs/examples at master Â· ariya/phantomjs Â· GitHub]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>æ•°æ®æŠ“å–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»0åˆ°1å­¦Golangä¹‹åŸºç¡€--Go æ•°ç»„]]></title>
    <url>%2F2017%2F05%2F24%2Flearn-golang-from-0-to-1-of-go-array%2F</url>
    <content type="text"><![CDATA[ã€ŠGo In Actionã€‹ ä¸­æ–‡ç‰ˆ ã€ŠGoè¯­è¨€å®æˆ˜ã€‹ è¯»ä¹¦ç¬”è®° å†…éƒ¨å®ç°æ•°ç»„æ˜¯åˆ‡ç‰‡å’Œæ˜ å°„çš„åŸºç¡€æ•°æ®ç»“æ„ã€‚ åœ¨Goè¯­è¨€ä¸­ï¼Œæ•°ç»„æ˜¯é•¿åº¦å›ºå®šçš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨ä¸€æ®µå…·æœ‰ç›¸åŒç±»å‹çš„å…ƒç´ çš„è¿ç»­å—ã€‚ æ•°ç»„å­˜å‚¨çš„ç±»å‹å¯ä»¥æ˜¯å†…ç½®ç±»å‹ï¼Œå¦‚æ•´å‹æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æŸç§ç»“æ„ç±»å‹ã€‚ æ•°ç»„å ç”¨çš„å†…å­˜æ˜¯è¿ç»­åˆ†é…çš„ã€‚ç”±äºå†…å­˜è¿ç»­ï¼ŒCPUèƒ½æŠŠæ­£åœ¨ä½¿ç”¨çš„æ•°æ®ç¼“å­˜æ›´ä¹…çš„æ—¶é—´ã€‚è€Œä¸”å†…å­˜è¿ç»­å¾ˆå®¹æ˜“è®¡ç®—ç´¢å¼•ï¼Œå¯ä»¥å¿«é€Ÿè¿­ä»£æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ã€‚ ç‰¹ç‚¹ï¼š é•¿åº¦å›ºå®š ç±»å‹ç›¸åŒ å†…å­˜è¿ç»­ å£°æ˜å’Œåˆå§‹åŒ–å£°æ˜æ•°ç»„å£°æ˜çš„åŸåˆ™ï¼š æŒ‡æ˜å­˜å‚¨æ•°æ®çš„ç±»å‹ æŒ‡æ˜å­˜å‚¨å…ƒç´ æ•°é‡ï¼ˆæŒ‡æ˜æ•°ç»„é•¿åº¦ï¼‰ 12#å£°æ˜ä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„var array [5]int æ•°ç»„ä¸€æ—¦å£°æ˜åï¼Œæ•°ç»„é‡Œå­˜å‚¨çš„æ•°æ®ç±»å‹å’Œæ•°ç»„é•¿åº¦å°±ä¸èƒ½æ”¹å˜äº†ã€‚ å½“æ•°ç»„åˆå§‹åŒ–æ—¶ï¼Œæ•°ç»„å†…æ¯ä¸ªå…ƒç´ éƒ½åˆå§‹åŒ–ä¸ºå¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚ å£°æ˜å¹¶åˆå§‹åŒ–ä½¿ç”¨æ•°ç»„å­—é¢é‡å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„ã€‚æ•°ç»„å­—é¢é‡å…è®¸å£°æ˜æ•°ç»„é‡Œå…ƒç´ çš„æ•°é‡åŒæ—¶æŒ‡å®šæ¯ä¸ªå…ƒç´ çš„å€¼ã€‚ Goä¸ºæˆ‘ä»¬æä¾›äº† := æ“ä½œç¬¦ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨åˆ›å»ºæ•°ç»„çš„æ—¶å€™ç›´æ¥åˆå§‹åŒ–ã€‚ 12# å£°æ˜å¹¶åˆå§‹åŒ–array:=[5]int&#123;1,2,3,4,5&#125; è‡ªåŠ¨æ¨å¯¼æ•°ç»„é•¿åº¦ä½¿ç”¨ ... æ›¿ä»£æ•°ç»„çš„é•¿åº¦ï¼ŒGoè¯­è¨€ä¼šæ ¹æ®åˆå§‹åŒ–æ—¶æ•°ç»„å…ƒç´ çš„æ•°é‡æ¥ç¡®å®šè¯¥æ•°ç»„çš„é•¿åº¦ã€‚ 12# å®¹é‡ç”±åˆå§‹åŒ–å€¼çš„æ•°é‡å†³å®šarray:=[...]int&#123;1,2,3,4,5&#125; ç”¨å…·ä½“å€¼åˆå§‹åŒ–ç‰¹å®šç´¢å¼•ä½¿ç”¨æŒ‡å®šç´¢å¼•çš„æ–¹å¼åˆå§‹åŒ–ç‰¹å®šç´¢å¼•å€¼ã€‚ 12# ç”¨å…·ä½“å€¼åˆå§‹åŒ–ç´¢å¼•ä¸º1å’Œ3çš„å…ƒç´ ï¼Œå…¶ä½™å…ƒç´ ä¿æŒé›¶å€¼array:=[5]int&#123;1:10,3:30&#125; ä½¿ç”¨æ•°ç»„è¦è®¿é—®æ•°ç»„é‡ŒæŸä¸ªå•ç‹¬å…ƒç´ ï¼Œä½¿ç”¨ç´¢å¼•æ“ä½œç¬¦ [] å³å¯ã€‚å› ä¸ºå†…å­˜æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥ç´¢å¼•è®¿é—®çš„æ•ˆç‡éå¸¸é«˜ã€‚ 1234# å£°æ˜ä¸€ä¸ªåŒ…å«5ä¸ªå…ƒç´ çš„æ•´å½¢æ•°ç»„array:=[5]int&#123;1,2,3,4,5&#125;# ä¿®æ”¹ç´¢å¼•ä¸º2çš„å…ƒç´ å€¼array[2]=80 éå†è®¿é—®æ•°ç»„ä½¿ç”¨ for éå†è®¿é—®æ•°ç»„ 123456func main() &#123; array := [5]int&#123;1, 2, 3, 4, 5&#125; for i := 0; i &lt; 5; i++ &#123; fmt.Printf(&quot;ç´¢å¼•ï¼š%d,å€¼ï¼š%d\n&quot;, i, array[i]) &#125;&#125; ä½¿ç”¨ for range éå†è®¿é—®æ•°ç»„æ¯ä¸ªå…ƒç´  123456func main() &#123; array := [5]int&#123;1, 2, 3, 4, 5&#125; for k, v := range array &#123; fmt.Printf(&quot;ç´¢å¼•ï¼š%d,å€¼ï¼š%d\n&quot;, k, v) &#125;&#125; æ•°ç»„ç›¸äº’èµ‹å€¼åŒæ ·ç±»å‹çš„æ•°ç»„æ˜¯å¯ä»¥ç›¸äº’èµ‹å€¼çš„ï¼Œä¸åŒç±»å‹çš„ä¸è¡Œï¼Œä¼šç¼–è¯‘é”™è¯¯ã€‚ æ•°ç»„å˜é‡çš„ç±»å‹åŒ…æ‹¬æ•°ç»„é•¿åº¦å’Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚åªæœ‰è¿™ä¸¤éƒ¨åˆ†éƒ½ç›¸åŒçš„æ•°ç»„ï¼Œæ‰æ˜¯ç±»å‹ç›¸åŒçš„æ•°ç»„ï¼Œæ‰èƒ½ç›¸äº’èµ‹å€¼ã€‚ 12345678910func main() &#123; array := [5]int&#123;1, 2, 3, 4, 5&#125; //# ç›¸åŒæ•°ç»„ç±»å‹ï¼Œèƒ½å¤Ÿäº’ç›¸èµ‹å€¼ // var array1 [5]int = array // fmt.Println(array1) //[1 2 3 4 5] //ä¸åŒæ•°ç»„ç±»å‹ï¼Œä¸èƒ½äº’ç›¸èµ‹å€¼ var array2 [4]int = array //cannot use array (type [5]int) as type [4]int in assignment fmt.Println(array2)&#125; æŒ‡é’ˆæ•°ç»„åœ¨æ•°ç»„çš„ç±»å‹å‰é¢åŠ  * å£°æ˜ä¸ºæŒ‡é’ˆæ•°ç»„ç»„ã€‚ ä½¿ç”¨ * è¿ç®—ç¬¦å¯ä»¥è®¿é—®æŒ‡é’ˆæ•°ç»„å…ƒç´ æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ã€‚ 1234567891011func main() &#123; // # å£°æ˜æŒ‡å‘æ•´æ•°çš„æ•°ç»„ï¼Œç”¨æ•´å½¢æŒ‡é’ˆåˆå§‹åŒ–ç´¢å¼•ä¸º0å’Œ3çš„æ•°ç»„å…ƒç´  array := [5]*int&#123;0: new(int), 3: new(int)&#125; // # ä¸ºç´¢å¼•ä¸º0å’Œ3çš„å…ƒç´ èµ‹å€¼ *array[0] = 10 *array[3] = 40 fmt.Println(array) // [0xc420070188 &lt;nil&gt; &lt;nil&gt; 0xc4200701b0 &lt;nil&gt;]&#125; ä¸Šé¢çš„ç¤ºä¾‹è¦æ³¨æ„ï¼Œæˆ‘ä»¬åªå¯ä»¥ç»™ç´¢å¼•0 å’Œ 3 èµ‹å€¼ï¼Œå› ä¸ºåªæœ‰å®ƒä»¬åˆ†é…äº†å†…å­˜ï¼Œæ‰å¯ä»¥èµ‹å€¼ã€‚å¦‚æœç»™å…¶ä»–ç´¢å¼•èµ‹å€¼ï¼Œè¿è¡Œæ—¶ä¼šæç¤ºæ— æ•ˆå†…å­˜æˆ–nilæŒ‡é’ˆå¼•ç”¨ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å…ˆç»™è¿™äº›ç´¢å¼•åˆ†é…å†…å­˜ï¼Œç„¶åå†è¿›è¡Œèµ‹å€¼ä¿®æ”¹æ“ä½œã€‚ 123456789101112......// # ä¸ºæœªåˆ†é…å†…å­˜çš„ç´¢å¼•èµ‹å€¼ï¼ŒæŠ¥é”™ *array[2] = 30// panic: runtime error: invalid memory address or nil pointer dereference// [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x2199]// # å…ˆåˆ†é…å†…å­˜å†èµ‹å€¼array[2] = new(int)*array[2] = 35fmt.Println(array)// [0xc420074188 &lt;nil&gt; 0xc4200741d0 0xc4200741b0 &lt;nil&gt;] æŒ‡é’ˆæ•°ç»„ç›¸äº’èµ‹å€¼å¤åˆ¶æ•°ç»„æŒ‡é’ˆï¼Œåªä¼šå¤åˆ¶æŒ‡é’ˆçš„å€¼ï¼Œè€Œä¸ä¼šå¤åˆ¶æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ã€‚ 1234567891011121314151617181920212223func main() &#123; // # å£°æ˜ç¬¬ä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ•°ç»„ var array1 [3]*string // # å£°æ˜ç¬¬ä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ•°ç»„ var array2 [3]*string // # ä½¿ç”¨å­—ç¬¦ä¸²æŒ‡é’ˆåˆå§‹åŒ–è¿™ä¸ªæ•°ç»„ array2 = [3]*string&#123;new(string), new(string), new(string)&#125; // # ä½¿ç”¨é¢œè‰²ä¸ºæ¯ä¸ªå…ƒç´ èµ‹å€¼ *array2[0] = &quot;red&quot; *array2[1] = &quot;blue&quot; *array2[2] = &quot;green&quot; // # å°†array2 å¤åˆ¶ç»™ array1 array1 = array2 // # å¤åˆ¶ä¹‹åï¼Œä¸¤ä¸ªæ•°ç»„æŒ‡å‘åŒä¸€ç»„å­—ç¬¦ä¸² fmt.Println(array1) fmt.Println(array2) // [0xc420074030 0xc420074040 0xc420074050] // [0xc420074030 0xc420074040 0xc420074050]&#125; å¤šç»´æ•°ç»„æ•°ç»„æœ¬èº«åªæœ‰ä¸€ä¸ªç»´åº¦ï¼Œå¯ä»¥ç»„åˆå¤šä¸ªæ•°ç»„åˆ›å»ºå¤šç»´æ•°ç»„ã€‚ å£°æ˜å¤šç»´æ•°ç»„1234567891011121314151617func main() &#123; // # å£°æ˜ä¸€ä¸ªäºŒç»´æ•°ç»„ var array1 [4][2]int fmt.Println(array1) // [[0 0] [0 0] [0 0] [0 0]] // # ä½¿ç”¨æ•°ç»„å­—é¢é‡æ¥å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„ array2 := [4][2]int&#123;&#123;10, 11&#125;, &#123;20, 21&#125;, &#123;30, 31&#125;, &#123;40, 41&#125;&#125; fmt.Println(array2) // [[10 11] [20 21] [30 31] [40 41]] // # å£°æ˜å¹¶åˆå§‹åŒ–å¤–å±‚æ•°ç»„ä¸­ç´¢å¼•ä¸º1 å’Œ 3 çš„å…ƒç´  array3 := [4][2]int&#123;1: &#123;20, 21&#125;, 3: &#123;40, 41&#125;&#125; fmt.Println(array3) // [[0 0] [20 21] [0 0] [40 41]] // # å£°æ˜å¹¶åˆå§‹åŒ–å¤–å±‚æ•°ç»„å’Œå†…å±‚æ•°ç»„çš„å½“ä¸ªå…ƒç´  array4 := [4][2]int&#123;1: &#123;0: 20&#125;, 3: &#123;1: 41&#125;&#125; fmt.Println(array4) // [[0 0] [20 0] [0 0] [0 41]]&#125; å£°æ˜å¤šç»´æ•°ç»„æ—¶ï¼Œç¬¬ä¸€ç»´åº¦çš„æ•°ç»„é•¿åº¦ä¹Ÿå¯ä»¥ä½¿ç”¨ ... æ¥æ ¹æ®æ•°ç»„å€¼çš„ä¸ªæ•°æ¥ç¡®å®šï¼Œä½†åé¢ç»´åº¦ä¸èƒ½ä½¿ç”¨ ...æ¥è‡ªåŠ¨æ¨æµ‹ã€‚ 12345func main() &#123; b := [...][2]int&#123;&#123;1, 1&#125;, &#123;2, 2&#125;, &#123;3, 3&#125;&#125; fmt.Println(b) // [[1 1] [2 2] [3 3]] fmt.Println(len(b)) // 3&#125; è®¿é—®äºŒç»´æ•°ç»„å…ƒç´ ä¸ºäº†è®¿é—®å•ä¸ªå…ƒç´ ï¼Œéœ€è¦åå¤ç»„åˆä½¿ç”¨ [] è¿ç®—ç¬¦ã€‚ 123456789101112func main() &#123; // # å£°æ˜ä¸€ä¸ªäºŒç»´æ•°ç»„ var array1 [4][2]int fmt.Println(array1) // [[0 0] [0 0] [0 0] [0 0]] // # è®¾ç½®æŒ‡å®šå…ƒç´ çš„å€¼ array1[1][0] = 5 fmt.Println(array1) // [[0 0] [5 0] [0 0] [0 0]] // # è·å–æŒ‡å®šä½ç½®çš„å…ƒç´  fmt.Println(array1[1][0]) //5&#125; å¤šç»´æ•°ç»„ç›¸äº’èµ‹å€¼å¤šç»´æ•°ç»„çš„ç±»å‹åŒ…æ‹¬æ¯ä¸€ç»´åº¦çš„è—æ¯’ä»¥åŠæœ€ç»ˆå­˜å‚¨åœ¨å…ƒç´ ä¸­çš„æ•°æ®çš„ç±»å‹ã€‚åªè¦ç±»å‹ä¸€è‡´ï¼Œå°±å¯ä»¥å°†å¤šç»´æ•°ç»„äº’ç›¸èµ‹å€¼ã€‚ 1234567func main() &#123; array1 := [2][2]int&#123;&#123;1, 2&#125;, &#123;3, 4&#125;&#125; var array2 [2][2]int array2 = array1 fmt.Println(array2) // [[1 2] [3 4]]&#125; åœ¨å‡½æ•°é—´ä¼ é€’æ•°ç»„åœ¨å‡½æ•°é—´ä¼ é€’å˜é‡æ—¶ï¼Œæ€»æ˜¯ä»¥å€¼çš„å½¢å¼ä¼ é€’ã€‚å¦‚æœå˜é‡æ˜¯ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå°±ä¼šæ•´ä¸ªå¤åˆ¶ï¼Œå¹¶ä¼ é€’ç»™å‡½æ•°ï¼Œå¦‚æœæ•°ç»„éå¸¸å¤§ï¼Œå¯¹äºå†…å­˜æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¼€é”€ã€‚ 12345678910func main() &#123; array := [5]int&#123;1: 2, 3: 4&#125; modify(array) fmt.Println(array) //[0 2 0 4 0]&#125;func modify(a [5]int) &#123; a[1] = 3 fmt.Println(a) // [0 3 0 4 0]&#125; å¦‚ç¤ºä¾‹ï¼Œæ•°ç»„æ˜¯å¤åˆ¶çš„ï¼ŒåŸæ¥çš„æ•°ç»„æ²¡æœ‰ä¿®æ”¹ã€‚å¦‚æœå¤åˆ¶çš„æ•°ç»„éå¸¸å¤§ï¼Œå¯¹å†…å­˜æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æµªè´¹ã€‚ å¯ä»¥é€šè¿‡ä¼ é€’æ•°ç»„çš„æŒ‡é’ˆçš„æ–¹å¼æ¥åœ¨å‡½æ•°é—´ä¼ é€’å¤§æ•°ç»„ã€‚ ä½¿ç”¨æŒ‡é’ˆåœ¨å‡½æ•°é—´ä¼ é€’å¤§æ•°ç»„ä¼ é€’æ•°ç»„çš„æŒ‡é’ˆï¼Œå¤åˆ¶çš„å¤§å°åªæ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹çš„æŒ‡é’ˆå¤§å°ã€‚ 12345678910func main() &#123; array := [5]int&#123;1: 2, 3: 4&#125; modify(&amp;array) fmt.Println(array) //[0 3 0 4 0]&#125;func modify(a *[5]int) &#123; a[1] = 3 fmt.Println(*a) // [0 3 0 4 0]&#125; å¦‚ç¤ºä¾‹ï¼Œé€šè¿‡ä¼ é€’æ•°ç»„çš„æŒ‡é’ˆï¼Œä¼šå‘ç°åŸæ¥çš„æ•°ç»„ä¹Ÿè¢«ä¿®æ”¹äº†ã€‚è¦æ„è¯†åˆ°çš„æ˜¯ï¼Œå› ä¸ºä¼ é€’çš„æ˜¯æŒ‡é’ˆï¼Œæ‰€ä»¥å¦‚æœæ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼Œä¼šæ”¹å˜å…±äº«çš„å†…å­˜ã€‚ ä½¿ç”¨åˆ‡ç‰‡èƒ½æ›´å¥½çš„å¤„ç†å†…å­˜å…±äº«é—®é¢˜ã€‚ è¿™é‡Œæ³¨æ„ï¼Œæ•°ç»„çš„æŒ‡é’ˆå’ŒæŒ‡é’ˆæ•°ç»„æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œæ•°ç»„çš„æŒ‡é’ˆæ˜¯ *[5]int,æŒ‡é’ˆæ•°ç»„æ˜¯ [5]*intï¼Œæ³¨æ„ * çš„ä½ç½®ã€‚ æ€»ç»“æ¦‚æ‹¬æ•°ç»„çŸ¥è¯†ç‚¹ æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œèµ‹å€¼å’Œä¼ å‚ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼Œè€Œä¸æ˜¯æŒ‡é’ˆã€‚ æ•°ç»„é•¿åº¦å¿…é¡»æ˜¯å¸¸é‡ï¼Œä¸”æ˜¯ç±»å‹çš„ç»„æˆéƒ¨åˆ†ã€‚[2]int å’Œ [3]int æ˜¯ä¸åŒç±»å‹ã€‚ æ”¯æŒ &quot;==&quot;ã€&quot;!=&quot; æ“ä½œç¬¦ï¼Œå› ä¸ºå†…å­˜æ€»æ˜¯è¢«åˆå§‹åŒ–è¿‡çš„ã€‚ æŒ‡é’ˆæ•°ç»„ [n]*Tï¼Œæ•°ç»„æŒ‡é’ˆ *[n]Tã€‚ å€¼æ‹·è´è¡Œä¸ºä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œé€šå¸¸ä¼šå»ºè®®ä½¿ç”¨ sliceï¼Œæˆ–æ•°ç»„æŒ‡é’ˆã€‚ å£°æ˜å¹¶åˆå§‹åŒ–12345func main() &#123; // a := [3]int&#123;1, 2&#125; //æœªåˆå§‹åŒ–å…ƒç´ å€¼æœªæ•°ç»„ç±»å‹é›¶å€¼ // b := [...]int&#123;1, 2, 3, 4&#125; //é€šè¿‡åˆå§‹åŒ–å€¼ç¡®å®šæ•°ç»„é•¿åº¦ // c := [5]int&#123;2: 10, 4: 20&#125; // ä½¿ç”¨ç´¢å¼•å·åˆå§‹åŒ–å…ƒç´ &#125; å¤šç»´æ•°ç»„1234func main() &#123; d := [2][3]int&#123;&#123;1, 2, 3&#125;, &#123;4, 5, 6&#125;&#125; //å¤šç»´æ•°ç»„ e := [...][2]int&#123;&#123;1, 1&#125;, &#123;2, 2&#125;, &#123;3, 3&#125;, &#123;4, 4&#125;&#125; //ç¬¬ 2 ç»´åº¦ä¸èƒ½ç”¨ &quot;...&quot;&#125; å†…ç½®å‡½æ•° len å’Œ cap éƒ½è¿”å›æ•°ç»„é•¿åº¦ (å…ƒç´ æ•°é‡)1234func main() &#123; f := [2]int&#123;&#125; fmt.Println(len(f), cap(f)) // 2 2 &#125;]]></content>
      <categories>
        <category>ä»0åˆ°1å­¦Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»0åˆ°1å­¦Golangä¹‹åŸºç¡€--Go åŒ…]]></title>
    <url>%2F2017%2F05%2F12%2Flearn-golang-from-0-to-1-of-go-package%2F</url>
    <content type="text"><![CDATA[ã€ŠGo In Actionã€‹ ä¸­æ–‡ç‰ˆ ã€ŠGoè¯­è¨€å®æˆ˜ã€‹ è¯»ä¹¦ç¬”è®° ä»€ä¹ˆæ˜¯åŒ…goè¯­è¨€çš„åŒ…å…¶å®å°±æ˜¯æˆ‘ä»¬è®¡ç®—æœºé‡Œçš„ç›®å½• åŒ…çš„å‘½åæ‰€æœ‰çš„ .go æ–‡ä»¶ï¼Œé™¤äº†ç©ºè¡Œå’Œæ³¨é‡Šï¼Œéƒ½åº”è¯¥åœ¨ç¬¬ä¸€è¡Œå£°æ˜è‡ªå·±æ‰€å±çš„åŒ…ã€‚ ä½¿ç”¨ package å…³é”®å­—å£°æ˜åŒ…ã€‚å¦‚ï¼š package main ã€‚ æ¯ä¸ªåŒ…éƒ½åœ¨ä¸€ä¸ªå•ç‹¬çš„ç›®å½•é‡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ .go æ–‡ä»¶å¿…é¡»å£°æ˜åŒä¸€ä¸ªåŒ…åã€‚ ä»¥ net/http åŒ…ä¸ºä¾‹ï¼Œåœ¨ http ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½å±äº http åŒ…ã€‚ goè¯­è¨€ä¸­ç»™åŒ…åŠå…¶ç›®å½•å‘½åï¼Œéµå¾ª ç®€æ´ ã€æ¸…æ™° ã€å…¨å°å†™ åŠ å’Œæ‰€åœ¨ç›®å½•åŒå çš„åŸåˆ™ã€‚ 1234567package mainimport &quot;net/http&quot;func main() &#123; http.ListenAndServe(&quot;127.0.0.1:80&quot;,handler);&#125; å¦‚ä¸Š net/httpï¼Œåœ¨å¯¼å…¥åŒ…æ—¶é‡‡ç”¨ å…¨è·¯å¾„ çš„æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥åŒºåˆ†åŒåçš„ä¸åŒåŒ…ï¼Œåªè¦ä¿è¯å…¨è·¯å¾„ä¸åŒå°±å¯ä»¥ã€‚ä½¿ç”¨å…¨è·¯å¾„çš„å¯¼å…¥ï¼Œä¹Ÿå¢åŠ äº†åŒ…åå‘½åçš„çµæ´»æ€§ã€‚ main åŒ…åœ¨goè¯­è¨€ä¸­ï¼Œå‘½åä¸º main çš„åŒ…ä¼šè¢«å°è¯•ç¼–è¯‘ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚ æ‰€æœ‰ç”¨goè¯­è¨€ç¼–è¯‘çš„å¯æ‰§è¡Œç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªåä¸º main çš„åŒ…ã€‚ ä¸€ä¸ª main çš„åŒ…ï¼Œä¸€å®šä¼šåŒ…å«ä¸€ä¸ª main() å‡½æ•°ã€‚ åœ¨Goè¯­è¨€é‡ŒåŒæ—¶è¦æ»¡è¶³ main åŒ…å’ŒåŒ…å« main() å‡½æ•°ï¼Œæ‰ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ Goç¨‹åºç¼–è¯‘æ—¶ï¼Œä¼šä½¿ç”¨å£°æ˜ main åŒ…çš„ä»£ç æ‰€åœ¨çš„ç›®å½•çš„ç›®å½•åä½œä¸ºäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶åã€‚ åŒ…çš„å¯¼å…¥ä½¿ç”¨ import å…³é”®å­—æ¥å¯¼å…¥åŒ…ã€‚å¯¼å…¥çš„åŒ…å¿…é¡»æ˜¯ä¸€ä¸ªå…¨è·¯å¾„çš„åŒ…ï¼Œä¹Ÿå°±æ˜¯åŒ…æ‰€åœ¨çš„ä½ç½®ã€‚ å¯¼å…¥å•ä¸ªåŒ…ï¼š 1import &quot;fmt&quot; å¯¼å…¥å¤šä¸ªåŒ…æ—¶ï¼Œä½¿ç”¨ä¸€å¯¹æ‹¬å·åŒ…å«çš„å¯¼å…¥å—ï¼Œæ¯ä¸ªåŒ…ç‹¬å ä¸€è¡Œã€‚ 12345import ( &quot;fmt&quot; &quot;net/http&quot; &quot;strings&quot;) å¯¹äºå¤šäºä¸€ä¸ªè·¯å¾„çš„åŒ…åï¼Œåœ¨ä»£ç ä¸­å¼•ç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨å…¨è·¯å¾„æœ€åä¸€ä¸ªåŒ…åä½œä¸ºå¼•ç”¨çš„åŒ…åï¼Œæ¯”å¦‚ net/http ,æˆ‘ä»¬åœ¨ä»£ç ä½¿ç”¨çš„æ˜¯ http ï¼Œè€Œä¸æ˜¯ net ã€‚ Goæœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„ç¯å¢ƒå˜é‡ GOROOT å’Œ GOPATH ,è¿™æ˜¯ä¸¤ä¸ªå®šä¹‰è·¯å¾„çš„ç¯å¢ƒå˜é‡ï¼ŒGOROOTæ˜¯å®‰è£…Goçš„è·¯å¾„ï¼Œæ¯”å¦‚/usr/local/goï¼›GOPATHæ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„å¼€å‘è€…ä¸ªäººçš„å·¥ä½œç©ºé—´ï¼Œæ¯”å¦‚ /home/myproject/go ã€‚ æ ‡å‡†åº“ä¸­çš„åŒ…ä¼šåœ¨ GOROOT å»æŸ¥æ‰¾ï¼ŒGoå¼€å‘è€…åˆ›å»ºçš„åŒ…ä¼šåœ¨ GOPATH æŒ‡å®šçš„ç›®å½•ä¸­æŸ¥æ‰¾ã€‚ å¯¹äºåŒ…çš„æŸ¥æ‰¾ï¼Œæ˜¯æœ‰ä¼˜å…ˆçº§çš„ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆåœ¨ GOROOT é‡Œæœç´¢ï¼Œå…¶æ¬¡æ˜¯ GOPATH ,ä¸€æ—¦æ‰¾åˆ°ï¼Œå°±ä¼šé©¬ä¸Šåœæ­¢æœç´¢ã€‚å¦‚æœæœ€ç»ˆéƒ½æ²¡æ‰¾åˆ°ï¼Œå°±æŠ¥ç¼–è¯‘å¼‚å¸¸äº†ã€‚ è¿œç¨‹å¯¼å…¥Goè¯­è¨€çš„å·¥å…·é“¾æ”¯æŒä»Githubã€Bitbucketç­‰ç±»ä¼¼ç½‘ç«™è·å–æºä»£ç ã€‚ 1import &quot;github.com/spf13/viper&quot; ç”¨å¯¼å…¥è·¯å¾„ç¼–è¯‘ç¨‹åºæ—¶ï¼Œgobuild å‘½ä»¤ä¼šå…ˆåœ¨ GOPATH ä¸‹æœç´¢è¿™ä¸ªåŒ…ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä½¿ç”¨ go get å·¥å…·é€šè¿‡URLä»ç½‘ç»œè·å–ï¼Œå¹¶æŠŠåŒ…çš„æºä»£ç ä¿å­˜åœ¨ GOPATH ç›®å½•ä¸‹å¯¹åº”URLçš„ç›®å½•é‡Œã€‚ go get å·¥å…·å¯ä»¥é€’å½’è·å–ä¾èµ–åŒ…ã€‚ å‘½åå¯¼å…¥å¦‚æœè¦å¯¼å…¥çš„å¤šä¸ªåŒ…å…·æœ‰ç›¸åŒçš„åå­—ï¼Œå¯ä»¥é€šè¿‡ å‘½åå¯¼å…¥ çš„æ–¹å¼æ¥å¯¼å…¥ã€‚ å‘½åå¯¼å…¥æ˜¯æŒ‡åœ¨ import è¯­å¥ç»™å‡ºçš„åŒ…è·¯å¾„çš„å·¦ä¾§å®šä¹‰ä¸€ä¸ªåå­—ï¼Œå°†å¯¼å…¥çš„åŒ…å‘½åä¸ºæ–°åå­—ã€‚ 1234import ( &quot;fmt&quot; myfmt &quot;mylib/fmt&quot;) Goè¯­è¨€è§„å®šï¼Œå¯¼å…¥çš„åŒ…å¿…é¡»è¦ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚Goè¯­è¨€çš„è¿™ä¸ªç‰¹æ€§å¯ä»¥é˜²æ­¢å¯¼å…¥äº†æœªè¢«ä½¿ç”¨çš„åŒ…ï¼Œé¿å…ä»£ç å˜å¾—è‡ƒè‚¿ã€‚ ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¼å…¥ä¸€ä¸ªåŒ…ï¼Œä½†æ˜¯ä¸éœ€è¦å¼•ç”¨è¿™ä¸ªåŒ…çš„æ ‡è¯†ç¬¦ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ _ æ¥é‡å‘½åå¯¼å…¥çš„åŒ…å³å¯ã€‚ 123456package mainimport ( &quot;fmt&quot; _ &quot;mylib/fmt&quot;) ç©ºç™½æ ‡è¯†ç¬¦(_) ç”¨æ¥æŠ›å¼ƒä¸æƒ³ç»§ç»­ä½¿ç”¨çš„å€¼ï¼Œå¦‚ç»™å¯¼å…¥çš„åŒ…èµ‹äºˆä¸€ä¸ªç©ºåå­—ï¼Œæˆ–å¿½ç•¥å‡½æ•°è¿”å›çš„ä¸æ„Ÿå…´è¶£çš„å€¼ã€‚ initå‡½æ•°æ¯ä¸ªåŒ…éƒ½å¯ä»¥æœ‰ä»»æ„å¤šä¸ªinitå‡½æ•°ï¼Œè¿™äº›initå‡½æ•°éƒ½ä¼šåœ¨mainå‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚initå‡½æ•°é€šå¸¸ç”¨æ¥åšåˆå§‹åŒ–å˜é‡ã€è®¾ç½®åŒ…æˆ–è€…å…¶ä»–éœ€è¦åœ¨ç¨‹åºæ‰§è¡Œå‰çš„å¼•å¯¼å·¥ä½œã€‚initå‡½æ•°ç”¨åœ¨è®¾ç½®åŒ…ã€åˆå§‹åŒ–å˜é‡æˆ–è€…å…¶ä»–è¦åœ¨ç¨‹åºè¿è¡Œå‰ä¼˜å…ˆå®Œæˆçš„å¼•å¯¼å·¥ä½œã€‚ ä»¥æ•°æ®åº“é©±åŠ¨ä¸ºä¾‹ï¼Œ database ä¸‹çš„é©±åŠ¨åœ¨å¯åŠ¨æ—¶æ‰§è¡Œ init å‡½æ•°ä¼šå°†è‡ªèº«æ³¨å†Œåˆ° sql åŒ…é‡Œï¼Œå› ä¸º sql åŒ…åœ¨ç¼–è¯‘æ—¶å¹¶ä¸çŸ¥é“è¿™äº›é©±åŠ¨çš„å­˜åœ¨ï¼Œç­‰å¯åŠ¨ä¹‹å sql æ‰èƒ½è°ƒç”¨è¿™äº›é©±åŠ¨ã€‚ 123456789package postgresimport ( &quot;database/sql&quot;)func init() &#123; sql.Register(&quot;postgres&quot;, new(PostgresDriver))&#125; å› ä¸ºæˆ‘ä»¬åªæ˜¯æƒ³æ‰§è¡Œè¿™ä¸ª postgres åŒ…çš„ init æ–¹æ³•ï¼Œå¹¶ä¸æƒ³ä½¿ç”¨è¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯¼å…¥çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ _ æ¥é‡å‘½ååŒ…åï¼Œé¿å…ç¼–è¯‘é”™è¯¯ã€‚ 12345678910package mainimport ( &quot;database/sql&quot; _ &quot;github.com/goinaction/code/chapter3/dbdriver/postgres&quot;)func main() &#123; sql.Open(&quot;postgres&quot;, &quot;mydb&quot;)&#125; å¦‚ä¸Šéå¸¸ç®€æ´ï¼Œå‰©ä¸‹å¾ˆå¯¹æ•°æ®åº“çš„æ“ä½œï¼Œéƒ½æ˜¯ä½¿ç”¨ database/sql æ ‡å‡†æ¥å£ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ¢å…¶ä»–æ•°æ®åº“é©±åŠ¨ï¼Œåªéœ€è¦æ¢ä¸ªå¯¼å…¥å³å¯ï¼Œçµæ´»æ–¹ä¾¿ã€‚]]></content>
      <categories>
        <category>ä»0åˆ°1å­¦Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangè¿è¡Œç¯å¢ƒé…ç½®]]></title>
    <url>%2F2017%2F04%2F02%2Fgolang-running-environment-configuration%2F</url>
    <content type="text"><![CDATA[Winç³»ç»Ÿä¸‹é…ç½®Goè¯­è¨€ç¯å¢ƒ ä»ç½‘ç«™ Downloads - The Go Programming Language ä¸‹è½½ go1.6.3.windows-amd64.msi å®‰è£…åŒ…ã€‚ è¿è¡Œå¹¶å®‰è£…åˆ°é»˜è®¤ç›®å½• C:\Go ç›®å½•ä¸‹ã€‚ é…ç½® GOROOT å’Œ GOPATH : åœ¨ ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­çš„ PATH å˜é‡ä¸­æ·»åŠ Goçš„ç›®å½• C:\Go\bin; (é€šè¿‡å®‰è£…åŒ…å®‰è£…åå·²é»˜è®¤è®¾ç½®è¯¥é¡¹) åœ¨ ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­æ·»åŠ  GOROOT å˜é‡ï¼Œè®¾ç½®å€¼ä¸º C:\Go\ (é€šè¿‡å®‰è£…åŒ…å®‰è£…åå·²é»˜è®¤è®¾ç½®è¯¥é¡¹) è¦éªŒè¯ GOROOT æ˜¯å¦è®¾ç½®æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£ä¸­è¾“å…¥ go versionï¼Œå¦‚æœè¾“å‡ºäº†Goçš„ç‰ˆæœ¬ä¿¡æ¯åˆ™è¯´æ˜é…ç½®æ­£ç¡®ã€‚ GOPATH å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é…ç½®ä¸€ä¸‹ï¼ŒGOPATH å°±æ˜¯ä½ çš„å·¥ä½œç›®å½•ï¼Œç”¨äºå­˜æ”¾é¡¹ç›®å’Œgoä¾èµ–åŒ…ç­‰ã€‚å‡è®¾ç›®å½• E:\GOProject ä¸ºæˆ‘çš„Goé¡¹ç›®å·¥ä½œç›®å½•ï¼Œè¯¥å·¥ä½œç›®å½•ä¸‹é»˜è®¤åŒ…å«ä¸‰ä¸ªå­ç›®å½•ï¼šbin/ pkg/ src ã€‚ç„¶åæˆ‘ä»¬åœ¨ ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ æ–°å»º GOPATH å˜é‡ï¼Œè®¾ç½®å€¼ä¸º E:\GOProject;ã€‚é»˜è®¤æƒ…å†µä¸‹ GOPATH ç›®å½•å¯ä»¥è®¾ç½®å¤šä¸ªï¼Œä¹‹é—´ç”¨åˆ†å· ; åˆ†éš”ã€‚ ç„¶ååœ¨å‘½ä»¤è¡Œçª—å£ä¸­è¾“å…¥ echo %GOPATH% å¦‚æœæ‰“å°å‡ºäº†ä¸Šé¢è®¾ç½®çš„ GOPATH çš„ç›®å½•ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸã€‚ ä¸ºäº†éªŒè¯Goå¼€å‘ç¯å¢ƒæ˜¯å¦è®¾ç½®æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š(ä¿è¯å·²ç»å®‰è£…Git) 1go get github.com/golang/example/hello ç„¶åæ‰§è¡Œå‘½ä»¤ï¼š 1%GOPATH%/bin/hello å¦‚æœè¾“å‡ºäº† Hello,Go examples! åˆ™è¯´æ˜Goè¯­è¨€çš„å¼€å‘ç¯å¢ƒæ­å»ºæˆåŠŸã€‚ å‚è€ƒè‡ªï¼šEasy Go Programming Setup for Windows Wade Wegner Winä¸‹é…ç½®Golangå¼€å‘ç¯å¢ƒæ·»åŠ å¤šä¸ªå·¥ä½œç›®å½•æˆ‘ä¸€èˆ¬ä¼šè®¾ç½®ä¸¤ä¸ªç›®å½•ç”¨ä½œæˆ‘çš„å·¥ä½œé¡¹ç›®ã€‚ä¸€èˆ¬æˆ‘ä¼šå‘½åä¸º xgo å’Œ xgo_workspace ï¼Œä¸€ä¸ªç”¨æ¥å­˜å‚¨ç½‘ç»œä¸Šå…¶ä»–çš„Golangä¾èµ–é¡¹ç›®ï¼Œä¸€ä¸ªä½œä¸ºæˆ‘è‡ªå·±çš„å¼€å‘é¡¹ç›®å­˜æ”¾ä½ç½®ã€‚ åœ¨Windowsç³»ç»Ÿä¸‹å®‰è£…ä¸ŠGoçš„msiå®‰è£…åŒ…åï¼Œé»˜è®¤çš„ GOPATH ç›®å½•ä¸ºå½“å‰ç®¡ç†å‘˜è´¦æˆ·ç›®å½•ä¸‹çš„goæ–‡ä»¶å¤¹ï¼šC:\Users\xxxx\go ä¸­ï¼Œåœ¨ Cmder æ§åˆ¶å°ä¸­é€šè¿‡ go env æŸ¥çœ‹ï¼š 12345678910111213141516171819202122Î» go env set GOARCH=amd64 set GOBIN= set GOEXE=.exe set GOHOSTARCH=amd64 set GOHOSTOS=windows set GOOS=windows set GOPATH=C:\Users\xxxx\go set GORACE= set GOROOT=C:\Go set GOTOOLDIR=C:\Go\pkg\tool\windows_amd64 set GCCGO=gccgo set CC=gcc set GOGCCFLAGS=-m64 -mthreads -fmessage-length=0 set CXX=g++ set CGO_ENABLED=1 set CGO_CFLAGS=-g -O2 set CGO_CPPFLAGS= set CGO_CXXFLAGS=-g -O2 set CGO_FFLAGS=-g -O2 set CGO_LDFLAGS=-g -O2 set PKG_CONFIG=pkg-config åœ¨ ç¯å¢ƒå˜é‡ ä¸‹æ–°å¢ GOPATH é¡¹ï¼Œæ·»åŠ å€¼ä¸º E:\GOProject\xgo;E:\GOProject\xgo_workspace ï¼Œæ³¨æ„å¤šä¸ªç›®å½•åœ¨windowsä¸‹ä½¿ç”¨åˆ†å· ; åˆ†éš”ï¼Œé‡å¯ Cmder å†æ¬¡é€šè¿‡ go env æŸ¥çœ‹ï¼š 12345678910111213141516171819202122Î» go envset GOARCH=amd64set GOBIN=set GOEXE=.exeset GOHOSTARCH=amd64set GOHOSTOS=windowsset GOOS=windowsset GOPATH=E:\GOProject\xgo;E:\GOProject\xgo_workspaceset GORACE=set GOROOT=C:\Goset GOTOOLDIR=C:\Go\pkg\tool\windows_amd64set GCCGO=gccgoset CC=gccset GOGCCFLAGS=-m64 -mthreads -fmessage-length=0set CXX=g++set CGO_ENABLED=1set CGO_CFLAGS=-g -O2set CGO_CPPFLAGS=set CGO_CXXFLAGS=-g -O2set CGO_FFLAGS=-g -O2set CGO_LDFLAGS=-g -O2set PKG_CONFIG=pkg-config Macä¸‹é…ç½®Golangå¼€å‘ç¯å¢ƒé€šè¿‡brewå®‰è£…1$ brew install go é€šè¿‡pkgåŒ…å®‰è£…ä» golangå®˜ç½‘ ä¸‹è½½Macä¸‹çš„pkgå®‰è£…åŒ…ç›´æ¥å®‰è£…. ç¯å¢ƒå˜é‡é…ç½®GOPATHå…è®¸å¤šä¸ªç›®å½•ï¼Œå½“æœ‰å¤šä¸ªç›®å½•æ—¶ï¼Œè¯·æ³¨æ„åˆ†éš”ç¬¦ï¼Œå¤šä¸ªç›®å½•çš„æ—¶å€™Windowsæ˜¯åˆ†å· ;ï¼ŒLinuxç³»ç»ŸåŠMacä¸‹æ˜¯å†’å· :ï¼Œå½“æœ‰å¤šä¸ªGOPATHæ—¶ï¼Œé»˜è®¤ä¼šå°† go get çš„å†…å®¹æ”¾åœ¨ç¬¬ä¸€ä¸ªç›®å½•ä¸‹ã€‚ 123456789101112131415$ go envGOARCH=&quot;amd64&quot;GOBIN=&quot;&quot;GOEXE=&quot;&quot;GOHOSTARCH=&quot;amd64&quot;GOHOSTOS=&quot;darwin&quot;GOOS=&quot;darwin&quot;GOPATH=&quot;&quot;GORACE=&quot;&quot;GOROOT=&quot;/usr/local/go&quot;GOTOOLDIR=&quot;/usr/local/go/pkg/tool/darwin_amd64&quot;CC=&quot;clang&quot;GOGCCFLAGS=&quot;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/mk/7c0w24ts0ps1g06q78gzd7dc0000gn/T/go-build098119519=/tmp/go-build -gno-record-gcc-switches -fno-common&quot;CXX=&quot;clang++&quot;CGO_ENABLED=&quot;1&quot; å‡å¦‚æˆ‘çš„goé¡¹ç›®å¼€å‘ä¸»ç›®å½•ä¸º:/Users/xxx/Learn/Goåœ¨è¯¥ç›®å½•ä¸‹,ç¬¬ä¸€ä¸ªç›®å½•ä¸º xgo ç¬¬äºŒä¸ªç›®å½•ä¸º xgo_workspace 12345# GOPATHexport GOPATH=$HOME/Learn/Go/xgo:$HOME/Learn/Go/xgo_workspace# GOPATH binexport PATH=$PATH:$GOPATH/bin æ·»åŠ å®Œæˆå,é‡å¯ç»ˆç«¯å³å¯ç”Ÿæ•ˆ.å¦‚æœæƒ³ç«‹å³ç”Ÿæ•ˆ,åˆ™å¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤: 1$ source ~/.bash_profile å†æ¬¡æŸ¥çœ‹goç¯å¢ƒå˜é‡: 123456789101112131415$ go envGOARCH=&quot;amd64&quot;GOBIN=&quot;&quot;GOEXE=&quot;&quot;GOHOSTARCH=&quot;amd64&quot;GOHOSTOS=&quot;darwin&quot;GOOS=&quot;darwin&quot;GOPATH=&quot;/Users/xxx/Learn/Go/xgo:/Users/xxx/Learn/Go/xgo_workspace&quot;GORACE=&quot;&quot;GOROOT=&quot;/usr/local/go&quot;GOTOOLDIR=&quot;/usr/local/go/pkg/tool/darwin_amd64&quot;CC=&quot;clang&quot;GOGCCFLAGS=&quot;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/mk/7c0w24ts0ps1g06q78gzd7dc0000gn/T/go-build346222074=/tmp/go-build -gno-record-gcc-switches -fno-common&quot;CXX=&quot;clang++&quot;CGO_ENABLED=&quot;1&quot; http://blog.helloarron.com/2015/08/29/go/mac-install-go/ https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/01.2.md http://blog.studygolang.com/2013/01/%E5%86%8D%E7%9C%8Bgopath/ (è®¾ç½®å¤šä¸ªç›®å½•æ—¶åªä¼šå°†æœ€åä¸€ä¸ªç›®å½•æ·»åŠ ä¸Šbin è¿™é‡Œè¦è¯´æ˜) Update 2017-11-28 æ›´æ–°windowsä¸‹è®¾ç½®å¤šä¸ªå·¥ä½œç›®å½•çš„è¯´æ˜]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Goè¯­è¨€å­¦ä¹ èµ„æ–™æ•´ç†]]></title>
    <url>%2F2017%2F03%2F31%2Flearning-golang%2F</url>
    <content type="text"><![CDATA[æ•´ç†ç½‘ä¸Šæ‰¾åˆ°çš„Golangè¯­è¨€å­¦ä¹ èµ„æ–™ åŸºç¡€åŸºç¡€æ•™ç¨‹ ä¹¦ç±åœ¨çº¿ç‰ˆ Go æŒ‡å—-A Tour of Go Goè¯­è¨€åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ Effective Goä¸­æ–‡ç‰ˆ Go Webç¼–ç¨‹ build-web-application-with-golang Goå…¥é—¨æŒ‡å— The Way to Go ã€ŠThe Way to Goã€‹ä¸­æ–‡è¯‘æœ¬ï¼Œä¸­æ–‡æ­£å¼åã€ŠGoå…¥é—¨æŒ‡å—ã€‹ Golangå­¦ä¹ å®¤ Goè½»æ¾å­¦ TechDoc ã€ŠGoå®æˆ˜å¼€å‘ã€‹ go-best-practice åŸºç¡€æ•™ç¨‹ ä¹¦ç±ç¦»çº¿ç‰ˆ GitHub - qyuhen/book: å­¦ä¹ ç¬”è®° åŸºç¡€æ•™ç¨‹ è§†é¢‘ Goç¼–ç¨‹åŸºç¡€ Goç¼–ç¨‹åŸºç¡€_å…è´¹é«˜é€Ÿä¸‹è½½|ç™¾åº¦ç½‘ç›˜-åˆ†äº«æ— é™åˆ¶ Web Go Web åŸºç¡€ - ç½‘æ˜“äº‘è¯¾å ‚ beegoå¼€å‘æ–‡æ¡£ è¿›é˜¶ æ·±å…¥è§£æGo go-internals Goååº“è®²è§£ - ç½‘æ˜“äº‘è¯¾å ‚ Goè¯­è¨€æ ‡å‡†åº“ GO å‘½ä»¤æ•™ç¨‹ : Golang command tutorial in Chinese. ç†è§£Goè¯­è¨€çš„nil - ç®€ä¹¦ å·¥å…· Go Walker - Go è¯­è¨€åœ¨çº¿ API æ–‡æ¡£ Go è¯­è¨€åŒ…ç®¡ç† Rego - A Go regular expression tester é¡¹ç›® Projects Â· golang/go Wiki Â· GitHub Golangå¤§ç‰› Unknwon (æ— é—») Â· GitHub qyuhen (Q.yuhen) Â· GitHub Go å¼€å‘å·¥å…· gosublimetext æ’ä»¶ GitHub - DisposaBoy/GoSublime: A Golang plugin collection for SublimeText 3, providing code completion and other IDE-like features. Wise Turtles - Goå­¦ä¹ ç¬”è®°3ä¹‹æ‰“é€ Sublime Text&nbsp;3ä½œä¸ºGoçš„é›†æˆå¼€å‘ç¯å¢ƒ Goè¯­è¨€ç¼–è¾‘å™¨IDEä¹‹JetBrainsç¯‡(PyCharm+goæ’ä»¶plugin) Sublime Text3 &#43; Golangæ­å»ºå¼€å‘ç¯å¢ƒ_éšç¬” - Vckaiçš„ä¸ªäººæŠ€æœ¯åšå®¢. - Vckai.com Sublime Text 2æ­å»ºGoå¼€å‘ç¯å¢ƒï¼ˆWindowsï¼‰ - Bill Yuan - åšå®¢å›­ Ubuntu é…ç½® Go è¯­è¨€å¼€å‘ç¯å¢ƒï¼ˆSublime Text+GoSublimeï¼‰ - æŠ›å¼ƒä¸–ä¿—ä¹‹æµ®èºï¼Œç•™æˆ‘é’»ç ”ä¹‹åˆ»è‹¦ - å¼€æºä¸­å›½ç¤¾åŒº ç›¸å…³å‚è€ƒ Golangå­¦ä¹ å†ç¨‹ - ç®€ä¹¦ GitHub - Unknwon/go-study-index: Go è¯­è¨€å­¦ä¹ èµ„æ–™ç´¢å¼• Go æ ‡å‡†åº“ä»‹ç» ironxu GOè¯­è¨€å­¦ä¹ èµ„æºæ•´ç† - çŸ¥ä¹ä¸“æ  GO-Start/Goè¯­è¨€ä¸­çš„é—­åŒ….md at master Â· carryxyh/GO-Start Â· GitHub Goçš„æ–‡ä»¶æ“ä½œ - è°¢æƒSELF Goè¯­è¨€å¹¶å‘æœºåˆ¶åˆæ¢-åšå®¢-äº‘æ –ç¤¾åŒº-é˜¿é‡Œäº‘ Goè¯­è¨€å®æˆ˜ç¬”è®° Goå­¦ä¹ ã€äºŒã€‘å­¦ä¹ èµ„æ–™ - ä¸€èµ·å­¦ä¹  go - SegmentFault GOè¯­è¨€é›¶åŸºç¡€å…¥é—¨èµ„æ–™æ•´ç† - ç®€ä¹¦ Goç®€æ˜æ•™ç¨‹ ç”µå­ä¹¦æ•™ç¨‹Go è¯­è¨€åŸºç¡€ goè¯­è¨€å…¥é—¨ Â· GitBook goè¯­è¨€æ•™ç¨‹ ã€Šå­¦ä¹ GOè¯­è¨€ã€‹ä¸­æ–‡ç‰ˆ ã€Šå­¦ä¹ GOè¯­è¨€ã€‹GitHub - mikespook/Learning-Go-zh-cn: ä¸€æœ¬å­¦ä¹  Go è¯­è¨€çš„å…è´¹ç”µå­ä¹¦ã€‚ GitHub - Unknwon/go-fundamental-programming: ã€ŠGoç¼–ç¨‹åŸºç¡€ã€‹æ˜¯ä¸€å¥—é’ˆå¯¹ Google å‡ºå“çš„ Go è¯­è¨€çš„è§†é¢‘è¯­éŸ³æ•™ç¨‹ï¼Œä¸»è¦é¢å‘æ–°æ‰‹çº§åˆ«çš„å­¦ä¹ è€…ã€‚ GitHub - Unknwon/go-rock-libraries-showcases: ã€ŠGoååº“è®²è§£ã€‹æ˜¯ä¸€å¥—é’ˆå¯¹ Google å‡ºå“çš„ Go è¯­è¨€çš„ç¬¬ä¸‰æ–¹åº“è¿›è¡Œè¯„æµ‹è®²è§£çš„é›†åšå®¢ã€ç¤ºä¾‹ä¸è¯­éŸ³è§†é¢‘ä¸ºä¸€ä½“çš„ç»¼åˆæ•™ç¨‹ï¼Œé€‚åˆå®Œæˆå­¦ä¹ å®Œæˆã€ŠGoç¼–ç¨‹åŸºç¡€ã€‹æ•™ç¨‹çš„å­¦ä¹ è€…ã€‚ GitHub - Unknwon/the-way-to-go_ZH_CN: ã€ŠThe Way to Goã€‹ä¸­æ–‡è¯‘æœ¬ï¼Œä¸­æ–‡æ­£å¼åã€ŠGoå…¥é—¨æŒ‡å—ã€‹ å‰è¨€ | Goè¯­è¨€åœ£ç» Go Web å¼€å‘ GitHub - Unknwon/go-web-foundation: ã€ŠGo WebåŸºç¡€ã€‹æ˜¯ä¸€å¥—é’ˆå¯¹ Google å‡ºå“çš„ Go è¯­è¨€çš„è§†é¢‘è¯­éŸ³æ•™ç¨‹ï¼Œä¸»è¦é¢å‘å®Œæˆã€ŠGoç¼–ç¨‹åŸºç¡€ã€‹æ•™ç¨‹åå¸Œæœ›è¿›ä¸€æ­¥äº†è§£æœ‰å…³ Go Web å¼€å‘çš„å­¦ä¹ è€…ã€‚ ã€ŠGO WEBç¼–ç¨‹ã€‹ è§†é¢‘æ•™ç¨‹ è·Ÿæ— é—»å­¦Goè¯­è¨€ï¼šGoç¼–ç¨‹åŸºç¡€è§†é¢‘æ•™ç¨‹ï¼ˆå…±15è¯¾æ—¶ï¼‰_åœ¨çº¿è‡ªå­¦è§†é¢‘æ•™ç¨‹_51CTOå­¦é™¢ è·Ÿæ— é—»å­¦Goè¯­è¨€ï¼šGo WebåŸºç¡€è§†é¢‘æ•™ç¨‹ï¼ˆå…±12è¯¾æ—¶ï¼‰_åœ¨çº¿è‡ªå­¦è§†é¢‘æ•™ç¨‹_51CTOå­¦é™¢ Goè¯­è¨€ç¬¬ä¸€è¯¾_Goè¯­è¨€è§†é¢‘æ•™ç¨‹-æ…•è¯¾ç½‘ Goç¼–ç¨‹åŸºç¡€ Golangç¼–ç¨‹åŸºç¡€ Goå…¨å¥—]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Golang</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker-Ubuntu-Gogsä¸ªæ€§åŒ–è®¾ç½®]]></title>
    <url>%2F2017%2F03%2F27%2Fdocker-ubuntu-gogs-custom%2F</url>
    <content type="text"><![CDATA[Docker Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»Gogså®¹å™¨æœåŠ¡ã€‚ ä¸ªæ€§åŒ–çš„é…ç½® Docker Gogs é¦–é¡µæ ·å¼ã€‚ Gogs MITå¼€æºåè®® Gogs é¡¹ç›®ä»£ç  100% å¼€æºå¹¶å¯æ— æ¡ä»¶å…è´¹ä½¿ç”¨ã€‚æ‰€æœ‰çš„æºä»£ç å‡é€šè¿‡ MIT æˆæƒåè®® æ‰˜ç®¡åœ¨ GitHub ä¸Šã€‚ å‡†å¤‡å·¥ä½œåœ¨Dockerå®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´æ‹·è´æ–‡ä»¶çš„å‘½ä»¤ä»¥ä¸‹å‘½ä»¤å‡åœ¨ å®¿ä¸»æœº ä¸Šæ‰§è¡Œã€‚ 12345# æ‹·è´æ–‡ä»¶ä»å®¿ä¸»æœºè‡³å®¹å™¨ï¼š$ docker cp localfile &lt;ConName&gt;:/app/confile# æ‹·è´æ–‡ä»¶ä»å®¹å™¨è‡³å®¿ä¸»æœºï¼š$ docker cp &lt;ConName&gt;:/app/confile localfile å°†å¾…å¤„ç†æ–‡ä»¶è¿›è¡Œå¤‡ä»½æ“ä½œä½¿ç”¨ docker exec å‘½ä»¤è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨ï¼š 1$ docker exec -it &lt;ConName&gt; /bin/bash å¤‡ä»½Gogsç›®å½•ä¸‹çš„ä»¥ä¸‹æ–‡ä»¶ï¼š templates/home.tmpl templates/base/head.tmpl templates/base/footer.tmpl 1docker@ConName/templates# cp ./home.tmpl ./home.tmpl.tmp æ›´æ”¹é¦–é¡µä»‹ç» åªä¿ç•™LogoåŒºåŸŸé¦–é¡µä¸­éƒ¨å†…å®¹ â€“ home.tmpl â€“ å»é™¤é¦–é¡µä¸­ä¸‹éƒ¨åˆ†ä»‹ç»ï¼Œåªä¿ç•™LogoåŒºåŸŸ å°†å®¹å™¨å†…çš„ home.tmpl æ–‡ä»¶æ‹·è´è‡³å®¿ä¸»æœºæœ¬åœ°ï¼š 1$ docker cp &lt;ConName&gt;:/home/git/gogs/templates/home.tmpl ./home.tmpl ä¿®æ”¹é¦–é¡µç«™ç‚¹ä»‹ç»ç½‘ç«™æ ‡é¢˜å’Œä»‹ç»éƒ¨åˆ†åœ¨é¡µé¢ä¸­çš„ div.hero éƒ¨åˆ†ï¼š 123456&lt;div class="hero"&gt; &lt;h1 class="ui icon header title"&gt; ... &lt;/h1&gt; &lt;h2&gt;...&lt;/h2&gt;&lt;/div&gt; è¿™é‡Œæˆ‘å°†ç«™ç‚¹ä»‹ç»ä¿®æ”¹ä¸ºäº† ï¼š 1&lt;h2&gt;ç”¨äº†é›ªå“¥Gitåº“ ä»æ­¤ç¼–ç¨‹ä¸å†å&lt;/h2&gt; éšè—é¦–é¡µç«™ç‚¹è¯´æ˜éƒ¨åˆ†è¯´æ˜éƒ¨åˆ†æˆ‘ä»…ä»¥ ç®€ä½“ä¸­æ–‡ å’Œ English ä¸¤ç§è¯­è¨€çš„ä¿®æ”¹æ¥è¯´æ˜ï¼š ä¸­æ–‡è¯´æ˜éƒ¨åˆ†ï¼šå†…å®¹åœ¨é¡µé¢ä¸­çš„1&#123;&#123;else if eq .Lang &quot;zh-CN&quot;&#125;&#125; å’Œ1&#123;&#123;else if eq .Lang &quot;fr-FR&quot;&#125;&#125; ä¹‹é—´ï¼š 1234&#123;&#123;else if eq .Lang "zh-CN"&#125;&#125; ... ...&#123;&#123;else if eq .Lang "fr-FR"&#125;&#125; è‹±æ–‡è¯´æ˜éƒ¨åˆ†ï¼šå†…å®¹åœ¨é¡µé¢ä¸­çš„1&#123;&#123;else&#125;&#125; å’Œ1&#123;&#123;end&#125;&#125; ä¹‹é—´ï¼š 1234&#123;&#123;else&#125;&#125; ... ...&#123;&#123;end&#125;&#125; å°†è¿™ä¸¤éƒ¨åˆ†çš„å†…å®¹åˆ é™¤æˆ–ç”¨ &lt;!-- --&gt; éšè—ã€‚ æ›´æ”¹å®Œæˆåï¼Œä¿å­˜ï¼Œå¹¶æ›´æ–°å›å®¹å™¨ä¸­ï¼š 1$ docker cp ./home.tmpl &lt;ConName&gt;:/home/git/gogs/templates/home.tmpl å»é™¤æœªç™»å½•ç”¨æˆ·å·¦ä¸Šè§’æ˜¾ç¤ºçš„â€œå¸®åŠ©â€æŒ‰é’®åŠæ›´æ¢èƒŒæ™¯å›¾æ¡ˆå¤´éƒ¨å¯¼èˆª â€“ head.tmpl â€“ å»é™¤æœªç™»å½•ç”¨æˆ·å·¦ä¸Šè§’æ˜¾ç¤ºçš„â€œå¸®åŠ©â€æŒ‰é’® å…ˆä»å®¹å™¨ä¸­è·å–è¯¥æ–‡ä»¶ï¼š 1$ docker cp &lt;ConName&gt;:/home/git/gogs/templates/base/head.tmpl ./head.tmpl å»é™¤æœªç™»å½•ç”¨æˆ·å·¦ä¸Šè§’æ˜¾ç¤ºçš„â€œå¸®åŠ©â€æŒ‰é’®å°†å¦‚ä¸‹éƒ¨åˆ†ä»£ç ä¸­çš„ &lt;a&gt;...&lt;/a&gt; æ³¨é‡Šæ‰æˆ–åˆ é™¤ï¼Œä¿®æ”¹åå¦‚ä¸‹ï¼š 1234&#123;&#123;else&#125;&#125; &lt;!--&lt;a class="item" target="_blank" href="https://gogs.io/docs" rel="noreferrer"&gt;&#123;&#123;.i18n.Tr "help"&#125;&#125;&lt;/a&gt;--&gt; &lt;div class="right menu"&gt; æ›´æ”¹é¦–é¡µèƒŒæ™¯å›¾æ¡ˆä»¿ç…§ https://gogs.io/ é¦–é¡µåœ¨ head.tmpl é¡µé¢ä¸­æ‰¾åˆ°å¦‚ä¸‹éƒ¨åˆ†: 123&lt;!-- Stylesheet --&gt;&lt;link rel="stylesheet" href="&#123;&#123;AppSubUrl&#125;&#125;/css/semantic-2.2.7.min.css"&gt;&lt;link rel="stylesheet" href="&#123;&#123;AppSubUrl&#125;&#125;/css/gogs.css?v=&#123;&#123;MD5 AppVer&#125;&#125;"&gt; åœ¨è¿™æ®µä¸‹é¢æ·»åŠ å¦‚ä¸‹ä»£ç : 123&#123;&#123;if .PageIsHome&#125;&#125;&lt;link rel="stylesheet" href="&#123;&#123;AppSubUrl&#125;&#125;/css/gghome.min.css"&gt;&#123;&#123;end&#125;&#125; ç„¶ååœ¨æœ¬åœ°æ–°å»ºåä¸º gghome.min.css çš„æ ·å¼æ–‡ä»¶ï¼Œæ³¨æ„æ–‡ä»¶çš„æ ¼å¼ä¸º UTF-8 ä¸”è¡Œç»“æŸæ ‡è¯†ä¸º Unix(LF) ï¼Œæ·»åŠ å¦‚ä¸‹æ ·å¼ï¼š 1.full.height&#123;background-color:#0F8DEC;background-image:url("data:image/svg+xml,%3Csvg width='304' height='304' viewBox='0 0 304 304' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M44.1 224c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H0v-2h44.1zm160 48c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H82v-2h122.1zm57.8-46c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H304v2h-42.1zm0 16c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H304v2h-42.1zm6.2-114c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4h-86.2c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h86.2zm-256-48c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H0v-2h12.1zm185.8 34c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h86.2c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4h-86.2zM258 12.1c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9V0h2v12.1zm-64 208c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9v-54.2c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9v54.2zm48-198.2c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V82h64v-2h-62V21.9zm16 16c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V66h48v-2h-46V37.9zm-128 96c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V210h16v10.1c-2.282.463-4 2.48-4 4.9 0 2.76 2.24 5 5 5s5-2.24 5-5c0-2.42-1.718-4.437-4-4.9V208h-16v-74.1zm-5.9-21.9c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H114v48H85.9c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H112v-48h12.1zm-6.2 130c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H176v-74.1c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9V242h-60.1zm-16-64c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H114v48h10.1c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H112v-48h-10.1zM66 284.1c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9V274H50v30h-2v-32h18v12.1zM236.1 176c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H226v94h48v32h-2v-30h-48v-98h12.1zm25.8-30c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H274v44.1c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9V146h-10.1zm-64 96c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H208v-80h16v-14h-42.1c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H226v18h-16v80h-12.1zm86.2-210c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H272V0h2v32h10.1zM98 101.9c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V144H53.9c-.463-2.282-2.48-4-4.9-4-2.76 0-5 2.24-5 5s2.24 5 5 5c2.42 0 4.437-1.718 4.9-4H98v-44.1zM53.9 34c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H80V0h2v34H53.9zm60.1 3.9c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V64H80v64H69.9c-.463-2.282-2.48-4-4.9-4-2.76 0-5 2.24-5 5s2.24 5 5 5c2.42 0 4.437-1.718 4.9-4H82V66h32V37.9zM101.9 82c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H128V37.9c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9V82h-28.1zm16-64c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H146v44.1c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9V18h-26.1zm102.2 270c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H98v14h-2v-16h124.1zM242 149.9c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9V162h16v30h-16v66h48v46h2v-48h-48v-62h16v-34h-16v-10.1zM53.9 18c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H64V2H48V0h18v18H53.9zm112 32c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H192V0h50v2h-48v48h-28.1zm-48-48c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5 0-.342.034-.677.1-1h2.07c-.11.313-.17.65-.17 1 0 1.657 1.343 3 3 3s3-1.343 3-3c0-.35-.06-.687-.17-1H178v34h-18V21.9c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9V32h14V2h-58.1zm0 96c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H137l32-32h39V21.9c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9V66h-40.172l-32 32H117.9zm28.1 90.1c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9v-76.513L175.586 80H224V21.9c-2.282-.463-4-2.48-4-4.9 0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.42-1.718 4.437-4 4.9V82h-49.586L146 112.414V188.1zm16 32c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9v-99.513L184.586 96H300.1c.398-1.96 1.94-3.502 3.9-3.9v2.07c-1.165.413-2 1.524-2 2.83s.835 2.417 2 2.83v2.07c-1.96-.398-3.502-1.94-3.9-3.9H185.414L162 121.414V220.1zm-144-64c2.282.463 4 2.48 4 4.9 0 2.76-2.24 5-5 5s-5-2.24-5-5c0-2.42 1.718-4.437 4-4.9v-3.513l48-48V48h32V0h2v50H66v55.413l-48 48v2.687zM50 53.9c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9v42.686l-48 48V210h28.1c.463 2.282 2.48 4 4.9 4 2.76 0 5-2.24 5-5s-2.24-5-5-5c-2.42 0-4.437 1.718-4.9 4H2v-62.586l48-48V53.9zm-16 16c2.282-.463 4-2.48 4-4.9 0-2.76-2.24-5-5-5s-5 2.24-5 5c0 2.42 1.718 4.437 4 4.9v18.686l-32 32v2.828l34-34V69.9zM12.1 32c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H9.414L0 43.414v-2.828L8.586 32H12.1zm265.8 18c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h18.686L304 40.586v2.828L297.414 50H277.9zm-16 160c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H288V136.587l16-16v2.827l-14 14V210h-28.1zm-208 32c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H64v-22.586L40.586 194H21.9c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h19.513L66 216.586V242H53.9zm150.2 14c.463-2.282 2.48-4 4.9-4 2.76 0 5 2.24 5 5s-2.24 5-5 5c-2.42 0-4.437-1.718-4.9-4H96v-56.598L56.598 162H37.9c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h19.502L98 200.598V256h106.1zm-150.2 2c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4H80v-46.586L48.586 178H21.9c-.463 2.282-2.48 4-4.9 4-2.76 0-5-2.24-5-5s2.24-5 5-5c2.42 0 4.437 1.718 4.9 4h27.513L82 208.586V258H53.9zM97 100c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-48 32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32 48c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16-64c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 96c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-144c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-96 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm96 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16-64c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-32 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM49 36c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-32 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM33 68c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-48c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 240c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16-64c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm80-176c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32 48c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm112 176c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm-16 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM17 180c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0-32c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16 0c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM17 84c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm32 64c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm16-16c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 39.793V0h-2v40.586L8.586 64H0v2h9.413L34 41.414v-1.62zM2 300.1V258h14v46h2v-48H0V302.17c.313-.11.65-.17 1-.17 1.306 0 2.417.835 2.83 2H5.9c-.398-1.96-1.94-3.502-3.9-3.9zM34 241v63h-2v-62H0v-2h34v1zM17 18h1V0h-2v16H0v2h17zm273-2V0h-2v18h16v-2h-14zm-32 273v15h-2v-14h-14v14h-2v-16h18v1zM0 92.1c.323-.066.658-.1 1-.1 2.76 0 5 2.24 5 5s-2.24 5-5 5c-.342 0-.677-.034-1-.1v-2.07c.313.11.65.17 1 .17 1.657 0 3-1.343 3-3s-1.343-3-3-3c-.35 0-.687.06-1 .17V92.1zM80 272h2v32h-2v-32zm37.9 32c-.463-2.282-2.48-4-4.9-4-2.42 0-4.437 1.718-4.9 4h2.07c.413-1.165 1.524-2 2.83-2s2.417.835 2.83 2h2.07zM5.9 0c.066.323.1.658.1 1 0 2.76-2.24 5-5 5-.342 0-.677-.034-1-.1V3.83C.313 3.94.65 4 1 4c1.657 0 3-1.343 3-3 0-.35-.06-.687-.17-1H5.9zm294.2 0c-.066.323-.1.658-.1 1 0 2.42 1.718 4.437 4 4.9V3.83c-1.165-.413-2-1.524-2-2.83 0-.35.06-.687.17-1h-2.07zm3.9 300.1c-1.96.398-3.502 1.94-3.9 3.9h2.07c.302-.852.978-1.528 1.83-1.83v-2.07z' fill='%23afcfe1' fill-opacity='0.23' fill-rule='evenodd'/%3E%3C/svg%3E")&#125;.hero&#123;color:#fff&#125;.hero .ui.header&#123;color:#fff&#125; ç„¶åå°†è¯¥æ–‡ä»¶ gghome.min.css æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼š 1$ docker cp ./gghome.min.css &lt;ConName&gt;:/home/git/gogs/public/css/gghome.min.css å¾…ä»¥ä¸Šæ­¥éª¤æ“ä½œå®Œæˆåï¼Œæ›´æ–°å›å®¹å™¨ä¸­ï¼š 1$ docker cp ./head.tmpl &lt;ConName&gt;:/home/git/gogs/templates/base/head.tmpl æ›´æ”¹åº•æ â€œå®˜æ–¹ç½‘ç«™â€å­—æ ·ä¸ºâ€œGogså®˜æ–¹ç½‘ç«™â€åº•éƒ¨ â€“ footer.tmpl â€“ æ›´æ”¹åº•æ â€œå®˜æ–¹ç½‘ç«™â€å­—æ ·ä¸ºâ€œGogså®˜æ–¹ç½‘ç«™â€ ä»å®¹å™¨ä¸­è·å–è¯¥æ–‡ä»¶ï¼š 1$ docker cp &lt;ConName&gt;:/home/git/gogs/templates/base/footer.tmpl ./footer.tmpl æ›´æ”¹åº•æ â€œå®˜æ–¹ç½‘ç«™â€å­—æ ·ä¸ºâ€œGogså®˜æ–¹ç½‘ç«™â€å°†ä»¥ä¸‹éƒ¨åˆ†ï¼š 1&lt;a target="_blank" href="https://gogs.io"&gt;&#123;&#123;.i18n.Tr "website"&#125;&#125;&lt;/a&gt; æ›´æ”¹ä¸ºï¼š 1&lt;a target="_blank" href="https://gogs.io"&gt;Gogs&#123;&#123;.i18n.Tr "website"&#125;&#125;&lt;/a&gt; Markdownæ–‡æ¡£ä¸­çš„é“¾æ¥è·³è½¬åŠ ä¸Štargetæ ‡ç­¾åº•éƒ¨ â€“ footer.tmpl â€“ Markdownæ–‡æ¡£ä¸­çš„é“¾æ¥è·³è½¬åŠ ä¸Štargetæ ‡ç­¾ é»˜è®¤æƒ…å†µä¸‹ï¼ŒGogsé¡¹ç›®ä¸­çš„Markdownæ–‡æ¡£ä¸­çš„é“¾æ¥æ˜¯åœ¨å½“å‰é¡µé¢è·³è½¬çš„ï¼Œä½†ä¸ªäººä¹ æƒ¯è¿˜æ˜¯å–œæ¬¢åœ¨æ–°é¡µé¢æ‰“å¼€é“¾æ¥ã€‚ æ‰¾åˆ° footer.tmpl é¡µé¢ä¸­å¦‚ä¸‹ä»£ç ï¼š 123&lt;script src="&#123;&#123;AppSubUrl&#125;&#125;/js/libs/clipboard-1.5.9.min.js"&gt;&lt;/script&gt;&#123;&#123;template "inject/footer" .&#125;&#125; åœ¨ä¸­é—´ä½ç½®æ·»åŠ ä¸€è¡Œï¼š 1&lt;script src="&#123;&#123;AppSubUrl&#125;&#125;/js/mdlinktarget.min.js"&gt;&lt;/script&gt; åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ³¨æ„æ–‡ä»¶çš„æ ¼å¼ä¸º UTF-8 ä¸”è¡Œç»“æŸæ ‡è¯†ä¸º Unix(LF) å¹¶å‘½åä¸º mdlinktarget.min.js ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1$(document).ready(function()&#123;$('#file-content a[href^="http"]').each(function()&#123;$(this).attr("target","_blank")&#125;)&#125;); å°†è¯¥jsæ–‡ä»¶æ‹·è´æ·»åŠ åˆ°å®¹å™¨ä¸­çš„é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ docker cp ./mdlinktarget.min.js &lt;ConName&gt;:/home/git/gogs/public/js/mdlinktarget.min.js ç„¶åå°†æ›´æ”¹åçš„ footer.tmpl æ›´æ–°å›å®¹å™¨ä¸­ï¼š 1$ docker cp ./footer.tmpl &lt;ConName&gt;:/home/git/gogs/templates/base/footer.tmpl ä¿®æ”¹å®Œæˆ é‡å¯å®¹å™¨å¾…ä»¥ä¸Šå„æ­¥éª¤æ“ä½œå®Œæˆåï¼Œé‡å¯å®¹å™¨ã€‚ 1$ docker restart gogs å‘½ä»¤æ•´ç†ç¤ºä¾‹å‘½ä»¤123456$ docker cp ./home.tmpl &lt;ConName&gt;:/home/git/gogs/templates/home.tmpl$ docker cp ./footer.tmpl &lt;ConName&gt;:/home/git/gogs/templates/base/footer.tmpl$ docker cp ./head.tmpl &lt;ConName&gt;:/home/git/gogs/templates/base/head.tmpl$ docker cp ./mdlinktarget.min.js &lt;ConName&gt;:/home/git/gogs/public/js/mdlinktarget.min.js$ docker cp ./gghome.min.css &lt;ConName&gt;:/home/git/gogs/public/css/gghome.min.css$ docker restart &lt;ConName&gt; æ“ä½œå‘½ä»¤123456$ docker cp ./home.tmpl gogs:/home/git/gogs/templates/home.tmpl$ docker cp ./footer.tmpl gogs:/home/git/gogs/templates/base/footer.tmpl$ docker cp ./head.tmpl gogs:/home/git/gogs/templates/base/head.tmpl$ docker cp ./mdlinktarget.min.js gogs:/home/git/gogs/public/js/mdlinktarget.min.js$ docker cp ./gghome.min.css gogs:/home/git/gogs/public/css/gghome.min.css$ docker restart gogs è·å–æ–‡ä»¶ä»¥ä¸Šæ“ä½œçš„æ‰€æœ‰æ–‡ä»¶å¯ä»¥ä» Docker Gogs custom files æˆ– GitHub - Leafney/ubuntu-gogs: Docker Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»Gogså®¹å™¨æœåŠ¡ã€‚ ä¸­è·å–ã€‚]]></content>
      <categories>
        <category>Ubuntu-Gogs</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker-Ubuntu-Gogséƒ¨ç½²åŠé…ç½®æ—¶é‡åˆ°çš„é—®é¢˜]]></title>
    <url>%2F2017%2F03%2F24%2Fdocker-ubuntu-gogs-problems%2F</url>
    <content type="text"><![CDATA[Docker Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»Gogså®¹å™¨æœåŠ¡ã€‚ è¿™é‡Œä¸»è¦è®°å½•åœ¨Dockerä¸‹éƒ¨ç½²Gogsé¡¹ç›®è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•ã€‚ ç›®å½• Installé¡µé¢ä¸­çš„æ³¨æ„é—®é¢˜ Connection timed out é—®é¢˜ hooks/update: No such file or directory æ·»åŠ  SSH key æ—¶æ˜¾ç¤ºæŠ¥é”™é¡µé¢ 500 è¦æ±‚è¾“å…¥gitè´¦æˆ·å¯†ç  SSH Connection refused é—®é¢˜ Git SSH ä½¿ç”¨éé»˜è®¤22ç«¯å£æ—¶ï¼Œå¦‚ä½•éšè—ç«¯å£å· WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! echo è¾“å‡º Docker Gogs ä½¿ç”¨ HTTPS ä¸Šä¼ æ–‡ä»¶é‡åˆ° 413 Request Entity Too Large é”™è¯¯ Installé¡µé¢ä¸­çš„æ³¨æ„é—®é¢˜ domain: ensure that is the IP address of your docker host SSH port: that is the forwarded ssh port. So if you forward 22 to 10022, itâ€™s 10022. HTTP port: my error, here, you must enter the HTTP in the container. So itâ€™s 3000. Even if you forward it to 10080 ;) Application URL: this is a combination of domain + forwarded HTTP port (I got this one wrong too). So, if youâ€™re forwarding 3000 to 10080, then itâ€™s http://domain:10080. sshç«¯å£ä½¿ç”¨å¤–éƒ¨ç«¯å£ï¼Œè€Œhttpç«¯å£ä½¿ç”¨çš„æ˜¯å®¹å™¨å†…éƒ¨ç«¯å£. ç€é‡éœ€è¦è¯´æ˜çš„æ˜¯ï¼š Domain å¡«å†™Dockerå®¿ä¸»æœºçš„ç‰©ç†IPåœ°å€ï¼Œæˆ–è€…åŸŸååœ°å€,æ³¨æ„è¿™é‡Œæ˜¯ä¸å¸¦ httpçš„ å¦‚ï¼š 192.168.137.140 æˆ– git.mydomain.com SSH port å‡å¦‚Dockeræ˜ å°„çš„ç«¯å£æ˜¯ 10022:22 é‚£ä¹ˆè¿™é‡Œå°±å¡«å†™å®¿ä¸»æœºå¼€æ”¾çš„ç«¯å£ 10022 HTTP port å‡å¦‚Dockeræ˜ å°„çš„ç«¯å£æ˜¯ 10080:3000 è¿™é‡Œè¦å¡«å®¹å™¨å†…çš„ç›‘å¬ç«¯å£ 3000 Application URL è¿™é‡Œè¦å¡«å†™çš„æ ¼å¼ä¸º http(s):// + Domain + HTTP port ï¼Œæ¯”å¦‚ï¼šhttp://git.mydomain.com/10080 ã€‚è¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ ç”¨äº†nginxæ¥æ˜ å°„å®¿ä¸»æœºçš„ 10080 ç«¯å£ï¼Œè¿™é‡Œè¦å»æ‰åé¢çš„ç«¯å£ï¼Œå³ http://git.mydomain.com/ï¼Œè¯´ç™½äº†å°±æ˜¯ä½ åœ¨å¤–éƒ¨æµè§ˆå™¨ä¸Šè®¿é—®çš„åœ°å€ã€‚ Docker gogs web/ssh does not restart after reboot Â· Issue #3039 Â· gogits/gogs Â· GitHub Connection timed out é—®é¢˜ä½¿ç”¨HTTPæ–¹å¼ Push ä»£ç æ—¶æŠ¥é”™ï¼Ÿä½¿ç”¨HTTPæ–¹å¼è·å–ï¼š 1234567$ git clone http://gogit.itfanr.cc/xueer/HelloWorld.gitCloning into &apos;HelloWorld&apos;...remote: Counting objects: 8, done.remote: Compressing objects: 100% (6/6), done.remote: Total 8 (delta 1), reused 0 (delta 0)Unpacking objects: 100% (8/8), done.Checking connectivity... done. ä½¿ç”¨HTTPæ–¹å¼æäº¤ï¼š 12345678$ git pushCounting objects: 3, done.Writing objects: 100% (3/3), 379 bytes | 0 bytes/s, done.Total 3 (delta 0), reused 0 (delta 0)error: RPC failed; HTTP 504 curl 22 The requested URL returned error: 504 Gateway Time-outfatal: The remote end hung up unexpectedlyfatal: The remote end hung up unexpectedlyEverything up-to-date ä½¿ç”¨SSHæ–¹å¼è·å–ä»£ç æ—¶æŠ¥é”™ï¼Ÿä½¿ç”¨SSHæ–¹å¼è·å–ï¼š 1234567$ git clone ssh://git@gogit.itfanr.cc:10022/xueer/HelloWorld.gitCloning into &apos;HelloWorld&apos;...ssh: connect to host gogit.itfanr.cc port 10022: Connection timed outfatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. å¯¹äº Connection timed out çš„é—®é¢˜ï¼Œå¯èƒ½æ˜¯ä½¿ç”¨çš„ç«¯å£å·²ç»è¢«å…¶ä»–ç¨‹åºå ç”¨å¯¼è‡´ï¼Œä¹Ÿå¯èƒ½æ˜¯ç¼“å­˜æ–‡ä»¶å¯¼è‡´ã€‚ æœ€åçš„è§£å†³æ–¹æ³•æ˜¯å°† data/sessions ä¸­çš„ session æ–‡ä»¶åˆ é™¤ï¼Œç„¶åæ›´æ¢äº†å…¶ä»–ç«¯å£åå†æ¬¡è¿è¡Œåˆ™èƒ½å¤Ÿæäº¤æ•°æ®äº†ã€‚ æŠ¥é”™ hooks/update: No such file or directoryå°†æ—§çš„é…ç½®å’Œæ•°æ®åº“æ‹·è´åˆ°æ–°çš„Gogsé¡¹ç›®ä¸‹ï¼ˆæˆ‘è¿™é‡Œæ˜¯ä»v0.8.25.0129ç‰ˆæœ¬è¿ç§»åˆ°v0.10.18.0313ç‰ˆæœ¬ï¼‰ï¼Œæäº¤ä»£ç æ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 123456789$ git push origin masterCounting objects: 3, done.Writing objects: 100% (3/3), 432 bytes | 0 bytes/s, done.Total 3 (delta 0), reused 0 (delta 0)remote: hooks/update: line 2: /home/git/gogs/goapp/gogs/gogs: No such file or directoryremote: error: hook declined to update refs/heads/masterTo http://gogit.itfanr.cc/xueer/HelloWorld.git ! [remote rejected] master -&gt; master (hook declined)error: failed to push some refs to &apos;http://gogit.itfanr.cc/xueer/HelloWorld.git&apos; è§£å†³æ–¹æ³•ï¼š æ ¹æ®Gogså®˜ç½‘ä¸­çš„æ•…éšœæ’æŸ¥çš„è¯´æ˜ï¼š 123456Update é’©å­æŒ‡å‘é”™è¯¯çš„äºŒè¿›åˆ¶è·¯å¾„å¯èƒ½åŸå› ï¼šæ‚¨å‡çº§ `Gogs` åå°†å…¶ç§»åŠ¨åˆ°äº†å’Œä¹‹å‰å®‰è£…ä½ç½®ä¸åŒçš„ç›®å½•è§£å†³æ–¹æ¡ˆï¼šåˆ°ç®¡ç†å‘˜æ§åˆ¶é¢æ¿ï¼ˆ`/admin`ï¼‰æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šé‡æ–°ç”Ÿæˆ &apos;.ssh/authorized_keys&apos; æ–‡ä»¶é‡æ–°åŒæ­¥æ‰€æœ‰ä»“åº“çš„ `pre-receive`ã€`update` å’Œ `post-receive` é’©å­ æ‰€ä»¥ç›´æ¥ä½¿ç”¨ç®¡ç†å‘˜è´¦æˆ·åœ¨ç®¡ç†åå°ä¸­æ“ä½œå³å¯è§£å†³ã€‚ è¯¦è§ï¼šæ•…éšœæ’æŸ¥ ä¹‹å‰çš„è§£å†³æ–¹æ³•ï¼š åœ¨æ–°çš„Gogsä½ç½®æ‰§è¡Œ gogs fix location &lt;old Gogs path&gt; ç»æµ‹è¯•ï¼Œè¯¥æ–¹æ³•ä¼¼ä¹å·²è¿‡æ—¶ï¼Œæ‰§è¡Œæ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12/home/git/gogs# ./gogs fix location /home/git/gogs/goapp/gogsNo help topic for &apos;fix&apos; remote: hooks/update: line 2: /path/to/dir: No such file or directory Â· Issue #659 Â· gogits/gogs Â· GitHub Question: How do I move servers? Â· Issue #654 Â· gogits/gogs Â· GitHub æ·»åŠ  SSH key æ—¶æ˜¾ç¤ºæŠ¥é”™é¡µé¢ error 500æŸ¥çœ‹æ—¥å¿—ï¼Œæ‰¾åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š 1AddPublicKey: addKey: open /home/git/.ssh/authorized_keys: permission denied æŒ‰ç…§å¦‚ä¸‹è¯´æ³•æ“ä½œæˆåŠŸï¼š So I changed the .ssh/ folder to 0700 and .ssh/authorize_keys to 0600. It works. è¯¦ç»†æ¥æºè§ï¼šssh çš„é“¾æ¥åœ°å€ä¸å¯ä»¥ä½¿ç”¨ ä¿®æ”¹ /home/git/.ssh çš„æƒé™ä¸º 700ä¿®æ”¹ /home/git/.ssh/authorized_keys çš„æƒé™ä¸º 600 æˆ‘çš„æ“ä½œï¼š ç™»é™†Gogsç«™ç‚¹ç®¡ç†å‘˜è´¦æˆ·ï¼Œè®¿é—® /admin é¡µé¢ï¼Œé€‰æ‹© Rewrite &#39;.ssh/authorized_keys&#39; file (caution: non-Gogs keys will be lost) é¡¹ ï¼Œç‚¹å‡» Run æŠ¥é”™ï¼šopen /home/git/.ssh/authorized_keys.tmp: permission denied ã€‚ æŸ¥çœ‹æ—¥å¿— gogs.log æ–‡ä»¶ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯ï¼šAddPublicKey: addKey: open /home/git/.ssh/authorized_keys: permission denied ã€‚ è¿›å…¥å®¹å™¨å†…éƒ¨ï¼šdocker exec -it gogs /bin/bash ,åˆ‡æ¢è‡³gitç”¨æˆ·ï¼šsu git,ç„¶åè¿›å…¥ /home/git/ ç›®å½•ï¼Œæ›´æ”¹ .ssh ç›®å½•æƒé™ï¼šchmod 0700 .ssh ã€‚ï¼ˆæ­¤æ—¶ï¼Œè¯¥ .ssh ç›®å½•å†…ä¸ºç©ºï¼‰ ç„¶åå†æ¬¡è®¿é—® /admin é¡µé¢ï¼Œå†æ¬¡æ‰§è¡Œ Run æ“ä½œï¼Œæç¤ºâ€œæ‰€æœ‰å…¬é’¥é‡æ–°ç”ŸæˆæˆåŠŸï¼â€ä¿¡æ¯ã€‚æŸ¥çœ‹å®¹å™¨å†…çš„ .ssh/ ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª authorized_keys æ–‡ä»¶ã€‚ç„¶åæ›´æ”¹è¯¥æ–‡ä»¶æƒé™ï¼šchmod 0600 authorized_keys ã€‚ ç„¶åé‡å¯è¯¥å®¹å™¨ã€‚ é‡å¯å®¹å™¨åè¯¥é—®é¢˜è§£å†³ã€‚ è¦æ±‚è¾“å…¥gitè´¦æˆ·å¯†ç æ·»åŠ æˆåŠŸSSHå¯†é’¥åï¼Œgit clone é¡¹ç›®ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12345678910111213$ git clone ssh://git@gogit.itfanr.cc:10022/xueer/HelloWorld.gitCloning into &apos;Hello&apos;...The authenticity of host &apos;[gogit.itfanr.cc]:10022 ([gogit.itfanr.cc]:10022)&apos; can&apos;t be established.ECDSA key fingerprint is SHA256:+LHU3V00S0g9kNnpByc9ysAM5n6DWutT51YOldIcf88.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;[gogit.itfanr.cc]:10022&apos; (ECDSA) to the list of known hosts.git@gogit.itfanr.cc&apos;s password:Permission denied, please try again.git@gogit.itfanr.cc&apos;s password:fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. ä¸€ç§å¯èƒ½çš„è§£å†³æ–¹å¼æ˜¯ Check if /home/git/.ssh/.authorized_keys&#39;s permission is 600. è¿™ä¸ªé—®é¢˜è¿˜æ˜¯å…³äº .ssh/authorize_keys çš„æƒé™é—®é¢˜ã€‚ æˆ‘çš„è§£å†³æ–¹æ³•ï¼š ç™»é™†Gogsç«™ç‚¹ç®¡ç†å‘˜è´¦æˆ·ï¼Œè®¿é—® /admin é¡µé¢ï¼Œé€‰æ‹© Rewrite &#39;.ssh/authorized_keys&#39; file (caution: non-Gogs keys will be lost) é¡¹ ï¼Œç‚¹å‡» Run ï¼Œä¼šæç¤ºæ›´æ–°æˆåŠŸã€‚ é‡å¯è¯¥å®¹å™¨å³å¯ã€‚ 2017-7-21 add: å¦‚æœä»¥ä¸Šæ–¹æ³•æ— æ•ˆï¼Œå¯ä»¥è¿›å…¥å®¹å™¨åå°† authorize_keys æ–‡ä»¶åˆ é™¤ï¼Œç„¶ååœ¨ç®¡ç†å‘˜æ“ä½œé¡µé¢ä¸­é‡æ–°ç”Ÿæˆã€‚è¿™æ ·åº”è¯¥èƒ½è§£å†³ã€‚ ssh çš„é“¾æ¥åœ°å€ä¸å¯ä»¥ä½¿ç”¨ Â· Issue #545 Â· gogits/gogs Â· GitHub SSH prompts for password in Docker Â· Issue #2409 Â· gogits/gogs Â· GitHub How troubleshoot SSHd on Docker ? SSH Connection refused é—®é¢˜æ·»åŠ æˆåŠŸSSHå¯†é’¥åï¼Œgit clone é¡¹ç›®ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1234567$ git clone ssh://git@192.168.137.140:10022/xueer/HelloWorld.gitCloning into &apos;HelloWorld&apos;...ssh: connect to host 192.168.137.140 port 10022: Connection refusedfatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. æˆ‘çš„æ¢ç´¢ï¼š è¿›å…¥å®¹å™¨å†…éƒ¨ï¼šdocker exec -it gogs /bin/bash æŸ¥çœ‹sshè¿æ¥ï¼š 12root@b48dfa9583f9:/home/git/gogs# ssh localhostssh: connect to host localhost port 22: Connection refused é‚£ç°åœ¨è¿™ä¸ªé—®é¢˜å°±æ˜¯åœ¨ubuntuä¸‹é…ç½®sshé“¾æ¥çš„é—®é¢˜äº†ã€‚ å‘ç°é—®é¢˜çš„åŸå› æ˜¯å®‰è£… openssh åï¼Œå¹¶æ²¡æœ‰å¯åŠ¨ SSH æœåŠ¡ã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨ï¼š 1234/etc/init.d/ssh start# æˆ–service ssh startservice ssh status é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹sshæœåŠ¡æ˜¯å¦å¯åŠ¨ï¼šps -e |grep ssh 12root@b48dfa9583f9:/home/git/gogs# ps -e |grep ssh 81 ? 00:00:00 sshd ç„¶åä½¿ç”¨ ssh localhost å‘½ä»¤æŸ¥çœ‹æ˜¯å¦èƒ½å¤Ÿè¿æ¥æœ¬åœ°ï¼š 12345root@b48dfa9583f9:/home/git/gogs# ssh localhostThe authenticity of host &apos;localhost (::1)&apos; can&apos;t be established.ECDSA key fingerprint is SHA256:eKk78mnEXpwvFhbzC6BgM70jZx3be4Fz8okyagHA6QA.Are you sure you want to continue connecting (yes/no)? noHost key verification failed. å¯ä»¥çœ‹åˆ°SSHæœåŠ¡å·²ç»æ­£å¸¸è¿è¡Œäº†ã€‚ ç„¶ååœ¨å›åˆ°å®¿ä¸»æœºä¸‹ï¼Œå†æ¬¡æ‰§è¡Œ git clone å‘½ä»¤ï¼Œæµ‹è¯•æ˜¯å¦èƒ½å¤Ÿè¿é€šã€‚ è¿™é‡Œæˆ‘æ•´ç†äº†ä¸¤ç§è¿æ¥æ–¹æ³•ï¼š è¿æ¥æ–¹æ³•ä¸€ï¼š git clone ssh://git@192.168.137.140:10022/qqq/Xweixin.git Pull and Push Test Ok. è¿æ¥æ–¹æ³•äºŒï¼š å¦‚æœå«Œä¸Šé¢å¸¦æœ‰ç«¯å£å·çš„é“¾æ¥å¤ªä¸æå®¢èŒƒå„¿ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šå½“å‰ç”¨æˆ·ä¸»ç›®å½•çš„ .ssh ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„ config æ–‡ä»¶ï¼ˆæ³¨æ„æ–‡ä»¶æ ¼å¼ä¸º UTF-8 ä¸”è¡Œç»“æŸæ ‡è¯†ä¸º Unix(LF)ï¼‰ï¼Œå¡«å†™å¦‚ä¸‹å†…å®¹ï¼š ~/.ssh/config: 1234Host 192.168.137.140HostName 192.168.137.140Port 10022User git è¿™é‡Œï¼Œ Host æ˜¯è¿œç¨‹gitä»“åº“æ‰€åœ¨å®¿ä¸»æœºçš„IPåœ°å€æˆ–åŸŸåï¼› HostName ä¸å¤ªé‡è¦ï¼Œä»…èµ·åˆ°æ ‡è¯†çš„ä½œç”¨ï¼› Port è¡¨ç¤ºè¿œç¨‹gitä»“åº“ä½¿ç”¨çš„ç«¯å£å·ï¼› User è¡¨ç¤ºè¿œç¨‹gitä»“åº“çš„é»˜è®¤ç”¨æˆ·ï¼Œè¿™é‡Œå¡«å†™é»˜è®¤çš„ git å³å¯ã€‚ ç„¶åå°±å¯ä»¥ç›´æ¥è¯·æ±‚ä¸å¸¦ç«¯å£å·çš„sshä»“åº“åœ°å€äº†ï¼š git clone ssh://git@192.168.137.140/qqq/Xweixin.git Pull and Push Test Ok. ç›¸å…³å‚è€ƒ ssh: connect to host localhost port 22: Connection refused é—®é¢˜ ubuntuä¸‹å¦‚ä½•å®‰è£…ä½¿ç”¨SSHï¼Ÿ How to Enable SSH in Ubuntu 16.04 LTS | UbuntuHandbook SSH doesnâ€™t work on ports other than 22 in dockerized gogs Git SSH ä½¿ç”¨éé»˜è®¤22ç«¯å£æ—¶ï¼Œå¦‚ä½•éšè—ç«¯å£å·Note that you can also add an entry to your ~/.ssh/config file: 123Host git.example.comPort 2222User git and then use the normal git clone git@git.example.com:myuser/myproject.git command. ç›¸å…³å‚è€ƒ git - Using a remote repository with non-standard port - Stack Overflow Change port git is using for ssh Specify SSH Port for Git - Server Fault æŠ¥é”™ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!ä½¿ç”¨ SSH è·å–æ—¶æŠ¥é”™ï¼š 12345678910111213141516171819$ git clone ssh://git@192.168.137.140:10022/xueer/HelloWorld.gitCloning into &apos;HelloWorld&apos;...@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!Someone could be eavesdropping on you right now (man-in-the-middle attack)!It is also possible that a host key has just been changed.The fingerprint for the ECDSA key sent by the remote host isSHA256:+LHU3V00S0g9kNnpByc9ysAM5n6DWutT51YOldIcf88.Please contact your system administrator.Add correct host key in /c/Users/Yx/.ssh/known_hosts to get rid of this message.Offending ECDSA key in /c/Users/Yx/.ssh/known_hosts:5ECDSA host key for [192.168.137.140]:10022 has changed and you have requested strict checking.Host key verification failed.fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. è¯¥é—®é¢˜æ˜¯ç”±äºå®¢æˆ·ç«¯ç”µè„‘ä¸Šçš„ .ssh/known_hosts æ–‡ä»¶ä¸­è®°å½•äº†é‡å¤æˆ–å†²çªçš„sshä¿¡æ¯ï¼Œåˆ é™¤è¯¥æ–‡ä»¶é‡æ–°è®¾ç½®sshè¿æ¥å³è§£å†³ã€‚ echo è¾“å‡ºä¸‹é¢ä¸¤è¡Œå‘½ä»¤çš„è¾“å‡ºç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼š 123ab=$(service ssh status);echo $ab;ab=$(service ssh status);echo &quot;$ab&quot;; 123456you can get output of third solution in good way:echo &quot;$var&quot;and also in nasty way:echo $var å½“ echo åé¢çš„å†…å®¹å¸¦æœ‰å¼•å·æ—¶ï¼Œåªä¼šè¾“å‡ºå˜é‡å€¼çš„å†…å®¹ã€‚å½“æ²¡æœ‰å¼•å·æ—¶ï¼Œå¦‚æœå½“å‰æ‰€åœ¨ç›®å½•ä¸‹æœ‰å…¶ä»–æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶çš„æ–‡ä»¶åä¹Ÿä¼šè¢«è¾“å‡ºï¼š 12ab=$(service ssh status);echo $ab;LICENSE README.md README_ZH.md custom data gogs log public scripts templates sshd is running linux - How to set a variable to the output from a command in Bash? - Stack Overflow Gogs ä½¿ç”¨ HTTPSè¯¦ç»†å¯è§æˆ‘çš„ç³»åˆ—æ–‡ç« ï¼šHTTPSæ³›åŸŸåè¯ä¹¦ç”³è¯·ä¹‹äºŒ-Nginxé…ç½® | ITèŒƒå„¿ ä½¿ç”¨ HTTPS éƒ¨ç½² Gogs Â· Issue #12 Â· Unknwon/wuwen.org Â· GitHub gogsi/gogs-nginx-ssl.conf at master Â· richardskumat/gogsi Â· GitHub 413 Request Entity Too Largeå‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºæˆ‘åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨Nginxå¯¹Gogsåšåå‘ä»£ç†ï¼Œä¸Šä¼ æ–‡ä»¶çš„å¤§å°è¶…å‡ºäº†Nginxçš„é™åˆ¶ã€‚ æˆ‘çš„Nginxé…ç½®å¦‚ä¸‹ï¼š 123456789server &#123; listen 80; server_name gogit.itfanr.cc; location / &#123; # 3000 æ˜¯ Gogs è¿è¡Œçš„ç«¯å£ proxy_pass http://localhost:3000; &#125;&#125; Nginxå…è®¸çš„æœ€å¤§è¯·æ±‚æ•°æ®å¤§å°é»˜è®¤ä¸º 1m ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‚æ•° client_max_body_size æ¥è‡ªå®šä¹‰ï¼š 123456789101112server &#123; listen 80; server_name gogit.itfanr.cc; # è®¾ç½®æœ€å¤§ä¸º 100 M client_max_body_size 100m; location / &#123; # 3000 æ˜¯ Gogs è¿è¡Œçš„ç«¯å£ proxy_pass http://localhost:3000; &#125;&#125; å¦‚æˆ‘è®¾ç½®çš„æ˜¯ 100m å¤§å°ã€‚ ä¹‹åï¼Œé‡å¯nginxæœåŠ¡å³å¯ï¼šsudo systemctl reload nginx ã€‚ One More Thingâ€¦æ ¹æ®ä»¥ä¸Šé‡åˆ°çš„é—®é¢˜ï¼Œè¿™é‡Œä¸»è¦æä¸€ç‚¹ï¼š ä½†å‡¡æ˜¯SSHç›¸å…³çš„é—®é¢˜ï¼Œå°±æ˜¯è¦ä¿è¯ç›®å½• /home/git/.ssh å…·æœ‰ 0700 çš„æƒé™ï¼Œç›®å½• /home/git/.ssh/ ä¸‹çš„æ–‡ä»¶å…·æœ‰ 0600 çš„æƒé™ã€‚ æˆ–è€…ç›´æ¥å°è¯•å¦‚ä¸‹æ“ä½œ: ç™»é™†Gogsç«™ç‚¹ç®¡ç†å‘˜è´¦æˆ·ï¼Œè®¿é—® /admin é¡µé¢ï¼Œé€‰æ‹© Rewrite &#39;.ssh/authorized_keys&#39; file (caution: non-Gogs keys will be lost) é¡¹ ï¼Œç‚¹å‡» Run æŒ‰é’®ï¼Œå¦‚æœæŠ¥é”™ï¼šopen /home/git/.ssh/authorized_keys.tmp: permission denied ã€‚å¦åˆ™ç›´æ¥è·³è‡³æ­¥éª¤5ã€‚ æŸ¥çœ‹æ—¥å¿— gogs.log æ–‡ä»¶ï¼Œå‘ç°é”™è¯¯ä¿¡æ¯ï¼šAddPublicKey: addKey: open /home/git/.ssh/authorized_keys: permission denied ã€‚ è¿›å…¥å®¹å™¨å†…éƒ¨ï¼šdocker exec -it gogs /bin/bash ,åˆ‡æ¢è‡³gitç”¨æˆ·ï¼šsu git,ç„¶åè¿›å…¥ /home/git/ ç›®å½•ï¼Œæ›´æ”¹ .ssh ç›®å½•æƒé™ï¼šchmod 0700 .ssh ã€‚ï¼ˆæ­¤æ—¶ï¼Œè¯¥ .ssh ç›®å½•å†…ä¸ºç©ºï¼‰ ç„¶åå†æ¬¡è®¿é—® /admin é¡µé¢ï¼Œå†æ¬¡æ‰§è¡Œ Run æ“ä½œï¼Œæç¤ºâ€œæ‰€æœ‰å…¬é’¥é‡æ–°ç”ŸæˆæˆåŠŸï¼â€ä¿¡æ¯ã€‚æŸ¥çœ‹å®¹å™¨å†…çš„ .ssh/ ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª authorized_keys æ–‡ä»¶ã€‚ç„¶åæ›´æ”¹è¯¥æ–‡ä»¶æƒé™ï¼šchmod 0600 authorized_keys ã€‚ æœ€åé‡å¯è¯¥å®¹å™¨ã€‚]]></content>
      <categories>
        <category>Ubuntu-Gogs</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker-Ubuntu-Gogséƒ¨ç½²gogså®¹å™¨è¿‡ç¨‹è®°å½•]]></title>
    <url>%2F2017%2F03%2F23%2Fdocker-ubuntu-gogs-deploy%2F</url>
    <content type="text"><![CDATA[Docker Gogs ç”¨æ›´ç®€å•çš„æ–¹å¼éƒ¨ç½²ã€å‡çº§æˆ–è¿ç§»Gogså®¹å™¨æœåŠ¡ã€‚ Docker-Ubuntu-Gogs ç³»åˆ—æ–‡ç« ä¸»è¦è®°å½•æˆ‘åœ¨Dockerä¸‹éƒ¨ç½²Gogsä»£ç ç®¡ç†é¡¹ç›®çš„è¿‡ç¨‹ã€‚ç³»åˆ—æ–‡ç« åŒ…æ‹¬Gogså®¹å™¨çš„éƒ¨ç½²è¿‡ç¨‹ï¼Œéƒ¨ç½²æ—¶é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•ï¼Œä¸ªæ€§åŒ–é…ç½®ç­‰ã€‚ è¿™é‡Œåº•å±‚ç³»ç»Ÿé€‰æ‹©äº† Ubuntu16.04 ç‰ˆæœ¬ï¼Œä¹‹å‰ä¹Ÿæ›¾å°è¯•åœ¨ Alpine ç³»ç»Ÿä¸‹æ¥éƒ¨ç½²Gogsï¼Œä½†å®‰è£…å®Œæˆåä¼šæŠ¥ ./gogs web is not found ä¹‹ç±»çš„é”™è¯¯ï¼Œæš‚æœªæ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚é‚æœ€åå†³å®šé‡‡ç”¨Ubuntuæ¥éƒ¨ç½²ã€‚ å¯¹äº Alpine ç³»ç»Ÿä¸‹çš„éƒ¨ç½²æ–¹æ³•ï¼Œå¾…åæœŸå†æ¥å®Œå–„ã€‚ å¦å¤–ï¼ŒGogsä½œè€…åœ¨Githubä¸­å‘å¸ƒçš„Gogså®¹å™¨ç‰ˆæœ¬æ˜¯ç”¨Alpineç³»ç»Ÿæ¥åšçš„ï¼Œå¦‚æœæ¯”è¾ƒåœ¨æ„å®¹å™¨çš„å¤§å°ï¼Œå¯ä»¥ç›´æ¥ç”¨ä¹‹ã€‚ æµ‹è¯•æ“ä½œæ­¥éª¤æ“ä½œè®°å½•ï¼šUbuntu16.04 ç³»ç»Ÿ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768docker run -it --name ugg1 -p 3000:3000 -p 8080:22 ubuntu /bin/bashRUN echo "deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse" &gt;&gt; /etc/apt/sources.listapt-get updateapt-get install -y git wget openssh-serveradduser git (and set pwd git)# æ‹·è´æœ¬åœ°çš„gogsé¡¹ç›®zipåŒ…åˆ°å®¹å™¨ä¸­docker cp linux_amd64.zip ugg1:/home/git/gogs.zipunzip gogs.zip#***************cd gogsmkdir -p custom/confmkdir -p logchmod -R 777 customchmod -R 777 logcd ..chown -R git:git gogs#*******************# gosudocker cp gosu-amd64 ugg1:/usr/local/bin/gosuchmod +x /usr/local/bin/gosu# å¯åŠ¨é¡¹ç›®cd gogs./gogs web# å¯åŠ¨sshæœåŠ¡ï¼ˆä¹‹å‰æµ‹è¯•æ—¶æŠŠè¿™é¡¹ä¸¢äº†ï¼Œæ‰€ä»¥sshåŠŸèƒ½ä¸€ç›´æ— æ³•ä½¿ç”¨ï¼‰service ssh start service ssh restartgosu git /home/git/gogs/gogs web# é¡¹ç›®æ–‡ä»¶ç›®å½•/app gogs-repositories gogs log ssh conf data# åˆ›å»ºæ•°æ®æ–‡ä»¶mkdir -p /app/gogs-repositories /app/gogs/log /app/gogs/ssh /app/gogs/data /app/gogs/confchown -R git:git /appln -sf /home/git/gogs/custom/conf/app.ini /app/gogs/conf/app.inichown -R git:git /app$ docker run --name ugg1 -d -p 3002:3000 -p 8090:22 -v /home/tiger/xdk/dfile:/app gg1 123# Link volumed data with app dataln -sf /data/gogs/log ./logln -sf /data/gogs/data ./data å‚è€ƒè‡ªgogså®˜æ–¹githubä¸­çš„dockerfileï¼Œä½¿ç”¨gosuè°ƒç”¨gitç”¨æˆ·ï¼š 12export USER=gitexec gosu $USER /app/gogs/gogs web é—®é¢˜ä¸€ï¼šä¸èƒ½ä½¿ç”¨ gosu è°ƒç”¨ git ç”¨æˆ·æ¥å¯åŠ¨å‘ç°ä¸èƒ½ä½¿ç”¨ gosu è°ƒç”¨ git ç”¨æˆ·æ¥å¯åŠ¨ï¼Œgosu git /home/git/gogs/gogs web ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1gogs è¿è¡Œç³»ç»Ÿç”¨æˆ·éå½“å‰ç”¨æˆ·ï¼šgit &gt; ä¸æ¨èçš„è§£å†³æ–¹æ³•æ˜¯ï¼š åˆ‡æ¢åˆ°gitè´¦æˆ·ä¸‹æ‰§è¡Œï¼šsu - git $ ./gogs web é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥ä½¿ç”¨ gosu è°ƒç”¨ git ç”¨æˆ·ï¼ˆå‚è€ƒè‡ªgogså®˜æ–¹githubä¸­çš„dockerfileï¼‰ï¼š 12export USER=gitexec gosu $USER /app/gogs/gogs web é—®é¢˜äºŒï¼šFail to start SSH server: listen tcp 0.0.0.0:22: bind: permission deniedå¯ç”¨å†…ç½®SSHæœåŠ¡å™¨ä¼šæŠ¥è¯¥é”™è¯¯ï¼Œæš‚æœªæ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚ é€šè¿‡æµ‹è¯•ï¼Œå°†é»˜è®¤çš„ 22 ç«¯å£æ”¹æˆå…¶ä»–ç«¯å£å³å¯ã€‚ ä½†æ˜¯ gogså®˜æ–¹çš„dockeré…ç½®ä¸­å»ºè®®ä¸è¦åœ¨Dockerå®¹å™¨ä¸­ä½¿ç”¨å†…ç½®çš„SSHæœåŠ¡å™¨ã€‚ é—®é¢˜ä¸‰ï¼šPANIC: session(start): mkdir data: permission deniedè¯¦ç»†é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š 1234567891011[Macaron] 2017-03-21 06:05:40: Started GET / for 192.168.137.1[Macaron] PANIC: session(start): mkdir data: permission denied/usr/local/go/src/runtime/panic.go:489 (0x4340bf)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/github.com/go-macaron/session/session.go:156 (0x8f478e)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/gopkg.in/macaron.v1/context.go:79 (0x89ba01)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/github.com/go-macaron/inject/inject.go:157 (0x87dc92)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/github.com/go-macaron/inject/inject.go:135 (0x87da8b)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/gopkg.in/macaron.v1/context.go:121 (0x89bc62)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/gopkg.in/macaron.v1/context.go:112 (0x89bb86)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/gopkg.in/macaron.v1/recovery.go:161 (0x8af50b)/home/vagrant/gopath/src/github.com/gogits/gogs/vendor/gopkg.in/macaron.v1/logger.go:40 (0x89f118) è¯¥é—®é¢˜å¯¼è‡´çš„åŸå› æ˜¯ï¼Œå½“ git ç”¨æˆ·è¿è¡Œ ./gogs web æ—¶ï¼Œä¼šåœ¨ gogs é¡¹ç›®çš„ä¸»ç›®å½•ä¸‹ ( è¿™é‡Œæ˜¯ /home/git/gogsï¼‰åˆ›å»ºä¸€ä¸ª data ç›®å½•ç”¨äºå­˜æ”¾sessionç¼“å­˜ç­‰ä¸´æ—¶æ–‡ä»¶ã€‚å¦‚æœå½“å‰å·¥ä½œçš„ä¸»ç›®å½•ä¸æ˜¯åœ¨ /home/git/gogs ç›®å½•ï¼Œåˆ™gitè´¦æˆ·å°±æ²¡æœ‰æƒé™æ¥åˆ›å»ºç›®å½•ï¼Œä»è€Œå¯¼è‡´æƒé™é”™è¯¯ã€‚è§£å†³æ–¹æ³•æ˜¯åœ¨Dockerfileä¸­æŒ‡å®šå·¥ä½œç›®å½• WORKDIR /home/git/gogs å³å¯ã€‚ åç»æŸ¥è¯ï¼Œåœ¨ Gogs é¡¹ç›®ç›®å½•ä¸‹çš„ custom data å’Œ log ä¸‰ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾é¡¹ç›®è¿è¡ŒæœŸé—´äº§ç”Ÿçš„æ—¥å¿—ã€é…ç½®æ–‡ä»¶ã€æ•°æ®ç­‰ä¿¡æ¯çš„ã€‚å½“Gogsé¡¹ç›®éœ€è¦å‡çº§æ—¶ï¼Œç›´æ¥æ‹·è´è¿™ä¸‰ä¸ªç›®å½•åˆ°æ–°é¡¹ç›®ç›®å½•ä¸‹å³å¯ã€‚è¿™é‡Œçš„ data ç›®å½•éœ€è¦æå‰åˆ›å»ºå¥½ã€‚ ç›¸å…³å‚è€ƒ åœ¨ubuntuä¸Šå®‰è£…gogs ç”¨Gogsæ­å»ºè‡ªå·±çš„GitæœåŠ¡å™¨ - LibHappy How To Set Up Gogs on Ubuntu 14.04 | DigitalOcean chmod 777 ä¿®æ”¹æƒé™ - æ—¥å…‰ä¹‹ä¸‹æ— æ–°äº‹ - åšå®¢å›­ linux - å®‰è£…gogsæ—¶æŠ¥é”™ï¼šè¿è¡Œç³»ç»Ÿç”¨æˆ·éå½“å‰ç”¨æˆ·ï¼šgit -&gt; rootã€‚ ä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ - SegmentFault Installæ—¶æ³¨æ„äº‹é¡¹ Database Type é€‰æ‹© SQLite3 ï¼ˆç›®å‰ä»…æµ‹è¯•äº†sqlite3æ•°æ®åº“ï¼‰ Sqlite Database Path ä½¿ç”¨å›ºå®šè·¯å¾„ /app/gogs/data/gogs.db ï¼ˆåæœŸæ”¹æˆé»˜è®¤ç›®å½•ä¹Ÿå¯ä»¥ï¼Œè¯¦è§Githubï¼‰ Repository Root Path ä½¿ç”¨å›ºå®šè·¯å¾„ /app/gogs-repositories Run User ä½¿ç”¨é»˜è®¤çš„ git Domain å¡«å†™Dockerå®¿ä¸»æœºçš„ä¸»æœºåæˆ–ç‰©ç†åœ°å€ ç±»ä¼¼äº 192.168.137.140 SSH Port ä¸è¦å‹¾é€‰ä½¿ç”¨å†…ç½®SSHæœåŠ¡å™¨ï¼ˆDonâ€™t user Use Builtin SSH Serverï¼‰ å¦‚æœä½ æ˜ å°„Dockerå¤–éƒ¨ç«¯å£å¦‚ 10022:22 é‚£ä¹ˆè¿™é‡Œå¡«å†™ 10022 HTTP Port å¦‚æœæ˜ å°„å¤–éƒ¨ç«¯å£ 10080:3000 è¿™é‡Œä»ç„¶ä½¿ç”¨ 3000 Application URL ä½¿ç”¨åŸŸå’Œå…¬å¼€çš„HTTPç«¯å£å€¼çš„ç»„åˆ å¦‚ http://192.168.137.140:10080 Log Path å¡«å†™å›ºå®šè·¯å¾„ /app/gogs/log ï¼ˆåæœŸæ”¹æˆé»˜è®¤ç›®å½•ä¹Ÿå¯ä»¥ï¼Œè¯¦è§Githubï¼‰ æ³¨æ„ï¼š Dockerfileä¸­å¿…éœ€æ·»åŠ  WORKDIR /home/git/gogs å³å¿…éœ€æŒ‡å®šå½“å‰å·¥ä½œç›®å½•ä¸º gogs ç›®å½•ä¸‹ï¼Œå› ä¸ºgogsåœ¨installå®Œæˆåä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª data ç›®å½•ä¿å­˜ sessions ä¿¡æ¯ã€‚å¦‚æœå½“å‰ç›®å½•ä¸æ˜¯è¿™é‡Œï¼Œåˆ™ä¼šæŠ¥ [Macaron] PANIC: session(start): mkdir data: permission denied çš„é”™è¯¯ã€‚ æˆæœæœ€ç»ˆé¡¹ç›®è§ï¼šGitHub - Leafney/ubuntu-gogs: Docker + Ubuntu + Gogs]]></content>
      <categories>
        <category>Ubuntu-Gogs</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dockerä¸‹é…ç½®Elasticsearchå®¹å™¨è¿‡ç¨‹è®°å½•]]></title>
    <url>%2F2017%2F03%2F22%2Felasticsearch-container-in-alpine%2F</url>
    <content type="text"><![CDATA[ä¸»è¦è®°å½• Elasticsearch å®¹å™¨åˆ›å»ºæµç¨‹ ç›®æ ‡ Elasticsearch 2.4.x Elasticsearch 5.x alpine ä¸‹é…ç½®javaç¯å¢ƒå‚è€ƒè‡ª https://github.com/docker-library/openjdk/blob/master/8-jdk/alpine/Dockerfile åæœŸåˆ›å»ºä¸€ä¸ªjavaç¯å¢ƒçš„åŸºç¡€å®¹å™¨ã€‚ æµ‹è¯•è®°å½•ä¸‹è½½ elasticsearch.tar.gz æ–‡ä»¶å¹¶è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼š 1$ curl -sSL https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.4.0/elasticsearch-2.4.0.tar.gz | tar -zxv -C /usr/share/elasticsearch --strip-components 1 åªåœ¨ docker run æ—¶æ‰§è¡Œå®‰è£… elasticsearch-analysis-ik æ’ä»¶åœ¨ dockerfile ä¸­çš„ ENTRYPOINT å‘½ä»¤ä¼šåœ¨ docker run æˆ– docker restart æ—¶éƒ½æ‰§è¡Œï¼Œè¿™æ ·å°±å¯¼è‡´é‡å¤å®‰è£…æ’ä»¶çš„é—®é¢˜ã€‚ ç›®å‰é‡‡ç”¨çš„æ–¹æ³•æ˜¯åœ¨ shell script æ–‡ä»¶ä¸­ é€šè¿‡åˆ¤æ–­ plugins ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ elasticsearch-analysis-ik-${IK_ANALYSIS_VERSION}.zip æ–‡ä»¶æ¥åˆ¤æ–­æ˜¯å¦å·²ç»æ·»åŠ è¯¥æ’ä»¶ã€‚ å¦ä¸€ç§æ–¹å¼: è€ƒè™‘é€šè¿‡ docker exec åœ¨å®¹å™¨å¯åŠ¨åæ¥å®‰è£…ã€‚ ä½¿ç”¨ docker exec å‘½ä»¤æ‰§è¡Œ shell script æ—¶ï¼Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼šéœ€è¦æ‰§è¡Œçš„ shell script æ–‡ä»¶åº”è¯¥æ”¾åœ¨å®¹å™¨å†…éƒ¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨å¤–éƒ¨å³å®¿ä¸»æœºä¸Šçš„ã€‚(åç»æµ‹è¯•ï¼Œæ”¾åœ¨å®¹å™¨å†…éƒ¨ã€‚) Elasticsearch é›†ç¾¤å…¶ä¸­æœ‰ä¸€å°è¢«ä½œä¸ºMasterï¼Œå…¶ä»–ä¸ºSlaveã€‚ é…ç½® elasticsearch.yml ï¼ˆæ³¨æ„é…ç½®æ–‡ä»¶å†’å·â€œï¼šâ€åè¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™æŠ¥é”™ï¼‰ 12345678910network.host: 10.0.0.1cluster.name: elasticsearch # é›†ç¾¤åç§°node.name: es-node1 # èŠ‚ç‚¹åç§° ï¼ˆåŒä¸€é›†ç¾¤ä¸‹å¤šä¸ªèŠ‚ç‚¹åç§°ä¸åŒï¼‰bootstrap.mlockall: true # node.master: true # æ˜¯å¦ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è¢«é…ç½®æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œé»˜è®¤å€¼ä¸ºtruenode.data: true # æ˜¯å¦å­˜å‚¨æ•°æ®ï¼Œå³å­˜å‚¨ç´¢å¼•ç‰‡æ®µï¼Œé»˜è®¤å€¼ä¸ºtruediscovery.zen.ping.unicast.hosts: [&quot;10.0.0.1:9300&quot;, &quot;10.0.0.2:9300&quot;]discovery.zen.minimum_master_nodes: 2 1234567network.host: [&quot;127.0.0.1&quot;, &quot;[::1]&quot;]cluster.name: elasticsearchnode.name: $&#123;HOSTNAME&#125; # es_node_1discovery.zen.ping.unicast.hosts: [&quot;10.0.0.1&quot;, &quot;10.0.0.2&quot;, &quot;10.0.0.3&quot;]node.master: truenode.data: false å¦‚ä½•æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶è‡ªå®šä¹‰é…ç½®æ–‡ä»¶å’Œé»˜è®¤é…ç½®æ–‡ä»¶çš„å…³ç³»æŒ‡å®š é…ç½®æ–‡ä»¶è·¯å¾„ï¼š ./bin/elasticsearch -Des.path.conf=/my/conf.yaml æ³¨æ„ï¼š Des.config=/path/to/config/file doesnâ€™t replace $ES_HOME/elasticsearch.conf, just appends to it è¯¦è§ï¼š-Des.config=/path/to/config/file doesn&#39;t replace $ES_HOME/elasticsearch.conf, just appends to it Â· Issue #588 Â· elastic/elasticsearch Â· GitHub ES 2.4.0 ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯åŠ¨ CMD gosu elasticsearch elasticsearch -Epath.conf=&quot;${ELASTICSEARCH_DATA}/config/elastic.yml&quot; æŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š 1ERROR: Parameter [-Epath.conf=&quot;$&#123;ELASTICSEARCH_DATA&#125;/config/elastic.yml&quot;]does not start with -- 123-Des.path.confbin/elasticsearch -Des.path.conf=/etc/elasticsearch/node1 æ€»ç»“ ï¼šä½¿ç”¨ --path.conf=configdir æ¥æŒ‡å®šé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¹¶ä¸”é…ç½®æ–‡ä»¶å¿…éœ€å‘½åä¸º elasticsearch.yml æ‰å¯ä»¥ã€‚ 1$ ./bin/elasticsearch --path.conf=/path/to/conf/dir è¯¦ç»†åˆ†æè¿‡ç¨‹å¦‚ä¸‹ï¼š æŠ¥é”™åˆ†æå¯åŠ¨æ—¶æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12345678910111213141516/ # gosu elasticsearch elasticsearch -Des.path.conf=/app/config/elastic.ymllog4j:WARN No appenders could be found for logger (bootstrap).log4j:WARN Please initialize the log4j system properly.log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.Exception in thread &quot;main&quot; java.lang.IllegalStateException: Unable to access &apos;path.conf&apos; (/app/config/elastic.yml)Likely root cause: java.nio.file.NotDirectoryException: /app/config/elastic.yml at org.elasticsearch.bootstrap.Security.ensureDirectoryExists(Security.java:340) at org.elasticsearch.bootstrap.Security.addPath(Security.java:314) at org.elasticsearch.bootstrap.Security.addFilePermissions(Security.java:247) at org.elasticsearch.bootstrap.Security.createPermissions(Security.java:212) at org.elasticsearch.bootstrap.Security.configure(Security.java:118) at org.elasticsearch.bootstrap.Bootstrap.setupSecurity(Bootstrap.java:212) at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:183) at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:286) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)Refer to the log for complete error details. è§£å†³æ–¹æ³•ï¼š æ‰¾åˆ°ä¸€ä¸ªè®¨è®ºä¸­çš„å›ç­”ï¼š 123It is no longer possible to specify a custom config file with the CONF_FILE environment variable, or the -Des.config, -Des.default.config, or -Delasticsearch.config parameters.Instead, the config file must be named elasticsearch.yml and must be located in the default config/ directory, unless a custom config directory is specified. Problem in starting a node in ES 2.2.1 - Elasticsearch - Discuss the Elastic Stack Setting changes | Elasticsearch Reference 2.2 | Elastic æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼š ä»æ–‡ç«  Setting changes | Elasticsearch Reference 2.4 ä¸­è¿™æ®µï¼š Custom config fileeditIt is no longer possible to specify a custom config file with the CONF_FILE environment variable, or the -Des.config, -Des.default.config, or -Delasticsearch.config parameters.Instead, the config file must be named elasticsearch.yml and must be located in the default config/ directory, unless a custom config directory is specified.The location of a custom config directory may be specified as follows:./bin/elasticsearch â€“path.conf=/path/to/conf/dir./bin/plugin -Des.path.conf=/path/to/conf/dir install analysis-icuWhen using the RPM or debian packages, the plugin script and the init/service scripts will consult &gt; the CONF_DIR environment variable to check for a custom config location. The value of the CONF_DIR &gt; variable can be set in the environment config file which is located either in /etc/default/elasticsearch or /etc/sysconfig/elasticsearch. å¾—çŸ¥ï¼Œä¹‹å‰çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ–¹æ³• -Des.path.conf æ”¹ä¸ºäº†è¿™ç§æ–¹å¼ --path.conf ï¼Œè€Œä¸”ï¼Œåªéœ€è¦æŒ‡å®šåˆ°é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•å³å¯ã€‚å¦å¤–ï¼Œé…ç½®æ–‡ä»¶çš„åç§°å¿…é¡»ä¸º elasticsearch.yml ã€‚ 1$ gosu elasticsearch elasticsearch --path.conf=/app/config network.host åŒæ—¶æ”¯æŒ IPV4 å’Œ IPV6 æŠ¥é”™æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1234567891011Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: bind address: &#123;0.0.0.0&#125; is wildcard, but multiple addresses specified: this makes no sense at org.elasticsearch.common.network.NetworkService.resolveBindHostAddresses(NetworkService.java:132) at org.elasticsearch.transport.netty.NettyTransport.bindServerBootstrap(NettyTransport.java:435) at org.elasticsearch.transport.netty.NettyTransport.doStart(NettyTransport.java:332) at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68) at org.elasticsearch.transport.TransportService.doStart(TransportService.java:182) at org.elasticsearch.common.component.AbstractLifecycleComponent.start(AbstractLifecycleComponent.java:68) at org.elasticsearch.node.Node.start(Node.java:278) at org.elasticsearch.bootstrap.Bootstrap.start(Bootstrap.java:222) at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:288) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35) é…ç½®æ–‡ä»¶å†…å®¹ï¼š 123456789101112# defaultnetwork.host: [&quot;0.0.0.0&quot;, &quot;[::1]&quot;]path.data: /app/datapath.logs: /app/logs# clustercluster.name: elasticsearchnode.name: $&#123;HOSTNAME&#125;node.master: truenode.data: true# bootstrap.mlockall: truediscovery.zen.ping.unicast.hosts: [&quot;localhost:9300&quot;, &quot;localhost:9301&quot;] æ”¹ä¸º network.host: 0.0.0.0 å å¯åŠ¨æˆåŠŸã€‚ å¯æŸ¥çœ‹è¯¥è®¨è®º: Binding to the wildcard of one address family should not prevent binding to addresses in another family Â· Issue #20703 Â· elastic/elasticsearch Â· GitHub å½“åŠ ä¸Š bootstrap.mlockall: true è¿™è¡Œæ—¶ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚ å¾…æ¢ç©¶åŸå› ï¼ï¼ï¼ elasticsearch cluster é…ç½® unicast.hostsæ¢ç©¶ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®çš„ unicast.hosts å€¼å¦‚ä¸‹ ï¼š 1234discovery.zen.ping.unicast.hosts: [&quot;localhost:9300&quot;, &quot;localhost:9301&quot;]discovery.zen.ping.unicast.hosts: [&quot;172.17.0.4:9300&quot;, &quot;172.17.0.5:9301&quot;] ç»æµ‹è¯•ï¼Œä½¿ç”¨ [&quot;localhost:9300&quot;, &quot;localhost:9301&quot;] æ— æ•ˆã€‚å¿…é¡»ä½¿ç”¨æ˜ç¡®çš„IPåœ°å€ [&quot;172.17.0.4:9300&quot;, &quot;172.17.0.5:9301&quot;] åæ‰èƒ½äº’ç›¸å‘ç°ã€‚ é€šè¿‡ è®¿é—® http://59.188.76.112:9200/_cluster/health?pretty èƒ½çœ‹åˆ°æ˜¯å¦ç»„æˆé›†ç¾¤æ¨¡å¼ï¼š 1234567891011121314151617&#123; &quot;cluster_name&quot;: &quot;elasticsearch&quot;, &quot;status&quot;: &quot;green&quot;, &quot;timed_out&quot;: false, &quot;number_of_nodes&quot;: 2, &quot;number_of_data_nodes&quot;: 2, &quot;active_primary_shards&quot;: 0, &quot;active_shards&quot;: 0, &quot;relocating_shards&quot;: 0, &quot;initializing_shards&quot;: 0, &quot;unassigned_shards&quot;: 0, &quot;delayed_unassigned_shards&quot;: 0, &quot;number_of_pending_tasks&quot;: 0, &quot;number_of_in_flight_fetch&quot;: 0, &quot;task_max_waiting_in_queue_millis&quot;: 0, &quot;active_shards_percent_as_number&quot;: 100&#125; è€ƒè™‘åˆ°Dockerä¸‹å®¹å™¨çš„ipåœ°å€æ˜¯éšæœºçš„ï¼Œå®¹å™¨é‡å¯åå¯èƒ½ä¼šæ”¹å˜ï¼Œéœ€è¦è€ƒè™‘å…¶ä»–ç¡®å®šçš„æ–¹å¼ã€‚ è®¾ç½®æˆ localhost å‚è€ƒè‡ª å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªIPæ­å»ºESé›†ç¾¤â€”â€”Dockerå¦‚ä½ æ‰€æ„¿ - ç®€ä¹¦ å¯èƒ½çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨ docker run æ—¶ æŒ‡å®š --add-host=[] å‚æ•° ï¼Œå¾…ç ”ç©¶ï¼ï¼ï¼ ç»æµ‹è¯•ï¼Œä½¿ç”¨ localhsot 127.0.0.1 0.0.0.0 docker name å‡æ— æ•ˆã€‚ ç»æµ‹è¯•ï¼Œå¯ä»¥è®¾ç½®ä¸ºç›¸åº”å®¹å™¨çš„IP å¦‚ 172.17.0.5:9300 ã€‚é€šè¿‡å‘½ä»¤ : 1docker inspect --format=&apos;&#123;&#123;.NetworkSettings.IPAddress&#125;&#125;&apos; $CONTAINER_ID å¯ä»¥è·å¾—æŒ‡å®šå®¹å™¨çš„ipåœ°å€ã€‚ä½†è¿™é‡Œçš„é—®é¢˜æ˜¯ å®¹å™¨çš„ipæ¯æ¬¡é‡å¯åéƒ½ä¼šæ”¹å˜ï¼ŒçŸ¥é“å®¹å™¨ipæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚æ‰€ä»¥è¿™ç§æ–¹å¼ä¹Ÿå¤±è´¥ã€‚ å¦‚æœä¸æŒ‡å®šå®¹å™¨çš„IP,ä½†å¯ä»¥æŒ‡å®šå®¹å™¨æ‰€åœ¨å®¿ä¸»æœºçš„IP 120.121.xx.xx:9300 ï¼Œè¿™æ ·èƒ½å‘ç°é›†ç¾¤ã€‚ ä»¥ä¸‹issureä¸­ï¼Œå¯ä»¥é€šè¿‡docker-compores æ¥æŒ‡å®šå®¹å™¨ip ï¼šå¾…ç ”ç©¶ï¼ï¼ï¼ Cannot set up an elasticsearch:2 cluster in docker any more Â· Issue #68 Â· docker-library/elasticsearch Â· GitHub Problems in getting single node cluster working as per your docs Â· Issue #19 Â· spujadas/elk-docker Â· GitHub å¦å¤–ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ --link æ¥è®¾ç½®ï¼šå‚è€ƒè‡ªï¼šdockerfiles/elasticsearch at master Â· itzg/dockerfiles Â· GitHub 123456789docker run --name es5 -d -p 9230:9200 -p 9330:9300 e2docker run --name es6 -d --link es5 e2docker run --name es7 -d --link es5 e2docker cp elasticsearch.yml es5:/app/config/elasticsearch.ymldocker cp elasticsearch.yml es6:/app/config/elasticsearch.ymldocker cp elasticsearch.yml es7:/app/config/elasticsearch.ymldocker restart es5 es6 es7 é…ç½®æ–‡ä»¶ï¼š 1234567891011# defaultnetwork.host: 0.0.0.0path.data: /app/datapath.logs: /app/logs# clustercluster.name: elasticsearchnode.name: $&#123;HOSTNAME&#125;node.master: truenode.data: truediscovery.zen.ping.unicast.hosts: [&quot;es5:9330&quot;] è¿™ç§æ–¹å¼ç»æµ‹è¯•ï¼Œæ— æ•ˆã€‚ æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12345678910111213java.net.NoRouteToHostException: Host is unreachable at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717) at org.jboss.netty.channel.socket.nio.NioClientBoss.connect(NioClientBoss.java:152) at org.jboss.netty.channel.socket.nio.NioClientBoss.processSelectedKeys(NioClientBoss.java:105) at org.jboss.netty.channel.socket.nio.NioClientBoss.process(NioClientBoss.java:79) at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:337) at org.jboss.netty.channel.socket.nio.NioClientBoss.run(NioClientBoss.java:42) at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108) at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745) Docker elasticsearch é›†ç¾¤ https://hub.docker.com/r/itzg/elasticsearch/ https://github.com/Khezen/docker-elasticsearch/tree/2.4 çœ‹åˆ°ç½‘ä¸Šå¤§éƒ¨åˆ†äººéƒ½æ˜¯å°†é›†ç¾¤é…ç½®å‚æ•°é€šè¿‡ç¯å¢ƒå˜é‡çš„å½¢å¼åœ¨ docker run æ—¶é…ç½®ï¼Œè€ƒè™‘å°†é…ç½®æ–‡ä»¶æš´éœ²åœ¨ä¸»æœºç›®å½•ä¸‹æ˜¯å¦å®‰å…¨ï¼Ÿ æŸ¥çœ‹é›†ç¾¤çŠ¶æ€æŸ¥çœ‹é›†ç¾¤çŠ¶æ€: curl -XGET &#39;http://172.16.212.102:9200/_cluster/health?pretty&#39; ç›¸å…³å‚è€ƒElasticsearché›†ç¾¤æ­å»ºç›¸å…³å‚è€ƒ ElasticSearché›†ç¾¤éƒ¨ç½²æ–‡æ¡£ elasticsearch2.3.1 é›†ç¾¤å®‰è£… - å°šæµ©å®‡çš„åšå®¢ äº”è§’æ˜Ÿ é…ç½® How To Set Up a Production Elasticsearch Cluster on Ubuntu 14.04 | DigitalOcean Easy Elasticsearch cluster with docker 1.12 swarm? - General - Docker Forums Running an Elasticsearch cluster with Docker å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªIPæ­å»ºESé›†ç¾¤â€”â€”Dockerå¦‚ä½ æ‰€æ„¿ - ç®€ä¹¦ äº”è§’æ˜Ÿ docker-elasticsearch-cn/docker-start at master Â· hangxin1940/docker-elasticsearch-cn Â· GitHub elasticsearch é›†ç¾¤ å®¿ä¸»æœºä¸Šå¦‚ä½•è·å¾— docker container å®¹å™¨çš„ ip åœ°å€ï¼Ÿ - SegmentFault Elasticsearchå®¹å™¨åˆ›å»ºç›¸å…³å‚è€ƒ GitHub - soldair/docker-alpine-elasticsearch: 130mb ish Elasticsearch container based on alpine linux. GitHub - docker-library/elasticsearch: Docker Official Image packaging for elasticsearch GitHub - kiasaki/docker-alpine-elasticsearch: ElasticSearch container based on Alpine Linux GitHub - docker-library/openjdk: Docker Official Image packaging for Java (openJDK) docker elasticsearch GitHub - itzg/dockerfiles: Contains the various Dockerfile definitions I&#39;m maintaining. æˆæœæºç è§ï¼šGitHub - Leafney/alpine-elasticsearch: Docker + Alpine + Elasticsearch]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github]]></title>
    <url>%2F2017%2F03%2F03%2Fusing-ssh-key-connection-github-in-linux%2F</url>
    <content type="text"><![CDATA[åœ¨ Linux ç³»ç»Ÿä¸‹å¦‚ä½•é€šè¿‡ SSH å¯†é’¥æ¥è¿æ¥ GitHub (Macç³»ç»Ÿä¸‹è®¾ç½®æ–¹æ³•ç›¸åŒ)ã€‚ å¼•ç”³ Linuxä¸‹ ï¼šLinuxä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github Windowsä¸‹ï¼šä½¿ç”¨SSHå¯†é’¥è¿æ¥Github Ubuntu ç³»ç»Ÿåˆå§‹åŒ–é…ç½®gitç¯å¢ƒæµ‹è¯•ç³»ç»Ÿç‰ˆæœ¬ : Ubuntu 16.04 LTS æ›´æ–°è½¯ä»¶æº123$ echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list &amp;&amp; \echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list &amp;&amp; \echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial-updates main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list å®‰è£…gitä¾èµ–12$ apt-get update$ apt-get install git è®¾ç½®æ—¶åŒº123$ ln -sf /usr/share/zoneinfo/Asia/ShangHai /etc/localtime$ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone$ dpkg-reconfigure -f noninteractive tzdata Alpine ç³»ç»Ÿåˆå§‹åŒ–é…ç½®gitç¯å¢ƒæµ‹è¯•ç³»ç»Ÿç‰ˆæœ¬ : Alpine 3.5 æ›´æ–°è½¯ä»¶æº12$ echo &quot;http://dl-4.alpinelinux.org/alpine/v3.5/main&quot; &gt;&gt; /etc/apk/repositories$ echo &quot;http://dl-4.alpinelinux.org/alpine/v3.5/community&quot; &gt;&gt; /etc/apk/repositories å®‰è£…ä¾èµ–The ssh-keygen command is part of OpenSSH (package â€œopensshâ€). 12$ apk update$ apk add git openssh è®¾ç½®æ—¶åŒº123$ apk add tzdata$ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime$ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone Mac ç³»ç»Ÿåˆå§‹åŒ–é…ç½®gitç¯å¢ƒMacç³»ç»Ÿä¸Šå®‰è£…git,å¯ä»¥ç›´æ¥ä»gitç½‘ç«™ä¸‹è½½å®‰è£…åŒ…,è®¿é—® Git - Downloads å®‰è£…. ä¹Ÿå¯ä»¥é€šè¿‡ homebrew è¿›è¡Œå®‰è£…: 1$ brew install git è®¾ç½®gitè´¦æˆ·æ‰§è¡Œå¦‚ä¸‹ä¸¤æ¡å‘½ä»¤è®¾ç½®gitè´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼š 1234$ git config --global user.name &quot;Your Name&quot;$ git config --global user.email &quot;youremail@domain.com&quot;$ git config --list ç”ŸæˆSSHå…¬é’¥SSH å…¬é’¥é»˜è®¤å‚¨å­˜åœ¨è´¦æˆ·çš„ä¸»ç›®å½•ä¸‹çš„ ~/.ssh ç›®å½•ã€‚å…ˆç¡®è®¤æ˜¯å¦å·²ç»æœ‰ä¸€ä¸ªå…¬é’¥äº†ï¼š 12$ cd ~/.ssh/bin/sh: cd: can&apos;t cd to /root/.ssh ä¸»è¦æ˜¯çœ‹æ˜¯å¦å­˜åœ¨ id_dsa æˆ– id_rsa æ–‡ä»¶ã€‚æœ‰ .pub åç¼€çš„æ–‡ä»¶å°±æ˜¯ å…¬é’¥ï¼Œå¦ä¸€ä¸ªæ–‡ä»¶åˆ™æ˜¯å¯†é’¥ã€‚ åˆ›å»ºæ–°çš„SSHå¯†é’¥å¦‚æœå·²ç»å­˜åœ¨å…¬é’¥ï¼Œå¯è·³è¿‡è¿™æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œä½¿ç”¨ ssh-keygen æ¥åˆ›å»ºï¼š 12$ cd ~$ ssh-keygen -t rsa -C &quot;youremail@domain.com&quot; ç¤ºä¾‹ï¼š(xxxxxx@126.com ä¸ºæˆ‘çš„è´¦æˆ·é‚®ç®±) 12345678910111213141516171819202122~ # ssh-keygen -t rsa -C &quot;xxxxxx@126.com&quot;Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): # ç›´æ¥å›è½¦ï¼Œåˆ™å°†å¯†é’¥æŒ‰é»˜è®¤è·¯å¾„åŠæ–‡ä»¶åè¿›è¡Œå­˜å‚¨ã€‚æ­¤æ—¶ä¹Ÿå¯ä»¥è¾“å…¥ç‰¹å®šçš„æ–‡ä»¶åCreated directory &apos;/root/.ssh&apos;.Enter passphrase (empty for no passphrase): # æ ¹æ®æç¤ºï¼Œä½ éœ€è¦è¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç ã€‚å¯ä»¥ä¸å¡«ï¼Œè®¾ç½®ä¸ºç©ºå€¼ï¼Œç›´æ¥å›è½¦Enter same passphrase again: Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:yFt14TcP0H+ixy9VKiILPPJ6DVevkKgrbxVFqk7mn5k xxxxxx@126.comThe key&apos;s randomart image is:+---[RSA 2048]----+| o. || . . o. || o . o +. || .... ... ..++|| . o .So . o+|| + o Bo= . + + .|| = *.* + o o || ++o o o . . .|| E=++ . |+----[SHA256]-----+ æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶ï¼š 123$ cd ~/.ssh~/.ssh $ lsid_rsa id_rsa.pub æ–‡ä»¶ id_rsa.pub å°±æ˜¯å…¬é’¥ã€‚ åœ¨ GibHub ä¸­æ·»åŠ ä½ çš„å…¬é’¥å¤åˆ¶å…¬é’¥ id_rsa.pub æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚ æˆ‘è¿™é‡Œä½¿ç”¨ XShell æ¥ç™»å½•çš„linuxæœåŠ¡å™¨ï¼Œå¯ä»¥ç›´æ¥å¤åˆ¶å‡ºæ¥ã€‚æˆ–åœ¨ vim ä¸‹ï¼Œå¯é€šè¿‡å‘½ä»¤ ggVG å…¨é€‰ï¼Œ+y å¤åˆ¶é€‰ä¸­å†…å®¹åˆ°+å¯„å­˜å™¨ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„å‰ªè´´æ¿ï¼Œä¾›å…¶ä»–ç¨‹åºä½¿ç”¨ã€‚ ç™»é™†Githubç½‘ç«™ï¼Œé€‰æ‹© Settings â€“&gt; SSH and GPG keys èœå•ï¼Œç‚¹å‡» New SSH key æŒ‰é’®ã€‚ç²˜è´´ä½ çš„å¯†é’¥åˆ° Key è¾“å…¥æ¡†ä¸­å¹¶è®¾ç½® Title ä¿¡æ¯ï¼Œç‚¹å‡» Add SSH key æŒ‰é’®å®Œæˆã€‚ è¿æ¥æµ‹è¯•æµ‹è¯• SSH keys æ˜¯å¦è®¾ç½®æˆåŠŸï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ ssh -T git@github.com å½“æç¤ºå¦‚ä¸‹ä¿¡æ¯æ—¶ï¼Œè¯´æ˜æ­£å¸¸è¿é€šäº†github: 1Hi xxxxxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access. å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡è®¾ç½®è¿æ¥github.com,ä¼šè¯¢é—®ä½ æ˜¯å¦ç»§ç»­,è¾“å…¥ yes å³å¯,è¿™æ ·å°±ä¼šå°†è¿æ¥åœ°å€è®°å½•åœ¨æœ¬åœ°: 123456$ ssh -T git@github.comThe authenticity of host &apos;github.com (192.30.253.112)&apos; can&apos;t be established.RSA key fingerprint is SHA256:nThbg6kXUpxxxxxxxxARLviKw6E5SY8.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;github.com,192.30.253.112&apos; (RSA) to the list of known hosts.Hi xxxxxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access. ç„¶åå°±å¯ä»¥å°†æœ¬åœ°çš„é¡¹ç›®ç”¨githubæ¥ç®¡ç†äº†ã€‚ æ›´æ–°æ—¥å¿— 2017-10-27 - å®Œå–„â€è¿æ¥æµ‹è¯•â€å†…å®¹; æ·»åŠ Macç³»ç»Ÿä¸‹å®‰è£…gité…ç½®]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>GitHub</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¸‹ä¿®æ”¹æ—¶åŒº]]></title>
    <url>%2F2017%2F02%2F23%2Fmodify-timezone%2F</url>
    <content type="text"><![CDATA[ä¸€èˆ¬é€šè¿‡é»˜è®¤æ–¹å¼å®‰è£…çš„linuxç³»ç»Ÿæ˜¾ç¤ºçš„éƒ½æ˜¯UTCæ—¶é—´ï¼Œè¿™æ ·å¯¼è‡´ä¸€äº›ä¾èµ–æ—¶é—´çš„ç¨‹åºå°±ä¼šå‡ºç°æ—¶å·®é—®é¢˜ã€‚ä¸‹é¢ä»‹ç»åœ¨Ubuntuå’ŒAlpineç³»ç»Ÿä¸‹å¦‚ä½•æ›´æ”¹UTCæ—¶åŒºä¸ºCSTæ—¶åŒºã€‚ Alpinealpine ä¸‹ä¿®æ”¹UTCæ—¶é—´ä¸ºCSTæ—¶é—´ (æµ‹è¯•é€šè¿‡)123$ apk add tzdata $ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime $ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone Docker + Alpine ä¸‹ä¿®æ”¹utcæ—¶é—´ä¸ºcstæ—¶é—´Dockerfile : 1234RUN apk update &amp;&amp; apk add ca-certificates &amp;&amp; \ apk add tzdata &amp;&amp; \ ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone UbuntuUbuntu ä¸‹æ‰‹åŠ¨ä¿®æ”¹é…ç½® (å›¾å½¢åŒ–ç•Œé¢)1$ sudo dpkg-reconfigure tzdata æˆ–ï¼š 1$ sudo tzselect Ubuntuä¸‹é€šè¿‡å‘½ä»¤æ›´æ”¹ï¼ˆå·²æµ‹è¯•ï¼‰123$ sudo ln -sf /usr/share/zoneinfo/Asia/ShangHai /etc/localtime$ sudo echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone$ sudo dpkg-reconfigure -f noninteractive tzdata ç»æµ‹è¯•ï¼Œå¦‚æœä¸åŠ ç¬¬ä¸€è¡Œï¼Œç³»ç»Ÿé‡å¯ååˆæ¢å¤UTCæ—¶é—´äº† Docker + Ubuntu ä¸‹ä¿®æ”¹UTCæ—¶é—´ä¸ºCSTæ—¶é—´Dockerfile: 1234# Setting timezoneRUN ln -sf /usr/share/zoneinfo/Asia/ShangHai /etc/localtime &amp;&amp; \ echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone &amp;&amp; \ dpkg-reconfigure -f noninteractive tzdata ç›¸å…³å‚è€ƒ docker ä¸­è®¾ç½®æ—¶åŒº | æ°´èƒ½è½½èˆŸ äº¦å¯èµ›è‰‡ Ubuntu: ä»¥å‘½ä»¤è¡Œæ–¹å¼ä¿®æ”¹æ—¶åŒº docker ä¸­è®¾ç½®æ—¶åŒº - ä½œä¸šéƒ¨è½ Cmd Markdown ç¼–è¾‘é˜…è¯»å™¨]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04é…ç½®RabbitMQè¿è¡Œç¯å¢ƒ]]></title>
    <url>%2F2017%2F02%2F21%2Finstallation-rabbitmq-on-ubuntu%2F</url>
    <content type="text"><![CDATA[è¯¥æ–‡ç« ä¸»è¦è®°å½•åœ¨ Ubuntu 16.04.1 LTS ç³»ç»Ÿä¸‹å®‰è£…åŠé…ç½® RabbitMQ çš„æ–¹æ³•ã€‚ æ›´æ–°è½¯ä»¶æº1234sudo echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt; /etc/apt/sources.listsudo echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial-security main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.listsudo apt-get update å®‰è£…Erlangä¾èµ–123456cd /tmpwget http://packages.erlang-solutions.com/ubuntu/erlang_solutions.ascsudo apt-key add erlang_solutions.ascsudo apt-get updatesudo apt-get install erlangsudo apt-get install erlang-nox å®‰è£…RabbitMQ12345sudo echo &quot;deb http://www.rabbitmq.com/debian/ testing main&quot; &gt;&gt; /etc/apt/sources.listsudo wget https://www.rabbitmq.com/rabbitmq-release-signing-key.ascsudo apt-key add rabbitmq-release-signing-key.ascsudo apt-get updatesudo apt-get install rabbitmq-server ç®¡ç†RabbitMQæœåŠ¡ç®¡ç†æœåŠ¡å¯ä»¥ä½¿ç”¨ rabbitmqctl æˆ–ç³»ç»ŸæœåŠ¡ service æˆ–è€… systemctl æ¥ç®¡ç†. rabbitmqctl : 1$ sudo rabbitmqctl [status|start|stop|reset] systemctl : 1$ sudo systemctl [status|start|stop|restart] rabbitmq-server service : 1$ sudo service rabbitmq-server [status|start|stop|restart] å¦‚æœ status çŠ¶æ€æ˜¾ç¤ºæ— æ³•è¿æ¥rabbitmqæœåŠ¡ï¼Œéœ€è¦å…ˆå¯åŠ¨è¯¥æœåŠ¡ã€‚ 12345678910111213141516171819202122$ sudo rabbitmqctl statusStatus of node rabbit@localhost ...Error: unable to connect to node rabbit@localhost: nodedown$ sudo rabbitmqctl start# æˆ–è€…$ sudo service rabbitmq-server start/restart$ sudo rabbitmqctl statusStatus of node rabbit@localhost ...[&#123;pid,9286&#125;, &#123;running_applications,[&#123;rabbit,&quot;RabbitMQ&quot;,&quot;3.6.6&quot;&#125;, &#123;mnesia,&quot;MNESIA CXC 138 12&quot;,&quot;4.13.3&quot;&#125;, &#123;os_mon,&quot;CPO CXC 138 46&quot;,&quot;2.4&quot;&#125;, &#123;rabbit_common,[],&quot;3.6.6&quot;&#125;, &#123;xmerl,&quot;XML parser&quot;,&quot;1.3.10&quot;&#125;, &#123;ranch,&quot;Socket acceptor pool for TCP protocols.&quot;, &quot;1.2.1&quot;&#125;, ... ... åœ¨Dockerä¸‹ç®¡ç†æ³¨æ„ï¼šåœ¨Ubuntuç³»ç»Ÿçš„ Docker ä¸‹ ï¼Œä½¿ç”¨ systemctl å‘½ä»¤ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åœ¨dockerä¸‹è¿˜æ˜¯æ¨èä½¿ç”¨ service æ¥ç®¡ç†ã€‚ 12345678910111213141516root@6b16517eab27:/tmp# systemctlFailed to connect to bus: No such file or directoryroot@6b16517eab27:/tmp# service rabbitmq-server statusStatus of node rabbit@6b16517eab27 ...[&#123;pid,12184&#125;, &#123;running_applications, [&#123;rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;3.6.6&quot;&#125;, &#123;rabbitmq_web_dispatch,&quot;RabbitMQ Web Dispatcher&quot;,&quot;3.6.6&quot;&#125;, &#123;webmachine,&quot;webmachine&quot;,&quot;1.10.3&quot;&#125;, &#123;mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.13.1&quot;&#125;, &#123;amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;3.6.6&quot;&#125;, &#123;rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;3.6.6&quot;&#125;, &#123;rabbit,&quot;RabbitMQ&quot;,&quot;3.6.6&quot;&#125;, ... ... So the systemctl can not run inside docker, right? thanks! Running systemctl in container fails with &quot;Failed to get D-Bus connection&quot; Â· Issue #2296 Â· docker/docker Â· GitHub systemd and systemctl within Ubuntu Docker images - Stack Overflow RabbitMQ Webç®¡ç†æ¥å£å¯ç”¨rabbitmq-managementå¯ç”¨rabbitmq-managementæ’ä»¶ï¼š 1$ sudo rabbitmq-plugins enable rabbitmq_management 12345678910$ sudo rabbitmq-plugins enable rabbitmq_managementThe following plugins have been enabled: mochiweb webmachine rabbitmq_web_dispatch amqp_client rabbitmq_management_agent rabbitmq_managementApplying plugin configuration to rabbit@6b16517eab27... started 6 plugins. é‡å¯RabbitMQ: 1$ sudo systemctl restart rabbitmq-server ä½¿ç”¨æµè§ˆå™¨è®¿é—® http://localhost:15672 ï¼Œä½¿ç”¨é»˜è®¤çš„ guest/guest ç”¨æˆ·ç™»å½•ã€‚ ä½¿ç”¨guestè´¦æˆ·è¿œç¨‹è®¿é—®æ³¨æ„ï¼šä½¿ç”¨è¿œç¨‹è®¿é—®æˆ–åœ¨Ubuntuç³»ç»Ÿçš„Dockerä¸‹ä½¿ç”¨æ‰€åœ¨æœåŠ¡å™¨çš„åœ°å€è®¿é—®æ—¶ä¼šæŠ¥æƒé™é”™è¯¯ï¼š 1&#123;error: &quot;not_authorised&quot;, reason: &quot;User can only log in via localhost&quot;&#125; è¿™æ˜¯å› ä¸º rabbitmqä»3.3.0å¼€å§‹ç¦æ­¢ä½¿ç”¨ guest/guest æƒé™é€šè¿‡é™¤ localhost å¤–çš„è®¿é—®ã€‚ å¦‚æœæƒ³ä½¿ç”¨ guest/guest é€šè¿‡è¿œç¨‹æœºå™¨è®¿é—®ï¼Œéœ€è¦åœ¨rabbitmqé…ç½®æ–‡ä»¶ (/etc/rabbitmq/rabbitmq.config) ä¸­è®¾ç½® loopback_usersä¸º[] ã€‚ /etc/rabbitmq/rabbitmq.config (ä¸å­˜åœ¨å…ˆåˆ›å»º) æ–‡ä»¶å®Œæ•´å†…å®¹å¦‚ä¸‹ï¼ˆæ³¨æ„åé¢çš„åŠè§’å¥å·ï¼‰ï¼š 1[&#123;rabbit, [&#123;loopback_users, []&#125;]&#125;]. æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š 1234567# ls /etc/rabbitmq/enabled_plugins$ sudo vim /etc/rabbitmq/rabbitmq.config [&#123;rabbit, [&#123;loopback_users, []&#125;]&#125;].$ sudo service rabbitmq-server restart åˆ›å»ºæ–°è´¦æˆ·å¦‚æœä¸æƒ³ä½¿ç”¨é»˜è®¤çš„ guest è´¦æˆ·ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å…·æœ‰ç®¡ç†å‘˜æƒé™çš„è´¦æˆ·ï¼Œå¦‚åˆ›å»ºä¸€ä¸ª test/test è´¦æˆ·æ“ä½œå¦‚ä¸‹ï¼š 123rabbitmqctl add_user test testrabbitmqctl set_user_tags test administratorrabbitmqctl set_permissions -p / test &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; RabbitMQ - Access Control (Authentication, Authorisation) in RabbitMQ Can&#39;t access RabbitMQ web management interface after fresh install - Stack Overflow RabbitMQ 3.3.1 can not login with guest/guest - Stack Overflow rabbitmqé—®é¢˜ä¹‹HTTP access denied: user &#39;guest&#39; - User can only log in via localhost - å¸ƒé›·æ³½ - åšå®¢å›­ ç›¸å…³é“¾æ¥ How To Install RabbitMQ on Ubuntu 16.04 - idroot Ubuntu 16.04 å®‰è£… RabbitMQ]]></content>
      <tags>
        <tag>RabbitMQ</tag>
        <tag>æ¶ˆæ¯é˜Ÿåˆ—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä½¿ç”¨æŠ€å·§æ•´ç†]]></title>
    <url>%2F2017%2F02%2F07%2Fgit-use-skills%2F</url>
    <content type="text"><![CDATA[ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ–‡ä»¶1$ git add . ä¸ºä»€ä¹ˆç”¨ . ä¸ç”¨ * In order to add the files that are not in the gitignore file, use git add . in the place of git add * This will stop confusing the unix system since means all ( including the ignored ones ) while . means the ones relative to the active action å¼ºåˆ¶æ·»åŠ æ–‡ä»¶1git add -f aaa.exe ä¸€èˆ¬åœ¨æ·»åŠ ä¸€ä¸ªè¢«å¿½ç•¥çš„æ–‡ä»¶æ—¶ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š 1234$ git add phantomjs.exeThe following paths are ignored by one of your .gitignore files:phantomjs.exeUse -f if you really want to add them. é‡åˆ°è¿™ç§æƒ…å†µæ—¶å€™éœ€è¦ä½¿ç”¨ git add -f å‘½ä»¤å¼ºåˆ¶æ·»åŠ è¿™ä¸ªæ–‡ä»¶ã€‚ è¯¦è§ï¼šgitå¼ºåˆ¶æ·»åŠ (add)æ–‡ä»¶]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu16.04å®‰è£…DockeråŠé…ç½®é•œåƒåŠ é€Ÿå™¨]]></title>
    <url>%2F2017%2F01%2F14%2Fubuntu-install-docker-and-configure-mirror-accelerator%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å°†è™šæ‹Ÿæœºä¸­çš„Ubuntuç³»ç»Ÿä»14.04æ›´æ–°åˆ°äº†16.04.1ç‰ˆæœ¬ï¼Œåˆè¦é‡æ–°å®‰è£…DockeræœåŠ¡ï¼Œåœ¨å®‰è£…çš„æ—¶å€™å‘ç°Dockerçš„å®˜æ–¹å®‰è£…æ•™ç¨‹åˆæœ‰äº†æ›´æ–°ï¼Œä¹‹å‰çš„å®‰è£…æ–¹æ³•å·²ç»è¿‡æ—¶ã€‚ è¿‡æ—¶çš„å®‰è£…æ–¹æ³•ä¹‹å‰å®˜ç½‘ä¸­æä¾›çš„å®‰è£…æ–¹æ³•ä¸ºï¼š 1$ curl -sSL https://get.docker.com/ | sudo sh ç°åœ¨å¦‚æœå†æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œä¼šç›´æ¥æŠ¥é”™ã€‚ å®˜æ–¹æ¨èå®‰è£…æ–¹æ³•æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸Dockeréœ€è¦å®‰è£…åœ¨Linux 64ä½ç³»ç»Ÿä¸‹ï¼Œå†…æ ¸ç‰ˆæœ¬åœ¨ 3.10 ä»¥ä¸Šã€‚å¯ä»¥é€šè¿‡ uname -r æ¥æŸ¥çœ‹å†…æ ¸ä¿¡æ¯ï¼š 12$ uname -r4.4.0-31-generic æ›´æ–°æºï¼Œå®‰è£…CAè¯ä¹¦12$ sudo apt-get update$ sudo apt-get install apt-transport-https ca-certificates å¯¼å…¥ GPG å¯†é’¥123$ sudo apt-key adv \ --keyserver hkp://ha.pool.sks-keyservers.net:80 \ --recv-keys 58118E89F3A912897C070ADBF76221572C52609D æ·»åŠ dockeræºæ ¹æ®å½“å‰ç³»ç»Ÿç‰ˆæœ¬ï¼Œæ·»åŠ dockeræºå‘½ä»¤ï¼š 1$ echo &quot;&lt;REPO&gt;&quot; | sudo tee /etc/apt/sources.list.d/docker.list åªè¦å°† &lt;REPO&gt; æ›¿æ¢æˆç›¸åº”ç³»ç»Ÿçš„æºåœ°å€å³å¯ã€‚ æˆ‘è¿™é‡Œå½“å‰ç³»ç»ŸUbuntu16.04ï¼Œæºåœ°å€ä¸ºï¼šdeb https://apt.dockerproject.org/repo ubuntu-xenial mainï¼Œæ‰€ä»¥åªéœ€å¦‚ä¸‹å‘½ä»¤ï¼š 1$ echo &quot;deb https://apt.dockerproject.org/repo ubuntu-xenial main&quot; | sudo tee /etc/apt/sources.list.d/docker.list å…¶ä»–ç‰ˆæœ¬ç³»ç»Ÿæºåœ°å€å¦‚ä¸‹ï¼š Ubuntu version Repository Precise 12.04 (LTS) deb https://apt.dockerproject.org/repo ubuntu-precise main Trusty 14.04 (LTS) deb https://apt.dockerproject.org/repo ubuntu-trusty main Wily 15.10 deb https://apt.dockerproject.org/repo ubuntu-wily main Xenial 16.04 (LTS) deb https://apt.dockerproject.org/repo ubuntu-xenial main æ›´æ–°æºåˆ—è¡¨1$ sudo apt-get update éªŒè¯ APT èƒ½å¦æ­£ç¡®è·å–æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¼šä»dockerå®˜æ–¹ä»“åº“ä¸­åˆ—å‡ºæ‰€æœ‰dockerçš„å¯å®‰è£…ç‰ˆæœ¬ï¼š 12345678910111213141516$ apt-cache policy docker-enginedocker-engine: Installed: null Candidate: 1.12.6-0~ubuntu-xenial Version table: *** 1.12.6-0~ubuntu-xenial 500 500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages 100 /var/lib/dpkg/status 1.12.5-0~ubuntu-xenial 500 500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages 1.12.4-0~ubuntu-xenial 500 500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages 1.12.3-0~xenial 500 500 https://apt.dockerproject.org/repo ubuntu-xenial/main amd64 Packages ... ... å®‰è£…dockeré»˜è®¤ä¼šå®‰è£…æ¨èçš„ç‰ˆæœ¬ Candidate é¡¹åˆ—å‡ºçš„ï¼Œä¹Ÿæ˜¯æœ€æ–°çš„ç‰ˆæœ¬ 1$ sudo apt-get install -y docker-engine å¯åŠ¨dockeræœåŠ¡1$ sudo service docker start éªŒè¯åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥ docker ,å¦‚æç¤ºdockerçš„ [OPTIONS] è¯´æ˜ï¼Œåˆ™è¡¨ç¤ºdockeræœåŠ¡å·²ç»å®‰è£…æˆåŠŸäº†ã€‚ 12345678910111213141516171819$ dockerUsage: docker [OPTIONS] COMMAND [arg...] docker [ --help | -v | --version ]A self-sufficient runtime for containers.Options: --config=~/.docker Location of client config files -D, --debug Enable debug mode -H, --host=[] Daemon socket(s) to connect to -h, --help Print usage -l, --log-level=info Set the logging level --tls Use TLS; implied by --tlsverify --tlscacert=~/.docker/ca.pem Trust certs signed only by this CA --tlscert=~/.docker/cert.pem Path to TLS certificate file --tlskey=~/.docker/key.pem Path to TLS key file ... ... å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerçš„ç”¨æˆ·ç»„Dockerå®‰è£…æˆåŠŸåï¼Œå¦‚æœæƒ³æŸ¥çœ‹dockerçš„ä¿¡æ¯ï¼Œæ‰§è¡Œ docker info å‘½ä»¤æ—¶å¯èƒ½ä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š 12$ docker infoCannot connect to the Docker daemon. Is the docker daemon running on this host? è¿™æ˜¯å› ä¸ºå¿…éœ€ä»¥ç®¡ç†å‘˜æƒé™æˆ–ä½¿ç”¨ sudo æ¥è¿è¡Œå‘½ä»¤æ‰å¯ä»¥ã€‚ä¸ºäº†ä»¥åæ‰§è¡Œå‘½ä»¤æ—¶ä¸ç”¨æ¯æ¬¡éƒ½å¿…éœ€æ·»åŠ  sudoï¼Œå¯ä»¥å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­ã€‚ åˆ›å»º docker åˆ†ç»„1$ sudo groupadd docker å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°ç»„1$ sudo usermod -aG docker $USER æ³¨æ„ï¼šè¿™é‡Œä¸ç”¨æ›´æ”¹ $USER è¿™ä¸ªå‚æ•°ï¼Œ$USER è¿™ä¸ªç¯å¢ƒå˜é‡å°±æ˜¯æŒ‡å½“å‰ç”¨æˆ·å é‡å¯ç³»ç»Ÿæ›´æ”¹å®Œæˆåï¼Œè¿˜éœ€è¦é‡å¯ç³»ç»Ÿæ‰èƒ½çœ‹åˆ°æ•ˆæœã€‚ 1$ sudo reboot åˆ›å»ºä¸€ä¸ªæµ‹è¯•å®¹å™¨å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæµ‹è¯•å®¹å™¨ï¼š 1$ docker run hello-world è¾“å‡ºï¼š 123Hello from Docker.This message shows that your installation appears to be working correctly.... é…ç½®é˜¿é‡Œäº‘Dockeré•œåƒåŠ é€Ÿå™¨æ‰“å¼€ å¼€å‘è€…å¹³å° â€“ ç®¡ç†ä¸­å¿ƒ â€“ åŠ é€Ÿå™¨ ã€‚å¯ä»¥çœ‹åˆ° â€œæ‚¨çš„ä¸“å±åŠ é€Ÿå™¨åœ°å€â€ å³ https://xxxxxxx.mirror.aliyuncs.com ã€‚ æ³¨æ„ï¼šè¿™é‡Œä»¥ Ubuntu 16.04 ç³»ç»Ÿä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿè¯·åˆ°ä¸Šè¿°é¡µé¢ä¸­æŸ¥çœ‹ç›¸åº”æ“ä½œå‘½ä»¤ã€‚ é…ç½®DockeråŠ é€Ÿå™¨é€šè¿‡ docker info å‘½ä»¤å¯ä»¥çŸ¥é“ä¸Šé¢å®‰è£…å¥½çš„Dockerçš„ç‰ˆæœ¬ä¸º 1.12.6 ã€‚æ‰€ä»¥è¯·é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶ /etc/docker/daemon.json (æ²¡æœ‰æ—¶æ–°å»ºè¯¥æ–‡ä»¶) æ¥ä½¿ç”¨åŠ é€Ÿå™¨ï¼š 12345678910sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;&#123; &quot;registry-mirrors&quot;: [&quot;https://xxxxxxx.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart docker æ³¨æ„äº‹é¡¹é’ˆå¯¹äºDockerç‰ˆæœ¬åœ¨1.10ä»¥ä¸‹çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®æ–¹æ³•ï¼š 12345678sudo mkdir -p /etc/systemd/system/docker.service.dsudo tee /etc/systemd/system/docker.service.d/mirror.conf &lt;&lt;-&apos;EOF&apos;[Service]ExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://xxxxxxx.mirror.aliyuncs.comEOFsudo systemctl daemon-reloadsudo systemctl restart docker ä½†æ˜¯è¯¥æ–¹æ³•å¹¶ä¸é€‚ç”¨äº1.12.0ç‰ˆæœ¬ä¹‹åçš„Dockerä¸Šã€‚å› ä¸ºDockerçš„å¯æ‰§è¡Œæ–‡ä»¶åç§°ä» docker æ”¹æˆäº† dockerdã€‚å¦‚æœä½¿ç”¨äº†ä»¥ä¸Šè„šæœ¬ï¼Œå¯èƒ½ä¼šæŠ¥å¦‚ä¸‹çš„é”™è¯¯ï¼š 12$ sudo systemctl restart dockerJob for docker.service failed because the control process exited with error code. See &quot;systemctl status docker.service&quot; and &quot;journalctl -xe&quot; for details. æ‰€ä»¥åœ¨é…ç½®åŠ é€Ÿå™¨æ—¶ä¸€å®šè¦æŒ‰ç…§ç›¸åº”ç‰ˆæœ¬æ¥è®¾ç½®ã€‚ è¿˜è¦æ³¨æ„ä¸€ç‚¹ï¼šä¸Šæ–‡ä»£ç æ®µä¸­ç»™å‡ºçš„é•œåƒåŠ é€Ÿå™¨åœ°å€ä¸­çš„ xxxxxxx ä¸ºé˜¿é‡Œäº‘åœ¨ä½ æ³¨å†Œè´¦æˆ·ååˆ†é…çš„æŒ‡å®šåœ°å€åç§°ï¼Œåˆ‡è®°è¦ä¿®æ”¹ä¸ºè‡ªå·±è´¦æˆ·çš„ç»™å®šåœ°å€ã€‚ ç›¸å…³å‚è€ƒ Install Docker on Ubuntu - Docker How To Install and Use Docker on Ubuntu 16.04 | DigitalOcean ubuntu16.04å®‰è£…docker - ç¨‹åºå›­ Ubuntu 16.04å®‰è£…dockeråŠ é€Ÿå™¨åæ— æ³•å¯åŠ¨docker-é—®ç­”-äº‘æ –ç¤¾åŒº-é˜¿é‡Œäº‘]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨Flaskä¸­ä½¿ç”¨SQLAlchemy]]></title>
    <url>%2F2017%2F01%2F06%2Fuse-sqlalchemy-by-flask%2F</url>
    <content type="text"><![CDATA[åœ¨Flaskä¸­ä½¿ç”¨SQLAlchemyæ“ä½œæ•°æ®åº“ã€‚ å®‰è£… flask-sqlalchemy1$ pip install flask 1$ pip install flask-sqlalchemy åŸºç¡€ä½ æ‰€æœ‰æ¨¡å‹çš„åŸºç±»å«åš db.Model ã€‚å®ƒå­˜å‚¨åœ¨ä½ å¿…é¡»åˆ›å»ºçš„ SQLAlchemy å®ä¾‹ä¸Šã€‚ åœ¨ Flask-sqlalchemyä¸­ï¼Œè¡¨åå·²è‡ªåŠ¨è®¾ç½®å¥½ï¼Œé™¤éè‡ªå·±é‡è½½å®ƒï¼šeg: 1__tablename__ = &apos;students&apos; #æŒ‡å®šè¡¨å Columnç±»å‹ ç±»å‹å Python ç±»å‹ è¯´æ˜ Integer int æ•´æ•° String(size) str æœ‰æœ€å¤§é•¿åº¦çš„å­—ç¬¦ä¸² Text str é•¿ unicode æ–‡æœ¬ Float float å­˜å‚¨æµ®ç‚¹å€¼ Boolean bool å­˜å‚¨å¸ƒå°”å€¼ Date datetime.date æ—¥æœŸ Time datetime.time æ—¶é—´ DateTime datetime.datetime æ—¥æœŸå’Œæ—¶é—´ PickleType ä»»ä½•pythonå¯¹è±¡ å­˜å‚¨ä¸€ä¸ªæŒä¹…åŒ– Python å¯¹è±¡ LargeBinary str å­˜å‚¨ä»»æ„å¤§çš„äºŒè¿›åˆ¶æ•°æ® å¸¸ç”¨å­—æ®µ é€‰é¡¹å è¯´æ˜ ç¤ºä¾‹ primary_key è®¾ç½®ä¸»é”® primary_key=True unique æ˜¯å¦å”¯ä¸€ unique=True index æ˜¯å¦åˆ›å»ºç´¢å¼• index=True nullable æ˜¯å¦å…è®¸ä¸ºç©º nullable=True default è®¾ç½®é»˜è®¤å€¼ default=datetime.datetime.utcnow æ›´è¯¦ç»†çš„é…ç½®å¯å‚è€ƒ Flask Web Development â€”â€” æ•°æ®åº“ï¼ˆä¸Šï¼‰ - young - SegmentFault è¿æ¥URIæ ¼å¼1dialect+driver://username:password@host:port/database Mysql mysql://scott:tiger@localhost/mydatabase Postgres postgresql://scott:tiger@localhost/mydatabase SQLite sqlite:////absolute/path/to/foo.db Flask-SQLAlchemy Sqliteè¿æ¥è·¯å¾„é—®é¢˜1sqlite:////tmp/test.db Sqliteè¿æ¥å­—ç¬¦ä¸²ä¸­çš„/æ–œæ è¯´æ˜ï¼šä¸‰æ–œæ ä¸ºç›¸å¯¹è·¯å¾„ï¼Œå››æ–œæ ä¸ºç»å¯¹è·¯å¾„ã€‚ 12&apos;sqlite:////tmp/test.db&apos; #è¡¨ç¤ºæŒ‡å‘ç»å¯¹è·¯å¾„åœ¨ï¼´ï½ï½ç›®å½•çš„test.dbæ–‡ä»¶&apos;sqlite:///Data/test.db&apos; #è¡¨ç¤ºæŒ‡å‘ç›¸å¯¹è·¯å¾„åœ¨å½“å‰Pyæ–‡ä»¶åŒç›®å½•çš„Dataç›®å½•ä¸‹test.dbæ–‡ä»¶ Flaskå°è®°ä¸€ï¼šFlask-SQLAlchemy Sqliteè¿æ¥è·¯å¾„é—®é¢˜ - ä¸æŠ˜è…¾éš¾å—æ–¯åŸº è¿‡æ»¤å™¨ è¿‡æ»¤å™¨ è¯´æ˜ filter æŠŠè¿‡æ»¤å™¨æ·»åŠ åˆ°åŸæŸ¥è¯¢ä¸Šï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ filter_by æŠŠç­‰å€¼è¿‡æ»¤å™¨æ·»åŠ åˆ°åŸæŸ¥è¯¢ä¸Šï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ limit ä½¿ç”¨æŒ‡å®šçš„å€¼é™åˆ¶è¿”å›çš„ç»“æœæ•°é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ offset ä¾¿å®œåŸæŸ¥è¯¢è¿”å›çš„ç»“æœï¼Œ è¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ order_by æ ¹æ®æŒ‡å®šæ¡ä»¶å¯¹åŸæŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ group_by æ ¹æ®æŒ‡å®šæ¡ä»¶å¯¹åŸæŸ¥è¯¢ç»“æ„è¿›è¡Œåˆ†ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°æŸ¥è¯¢ æ‰§è¡Œå™¨ æ–¹æ³• è¯´æ˜ all ä»¥åˆ—è¡¨å½¢å¼è¿”å›æŸ¥è¯¢çš„æ‰€æœ‰ç»“æœ first è¿”å›æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå¦‚æœæ²¡æœ‰ç»“æœï¼Œåˆ™è¿”å› None first_or_404 è¿”å›æŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå¦‚æœæ²¡æœ‰ç»“æœï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ï¼Œè¿”å› 404 é”™è¯¯è¾“å‡º get è¿”å›æŒ‡å®šä¸»é”®å¯¹åº”çš„è¡Œï¼Œå¦‚æœæ²¡æœ‰å¯¹åº”çš„è¡Œï¼Œåˆ™è¿”å› None get_or_404 è¿”å›æŒ‡å®šä¸»é”®å¯¹åº”çš„è¡Œï¼Œå¦‚æœæ²¡æ‰¾åˆ°æŒ‡å®šçš„ä¸»é”®ï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ï¼Œè¿”å› 404 é”™è¯¯è¾“å‡º count è¿”å›æŸ¥è¯¢ç»“æœçš„æ•°é‡ paginate è¿”å›ä¸€ä¸ª Paginate å¯¹è±¡ï¼Œå®ƒåŒ…å«æŒ‡å®šèŒƒå›´å†…çš„ç»“æœ ç®€å•ç¤ºä¾‹å…¥é—¨ç¤ºä¾‹å‚è€ƒè‡ªå®˜æ–¹å…¥é—¨æ•™ç¨‹ç¤ºä¾‹ä»£ç  Quickstart Flask-SQLAlchemy Documentation (2.1) flsksql.py 1234567891011121314151617181920212223242526# coding:utf-8from flask import Flaskfrom flask_sqlalchemy import SQLAlchemyapp=Flask(__name__)app.config[&apos;SQLALCHEMY_DATABASE_URI&apos;]=&apos;sqlite:///test.db&apos; # è¿æ¥å½“å‰é¡¹ç›®åŒç›®å½•ä¸‹çš„test.dbæ•°æ®åº“æ–‡ä»¶app.config[&apos;SQLALCHEMY_TRACK_MODIFICATIONS&apos;]=Truedb=SQLAlchemy(app)class User(db.Model): &quot;&quot;&quot;docstring for User&quot;&quot;&quot; __tablename__=&apos;users&apos; id=db.Column(db.Integer,primary_key=True) username=db.Column(db.String(80),unique=True) email=db.Column(db.String(64),unique=True) def __init__(self, username,email): self.username=username self.email=email def __repr__(self): return &apos;&lt;User %r&gt;&apos; % self.username app.py 123456789101112131415161718192021222324252627282930313233343536373839404142# coding:utf-8from flask import Flaskfrom flsksql import dbfrom flsksql import Userif __name__ == &apos;__main__&apos;: # åˆå§‹åŒ–æ•°æ®åº“ # db.create_all() # æ–°å¢ # user1=User(&apos;abc&apos;,&apos;abc@124.com&apos;) # user2=User(&apos;def&apos;,&apos;def@129.com&apos;) # db.session.add(user1) # db.session.add(user2) # ä½¿ç”¨commitæäº¤æ›´æ”¹ # db.session.commit() # æŸ¥è¯¢æ‰€æœ‰æ•°æ®ä¿¡æ¯ # users=User.query.all() # print(users) # æ¡ä»¶æŸ¥è¯¢ # admin=User.query.filter_by(username=&apos;abc&apos;).first() # print(admin) # æ¨¡ç³ŠæŸ¥è¯¢ # user2_query=User.query.filter(User.username.endswith(&apos;f&apos;)).first() # print(user2_query) # åˆ é™¤ # u3=User.query.first() # print(u3.username) # db.session.delete(u3) # db.session.commit() # æ›´æ”¹ # u4=User.query.first() # u4.username=u&apos;ä¸“å‡æœ¬&apos; # ä¸­æ–‡å¿…é¡»ä¸ºunicodeç±»å‹ï¼Œè€Œä¸æ˜¯strç±»å‹ # db.session.commit() é€šè¿‡ä¸Šä¸‹æ–‡çš„æ–¹å¼-init_app()database.pyâ€“æ•°æ®æ“ä½œæ–¹æ³•1234567891011121314151617181920212223242526# coding:utf-8from flask import Flaskfrom flask_sqlalchemy import SQLAlchemydb=SQLAlchemy()def create_app(config_name=None): app=Flask(__name__) # åœ¨æ­¤å¤„åŠ è½½é…ç½®æ–‡ä»¶ if config_name is not None: # app.config.from_object() # é»˜è®¤çš„config.py app.config.from_pyfile(config_name) # é€šè¿‡é…ç½®æ–‡ä»¶åç§°åŠ è½½é…ç½®æ–‡ä»¶ db.init_app(app) # åœ¨æ­¤å¤„åŠ è½½è“å›¾è®¾ç½® with app.app_context(): # æ·»åŠ æ•°æ®å¯¹è±¡çš„å¼•ç”¨ from models import * # åˆå§‹åŒ–æ•°æ®åº“ db.create_all() return app models.pyâ€“Modelå®ä½“123456789101112131415161718192021222324# coding:utf-8from database import dbclass User(db.Model): &quot;&quot;&quot;docstring for User&quot;&quot;&quot; __tablename__=&apos;users&apos; id=db.Column(db.Integer,primary_key=True) username=db.Column(db.String(80)) email=db.Column(db.String(64)) def __init__(self, username,email): self.username=username self.email=emailclass Address(db.Model): &quot;&quot;&quot;docstring for Address&quot;&quot;&quot; id=db.Column(db.Integer,primary_key=True) name=db.Column(db.String(32)) def __init__(self, name): self.name=name config.pyâ€“sqlé…ç½®æ–‡ä»¶123DEBUG=TrueSQLALCHEMY_DATABASE_URI=&apos;sqlite:///testabc.db&apos;SQLALCHEMY_TRACK_MODIFICATIONS=True app.pyâ€“é¡¹ç›®1234567891011121314151617181920212223242526# coding:utf-8from flask import Flaskfrom database import dbfrom database import create_appfrom models import User,Addressapp=create_app(&apos;config.py&apos;)@app.route(&apos;/&apos;)def index(): # user1=User(&apos;aaa&apos;,&apos;aaa@124.com&apos;) # user2=User(u&apos;é©¬äº‘&apos;,&apos;mayun@111.com&apos;) add1=Address(&apos;beijing motuoluola&apos;) # db.session.add(user1) db.session.add(add1) db.session.commit() return &quot;create complate&quot;@app.route(&apos;/show&apos;)def show(): u=User.query.filter(User.email.startswith(&apos;m&apos;)).first() return u.usernameif __name__ == &apos;__main__&apos;: app.run() é¡¹ç›®ç›®å½•123456flaskdemo app.py database.py models.py config.py testabc.db init_app() ç›¸å…³å‚è€ƒ ã€Flaskã€‘Flaskå’ŒSQLAlchemyï¼šinit_app - é˜¿ç§€çš„å­¦ä¹ ç¬”è®° - åšå®¢é¢‘é“ - CSDN.NET Flask and SQLAlchemy: init_app &middot; Blog Introduction into Contexts &#8212; Flask-SQLAlchemy Documentation (2.1) ä¸€å¯¹å¤šã€å¤šå¯¹å¤šå…³ç³»ä¸€å¯¹å¤šå¾…å®Œå–„ã€‚ å¤šå¯¹å¤šå¾…å®Œå–„ã€‚ æ–‡ä¸­æ‰€ç”¨å„ç±»åº“ç‰ˆæœ¬1234Flask==0.12Flask-SQLAlchemy==2.1Jinja2==2.8.1SQLAlchemy==1.1.4 ç›¸å…³å‚è€ƒ Flask-SQLAlchemy &mdash; Flask-SQLAlchemy 0.16 documentationâ€“ä¸­æ–‡ç‰ˆ Flask-SQLAlchemy &mdash; Flask-SQLAlchemy Documentation (2.1)â€“è‹±æ–‡ç‰ˆ ï¼ˆè¿™ä¸¤ä¸ªæ–‡æ¡£æ¯”å¯¹ç€å‚è€ƒï¼Œ0.16ç‰ˆä¸­æœ‰äº›æ–¹æ³•å·²ç»è¿‡æ—¶äº†ï¼Œä»£ç æŒ‰ç…§2.1çš„æ¥ï¼Œä¸­æ–‡é‡Šä¹‰å‚è€ƒ0.16ç‰ˆçš„ï¼‰ åœ¨ Flask ä¸­ä½¿ç”¨ SQLAlchemy &mdash; Flask 0.10 documentation flask-sqlalchemy ç®€å•ç¬”è®° - ç®€ä¹¦ Flaskå­¦ä¹ è®°å½•ä¹‹Flask-SQLAlchemy - agmcs - åšå®¢å›­ Flask-SQLAlchemy å­¦ä¹ æ€»ç»“ - python å­¦ä¹  - SegmentFault Flask Web Development â€”â€” æ•°æ®åº“ï¼ˆä¸Šï¼‰ - young - SegmentFault è¿™ä¸ªé…ç½®è¯´æ˜æ¯”è¾ƒè¯¦ç»† ä½¿ç”¨ Flask æ¡†æ¶å†™ç”¨æˆ·ç™»å½•åŠŸèƒ½çš„Demoæ—¶ç¢°åˆ°çš„å„ç§å‘ï¼ˆä¸€ï¼‰â€”â€”åˆ›å»ºåº”ç”¨ - cjnmy36723 - åšå®¢å›­ Flask-SQLAlchemyâ€“GitBook]]></content>
      <tags>
        <tag>Flask</tag>
        <tag>SQLAlchemy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonä¸‹æ“ä½œSQLAlchemy]]></title>
    <url>%2F2017%2F01%2F06%2Fuse-sqlalchemy-by-python%2F</url>
    <content type="text"><![CDATA[Pythonä¸­é€šè¿‡SQLAlchemyæ“ä½œæ•°æ®åº“ã€‚ å®‰è£…é€šè¿‡pipå®‰è£…SQLAlchemy 1$ pip install sqlalchemy åˆå§‹åŒ–æ•°æ®åº“è¿æ¥12# åˆå§‹åŒ–æ•°æ®åº“è¿æ¥engine=create_engine(&apos;sqlite:///./cnblogblog.db&apos;,echo=True) å…¶ä¸­ï¼Œecho=True è¡¨ç¤º æ˜¯å¦å°†æ‰§è¡Œè¿‡ç¨‹ä¸­çš„sqlè¯­å¥è¿›è¡Œè¾“å‡ºæ˜¾ç¤º å¸¸ç”¨æ•°æ®åº“è¿æ¥å†™æ³•æ•´ç†å¸¸ç”¨-ç›´æ¥æ‹·è´ sqliteå†…å­˜ï¼šengine = create_engine(&#39;sqlite:///:memory:&#39;, echo=True) sqliteæ–‡ä»¶: engine=create_engine(&#39;sqlite:///./cnblogblog.db&#39;,echo=True) mysql+pymysqlï¼šengine = create_engine(&quot;mysql+pymysql://username:password@hostname:port/dbname&quot;,echo=True) mssql+pymssql: engine = create_engine(&#39;mssql+pymssql://username:password@hostname:port/dbname&#39;,echo=True) 1&gt;&gt;&gt; from sqlalchemy import create_engine create_engine() ç”¨æ¥åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ã€‚SQLAlchemyç”¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºè¿æ¥ä¿¡æ¯ï¼š 1&apos;æ•°æ®åº“ç±»å‹+æ•°æ®åº“é©±åŠ¨åç§°://ç”¨æˆ·å:å£ä»¤@æœºå™¨åœ°å€:ç«¯å£å·/æ•°æ®åº“å&apos; sqlite å†…å­˜ ç¤ºä¾‹ engine = create_engine(&#39;sqlite:///:memory:&#39;, echo=True) sqlite æ–‡ä»¶ ç¤ºä¾‹ engine=create_engine(&#39;sqlite:///./cnblogblog.db&#39;,echo=True) mysqlé€šç”¨ engine = create_engine(&#39;mysql+mysqlconnector://root:password@localhost:3306/test&#39;) mysql+pymysql ç¤ºä¾‹ engine = create_engine(&quot;mysql+pymysql://username:password@hostname/dbname&quot;, encoding=&quot;utf8&quot;, echo=True) postgresql ç¤ºä¾‹ engine = create_engine(&#39;postgresql://scott:tiger@localhost:5432/mydatabase&#39;) PostgreSQL 12345678# defaultengine = create_engine(&apos;postgresql://scott:tiger@localhost/mydatabase&apos;)# psycopg2engine = create_engine(&apos;postgresql+psycopg2://scott:tiger@localhost/mydatabase&apos;)# pg8000engine = create_engine(&apos;postgresql+pg8000://scott:tiger@localhost/mydatabase&apos;) MySQL 1234567891011# defaultengine = create_engine(&apos;mysql://scott:tiger@localhost/foo&apos;)# mysql-pythonengine = create_engine(&apos;mysql+mysqldb://scott:tiger@localhost/foo&apos;)# MySQL-connector-pythonengine = create_engine(&apos;mysql+mysqlconnector://scott:tiger@localhost/foo&apos;)# OurSQLengine = create_engine(&apos;mysql+oursql://scott:tiger@localhost/foo&apos;) Oracle 123engine = create_engine(&apos;oracle://scott:tiger@127.0.0.1:1521/sidname&apos;)engine = create_engine(&apos;oracle+cx_oracle://scott:tiger@tnsname&apos;) MS SQL 12345# pyodbcengine = create_engine(&apos;mssql+pyodbc://scott:tiger@mydsn&apos;)# pymssqlengine = create_engine(&apos;mssql+pymssql://scott:tiger@hostname:port/dbname&apos;) SQLite 12345678910111213# sqlite://&lt;nohostname&gt;/&lt;path&gt;# where &lt;path&gt; is relative:engine = create_engine(&apos;sqlite:///foo.db&apos;)#Unix/Mac - 4 initial slashes in totalengine = create_engine(&apos;sqlite:////absolute/path/to/foo.db&apos;)#Windowsengine = create_engine(&apos;sqlite:///C:\\path\\to\\foo.db&apos;)#Windows alternative using raw stringengine = create_engine(r&apos;sqlite:///C:\path\to\foo.db&apos;)#memoryengine = create_engine(&apos;sqlite://&apos;) è¯¦è§å®˜ç½‘æ–‡æ¡£ï¼šEngine Configuration å¦‚ä½•è®¾ç½®åˆå§‹åŒ–è¡¨ç»“æ„æ—¶å­—æ®µçš„ ä¸»é”® è‡ªå¢ ç­‰å±æ€§sqliteä¸­å¦‚æœè®¾ç½®ä¸»é”®è‡ªå¢ï¼Œè¿˜éœ€è¦æ·»åŠ  __table_args__ å‚æ•°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 12345class Person(Base): __tablename__ = &quot;person&quot; __table_args__ = &#123;&apos;sqlite_autoincrement&apos;: True&#125; id=Column(Integer,primary_key=True,autoincrement=True) sqlalchemy - Pylons, SQlite and autoincrementing fields - Stack Overflow è®¾ç½®è¡¨ç»“æ„çš„ ä¸å¯ç©º é»˜è®¤å€¼ å”¯ä¸€ ç­‰å±æ€§1234567891011# å®šä¹‰Userå¯¹è±¡class User(Base): &quot;&quot;&quot;Users table&quot;&quot;&quot; # è¡¨çš„åå­— __tablename__=&apos;users&apos; __table_args__=&#123;&apos;sqlite_autoincrement&apos;: True&#125; # è¡¨ç»“æ„ id=Column(Integer,primary_key=True,autoincrement=True) name=Column(String(32),nullable=False) age=Column(Integer,default=0) password=Column(String(64),unique=True) æ’å…¥ä¸­æ–‡æ•°æ®ç›´æ¥æ’å…¥ä¸­æ–‡æ•°æ®ï¼Œå¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) You must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings. ç›¸åº”çš„è§£å†³æ–¹æ³•æ˜¯ï¼šå°† str ç±»å‹çš„ä¸­æ–‡è½¬æˆ unicode ç±»å‹å†æ’å…¥å³å¯ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹: 1234567# æ·»åŠ ä¸€æ¡æ•°æ®def addUserForZhCn(): session=DBSession() new_user=User(name=u&apos;å…³ç¾½2&apos;,password=&apos;12322233&apos;) session.add(new_user) session.commit() session.close() å‚è€ƒè‡ªï¼š Python å®˜æ–¹æ–‡æ¡£ä¸­ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ï¼šuse of sys.setdefaultencoding() has always been discouragedï¼Œåœ¨æ–‡ä»¶å¤´å†™ä¸Š # coding: utf-8 ä¹‹ç±»çš„æ³¨é‡Šå¹¶ä¸”åœ¨ Unicode å­—ç¬¦ä¸²å‰åŠ ä¸Š u å°±å¯ä»¥äº†ã€‚ Flask Sqlalchemyä¸­æ–‡æ¨¡ç³Šæœç´¢é”™è¯¯ Mysql æŒ‡å®šè¡¨çš„å¼•æ“å’Œç¼–ç æ ¼å¼123456789101112from sqlalchemy import Column, Integer, Stringclass User(BaseModel): __tablename__=&apos;users&apos; __table_args__=&#123; &quot;mysql_engine&quot;:&quot;InnoDB&quot;, # è¡¨çš„å¼•æ“ &quot;mysql_charset&quot;:&quot;utf8&quot; # è¡¨çš„ç¼–ç æ ¼å¼ &#125; id=Column(&quot;id&quot;,Integer,primary_key=True,autoincrement=True) name=Column(&quot;name&quot;,String(50),nullable=False) age=Column(&quot;age&quot;,Integer,default=0) å¦‚æœè®°å½•å­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ 1session.merge() æ¨¡å‹çš„å±æ€§åç§°å’Œè¡¨çš„å­—æ®µåç§°ä¸ä¸€è‡´12id=Column(&quot;id&quot;,Integer,primary_key=True,autoincrement=True)name=Column(&quot;name&quot;,String(50),nullable=False) å¢åˆ æ”¹ æŸ¥è¯¢å¢åˆ æ”¹éœ€è¦ commit æ“ä½œ : 1234session=DBSession()duser=session.query(User).filter(User.id==2).delete()session.commit()session.close() æŸ¥è¯¢ä¸éœ€è¦ commit æ“ä½œ: 1234session=DBSession()quser=session.query(User).filter(User.id==4).one()print(&apos;name:&apos;,quser.name)session.close() first() å’Œ one() çš„åŒºåˆ«query.first()ï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ query.one()æœ‰ä¸”åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶æ‰æ­£ç¡®è¿”å› first()æ–¹æ³•é™åˆ¶å¹¶ä»…ä½œä¸ºæ ‡é‡è¿”å›ç»“æœé›†çš„ç¬¬ä¸€æ¡è®°å½• one()æ–¹æ³•ï¼Œå®Œæ•´çš„æå–æ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¹¶ä¸”å¦‚æœæ²¡æœ‰æ˜ç¡®çš„ä¸€æ¡è®°å½•è¡Œ(æ²¡æœ‰æ‰¾åˆ°è¿™æ¡è®°å½•)æˆ–è€…ç»“æœä¸­å­˜åœ¨å¤šæ¡è®°å½•è¡Œï¼Œå°†ä¼šå¼•å‘é”™è¯¯å¼‚å¸¸NoResultFoundæˆ–è€…MultipleResultsFoundã€‚ å½“æ²¡æœ‰æ•°æ®è¡Œè¿”å›æ—¶ï¼Œä½¿ç”¨ one() æ–¹æ³•ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ one_or_none() æ–¹æ³•æ¥ä»£æ›¿ï¼Œå½“æ²¡æœ‰æ•°æ®æ—¶ï¼Œä¼šè¿”å› None è€Œä¸æ˜¯å¼‚å¸¸ã€‚ æ‰§è¡Œsqlè¯­å¥ç»‘å®šå‚æ•°ä¹Ÿå¯ä»¥ç”¨åŸºäºå­—ç¬¦ä¸²çš„SQLæŒ‡æ´¾ï¼Œä½¿ç”¨å†’å·æ¥æ ‡è®°æ›¿ä»£å‚æ•°ï¼Œç„¶åå†ä½¿ç”¨params()æ–¹æ³•æŒ‡å®šç›¸åº”çš„å€¼ã€‚ 12session.query(User).filter(&quot;id&lt;:value and name=:name&quot;).\params(value=224, name=&apos;fred&apos;).order_by(User.id).one() execute() æ–¹æ³• 1234567891011121314151617s=DBSession()# ä¸èƒ½ç”¨ `?` çš„æ–¹å¼æ¥ä¼ é€’å‚æ•° è¦ç”¨ `:param` çš„å½¢å¼æ¥æŒ‡å®šå‚æ•°# s.execute(&apos;INSERT INTO users (name, age, password) VALUES (?, ?, ?)&apos;,(&apos;bigpang&apos;,2,&apos;1122121&apos;)) # è¿™æ ·æ‰§è¡ŒæŠ¥é”™ # s.execute(&apos;INSERT INTO users (name, age, password) VALUES (:aa, :bb, :cc)&apos;,(&#123;&apos;aa&apos;:&apos;bigpang2&apos;,&apos;bb&apos;:22,&apos;cc&apos;:&apos;998&apos;&#125;))# s.commit()# è¿™æ ·æ‰§è¡ŒæˆåŠŸres=s.execute(&apos;select * from users where age=:aaa&apos;,&#123;&apos;aaa&apos;:4&#125;)# print(res[&apos;name&apos;]) # é”™è¯¯# print(res.name) # é”™è¯¯# print(type(res)) # é”™è¯¯for r in res: print(r[&apos;name&apos;]) s.close() å¯å‚è€ƒï¼špython - How to execute raw SQL in SQLAlchemy-flask app - Stack Overflow æ‰§è¡Œsqlè¯­å¥ é«˜çº§ æ‰§è¡Œsqlè¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ connection æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ session æ–¹å¼ sqlalchemyä¸‹çš„ä¼ ç»Ÿconnectionæ–¹å¼ï¼Œæ‰§è¡Œsqlè¯­å¥æ—¶ä¸éœ€è¦ cursor å…‰æ ‡ï¼Œæ‰§è¡Œå¢åˆ æ”¹ç›´æ¥ç”Ÿæ•ˆï¼Œæ‰§è¡Œsqlè¯­å¥ä¸éœ€è¦ commit æ“ä½œã€‚ sqlalchemyä¸‹çš„ä¼ ç»Ÿconnectionæ–¹å¼ï¼Œå‚æ•°å½¢å¼ä¸ä¼ ç»Ÿæ–¹å¼ç›¸åŒï¼Œä½¿ç”¨ ? å ä½ï¼Œå…ƒç¥–å½¢å¼ä¼ å€¼ sqlalchemyä¸‹çš„sessionæ–¹å¼ï¼Œæ‰§è¡Œå¢åˆ æ”¹éœ€è¦ commit æ“ä½œã€‚ sqlalchemyä¸‹çš„sessionæ–¹å¼ï¼Œå‚æ•°å½¢å¼ä¸º dict, åœ¨sqlè¯­å¥ä¸­ä½¿ç”¨ :key å ä½ï¼Œdictå½¢å¼ä¼ å€¼ ç¤ºä¾‹ä»£ç 123456789101112131415161718192021222324252627282930313233# **ä¼ ç»Ÿ connectionæ–¹å¼**# åˆ›å»ºä¸€ä¸ªconnectionå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•ä¸è°ƒç”¨pythonè‡ªå¸¦çš„sqliteä½¿ç”¨æ–¹å¼ç±»ä¼¼# ä½¿ç”¨with æ¥åˆ›å»º connï¼Œä¸éœ€è¦æ˜¾ç¤ºæ‰§è¡Œå…³é—­è¿æ¥# with engine.connect() as conn:# res=conn.execute(&apos;select * from users&apos;)# data=res.fetchone()# print(&apos;user is %s&apos; %data[1])# ä¸pythonè‡ªå¸¦çš„sqliteä¸åŒï¼Œè¿™é‡Œä¸éœ€è¦ cursor å…‰æ ‡ï¼Œæ‰§è¡Œsqlè¯­å¥ä¸éœ€è¦commitã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œåˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œä¹Ÿä¸éœ€è¦commit.# **ä¼ ç»Ÿ connection äº‹åŠ¡**with engine.connect() as conn: trans=conn.begin() try: r1=conn.execute(&quot;select * from users&quot;) print(r1.fetchone()[1]) r2=conn.execute(&quot;insert into users (name,age,password) values (?,?,?)&quot;,(&apos;tang&apos;,5,&apos;133444&apos;)) trans.commit() except: trans.rollback() raise# **session**session=DBSession()session.execute(&apos;select * from users&apos;)session.execute(&apos;insert into users (name,age,password) values (:name,:age,:password)&apos;,&#123;&quot;name&quot;:&apos;dayuzhishui&apos;,&apos;age&apos;:6,&apos;password&apos;:&apos;887&apos;&#125;)# æ³¨æ„å‚æ•°ä½¿ç”¨dictï¼Œå¹¶åœ¨sqlè¯­å¥ä¸­ä½¿ç”¨:keyå ä½# å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œéœ€è¦ commitsession.commit()# ç”¨å®Œè®°å¾—å…³é—­ï¼Œä¹Ÿå¯ä»¥ç”¨ withsession.close() è¯¦æƒ…å¯è§ï¼šsqlalchemyå­¦ä¹ ç¬”è®° - pythonå­¦ä¹ ç¬”è®° - SegmentFault å®Œæ•´æµ‹è¯•ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228# coding:utf-8from sqlalchemy import create_enginefrom sqlalchemy.ext.declarative import declarative_basefrom sqlalchemy import Column, Integer, Stringfrom sqlalchemy.orm import sessionmaker# ***************************# åˆå§‹åŒ–æ•°æ®åº“è¿æ¥engine=create_engine(&apos;sqlite:///./cnblogblog.db&apos;,echo=True)# åˆ›å»ºå¯¹è±¡çš„åŸºç±»Base=declarative_base()# åˆ›å»ºä¼šè¯ç±»DBSession=sessionmaker(bind=engine)# ******************# å®šä¹‰Userå¯¹è±¡class User(Base): &quot;&quot;&quot;Users table&quot;&quot;&quot; # è¡¨çš„åå­— __tablename__=&apos;users&apos; __table_args__=&#123;&apos;sqlite_autoincrement&apos;: True&#125; # è¡¨ç»“æ„ id=Column(Integer,primary_key=True,autoincrement=True) name=Column(String(32),nullable=False) age=Column(Integer,default=0) password=Column(String(64),unique=True)class Blog(Base): &quot;&quot;&quot;docstring for Blog&quot;&quot;&quot; __tablename__=&apos;blogs&apos; id=Column(Integer,primary_key=True) title=Column(String(100)) desc=Column(String(500))class Tips(Base): &quot;&quot;&quot;docstring for Tips&quot;&quot;&quot; __tablename__=&apos;tips&apos; id=Column(Integer,primary_key=True) name=Column(String(32))# ***********************# æ·»åŠ ä¸€æ¡æ•°æ®def newUser(): # åˆ›å»ºä¼šè¯å¯¹è±¡ session=DBSession() new_user=User(name=&apos;Jery&apos;,password=&apos;123&apos;) session.add(new_user) session.commit() session.close()# æ·»åŠ ä¸€æ¡æ•°æ®def addUserForZhCn(): session=DBSession() new_user=User(name=u&apos;å…³ç¾½2&apos;,password=&apos;12322233&apos;) session.add(new_user) session.commit() session.close()# æ–°å¢å¤šæ¡æ•°æ®def addmoreUser(): session=DBSession() session.add_all([ User(name=&apos;guanyu&apos;,age=4,password=&apos;11111&apos;), User(name=&apos;zhangfei&apos;,password=&apos;2233&apos;), User(name=&apos;zhenji&apos;,password=&apos;44556&apos;) ]) session.commit() session.close()# æŸ¥è¯¢def queryUser(): session=DBSession() quser=session.query(User).filter(User.id==4).one() print(&apos;name:&apos;,quser.name) session.close()# åˆ é™¤def deleteUser(): session=DBSession() duser=session.query(User).filter(User.id==2).delete() session.commit() session.close()# æ‰§è¡Œsqlè¯­å¥def SQlUser(): s=DBSession() # ä¸èƒ½ç”¨ `?` çš„æ–¹å¼æ¥ä¼ é€’å‚æ•° è¦ç”¨ `:param` çš„å½¢å¼æ¥æŒ‡å®šå‚æ•° # s.execute(&apos;INSERT INTO users (name, age, password) VALUES (?, ?, ?)&apos;,(&apos;bigpang&apos;,2,&apos;1122121&apos;)) # è¿™æ ·æ‰§è¡ŒæŠ¥é”™ # s.execute(&apos;INSERT INTO users (name, age, password) VALUES (:aa, :bb, :cc)&apos;,(&#123;&apos;aa&apos;:&apos;bigpang2&apos;,&apos;bb&apos;:22,&apos;cc&apos;:&apos;998&apos;&#125;)) # s.commit() # è¿™æ ·æ‰§è¡ŒæˆåŠŸ res=s.execute(&apos;select * from users where age=:aaa&apos;,&#123;&apos;aaa&apos;:4&#125;) # print(res[&apos;name&apos;]) # é”™è¯¯ # print(res.name) # é”™è¯¯ # print(type(res)) # é”™è¯¯ for r in res: print(r[&apos;name&apos;]) s.close()# æ‰§è¡Œsqlè¯­å¥def SQlUser2(): # **ä¼ ç»Ÿ connectionæ–¹å¼** # åˆ›å»ºä¸€ä¸ªconnectionå¯¹è±¡ï¼Œä½¿ç”¨æ–¹æ³•ä¸è°ƒç”¨pythonè‡ªå¸¦çš„sqliteä½¿ç”¨æ–¹å¼ç±»ä¼¼ # ä½¿ç”¨with æ¥åˆ›å»º connï¼Œä¸éœ€è¦æ˜¾ç¤ºæ‰§è¡Œå…³é—­è¿æ¥ # with engine.connect() as conn: # res=conn.execute(&apos;select * from users&apos;) # data=res.fetchone() # print(&apos;user is %s&apos; %data[1]) # ä¸pythonè‡ªå¸¦çš„sqliteä¸åŒï¼Œè¿™é‡Œä¸éœ€è¦ cursor å…‰æ ‡ï¼Œæ‰§è¡Œsqlè¯­å¥ä¸éœ€è¦commitã€‚å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œåˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œä¹Ÿä¸éœ€è¦commit. # **ä¼ ç»Ÿ connection äº‹åŠ¡** with engine.connect() as conn: trans=conn.begin() try: r1=conn.execute(&quot;select * from users&quot;) print(r1.fetchone()[1]) r2=conn.execute(&quot;insert into users (name,age,password) values (?,?,?)&quot;,(&apos;tang&apos;,5,&apos;133444&apos;)) trans.commit() except: trans.rollback() raise # **session** session=DBSession() session.execute(&apos;select * from users&apos;) session.execute(&apos;insert into users (name,age,password) values (:name,:age,:password)&apos;,&#123;&quot;name&quot;:&apos;dayuzhishui&apos;,&apos;age&apos;:6,&apos;password&apos;:&apos;887&apos;&#125;) # æ³¨æ„å‚æ•°ä½¿ç”¨dictï¼Œå¹¶åœ¨sqlè¯­å¥ä¸­ä½¿ç”¨:keyå ä½ # å¦‚æœæ˜¯å¢åˆ æ”¹ï¼Œéœ€è¦ commit session.commit() # ç”¨å®Œè®°å¾—å…³é—­ï¼Œä¹Ÿå¯ä»¥ç”¨ with session.close()# æ›´å¤šæ“ä½œdef TestUser(): session=DBSession() # test1 # ä½¿ç”¨mergeæ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ’å…¥ï¼ˆåªåˆ¤æ–­ä¸»é”®ï¼Œä¸åˆ¤æ–­uniqueåˆ—ï¼‰ # t1=session.query(User).filter(User.name==&apos;zhenji&apos;).first() # t1.age=34 # session.merge(t1) # session.commit() # test2 # mergeæ–¹æ³•ï¼Œå¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰åˆ™æ·»åŠ  # t2=User() # t2.name=&apos;haha&apos; # session.merge(t2) # session.commit() # test3 # è·å–ç¬¬2-3é¡¹ # tUser=session.query(User)[1:3] # for u in tUser: # print(u.id) # test4 # if __name__ == &apos;__main__&apos;: # åˆ é™¤å…¨éƒ¨æ•°æ®åº“ # Base.metadata.drop_all(engine) # åˆå§‹åŒ–æ•°æ®åº“ # Base.metadata.create_all(engine) # åˆ é™¤å…¨éƒ¨æ•°æ®åº“ # Base.metadata.drop_all(engine) # åˆ é™¤æŒ‡å®šçš„æ•°æ®åº“ # å¦‚åˆ é™¤ Blogsè¡¨ # è¯¦è§ ï¼šhttp://stackoverflow.com/questions/35918605/how-to-delete-a-table-in-sqlalchemy # Blog.__table__.drop(engine) # æ–°å¢æ•°æ® # newUser() # æ–°å¢å¤šæ¡æ•°æ® # addmoreUser() # æ–°å¢æ•°æ®å«ä¸­æ–‡ # addUserForZhCn() # æŸ¥è¯¢æ•°æ® # queryUser() # åˆ é™¤ # deleteUser() # æµ‹è¯• # TestUser() # æ‰§è¡Œsqlè¯­å¥ # SQlUser() # æ‰§è¡Œsqlè¯­å¥2 SQlUser2() print(&apos;ok&apos;) sqlalchemy æ•™ç¨‹å…¥é—¨ Test.py ä½œä¸ºä¸€ä¸ªPythonerï¼Œä¸ä¼šSQLAlchemy â˜† SQLAlchemy ORMæ•™ç¨‹ä¹‹ä¸€ï¼šCreate - ç®€ä¹¦ â˜† SQLAlchemy ORMæ•™ç¨‹ä¹‹äºŒï¼šQuery - ç®€ä¹¦ â˜† SQLAlchemy ORMæ•™ç¨‹ä¹‹ä¸‰ï¼šRelationship - ç®€ä¹¦ â˜† å¢åˆ æ”¹æŸ¥å¸¸ç”¨å‘½ä»¤ sqlalchemyå­¦ä¹ ç¬”è®° - pythonå­¦ä¹ ç¬”è®° - SegmentFault â˜† SQLAlchemy ä½¿ç”¨ç»éªŒ note/sqlalchemy.md at master Â· lzjun567/note Â· GitHub]]></content>
      <tags>
        <tag>Python</tag>
        <tag>SQLAlchemy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxç³»ç»Ÿå®æ—¶ç›‘æ§å·¥å…·-Glances]]></title>
    <url>%2F2017%2F01%2F05%2Flinux-real-time-monitoring-glances%2F</url>
    <content type="text"><![CDATA[Ubuntuç³»ç»Ÿä¸‹å®‰è£…é€šè¿‡ apt-get æ–¹å¼æ¥å®‰è£…12$ sudo apt-get update$ sudo apt-get install glances é€šè¿‡ pip æ–¹å¼æ¥å®‰è£…(æ¨è)12$ sudo pip install python-dev$ sudo pip install glances å»ºè®®é€šè¿‡ pip çš„æ–¹å¼æ¥å®‰è£…ï¼Œå› ä¸ºæˆ‘é€šè¿‡ apt-get æ–¹å¼å®‰è£…çš„ glances ç‰ˆæœ¬ä¸º Glances version 1.7.3 with PsUtil 1.2.1 ï¼Œè€Œé€šè¿‡ pip å®‰è£…çš„ä¸º Glances v2.7.1 with psutil v4.3.1 ï¼Œæ—§ç‰ˆæœ¬çš„åŠŸèƒ½æ¯”è¾ƒç®€å•ã€‚ åœ¨å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°æŠ¥é”™ï¼š 1warning: no previously-included files matching &apos;*&apos; found under directory &apos;docs/_build&apos; é¦–å…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¹¶å°è¯•å†æ¬¡å®‰è£…ï¼š 1sudo apt-get install libpq-dev python-dev é€šè¿‡å®˜æ–¹ç»™å‡ºçš„æ–¹å¼å®‰è£…1$ curl -L https://bit.ly/glances | /bin/bash or: 1$ wget -O- https://bit.ly/glances | /bin/bash Alpineç³»ç»Ÿä¸‹å®‰è£…æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…123$ apk update$ apk add python-dev py-pip py2-psutil$ pip install glances ä½¿ç”¨å®‰è£…å®Œæˆåï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å¯åŠ¨ Glancesï¼š 1$ glances å¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š 12345678910111213141516171819MyServer (Ubuntu 14.04 64bit / Linux 4.4.0-38-generic) Uptime: 1:41:59CPU [ 3.0%] CPU 3.0% nice: 0.0% ctx_sw: 193 MEM 6.5% SWAP 0.0% LOAD 2-coreMEM [ 6.5%] user: 1.3% irq: 0.0% inter: 266 total: 1.95G total: 2.24G 1 min: 0.00SWAP [ 0%] system: 1.3% iowait: 0.0% sw_int: 372 used: 129M used: 0 5 min: 0.00 idle: 97.1% steal: 0.2% free: 1.82G free: 2.24G 15 min: 0.00NETWORK Rx/s Tx/s TASKS 114 (140 thr), 1 run, 113 slp, 0 oth sorted automaticallydocker0 0b 0beth0 75Kb 44Kb CPU% MEM% VIRT RES PID USER NI S TIME+ R/s W/s Command lo 0b 0b 4.7 1.2 377M 23.2M 11918 tiger 0 R 0:01.90 0 0 /usr/bin/python / 0.3 0.1 250M 2.63M 556 syslog 0 S 0:00.18 0 0 rsyslogdDISK I/O R/s W/s 0.0 0.0 0 0 18 root -20 S 0:00.00 0 0 perfdm-0 0 19K 0.0 0.1 23.1M 2.12M 915 root 0 S 0:00.00 0 0 crondm-1 0 0 0.0 0.2 42.4M 3.22M 630 root 0 S 0:00.10 0 0 /lib/systemd/systxvda1 0 0 0.0 0.0 0 0 19 root 0 S 0:00.00 0 0 xenwatchxvda2 0 0 0.0 0.0 0 0 81 root -20 S 0:00.00 0 0 biosetxvda5 0 19K 0.0 0.0 0 0 2 root 0 S 0:00.00 0 0 kthreaddxvdb 0 0 0.0 0.0 0 0 71 root -20 S 0:00.00 0 0 bioset è¦é€€å‡º Glances ç»ˆç«¯ï¼ŒæŒ‰ ESC é”®æˆ– Ctrl + Cã€‚ é€šè¿‡browseræŸ¥çœ‹å…ˆå®‰è£… bottle ï¼Œç„¶åé€šè¿‡ -w å‚æ•°å¯åŠ¨æµè§ˆå™¨æœåŠ¡ï¼Œé»˜è®¤ä¼šç›‘å¬ 61208 ç«¯å£ã€‚ æ›´å¤šå‘½ä»¤å¯é€šè¿‡å‘½ä»¤ glances --help æŸ¥çœ‹å¸®åŠ©ã€‚ 1234$ sudo pip install bottle$ glances -wGlances web server started on http://0.0.0.0:61208/ ç„¶ååœ¨æµè§ˆå™¨ç«¯è¾“å…¥ç½‘å€å³å¯æŸ¥çœ‹ã€‚ ç›¸å…³å‚è€ƒ glances GitHub - nicolargo/glances: Glances an Eye on your system. A top/htop alternative. Glances &mdash; Glances 2.7.1 documentation]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>Glances</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¾®ä¿¡å°ç¨‹åºå¼€å‘ä½“éªŒ]]></title>
    <url>%2F2017%2F01%2F05%2Fwx-xiaochengxu-development-experience%2F</url>
    <content type="text"><![CDATA[ç®€æ˜“æ•™ç¨‹å®˜æ–¹æ–‡æ¡£ ç®€æ˜“æ•™ç¨‹-å°ç¨‹åº app.jsã€app.jsonã€app.wxss è¿™ä¸‰ä¸ªï¼Œ.jsåç¼€çš„æ˜¯è„šæœ¬æ–‡ä»¶ï¼Œ.jsonåç¼€çš„æ–‡ä»¶æ˜¯é…ç½®æ–‡ä»¶ï¼Œ.wxssåç¼€çš„æ˜¯æ ·å¼è¡¨æ–‡ä»¶ã€‚ app.jsæ˜¯å°ç¨‹åºçš„è„šæœ¬ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç›‘å¬å¹¶å¤„ç†å°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€å£°æ˜å…¨å±€å˜é‡ã€‚è°ƒç”¨æ¡†æ¶æä¾›çš„ä¸°å¯Œçš„ APIï¼Œå¦‚æœ¬ä¾‹çš„åŒæ­¥å­˜å‚¨åŠåŒæ­¥è¯»å–æœ¬åœ°æ•°æ®ã€‚ app.json æ˜¯å¯¹æ•´ä¸ªå°ç¨‹åºçš„å…¨å±€é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®å°ç¨‹åºæ˜¯ç”±å“ªäº›é¡µé¢ç»„æˆï¼Œé…ç½®å°ç¨‹åºçš„çª—å£èƒŒæ™¯è‰²ï¼Œé…ç½®å¯¼èˆªæ¡æ ·å¼ï¼Œé…ç½®é»˜è®¤æ ‡é¢˜ã€‚æ³¨æ„è¯¥æ–‡ä»¶ä¸å¯æ·»åŠ ä»»ä½•æ³¨é‡Šã€‚è¯¦è§ï¼šé…ç½® app.wxss æ˜¯æ•´ä¸ªå°ç¨‹åºçš„å…¬å…±æ ·å¼è¡¨ã€‚ åˆ›å»ºé¡µé¢é¡µé¢éƒ½åœ¨ pages ç›®å½•ä¸‹ã€‚ å¾®ä¿¡å°ç¨‹åºä¸­çš„æ¯ä¸€ä¸ªé¡µé¢çš„ã€è·¯å¾„+é¡µé¢åã€‘éƒ½éœ€è¦å†™åœ¨ app.json çš„ pages ä¸­ï¼Œä¸” pages ä¸­çš„ç¬¬ä¸€ä¸ªé¡µé¢æ˜¯å°ç¨‹åºçš„é¦–é¡µã€‚ æ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢æ˜¯ç”±åŒè·¯å¾„ä¸‹åŒåçš„å››ä¸ªä¸åŒåç¼€æ–‡ä»¶çš„ç»„æˆï¼Œå¦‚ï¼šindex.jsã€index.wxmlã€index.wxssã€index.jsonã€‚.jsåç¼€çš„æ–‡ä»¶æ˜¯è„šæœ¬æ–‡ä»¶ï¼Œ.jsonåç¼€çš„æ–‡ä»¶æ˜¯é…ç½®æ–‡ä»¶ï¼Œ.wxssåç¼€çš„æ˜¯æ ·å¼è¡¨æ–‡ä»¶ï¼Œ.wxmlåç¼€çš„æ–‡ä»¶æ˜¯é¡µé¢ç»“æ„æ–‡ä»¶ã€‚ é¡µé¢çš„æ ·å¼è¡¨æ˜¯éå¿…è¦çš„ã€‚å½“æœ‰é¡µé¢æ ·å¼è¡¨æ—¶ï¼Œé¡µé¢çš„æ ·å¼è¡¨ä¸­çš„æ ·å¼è§„åˆ™ä¼šå±‚å è¦†ç›– app.wxss ä¸­çš„æ ·å¼è§„åˆ™ã€‚ æ¡†æ¶æ¡†æ¶æä¾›äº†è‡ªå·±çš„è§†å›¾å±‚æè¿°è¯­è¨€ WXML å’Œ WXSSï¼Œä»¥åŠåŸºäº JavaScript çš„é€»è¾‘å±‚æ¡†æ¶ï¼Œå¹¶åœ¨è§†å›¾å±‚ä¸é€»è¾‘å±‚é—´æä¾›äº†æ•°æ®ä¼ è¾“å’Œäº‹ä»¶ç³»ç»Ÿï¼Œå¯ä»¥è®©å¼€å‘è€…å¯ä»¥æ–¹ä¾¿çš„èšç„¦äºæ•°æ®ä¸é€»è¾‘ä¸Šã€‚ å“åº”çš„æ•°æ®ç»‘å®šæ¡†æ¶çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå“åº”çš„æ•°æ®ç»‘å®šç³»ç»Ÿã€‚ æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºä¸¤å—è§†å›¾å±‚ï¼ˆViewï¼‰å’Œé€»è¾‘å±‚ï¼ˆApp Serviceï¼‰ æ–‡ä»¶ç»“æ„æ¡†æ¶ç¨‹åºåŒ…å«ä¸€ä¸ªæè¿°æ•´ä½“ç¨‹åºçš„ app å’Œå¤šä¸ªæè¿°å„è‡ªé¡µé¢çš„ pageã€‚ ä¸€ä¸ªæ¡†æ¶ç¨‹åºä¸»ä½“éƒ¨åˆ†ç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œå¿…é¡»æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼šapp.js app.json app.wxss ä¸€ä¸ªæ¡†æ¶é¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œåˆ†åˆ«æ˜¯ï¼š.js .wxml .wxss .json é…ç½®ä½¿ç”¨app.jsonæ–‡ä»¶æ¥å¯¹å¾®ä¿¡å°ç¨‹åºè¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£è¡¨ç°ã€è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ã€è®¾ç½®å¤š tab ç­‰ã€‚ app.json é…ç½®é¡¹åˆ—è¡¨ pages è®¾ç½®é¡µé¢è·¯å¾„ window è®¾ç½®é»˜è®¤é¡µé¢çš„çª—å£è¡¨ç° tabBar è®¾ç½®åº•éƒ¨ tab çš„è¡¨ç° networkTimeout è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ debug è®¾ç½®æ˜¯å¦å¼€å¯ debug æ¨¡å¼ pages æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ¥æŒ‡å®šå°ç¨‹åºç”±å“ªäº›é¡µé¢ç»„æˆã€‚ å¯¹åº”é¡µé¢çš„ã€è·¯å¾„+æ–‡ä»¶åã€‘ä¿¡æ¯ æ•°ç»„çš„ç¬¬ä¸€é¡¹ä»£è¡¨å°ç¨‹åºçš„åˆå§‹é¡µé¢ã€‚ å°ç¨‹åºä¸­æ–°å¢/å‡å°‘é¡µé¢ï¼Œéƒ½éœ€è¦å¯¹ pages æ•°ç»„è¿›è¡Œä¿®æ”¹ æ–‡ä»¶åä¸éœ€è¦å†™æ–‡ä»¶åç¼€ windowè®¾ç½®å°ç¨‹åºçš„çŠ¶æ€æ ã€å¯¼èˆªæ¡ã€æ ‡é¢˜ã€çª—å£èƒŒæ™¯è‰²ã€‚ navigationBarBackgroundColor å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼Œå¦‚â€#000000â€ navigationBarTextStyle å¯¼èˆªæ æ ‡é¢˜é¢œè‰²ï¼Œä»…æ”¯æŒ black/white navigationBarTitleText å¯¼èˆªæ æ ‡é¢˜æ–‡å­—å†…å®¹ backgroundColor çª—å£çš„èƒŒæ™¯è‰² backgroundTextStyle ä¸‹æ‹‰èƒŒæ™¯å­—ä½“ã€loading å›¾çš„æ ·å¼ï¼Œä»…æ”¯æŒ dark/light enablePullDownRefresh æ˜¯å¦å¼€å¯ä¸‹æ‹‰åˆ·æ–° false/true tabBarå¤š tab åº”ç”¨ï¼ˆå®¢æˆ·ç«¯çª—å£çš„åº•éƒ¨æœ‰tabæ å¯ä»¥åˆ‡æ¢é¡µé¢ï¼‰, å¯ä»¥é€šè¿‡ tabBar é…ç½®é¡¹æŒ‡å®š tab æ çš„è¡¨ç°ï¼Œä»¥åŠ tab åˆ‡æ¢æ—¶æ˜¾ç¤ºçš„å¯¹åº”é¡µé¢ã€‚ tabBar æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½é…ç½®æœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tabï¼Œtab æŒ‰æ•°ç»„çš„é¡ºåºæ’åºã€‚ color tab ä¸Šçš„æ–‡å­—é»˜è®¤é¢œè‰² selectedColor tab ä¸Šçš„æ–‡å­—é€‰ä¸­æ—¶çš„é¢œè‰² backgroundColor tab çš„èƒŒæ™¯è‰² borderStyle tabbarä¸Šè¾¹æ¡†çš„é¢œè‰²ï¼Œ ä»…æ”¯æŒ black/white list tab çš„åˆ—è¡¨ï¼Œæœ€å°‘2ä¸ªã€æœ€å¤š5ä¸ª tab list å±æ€§å€¼ï¼š pagePath é¡µé¢è·¯å¾„ï¼Œå¿…é¡»åœ¨ pages ä¸­å…ˆå®šä¹‰ text tab ä¸ŠæŒ‰é’®æ–‡å­— iconPath å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kb selectedIconPath é€‰ä¸­æ—¶çš„å›¾ç‰‡è·¯å¾„ï¼Œicon å¤§å°é™åˆ¶ä¸º40kb networkTimeoutè®¾ç½®å„ç§ç½‘ç»œè¯·æ±‚çš„è¶…æ—¶æ—¶é—´ã€‚ request wx.requestçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ connectSocket wx.connectSocketçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ uploadFile wx.uploadFileçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ downloadFile wx.downloadFileçš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ debugåœ¨æ§åˆ¶å°é¢æ¿ä¸­è°ƒè¯•ä¿¡æ¯ä»¥ info çš„å½¢å¼ç»™å‡ºï¼Œå…¶ä¿¡æ¯æœ‰Pageçš„æ³¨å†Œï¼Œé¡µé¢è·¯ç”±ï¼Œæ•°æ®æ›´æ–°ï¼Œäº‹ä»¶è§¦å‘ ã€‚ page.jsonæ¯ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¹Ÿå¯ä»¥ä½¿ç”¨.jsonæ–‡ä»¶æ¥å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨ç°è¿›è¡Œé…ç½®ã€‚ é¡µé¢çš„é…ç½®æ¯”app.jsonå…¨å±€é…ç½®ç®€å•å¾—å¤šï¼Œåªæ˜¯è®¾ç½® app.json ä¸­çš„ window é…ç½®é¡¹çš„å†…å®¹ï¼Œé¡µé¢ä¸­é…ç½®é¡¹ä¼šè¦†ç›– app.json çš„ window ä¸­ç›¸åŒçš„é…ç½®é¡¹ã€‚ é¡µé¢çš„.jsonåªèƒ½è®¾ç½® window ç›¸å…³çš„é…ç½®é¡¹,ä»¥å†³å®šæœ¬é¡µé¢çš„çª—å£è¡¨ç°ï¼Œæ— éœ€å†™ window è¿™ä¸ªé”®ã€‚ é€»è¾‘å±‚AppApp()App() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºã€‚æ¥å—ä¸€ä¸ª object å‚æ•°ï¼Œå…¶æŒ‡å®šå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç­‰ã€‚ object å‚æ•°è¯´æ˜ï¼š onLaunch å½“å°ç¨‹åºåˆå§‹åŒ–å®Œæˆæ—¶ï¼Œä¼šè§¦å‘ onLaunchï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰ onShow å½“å°ç¨‹åºå¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤ºï¼Œä¼šè§¦å‘ onShow onHide å½“å°ç¨‹åºä»å‰å°è¿›å…¥åå°ï¼Œä¼šè§¦å‘ onHide å…¶ä»– å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° Object å‚æ•°ä¸­ï¼Œç”¨ this å¯ä»¥è®¿é—® å‰å°ã€åå°å®šä¹‰ï¼š å½“ç”¨æˆ·ç‚¹å‡»å·¦ä¸Šè§’å…³é—­ï¼Œæˆ–è€…æŒ‰äº†è®¾å¤‡ Home é”®ç¦»å¼€å¾®ä¿¡ï¼Œå°ç¨‹åºå¹¶æ²¡æœ‰ç›´æ¥é”€æ¯ï¼Œè€Œæ˜¯è¿›å…¥äº†åå°ï¼›å½“å†æ¬¡è¿›å…¥å¾®ä¿¡æˆ–å†æ¬¡æ‰“å¼€å°ç¨‹åºï¼Œåˆä¼šä»åå°è¿›å…¥å‰å°ã€‚ 123456789101112App(&#123; onLaunch: function() &#123; // Do something initial when launch. &#125;, onShow: function() &#123; // Do something when show. &#125;, onHide: function() &#123; // Do something when hide. &#125;, globalData: &apos;I am global data&apos;&#125;) App.prototype.getCurrentPage()getCurrentPage() å‡½æ•°ç”¨æˆ·è·å–å½“å‰é¡µé¢çš„å®ä¾‹ã€‚ getApp()å…¨å±€çš„ getApp() å‡½æ•°ï¼Œå¯ä»¥è·å–åˆ°å°ç¨‹åºå®ä¾‹ã€‚ æ³¨æ„ï¼š App() å¿…é¡»åœ¨ app.js ä¸­æ³¨å†Œï¼Œä¸”ä¸èƒ½æ³¨å†Œå¤šä¸ªã€‚ ä¸è¦åœ¨å®šä¹‰äº App() å†…çš„å‡½æ•°ä¸­è°ƒç”¨ getApp() ï¼Œä½¿ç”¨ this å°±å¯ä»¥æ‹¿åˆ° app å®ä¾‹ã€‚ ä¸è¦åœ¨ onLaunch çš„æ—¶å€™è°ƒç”¨ getCurrentPage()ï¼Œæ­¤æ—¶ page è¿˜æ²¡æœ‰ç”Ÿæˆã€‚ é€šè¿‡ getApp() è·å–å®ä¾‹ä¹‹åï¼Œä¸è¦ç§è‡ªè°ƒç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ PagePage() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢ã€‚æ¥å—ä¸€ä¸ª object å‚æ•°ï¼Œå…¶æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ã€‚ objectå‚æ•°è¯´æ˜ï¼š data é¡µé¢çš„åˆå§‹æ•°æ® onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢åŠ è½½ onReady ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ onShow ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢æ˜¾ç¤º onHide ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢éšè— onUnload ç”Ÿå‘½å‘¨æœŸå‡½æ•°â€“ç›‘å¬é¡µé¢å¸è½½ onPullDownRefreash é¡µé¢ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°â€“ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ å…¶ä»– å¼€å‘è€…å¯ä»¥æ·»åŠ ä»»æ„çš„å‡½æ•°æˆ–æ•°æ®åˆ° object å‚æ•°ä¸­ï¼Œç”¨ this å¯ä»¥è®¿é—® åˆå§‹åŒ–æ•°æ®åˆå§‹åŒ–æ•°æ®å°†ä½œä¸ºé¡µé¢çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ã€‚æ•°æ®å¿…é¡»æ˜¯å¯ä»¥è½¬æˆ JSON çš„æ ¼å¼ï¼šå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ï¼Œå¯¹è±¡ï¼Œæ•°ç»„ã€‚ Page.prototype.setData()setData å‡½æ•°ç”¨äºå°†æ•°æ®ä»é€»è¾‘å±‚å‘é€åˆ°è§†å›¾å±‚ï¼ŒåŒæ—¶æ”¹å˜å¯¹åº”çš„ this.data çš„å€¼ã€‚ æ³¨æ„ï¼š ç›´æ¥ä¿®æ”¹ this.data æ— æ•ˆ å•æ¬¡è®¾ç½®çš„æ•°æ®ä¸èƒ½è¶…è¿‡ 1024 KB setData() å‚æ•°æ ¼å¼æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ keyï¼Œvalue çš„å½¢å¼è¡¨ç¤ºå°† this.data ä¸­çš„ key å¯¹åº”çš„å€¼æ”¹å˜æˆ valueã€‚ é¡µé¢çš„è·¯ç”± æ–‡ä»¶ä½œç”¨åŸŸ åœ¨ JavaScript æ–‡ä»¶ä¸­å£°æ˜çš„å˜é‡å’Œå‡½æ•°åªåœ¨è¯¥æ–‡ä»¶ä¸­æœ‰æ•ˆï¼› ä¸åŒçš„æ–‡ä»¶ä¸­å¯ä»¥å£°æ˜ç›¸åŒåå­—çš„å˜é‡å’Œå‡½æ•°ï¼Œä¸ä¼šäº’ç›¸å½±å“ã€‚ é€šè¿‡å…¨å±€å‡½æ•° getApp() å¯ä»¥è·å–å…¨å±€çš„åº”ç”¨å®ä¾‹ å¦‚æœéœ€è¦å…¨å±€çš„æ•°æ®å¯ä»¥åœ¨ App() ä¸­è®¾ç½® æ¨¡å—åŒ–æ¨¡å—åªæœ‰é€šè¿‡ module.exports æ‰èƒ½å¯¹å¤–æš´éœ²æ¥å£ã€‚ 1234567// common.jsfunction sayHello(name) &#123; console.log(&apos;Hello &apos; + name + &apos;!&apos;)&#125;module.exports = &#123; sayHello: sayHello&#125; åœ¨éœ€è¦ä½¿ç”¨è¿™äº›æ¨¡å—çš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ require(path) å°†å…¬å…±ä»£ç å¼•å…¥ã€‚ 123456var common = require(&apos;common.js&apos;)Page(&#123; helloMINA: function() &#123; common.sayHello(&apos;MINA&apos;) &#125;&#125;)]]></content>
      <tags>
        <tag>å¾®ä¿¡å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP 413 curl 22 The requested URL returned error 413 Request Entity Too Large]]></title>
    <url>%2F2016%2F12%2F30%2Fnginx-request-entity-too-large%2F</url>
    <content type="text"><![CDATA[é—®é¢˜åŸå› åœ¨ä½¿ç”¨gogsæ—¶ï¼Œgit push ä»£ç æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1error: RPC failed; HTTP 413 curl 22 The requested URL returned error: 413 Request Entity Too Large ç»æŸ¥è¯ï¼Œæ˜¯æœåŠ¡å™¨ä¸Šçš„nginxé»˜è®¤æƒ…å†µä¸‹åªå…è®¸ä¸Šä¼ æœ€å¤§ 1m å¤§å°çš„æ–‡ä»¶ã€‚nginxé»˜è®¤é…ç½®å¦‚ä¸‹ï¼š 123Syntax: client_max_body_size size;Default: client_max_body_size 1m;Context: http, server, location è§£å†³æ–¹æ³•åœ¨ nginx çš„é…ç½®æ–‡ä»¶ nginx.conf ä¸­çš„ http æ®µå†…ï¼Œæ·»åŠ  client_max_body_size é…ç½®ï¼š 12345http &#123; ... client_max_body_size 50m; ... &#125; åé¢çš„ 50m è¡¨ç¤ºæœ€å¤§å…è®¸ä¸Šä¼  50M å¤§å°çš„æ–‡ä»¶ã€‚ ç„¶åé‡æ–°åŠ è½½ nginx é…ç½®ä¿¡æ¯ï¼š 1$ sudo service nginx reload ç›¸å…³å‚è€ƒ Module ngx_http_core_module nginx client_max_body_size çš„é—®é¢˜ | yanghao&#039;s blog git - Github Push Error: RPC failed; result=22, HTTP code = 413 - Stack Overflow]]></content>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonç‹¬ç«‹è¿è¡Œç¯å¢ƒVirtualenv]]></title>
    <url>%2F2016%2F12%2F28%2Fpython-independent-operating-environment-virtualenv%2F</url>
    <content type="text"><![CDATA[Virtualenvå¯ä»¥ä¸ºæ¯ä¸ªPythonåº”ç”¨åˆ›å»ºç‹¬ç«‹çš„å¼€å‘ç¯å¢ƒï¼Œä½¿ä»–ä»¬äº’ä¸å½±å“ï¼ŒVirtualenvèƒ½å¤Ÿåšåˆ°ï¼š åœ¨æ²¡æœ‰æƒé™çš„æƒ…å†µä¸‹å®‰è£…æ–°å¥—ä»¶ ä¸åŒåº”ç”¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¥—ä»¶ç‰ˆæœ¬ å¥—ä»¶å‡çº§ä¸å½±å“å…¶ä»–åº”ç”¨ å®‰è£…virtualenvä½¿ç”¨pipå®‰è£…ï¼ˆæ¨èï¼‰1$ sudo pip install virtualenv ä½¿ç”¨ easy_install å®‰è£…ï¼š1$ sudo easy_install virtualenv åˆå§‹åŒ–æˆ‘é€šå¸¸åˆ›å»ºä¸€ä¸ªåŒ…å«è™šæ‹Ÿåç§°ä¸º venv æ–‡ä»¶å¤¹çš„é¡¹ç›®æ–‡ä»¶å¤¹: 123456$ mkdir myproject$ cd myproject$ virtualenv venvNew python executable in venv/bin/python2Also creating executable in venv/bin/pythonInstalling setuptools, pip...done. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒç°åœ¨ï¼Œæ¯æ¬¡éœ€è¦ä½¿ç”¨é¡¹ç›®æ—¶ï¼Œå¿…é¡»å…ˆæ¿€æ´»ç›¸åº”çš„ç¯å¢ƒã€‚ åœ¨Linuxç³»ç»Ÿä¸‹æ‰§è¡Œ123456$ ls-- venv$ source ./venv/bin/activate//ç»“æœï¼š(venv)tiger@VirtualBox:~/xbox/myflask$ åœ¨Winç³»ç»Ÿä¸‹æ‰§è¡Œ1234&gt; lsvenv/&gt; venv\Scripts\activate.bat(venv) D:\YYYY ä½ ç°åœ¨å°±è¿›å…¥ä½ çš„ virtualenv è™šæ‹Ÿç¯å¢ƒäº†ï¼ˆæ³¨æ„æŸ¥çœ‹ä½ çš„ shell æç¤ºç¬¦å·²ç»æ”¹å˜äº†ï¼‰ã€‚ é€€å‡ºè™šæ‹Ÿç¯å¢ƒé€šè¿‡ deactivate å‘½ä»¤é€€å‡ºè™šæ‹Ÿç¯å¢ƒã€‚ virtualenv å‘½ä»¤æ•´ç†å®‰è£…1pip install virtualenv åˆ›å»º1virtualenv &lt;EnvName&gt; *nix1$ source ./venv/bin/activate æ­¤å¤„ venv ä¸º &lt;EnvName&gt; Win1&gt; venv\Scripts\activate æ­¤å¤„ venv ä¸º &lt;EnvName&gt; é€€å‡º1deactivate ç›¸å…³å‚è€ƒ virtualenv &mdash; virtualenv 1.7.1.2.post1 documentation]]></content>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxç³»ç»Ÿä¸‹ä½¿ç”¨Gogsæ­å»ºGit Service]]></title>
    <url>%2F2016%2F12%2F26%2Fuse-gogs-to-build-yourself-git-server%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬ç¯å¢ƒæ­å»º æ–°å»ºç”¨æˆ· Gogs é»˜è®¤ä»¥ git ç”¨æˆ·è¿è¡Œï¼ˆä½ åº”è¯¥ä¹Ÿä¸ä¼šæƒ³ä¸€ä¸ªèƒ½ä¿®æ”¹ ssh é…ç½®çš„ç¨‹åºä»¥ root ç”¨æˆ·è¿è¡Œå§ï¼Ÿï¼‰ã€‚è¿è¡Œ sudo adduser git æ–°å»ºå¥½ git ç”¨æˆ·å¹¶è®¾ç½®å¯†ç ã€‚ ç„¶å su - git åˆ‡æ¢è‡³ git ç”¨æˆ·ç™»å½•ã€‚ å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š 1$ sudo adduser git æ ¹æ®æç¤ºä¿¡æ¯ï¼Œè¾“å…¥æ–°è´¦æˆ· git å¯†ç ï¼Œå…¶ä»–ç”¨æˆ·ä¿¡æ¯ç›´æ¥æ•²å›è½¦å³å¯ã€‚ å®‰è£…git å› ä¸ºæ–°åˆ›å»ºçš„ç”¨æˆ· git æ²¡æœ‰è®¾ç½®ç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆåœ¨ root è´¦æˆ·æˆ–å…¶ä»–ç®¡ç†å‘˜è´¦æˆ·ä¸‹å®‰è£… git : 123$ sudo apt-get update$ sudo apt-get install git$ git --version //æ£€æŸ¥gitæ˜¯å¦å®‰è£…æˆåŠŸ åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„gitç”¨æˆ·ï¼š 1$ su - git è¿›å…¥ç”¨æˆ·gitçš„æ ¹ç›®å½•ä¸‹ï¼š 1$ cd ~ ä¸‹è½½è§£åŒ… æˆ‘ä½¿ç”¨çš„æ˜¯é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶å®‰è£…åŒ…ã€‚éœ€è¦ä»æºç ç¼–è¯‘çš„è¯ï¼Œè¯·å‚è€ƒä¸€èˆ¬ Go è¯­è¨€é¡¹ç›®çš„ç¼–è¯‘ã€‚ æ•°æ®åº“é‡‡ç”¨ Sqlite3 æ•°æ®åº“ï¼Œå¦‚æƒ³ä½¿ç”¨Mysql è·å–å…¶ä»–æ•°æ®åº“ï¼Œè¯·å‚è€ƒå®˜ç½‘çš„å®‰è£…æ–¹æ³•ã€‚ åˆ›å»ºgogsåº”ç”¨çš„è§£å‹ç›®å½•ï¼š 1234$ mkdir goapp$ cd goapp$ pwd/home/git/goapp ä» å®˜ç½‘ æˆ–ä» GitHub Tags ä¸‹è½½å½“å‰æœ€æ–°çš„ç‰ˆæœ¬ v0.9.13 ç‰ˆï¼Œlinux amd64 å¹¶è§£å‹ï¼š 1234$ wget https://dl.gogs.io/gogs_v0.9.13_linux_amd64.zip$ unzip gogs_v0.9.13_linux_amd64.zip$ lsgogs gogs_v0.9.13_linux_amd64.zip è¿›å…¥ gogs ç›®å½•ï¼š 123$ cd gogs$ lsgogs LICENSE public README.md README_ZH.md scripts templates åˆ›å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ç›®å½•å¹¶ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™ï¼š 1234$ mkdir custom$ mkdir custom/conf$ sudo chmod -R 777 custom åœ¨å½“å‰ git ç”¨æˆ·ä¸‹ï¼Œå¦‚æœæç¤ºæ²¡æœ‰ sudo æƒé™ï¼Œå¯ä»¥å…ˆä¸´æ—¶æ›´æ–°ä¸ºå…¶ä»–ç”¨æˆ·ï¼Œæ›´æ”¹ç›®å½•è¯»å†™æƒé™ï¼Œæ”¹å®Œåå†åˆ‡æ¢å› git ç”¨æˆ·ï¼š 123$ su root$ sudo chmod -R 777 custom$ su - git åˆ›å»ºæ—¥å¿—ç›®å½•å¹¶ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™ï¼š 123$ mkdir log$ sudo chmod -R 777 log å¯åŠ¨gogs: 1234$ pwd/home/git/goapp/gogs$ ./gogs web æ‰§è¡Œå‘½ä»¤åï¼Œå‡ºç° Listen:http://0.0.0.0:3000 æç¤ºä¿¡æ¯ï¼Œè¡¨ç¤º gogs å¯åŠ¨æˆåŠŸã€‚ ç„¶åè®¿é—® http://æœåŠ¡å™¨IP:3000/ æ¥è¿›è¡Œå®‰è£…ï¼Œå¡«å†™å¥½è¡¨å•ä¹‹åæäº¤å°±å¯ä»¥äº†ã€‚é»˜è®¤ç¬¬ä¸€ä¸ªåˆ›å»ºçš„è´¦æˆ·ä¸ºç®¡ç†å‘˜è´¦æˆ·ã€‚ è¡¨å•ä¸­æŒ‡å®šäº† Database Settings â€“ Path ä¸ºæ•°æ®åº“çš„å­˜æ”¾ç›®å½•ã€‚Application General Settings â€“ Repository Root Path ä¸ºä»“åº“æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ã€‚ é…ç½®Nginxåœ¨ç®¡ç†å‘˜è´¦æˆ·ä¸‹æ‰§è¡Œï¼š 1$ sudo apt-get install nginx åœ¨ /etc/nginx/conf.d ç›®å½•ä¸‹æ·»åŠ  gogsweb.conf æ–‡ä»¶ï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š 12345678server &#123; server_name git.****.com; listen 80; location / &#123; proxy_pass http://127.0.0.1:3000/; &#125;&#125; ç„¶åé€šè¿‡ sudo service nginx restart é‡å¯ nginx æœåŠ¡ã€‚ é…ç½® supervisor å¯åŠ¨åœ¨ç®¡ç†å‘˜è´¦æˆ·ä¸‹æ‰§è¡Œï¼š 1$ sudo apt-get install supervisor åœ¨ /etc/supervisor/conf.d ç›®å½•ä¸‹æ·»åŠ  gogsweb.conf æ–‡ä»¶ï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š 12345678910111213141516[program:gogs]directory=/home/git/goapp/gogs/command=/home/git/goapp/gogs/gogs webautostart=trueautorestart=truestartsecs=10stdout_logfile=/home/git/goapp/gogs/log/stdout.logstdout_logfile_maxbytes=1MBstdout_logfile_backups=10stdout_capture_maxbytes=1MBstderr_logfile=/home/git/goapp/gogs/log/stderr.logstderr_logfile_maxbytes=1MBstderr_logfile_backups=10stderr_capture_maxbytes=1MBuser = gitenvironment = HOME=&quot;/home/git&quot;, USER=&quot;git&quot; ä»¥ä¸Šçš„é…ç½®ä¿¡æ¯åœ¨ gogs ç›®å½•ä¸‹çš„ Scripts æ–‡ä»¶å¤¹ä¸‹æœ‰ç»™å‡ºï¼Œå¯å‚è€ƒã€‚ å¼€å¯ supervisor UI ç®¡ç†å°ç¼–è¾‘ /etc/supervisor/supervisor.conf ä¸»é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æˆ–æ·»åŠ (é€šè¿‡apt-getçš„æ–¹å¼å®‰è£…åä¸åŒ…å«è¯¥é…ç½®) ä»¥ä¸‹å†…å®¹ï¼š 1234[inet_http_server] ; inet (TCP) server disabled by defaultport=*:9001 ; (ip_address:port specifier, *:port for all iface)username=user ; (default is no username (open server))password=123 ; (default is no password (open server)) port ä¸­ *.9001 è¡¨ç¤ºæ¥å—ä»»æ„ç½‘ç»œçš„è¯·æ±‚ï¼Œå¦‚æœè®¾ç½®æˆ 127.0.0.1 åˆ™åªæ¥å—æœ¬åœ°è®¿é—®è¯·æ±‚ã€‚ é€šè¿‡é€šè¿‡ sudo supervisorctl reload é‡å¯æœåŠ¡ã€‚ é‡å¯ä¹‹åï¼Œå¦‚æœä¹‹å‰çš„é…ç½®ä¹Ÿæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œç°åœ¨åœ¨æµè§ˆå™¨ä¸Šé€šè¿‡åŸŸåå³å¯æµè§ˆè¯¥ç«™ç‚¹äº†ã€‚ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ æœåŠ¡å™¨IP:9001 æ¥è®¿é—® supervisor UI çš„ç®¡ç†ç«¯é¡µé¢ã€‚ Gogsçš„ä¸ªæ€§åŒ–é…ç½® é¡¶éƒ¨å¯¼èˆªèœå•ä¸­ â€œå¸®åŠ©â€ é“¾æ¥æ–‡å­—ï¼Œæœªç™»å½•ç”¨æˆ·ä¸æ˜¾ç¤º â€œå¸®åŠ©â€ æŒ‰é’®ï¼š ç›®å½•: gogs\templates\base\head.tmpl ä½ç½®ï¼š 1&lt;a class=&quot;item&quot; target=&quot;_blank&quot; href=&quot;http://gogs.io/docs&quot; rel=&quot;noreferrer&quot;&gt;&#123;&#123;.i18n.Tr &quot;help&quot;&#125;&#125;&lt;/a&gt; å°† æ ‡ç­¾ä¸‹é¢çš„æ”¹è¡Œæ³¨é‡Šæ‰ã€‚ åº•éƒ¨å³ä¸‹è§’æ˜¾ç¤º â€œå®˜æ–¹ç½‘ç«™â€ å­—æ ·ï¼Œä¿®æ”¹ä¸º â€œGogså®˜æ–¹ç½‘ç«™â€ï¼š ç›®å½•ï¼š gogs\templates\base\footer.tmpl ä½ç½®ï¼š 1&lt;a target=&quot;_blank&quot; href=&quot;http://gogs.io&quot;&gt;&#123;&#123;.i18n.Tr &quot;website&quot;&#125;&#125;&lt;/a&gt; æ›´æ”¹ä¸ºï¼š1&lt;a target=&quot;_blank&quot; href=&quot;https://gogs.io&quot;&gt;Gogs&#123;&#123;.i18n.Tr &quot;website&quot;&#125;&#125;&lt;/a&gt; é¦–é¡µï¼Œé¦–é¡µæ ·å¼æ”¹ç‰ˆï¼š ç›®å½•ï¼š gogs\templates\home.tmpl ä¸ºmdæ–‡ä»¶ä¸­çš„aæ ‡ç­¾é“¾æ¥æ·»åŠ targetå±æ€§ï¼Œåœ¨æ–°é¡µé¢æ‰“å¼€ åœ¨ goapp/gogs/public/js/ ç›®å½•ä¸‹ï¼Œæ·»åŠ åä¸º mdlinktarget-1.0.min.js å†…å®¹å¦‚ä¸‹ï¼š 1$(document).ready(function()&#123;$(&apos;#file-content a[href^=&quot;http&quot;]&apos;).each(function()&#123;$(this).attr(&quot;target&quot;,&quot;_blank&quot;)&#125;)&#125;); åœ¨é¡¹ç›®ç›®å½• gogs\templates\base ä¸‹æ‰¾åˆ° footer.tmpl æ–‡ä»¶ï¼Œåœ¨æœ€ä¸‹é¢æ·»åŠ jså¼•ç”¨ï¼š 1&lt;script src=&quot;&#123;&#123;AppSubUrl&#125;&#125;/js/mdlinktarget-1.0.min.js&quot;&gt;&lt;/script&gt; å‚è€ƒ Installation - Gogs - Go Git Service ä½¿ç”¨ Gogs æ­å»ºè‡ªå·±çš„ Git æœåŠ¡å™¨ - My Nook]]></content>
      <tags>
        <tag>Gogs</tag>
        <tag>Git Server</tag>
        <tag>ä»£ç ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…ç½®Dockeré•œåƒåŠ é€Ÿå™¨]]></title>
    <url>%2F2016%2F12%2F26%2Fsetting-docker-mirror-image-accelerator%2F</url>
    <content type="text"><![CDATA[ç”±äºâ€œä½ æ‡‚å¾—â€çš„åŸå› ï¼Œåœ¨å›½å†…è·å–Dockeré•œåƒæ—¶ç»å¸¸å› ä¸ºç½‘ç»œåŸå› è€Œä¸‹è½½å¤±è´¥ï¼Œæœ‰äº›äººä¼šé€‰æ‹©â€œç•ªèŒ„â€ï¼Œä½†æ˜¯é…ç½®èµ·æ¥ç€å®éº»çƒ¦ã€‚æ‰€ä»¥é€‰æ‹©å›½å†…çš„é•œåƒåŠ é€Ÿå™¨æ˜¯ç›®å‰è§£å†³è¯¥é—®é¢˜çš„æœ€å¥½æ–¹æ³•ã€‚è¿™é‡Œæˆ‘ä¸»è¦ä»‹ç»é˜¿é‡Œäº‘çš„Dockeré•œåƒåŠ é€Ÿå™¨å’ŒDaoCloadçš„é•œåƒåŠ é€Ÿå™¨çš„é…ç½®æ–¹æ³•ã€‚ æ³¨æ„ï¼šé’ˆå¯¹äº Ubunt16.04ç³»ç»Ÿä¸‹çš„Dockeré…ç½®é•œåƒåŠ é€Ÿå™¨ï¼Œå¯ç›´æ¥å‚è€ƒæ•´ç†çš„æœ€æ–°æ–‡ç« ï¼šUbuntu16.04å®‰è£…DockeråŠé…ç½®é•œåƒåŠ é€Ÿå™¨ æ³¨æ„ï¼šç”±äºè¯¥æ–‡ç« å†™äº2016å¹´12æœˆï¼Œå…¶ä¸­çš„ä¸€äº›é…ç½®æ–¹æ³•å¯èƒ½å·²è¿‡æ—¶ï¼Œå»ºè®®æœç´¢æœ¬ç«™å…¶ä»–ç›¸å…³æ–‡ç« ä¸­çš„æœ€æ–°è®¾ç½®æ–¹æ³•ã€‚ é…ç½®é˜¿é‡Œäº‘Dockeré•œåƒåŠ é€Ÿå™¨æ‰“å¼€ å®˜æ–¹åœ°å€ å¼€å‘è€…å¹³å° â€“ ç®¡ç†ä¸­å¿ƒ â€“ åŠ é€Ÿå™¨ ã€‚å¯ä»¥çœ‹åˆ° â€œæ‚¨çš„ä¸“å±åŠ é€Ÿå™¨åœ°å€â€ å³ https://xxxxxxx.mirror.aliyuncs.com ã€‚ Ubuntuç³»ç»Ÿä¸‹å¦‚ä½•é…ç½®å› ä¸ºæˆ‘çš„ç³»ç»Ÿä¸º Ubuntu 15.04 , æ‰€ä»¥è¿™é‡Œä»…ä»¥Ubuntuç³»ç»Ÿä¸‹çš„é…ç½®æ–¹æ³•ä¸ºä¾‹ï¼Œå…¶ä»–ç³»ç»Ÿå¯å‚è€ƒå®˜ç½‘ä¸­çš„è¯´æ˜ã€‚ å®‰è£…æˆ–å‡çº§Dockerè¿™é‡Œè¦æ±‚å¿…é¡»æ˜¯ 1.6.0 ä»¥ä¸Šç‰ˆæœ¬çš„Dockerã€‚å¯ä»¥ä»é˜¿é‡Œäº‘çš„é•œåƒä»“åº“ä¸‹è½½ mirrors.aliyun.com/help/docker-engine 1curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh - é…ç½®DockeråŠ é€Ÿå™¨å¦‚æœUbuntuç³»ç»Ÿæ˜¯ 12.04 14.04 ï¼ŒDocker 1.9 ä»¥ä¸Šï¼Œ æ‰§è¡Œï¼š 12echo &quot;DOCKER_OPTS=\&quot;\$DOCKER_OPTS --registry-mirror=https://xxxxxxx.mirror.aliyuncs.com\&quot;&quot; | sudo tee -a /etc/default/dockersudo service docker restart å¦‚æœUbuntuç³»ç»Ÿæ˜¯ 15.04 16.04 ï¼ŒDocker 1.9 ä»¥ä¸Šï¼Œ æ‰§è¡Œï¼š 12345678sudo mkdir -p /etc/systemd/system/docker.service.dsudo tee /etc/systemd/system/docker.service.d/mirror.conf &lt;&lt;-&apos;EOF&apos;[Service]ExecStart=ExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://xxxxxxx.mirror.aliyuncs.comEOFsudo systemctl daemon-reloadsudo systemctl restart docker ç­‰å¾…DockeræœåŠ¡é‡å¯åï¼Œå†æ¬¡ä¸‹è½½é•œåƒåˆ™éå¸¸å¿«äº†ã€‚ é…ç½®DaoCloadçš„é•œåƒåŠ é€Ÿå™¨æ‰“å¼€ å®˜æ–¹åœ°å€ DaoCloud â€“ äº§å“ â€“ åŠ é€Ÿå™¨ â€“ ç«‹å³ä½¿ç”¨ ã€‚ Linuxç³»ç»Ÿé…ç½® Docker åŠ é€Ÿå™¨å‘½ä»¤è„šæœ¬è‡ªåŠ¨é…ç½® ï¼ˆæ¨èï¼‰DaoCloudä¹Ÿä¼šä¸ºä½ åˆ†é…ä¸€ä¸ªä¸“å±çš„åŠ é€Ÿå™¨åœ°å€ï¼Œå¯ä»¥ç›´æ¥æ‹·è´é¡µé¢ä¸­ç»™å‡ºçš„ä»£ç ï¼š 1# curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://xxxxxx.m.daocloud.io è¯¥è„šæœ¬å¯ä»¥å°† --registry-mirror åŠ å…¥åˆ°ä½ çš„ Docker é…ç½®æ–‡ä»¶ /etc/default/docker ä¸­ã€‚é€‚ç”¨äº Ubuntu14.04ã€Debianã€CentOS6 ã€CentOS7ã€Fedoraã€Arch Linuxã€openSUSE Leap 42.1ï¼Œå…¶ä»–ç‰ˆæœ¬å¯èƒ½æœ‰ç»†å¾®ä¸åŒã€‚ æ‰‹åŠ¨é…ç½®ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹åŠ¨ä¿®æ”¹ã€‚ åœ¨ /etc/default/docker æ–‡ä»¶åº•éƒ¨æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 1$ sudo vim /etc/default/docker æ·»åŠ ï¼š 1DOCKER_OPTS=&quot;$DOCKER_OPTS --registry-mirror=http://xxxxxx.m.daocloud.io&quot; é‡å¯DockeræœåŠ¡é…ç½®å®Œæˆåéœ€è¦é‡å¯dockeræœåŠ¡ã€‚ 1$ sudo service docker restart æ³¨æ„äº‹é¡¹ å¦‚æœä½ çš„ç³»ç»Ÿå½“å‰ç™»é™†ç”¨æˆ·ä¸æ˜¯ç®¡ç†å‘˜è´¦æˆ·çš„è¯ï¼Œè®°å¾—æ·»åŠ  sudo ä»¥å…æ‰§è¡Œå¤±è´¥ã€‚ ä¸Šæ–‡ä»£ç æ®µä¸­ç»™å‡ºçš„é•œåƒåŠ é€Ÿå™¨åœ°å€ä¸­çš„ xxxxxxx ä¸ºé˜¿é‡Œäº‘æˆ–DaoCloudåœ¨ä½ æ³¨å†Œè´¦æˆ·ååˆ†é…çš„æŒ‡å®šåœ°å€åç§°ï¼Œåˆ‡è®°è¦ä¿®æ”¹ä¸ºè‡ªå·±è´¦æˆ·çš„ç»™å®šåœ°å€ã€‚ ç›¸å…³é“¾æ¥ é˜¿é‡Œäº‘å¼€å‘è€…å¹³å° DaoCloud Docker é•œåƒåŠ é€Ÿå™¨-åšå®¢-äº‘æ –ç¤¾åŒº-é˜¿é‡Œäº‘ ä½¿ç”¨DaoCloudå®‰è£…Dockerå’Œé•œåƒ - ç®€ä¹¦]]></content>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Alpineä¸‹é…ç½®Seleniumè¿è¡Œç¯å¢ƒ]]></title>
    <url>%2F2016%2F10%2F19%2Fconfiguration-the-selenium-running-environment-in-alpine%2F</url>
    <content type="text"><![CDATA[é…ç½®ç¯å¢ƒ Alpine Linux 3.4 å®‰è£…ä¾èµ–è®¾ç½®è½¯ä»¶å®‰è£…æº1$ echo &quot;http://dl-4.alpinelinux.org/alpine/v3.4/main&quot; &gt;&gt; /etc/apk/repositories å®‰è£…ä¾èµ–åŒ…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123$ apk update$ apk add python py-pip curl unzip$ pip install selenium æ”¯æŒçš„æµè§ˆå™¨åŠ WebDriver é©±åŠ¨è¿™é‡Œæˆ‘ä»¥å¸¸ç”¨çš„Chrome å’Œ Firefox ä¸ºä¾‹ï¼Œæ¥é…ç½®è¿è¡Œç¯å¢ƒã€‚ Seleniumè°ƒç”¨Chromeæµè§ˆå™¨Alpineç³»ç»Ÿä¸‹é¢ä½¿ç”¨Chromeæ¨èå®‰è£…å¼€æºçš„ Chromium æµè§ˆå™¨ å®‰è£… Chromiumå› ä¸ºåœ¨è½¯ä»¶åº“ä¸­å­˜åœ¨ Chromium çš„åŒ…ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡ apk æ¥å®‰è£…ï¼š 1$ apk add chromium ç„¶åè¿˜è¦å®‰è£… chromium çš„ä¾èµ–åŒ…ï¼š 1$ apk add libexif udev å¦‚æœæ²¡æœ‰å®‰è£… libexif udev è¿™ä¸¤ä¸ªä¾èµ–åŒ…ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼ŒChromiumæµè§ˆå™¨ä¼šæ— æ³•å¯åŠ¨ï¼š selenium.common.exceptions.WebDriverException: Message: unknown error: Chrome failed to start: crashed ä¸Šé¢å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œchromium æµè§ˆå™¨å°±å®‰è£…å¥½äº†ã€‚å¯ä»¥é€šè¿‡å‘½ä»¤ chromium-browser æ¥æµ‹è¯•ï¼š 12$ chromium-browser[54:54:1019/081743:ERROR:browser_main_loop.cc(261)] Gtk: cannot open display: å› ä¸ºåœ¨ Server ç³»ç»Ÿä¸‹æ²¡æœ‰æ˜¾ç¤ºçª—å£ï¼Œæç¤ºä¸Šé¢çš„ä¿¡æ¯è¯´æ˜ chromium ç¨‹åºå¯ä»¥è°ƒç”¨çš„åˆ°ï¼Œåªæ˜¯æ— æ³•æ˜¾ç¤ºã€‚ å®‰è£… ChromeDriverChromeDriveræ˜¯ä¸€ä¸ªå®ç°äº†WebDriverä¸Chromiumè”æ¥åè®®çš„ç‹¬ç«‹æœåŠ¡ã€‚ é€šè¿‡ apk å®‰è£…æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥å®‰è£… chromedriver ç¨‹åºï¼š 1$ apk add chromium-chromedriver æµ‹è¯• ChromeDriveræ‰§è¡Œ chromedriver æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚ 123$ chromedriverStarting ChromeDriver 2.22 (5e2d5494d735a71aa5c2e7ef9bf5ce96945e92e9) on port 9515Only local connections are allowed. å½“æç¤º Starting ChromeDriver xxx on port 9515 ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ ChromeDriver è®¾ç½®æˆåŠŸã€‚ Seleniumè°ƒç”¨Firefoxæµè§ˆå™¨å®‰è£… Firefox æµè§ˆå™¨å¯ä»¥é€šè¿‡ apk ç›´æ¥å®‰è£… Firefox æµè§ˆå™¨ï¼š 1$ apk add firefox-esr ç„¶åè¿˜è¦å®‰è£… firefox çš„ä¾èµ–åŒ…ï¼š 1$ apk add dbus-x11 ttf-freefont å…¶ä¸­ dbus-x11 ä¸­ x11 ä¸­æ˜¯æ•°å­—1ï¼ŒD-Bus æ˜¯ä¸€ä¸ªæ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºé—´å‘é€æ¶ˆæ¯ã€‚ å¦‚æœä¸å®‰è£…ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š selenium.common.exceptions.WebDriverException: Message: connection refused åœ¨ geckodriver.log æ–‡ä»¶ä¸­æŸ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯: process 116: D-Bus library appears to be incorrectly set up; failed to read machine uuid: Failed to open â€œ/etc/machine-idâ€: No such file or directorySee the manual page for dbus-uuidgen to correct this issue. D-Bus not compiled with backtrace support so unable to print a backtraceRedirecting call to abort() to mozalloc_abort å…¶ä¸­ ttf-freefont æ˜¯ä¸€ä¸ªå­—ä½“ç›¸å…³çš„ä¾èµ–åŒ…ï¼Œå¦‚æœä¸å®‰è£…ä¼šæŠ¥å¦‚ä¸‹é”™ï¼š selenium.common.exceptions.WebDriverException: Message: Failed to decode response from marionette åœ¨ geckodriver.log æ–‡ä»¶ä¸­æŸ¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯: Crash Annotation GraphicsCriticalError: |[0][GFX1]: no fonts - init: 1 fonts: 0 loader: 0[GFX1]: no fonts - init: 1 fonts: 0 loader: 0^G[162] ###!!! ABORT: unable to find a usable font (serif): file /home/buildozer/aports/community/firefox-esr/src/firefox-45.4.0esr/gfx/thebes/gfxTextRun.cpp[162] ###!!! ABORT: unable to find a usable font (serif): file /home/buildozer/aports/community/firefox-esr/src/firefox-45.4.0esr/gfx/thebes/gfxTextRun.cpp, å¯é€šè¿‡å‘½ä»¤ firefox æµ‹è¯• firefoxæµè§ˆå™¨æ˜¯å¦å®‰è£…æˆåŠŸï¼š 12$ firefoxError: no display specified åŒæ ·çš„ï¼Œç”±äºæ²¡æœ‰æ˜¾ç¤ºçª—å£ï¼Œä¹Ÿä¼šæç¤º no display çš„é”™è¯¯ã€‚ å®‰è£… geckodriverä¸‹è½½ geckodriverè®¿é—®ç«™ç‚¹ geckodriver ä¸‹è½½å½“å‰ç³»ç»Ÿå¯¹åº” geckodriver ç¨‹åºã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 123456$ curl https://github.com/mozilla/geckodriver/releases/download/v0.11.1/geckodriver-v0.11.1-linux64.tar.gz -O$ tar -zxvf geckodriver-v0.11.1-linux64.tar.gz$ lsgeckodriver è§£å‹åæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª geckodriver æ‰§è¡Œç¨‹åºã€‚ è¯¥ geckodriver å‹ç¼©åŒ…å¯èƒ½ç”±äºç½‘ç»œåŸå› ä¸‹è½½å¤±è´¥ï¼Œå¯é€šè¿‡è¿…é›·ç­‰è½¯ä»¶ä¸‹è½½åæ‹·è´åˆ°Linuxç³»ç»Ÿä¸­ã€‚ å°† geckodriver æ”¾åˆ°ç³»ç»Ÿ PATH ç›®å½•ä¸‹æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­æŒ‡å®šå…·ä½“çš„ geckodriver æ‰€åœ¨çš„ç›®å½•ï¼Œä¸æŒ‡å®šçš„è¯ä¼šé»˜è®¤å»ç³»ç»ŸPATHç›®å½•ä¸‹æ‰¾ã€‚ä¸ºäº†ç¼–ç¨‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†å…¶æ”¾åˆ°ç³»ç»ŸPATHç›®å½•ä¸‹ã€‚ æŸ¥çœ‹ç³»ç»Ÿç›®å½•ï¼š 1$ echo $PATH è¿™é‡Œæˆ‘å°†å…¶æ”¾åˆ° /usr/local/bin/ ç›®å½•ä¸‹ï¼Œå¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š 123$ mv ./geckodriver /usr/local/bin/$ chmod a+x /usr/local/bin/geckodriver æµ‹è¯• geckodriveræ‰§è¡Œ geckodriver æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚ 12$ geckodriver 1476443497207 geckodriver INFO Listening on 127.0.0.1:4444 å½“æç¤º Listening on 127.0.0.1:4444 ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ geckodriver è®¾ç½®æˆåŠŸã€‚ å¦‚æœæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼Œåˆ™æ˜¯åœ¨ç³»ç»ŸPATHä¸‹æ‰¾ä¸åˆ° geckodriver : selenium.common.exceptions.WebDriverException: Message: â€˜geckodriverâ€™ executable needs to be in PATH. å®‰è£…è™šæ‹Ÿæ˜¾ç¤ºå™¨ xvfbä¸ºä»€ä¹ˆè¦ç”¨ xvfb??xvfb è¿™ä¸ªå·¥å…·ç›¸å½“äºä¸€ä¸ªwrapperï¼Œç»™åº”ç”¨ç¨‹åºæä¾›è™šæ‹Ÿçš„ X server æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…12$ apk add xvfb$ pip install pyvirtualdisplay æµ‹è¯• selenium è°ƒç”¨æµè§ˆå™¨è·å–ç½‘é¡µChrome ç‰ˆæœ¬1234567891011121314151617#coding:utf-8import timefrom selenium import webdriverfrom pyvirtualdisplay import Displaydisplay=Display(visible=0,size=(800,800))display.start()driver=webdriver.Chrome()driver.get(&apos;http://www.cnblogs.com/&apos;)time.sleep(5)title=driver.titleprint(title.encode(&apos;utf-8&apos;))driver.close()display.stop() å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º chrome.py ï¼Œæ‰§è¡Œï¼š 12$ python chrome.pyåšå®¢å›­ - å¼€å‘è€…çš„ç½‘ä¸Šå®¶å›­ Firefox ç‰ˆæœ¬1234567891011121314151617#coding:utf-8import timefrom selenium import webdriverfrom pyvirtualdisplay import Displaydisplay=Display(visible=0,size=(800,800))display.start()driver=webdriver.Firefox()driver.get(&apos;http://www.cnblogs.com/&apos;)time.sleep(5)title=driver.titleprint(title.encode(&apos;utf-8&apos;))driver.close()display.stop() å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º firefox.py ï¼Œæ‰§è¡Œï¼š 12$ python firefox.pyåšå®¢å›­ - å¼€å‘è€…çš„ç½‘ä¸Šå®¶å›­ Dockerå®ç°è¯¦æƒ…è¯·å‚è€ƒå¼€æºé¡¹ç›®ï¼š Leafney/alpine-selenium-chrome leafney/alpine-selenium-chrome Leafney/alpine-selenium-firefox leafney/alpine-selenium-firefox]]></content>
      <tags>
        <tag>Python</tag>
        <tag>Alpine</tag>
        <tag>Selenium</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuä¸‹é…ç½®Seleniumè¿è¡Œç¯å¢ƒ]]></title>
    <url>%2F2016%2F10%2F19%2Fconfiguration-the-selenium-running-environment-in-ubuntu%2F</url>
    <content type="text"><![CDATA[Seleniumï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ã€‚ é…ç½®ç¯å¢ƒ Ubuntu 16.04 TLS å®‰è£…ä¾èµ–è®¾ç½®è½¯ä»¶å®‰è£…æº1$ echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list ä¹Ÿå¯ä»¥æ”¹æˆï¼š 1$ echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt; /etc/apt/sources.list å®‰è£…ä¾èµ–åŒ…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123$ sudo apt-get update$ sudo apt-get install python python-pip curl unzip -y$ sudo pip install selenium æ”¯æŒçš„æµè§ˆå™¨åŠ WebDriver é©±åŠ¨Seleniumå¯ä»¥è°ƒç”¨Chrome ã€Firefox ã€Safari ç­‰æµè§ˆå™¨ã€‚ WebDriver æ”¯æŒä»¥ä¸‹çš„ ChromeDriver EventFiringWebDriver FirefoxDriver HtmlUnitDriver InternetExplorerDriver PhantomJSDriver RemoteWebDriver SafariDriver è¿™é‡Œæˆ‘ä»¥å¸¸ç”¨çš„Chrome å’Œ Firefox ä¸ºä¾‹ï¼Œæ¥é…ç½®è¿è¡Œç¯å¢ƒã€‚ æˆ‘ä»¬éœ€è¦å®‰è£…ç›¸å¯¹åº”çš„æµè§ˆå™¨å’Œæµè§ˆå™¨é©±åŠ¨ WebDriver ã€‚æ¯”å¦‚ Selenium æ— æ³•ç›´æ¥å¯åŠ¨ Chrome ï¼Œéœ€è¦ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ ChromeDriver æ¥è°ƒç”¨ã€‚ Seleniumè°ƒç”¨Chromeæµè§ˆå™¨Chromeæµè§ˆå™¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ Google Chrome æµè§ˆå™¨ æˆ–è€… å¼€æºçš„ Chromium æµè§ˆå™¨ å®‰è£… Google Chromeæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯ google-chrome-stable ç‰ˆæœ¬ï¼š 123456$ wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -$ sudo sh -c &apos;echo &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/google.list&apos;sudo apt-get updatesudo apt-get install google-chrome-stable è¯¦ç»†å¯è®¿é—®ï¼š UbuntuUpdates-Google Chrome All â€œgoogle-chrome-stableâ€ versions æˆ–è€…å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç›´æ¥ä¸‹è½½ *.deb å®‰è£…åŒ…ï¼š x64 â€“ $ curl http://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_54.0.2840.59-1_amd64.deb -O x32 â€“ 32ä½ç‰ˆæœ¬å·²ä¸å¯ç”¨ å®‰è£…debå®‰è£…åŒ…ï¼š 1$ dpkg -i google-chrome-stable_54.0.2840.59-1_amd64.deb å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå®‰è£…å¤±è´¥ï¼Œç¼ºå°‘ä¾èµ–ï¼š 12345dpkg: error processing package google-chrome-stable (--install): dependency problems - leaving unconfiguredProcessing triggers for mime-support (3.59ubuntu1) ...Errors were encountered while processing: google-chrome-stable é€šè¿‡å¦‚ä¸‹å‘½ä»¤è§£å†³ï¼š 1$ apt-get -f install software installation - How to install Google Chrome? - Ask Ubuntu å®‰è£… ChromiumGoogle Chrome isnâ€™t in the repositories - however, Chromium is. å› ä¸ºåœ¨è½¯ä»¶åº“ä¸­å­˜åœ¨ Chromium çš„åŒ…ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡ apt-get æ¥å®‰è£…ï¼š 12$ sudo apt-get update$ sudo apt-get install chromium-browser æœªå®‰è£…Chromeæµè§ˆå™¨å¼‚å¸¸å¦‚æœæœªå®‰è£… Google-Chrome æˆ– Chromium æµè§ˆå™¨ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š 1selenium.common.exceptions.WebDriverException: Message: unknown error: cannot find Chrome binary å®‰è£… ChromeDriverChromeDriveræ˜¯ä¸€ä¸ªå®ç°äº†WebDriverä¸Chromiumè”æ¥åè®®çš„ç‹¬ç«‹æœåŠ¡ã€‚ ä¸‹è½½ ChromeDriverè®¿é—®ç«™ç‚¹ chromedriver ä¸‹è½½å½“å‰ç³»ç»Ÿå¯¹åº”çš„ chromedriver ç¨‹åº, é¡µé¢ä¸­ç»™å‡ºäº†ä¸åŒChromeç‰ˆæœ¬å¯¹åº”çš„ ChromeDriver ç¨‹åºã€‚ æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼Œä¸‹è½½å¹¶è§£å‹ï¼š 123456$ curl http://chromedriver.storage.googleapis.com/2.24/chromedriver_linux64.zip -O$ unzip chromedriver_linux64.zip$ lschromedriver è§£å‹åæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª chromedriver æ‰§è¡Œç¨‹åºã€‚ å°† ChromeDriver æ”¾åˆ°ç³»ç»Ÿ PATH ç›®å½•ä¸‹æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­æŒ‡å®šå…·ä½“çš„ ChromeDriver æ‰€åœ¨çš„ç›®å½•ï¼Œä¸æŒ‡å®šçš„è¯ä¼šé»˜è®¤å»ç³»ç»ŸPATHç›®å½•ä¸‹æ‰¾ã€‚ä¸ºäº†ç¼–ç¨‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†å…¶æ”¾åˆ°ç³»ç»ŸPATHç›®å½•ä¸‹ã€‚ æŸ¥çœ‹ç³»ç»Ÿç›®å½•ï¼š 1$ echo $PATH è¿™é‡Œæˆ‘å°†å…¶æ”¾åˆ° /usr/local/bin/ ç›®å½•ä¸‹ï¼Œå¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š 123$ sudo mv ./chromedriver /usr/local/bin/$ sudo chmod a+x /usr/local/bin/chromedriver æµ‹è¯• ChromeDriveræ‰§è¡Œ chromedriver æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚ 123$ chromedriver Starting ChromeDriver 2.24.417424 (c5c5ea873213ee72e3d0929b47482681555340c3) on port 9515Only local connections are allowed. å½“æç¤º Starting ChromeDriver xxx on port 9515 ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ ChromeDriver è®¾ç½®æˆåŠŸã€‚ å¦‚æœæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼Œåˆ™æ˜¯åœ¨ç³»ç»ŸPATHä¸‹æ‰¾ä¸åˆ° ChromeDriver : selenium.common.exceptions.WebDriverException: Message: â€˜chromedriverâ€™ executable needs to be in PATH. Please see https://sites.google.com/a/chromium.org/chromedriver/home Seleniumè°ƒç”¨Firefoxæµè§ˆå™¨å®‰è£… Firefox æµè§ˆå™¨å¯ä»¥é€šè¿‡ apt-get ç›´æ¥å®‰è£… Firefox æµè§ˆå™¨ï¼š 1$ sudo apt-get install firefox æœªå®‰è£…Firefoxæµè§ˆå™¨å¼‚å¸¸å¦‚æœæœªå®‰è£… Firefox æµè§ˆå™¨ç¨‹åºï¼Œåˆ™ä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š selenium.common.exceptions.WebDriverException: Message: Expected browser binary location, but unable to find binary in default location, no â€˜moz:firefoxOptions.binaryâ€™ capability provided, and no binary flag set on the command line å®‰è£… geckodriverä¸‹è½½ geckodriverè®¿é—®ç«™ç‚¹ geckodriver ä¸‹è½½å½“å‰ç³»ç»Ÿå¯¹åº” geckodriver ç¨‹åºã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 123456$ curl https://github.com/mozilla/geckodriver/releases/download/v0.11.1/geckodriver-v0.11.1-linux64.tar.gz -O$ tar -zxvf geckodriver-v0.11.1-linux64.tar.gz$ lsgeckodriver è§£å‹åæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª geckodriver æ‰§è¡Œç¨‹åºã€‚ è¯¥ geckodriver å‹ç¼©åŒ…å¯èƒ½ç”±äºç½‘ç»œåŸå› ä¸‹è½½å¤±è´¥ï¼Œå¯é€šè¿‡è¿…é›·ç­‰è½¯ä»¶ä¸‹è½½åæ‹·è´åˆ°Linuxç³»ç»Ÿä¸­ã€‚ å°† geckodriver æ”¾åˆ°ç³»ç»Ÿ PATH ç›®å½•ä¸‹æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­æŒ‡å®šå…·ä½“çš„ geckodriver æ‰€åœ¨çš„ç›®å½•ï¼Œä¸æŒ‡å®šçš„è¯ä¼šé»˜è®¤å»ç³»ç»ŸPATHç›®å½•ä¸‹æ‰¾ã€‚ä¸ºäº†ç¼–ç¨‹æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†å…¶æ”¾åˆ°ç³»ç»ŸPATHç›®å½•ä¸‹ã€‚ æŸ¥çœ‹ç³»ç»Ÿç›®å½•ï¼š 1$ echo $PATH è¿™é‡Œæˆ‘å°†å…¶æ”¾åˆ° /usr/local/bin/ ç›®å½•ä¸‹ï¼Œå¹¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š 123$ sudo mv ./geckodriver /usr/local/bin/$ sudo chmod a+x /usr/local/bin/geckodriver æµ‹è¯• geckodriveræ‰§è¡Œ geckodriver æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚ 12$ geckodriver 1476443497207 geckodriver INFO Listening on 127.0.0.1:4444 å½“æç¤º Listening on 127.0.0.1:4444 ä¿¡æ¯æ—¶ï¼Œè¯´æ˜ geckodriver è®¾ç½®æˆåŠŸã€‚ å¦‚æœæç¤ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼Œåˆ™æ˜¯åœ¨ç³»ç»ŸPATHä¸‹æ‰¾ä¸åˆ° geckodriver : selenium.common.exceptions.WebDriverException: Message: â€˜geckodriverâ€™ executable needs to be in PATH. å®‰è£…è™šæ‹Ÿæ˜¾ç¤ºå™¨ xvfbä¸ºä»€ä¹ˆè¦ç”¨ xvfb??xvfb è¿™ä¸ªå·¥å…·ç›¸å½“äºä¸€ä¸ªwrapperï¼Œç»™åº”ç”¨ç¨‹åºæä¾›è™šæ‹Ÿçš„ X server æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…12$ sudo apt-get install xvfb$ sudo pip install pyvirtualdisplay æµ‹è¯•seleniumè°ƒç”¨æµè§ˆå™¨è·å–ç½‘é¡µChrome ç‰ˆæœ¬1234567891011121314151617#coding:utf-8import timefrom selenium import webdriverfrom pyvirtualdisplay import Displaydisplay=Display(visible=0,size=(800,800))display.start()driver=webdriver.Chrome()driver.get(&apos;http://www.cnblogs.com/&apos;)time.sleep(5)title=driver.titleprint(title.encode(&apos;utf-8&apos;))driver.close()display.stop() å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º chrome.py ï¼Œæ‰§è¡Œï¼š 12$ python chrome.pyåšå®¢å›­ - å¼€å‘è€…çš„ç½‘ä¸Šå®¶å›­ Firefox ç‰ˆæœ¬1234567891011121314151617#coding:utf-8import timefrom selenium import webdriverfrom pyvirtualdisplay import Displaydisplay=Display(visible=0,size=(800,800))display.start()driver=webdriver.Firefox()driver.get(&apos;http://www.cnblogs.com/&apos;)time.sleep(5)title=driver.titleprint(title.encode(&apos;utf-8&apos;))driver.close()display.stop() å°†ä»¥ä¸Šä»£ç ä¿å­˜ä¸º firefox.py ï¼Œæ‰§è¡Œï¼š 12$ python firefox.pyåšå®¢å›­ - å¼€å‘è€…çš„ç½‘ä¸Šå®¶å›­ ä»£ç è¯¦è§£12345678910111213141516171819202122#coding:utf-8import timefrom selenium import webdriverfrom pyvirtualdisplay import Display# è®¾ç½®è™šæ‹Ÿæ˜¾ç¤ºå™¨çš„çª—å£å¤§å°display=Display(visible=0,size=(800,800))display.start()driver=webdriver.Chrome()driver.get(&apos;http://www.cnblogs.com/&apos;)time.sleep(5)# æ‰“å°ç½‘é¡µçš„æ ‡é¢˜title=driver.titleprint(title.encode(&apos;utf-8&apos;))# é€€å‡ºæµè§ˆå™¨driver.close()# å…³é—­è™šæ‹Ÿæ˜¾ç¤ºå™¨çª—å£display.stop() Dockerå®ç°è¯¦æƒ…è¯·å‚è€ƒå¼€æºé¡¹ç›®ï¼š ç›¸å…³å‚è€ƒ ChromeDriver WebDriver - Mozilla | MDN GitHub - mozilla/geckodriver: WebDriver &lt;-&gt; Marionette proxy â˜† python - How do I run Selenium in Xvfb? - Stack Overflow â˜† Selenium2.0]]></content>
      <tags>
        <tag>Python</tag>
        <tag>Selenium</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuä¸‹å®‰è£…åŠé…ç½®MySqlæ•°æ®åº“]]></title>
    <url>%2F2016%2F10%2F06%2Fubuntu-install-mysql-db%2F</url>
    <content type="text"><![CDATA[å®‰è£…è¿‡ç¨‹æµ‹è¯•ç³»ç»Ÿä¸º Ubuntu 16.04 LTS æ›´æ–°Ubuntuè½¯ä»¶å®‰è£…æº1$ echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ xenial main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list å®‰è£…mysql-serveræ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…mysql: 12$ sudo apt-get update$ sudo apt-get install mysql-server å®‰è£…è¿‡ç¨‹ä¼šå¼¹å‡ºæç¤ºæ¡†ï¼Œè¾“å…¥rootç”¨æˆ·çš„å¯†ç ï¼Œè¿™é‡Œè®¾ç½®å¯†ç ä¸º mysql ã€‚ å®‰è£…å®Œæˆåï¼Œé€šè¿‡å‘½ä»¤ mysql -V æŸ¥çœ‹mysqlç‰ˆæœ¬ä¿¡æ¯ï¼š 12# mysql -Vmysql Ver 14.14 Distrib 5.7.15, for Linux (x86_64) using EditLine wrapper è§£å†³mysqlè¿æ¥é”™è¯¯ ERROR 2002 (HY000)åœ¨ä½¿ç”¨ root è´¦æˆ·è¿æ¥mysqlæ—¶ï¼ŒæŠ¥äº†å¦‚ä¸‹çš„ 2002 é”™è¯¯ï¼š 123# mysql -uroot -pEnter password: ERROR 2002 (HY000): Can&apos;t connect to local MySQL server through socket &apos;/var/run/mysqld/mysqld.sock&apos; (2) æŸ¥çœ‹ mysql æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š 1234# ps -aux |grep mysqldroot 984 0.0 0.0 11276 728 ? S+ 07:23 0:00 grep --color=auto mysqld# ps -aux |grep mysql root 986 0.0 0.0 11276 728 ? S+ 07:23 0:00 grep --color=auto mysql å¯è§mysqlçš„æœåŠ¡å¹¶æ²¡æœ‰å¯åŠ¨ï¼Œç„¶åæˆ‘ä»¬å°è¯•å¯åŠ¨æœåŠ¡ï¼š 1234$ sudo service mysql start# service mysql start * Starting MySQL database server mysqld No directory, logging in with HOME=/ mysqlçš„æœåŠ¡å±…ç„¶æ— æ³•å¯åŠ¨ã€‚ æœ€ç»ˆæ‰¾åˆ°åŸå› æ˜¯å½“å‰ç”¨æˆ·å¯¹ /var/run/mysqld ç›®å½•æ²¡æœ‰æ“ä½œæƒé™å¯¼è‡´çš„ã€‚ å…ˆæŸ¥çœ‹ /var/run/ ä¸‹æ˜¯å¦å­˜åœ¨ mysqldç›®å½•ï¼Œæ²¡æœ‰å…ˆåˆ›å»ºã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ sudo chown -R mysql:mysql /var/run/mysqld ç„¶åå†æ¬¡å°è¯•å¯åŠ¨mysqlæœåŠ¡ï¼š 1234567891011121314151617$ sudo service mysql start# service mysql status * /usr/bin/mysqladmin Ver 8.42 Distrib 5.7.15, for Linux on x86_64Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Server version 5.7.15-0ubuntu0.16.04.1Protocol version 10Connection Localhost via UNIX socketUNIX socket /var/run/mysqld/mysqld.sockUptime: 7 secThreads: 1 Questions: 8 Slow queries: 0 Opens: 105 Flush tables: 1 Open tables: 98 Queries per second avg: 1.142 å¯ä»¥çœ‹åˆ°mysqlæœåŠ¡å¯åŠ¨æˆåŠŸäº†ã€‚ ç½‘ä¸ŠæŸ¥æ‰¾å„ç§è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•ï¼Œä¹Ÿåªæœ‰è¿™ä¸€ç§æ–¹æ³•æ˜¯æ ¹æœ¬åŸå› ã€‚ æ‰€ä»¥å½“å†æ¬¡é‡åˆ°è¯¥é—®é¢˜çš„æ—¶å€™ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹ç›®å½•æ˜¯å¦æœ‰æ“ä½œæƒé™ï¼š 1$ ls -al /var/run/mysqld/ chownå‘½ä»¤å°†æŒ‡å®šæ–‡ä»¶çš„æ‹¥æœ‰è€…æ”¹ä¸ºæŒ‡å®šçš„ç”¨æˆ·æˆ–ç»„ Canâ€™t connect to local MySQL server through socket â€˜/var/run/mysqld/mysqld.sockâ€™çš„è§£å†³ æ–°å¢è´¦æˆ·åŠæƒé™è®¾ç½®ç¬¬ä¸€ç§æ–¹æ³•ä»¥ç®¡ç†å‘˜èº«ä»½ç™»é™†mysql1$ mysql -uroot -p è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç ï¼Œç™»é™†mysqlå‘½ä»¤æ¨¡å¼ã€‚ é€‰æ‹© mysql æ•°æ®åº“1mysql&gt; use mysql; åˆ›å»ºç”¨æˆ·å¹¶è®¾å®šå¯†ç å…ˆæŸ¥çœ‹é»˜è®¤å­˜åœ¨å“ªäº›è´¦æˆ·ï¼š 12345678910mysql&gt; select host,user from user;+-----------+------------------+| host | user |+-----------+------------------+| localhost | debian-sys-maint || localhost | mysql.sys || localhost | root |+-----------+------------------+3 rows in set (0.00 sec) æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºæ–°ç”¨æˆ·è´¦æˆ·åŠå¯†ç ï¼š 1mysql&gt; create user &apos;testuser1&apos;@&apos;localhost&apos; identified by &apos;testpassword&apos;; å°† testpassword æ›¿æ¢ä¸ºä½ è‡ªå·±çš„å¯†ç ã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿æ“ä½œç”Ÿæ•ˆï¼š 1mysql&gt; flush privileges; ç¤ºä¾‹æ“ä½œå¦‚ä¸‹ï¼š 12345678910111213141516mysql&gt; create user &apos;testuser1&apos;@&apos;localhost&apos; identified by &apos;123456&apos;;Query OK, 0 rows affected (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec)mysql&gt; select host,user from user;+-----------+------------------+| host | user |+-----------+------------------+| localhost | debian-sys-maint || localhost | mysql.sys || localhost | root || localhost | testuser1 |+-----------+------------------+4 rows in set (0.00 sec) ä¸ºæ–°è´¦æˆ·åˆ›å»ºæ•°æ®åº“12mysql&gt; create database testdb;Query OK, 1 row affected (0.03 sec) ä¸ºæ–°è´¦æˆ·èµ‹äºˆæ“ä½œæ–°å»ºæ•°æ®åº“ testdb çš„æƒé™12345mysql&gt; grant all privileges on testdb.* to &apos;testuser1&apos;@&apos;localhost&apos; identified by &apos;123456&apos;;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.00 sec) testdb.* è¡¨ç¤ºæ“ä½œ testdb è¿™ä¸ªæ•°æ®åº“ä¸­æ‰€æœ‰çš„è¡¨ &#39;testuser1&#39;@&#39;localhost&#39; è¡¨ç¤ºä½¿ç”¨è´¦æˆ· testuser1 ç™»é™†åˆ° localhost &#39;123456&#39; è¡¨ç¤ºç™»é™†å¯†ç  ä½¿ç”¨æ–°è´¦æˆ·ç™»é™†æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ­¥éª¤ä¸­åˆ›å»ºçš„æ–°ç”¨æˆ·ä¸º testuse1 å¯†ç ä¸º 123456 ç®¡ç†çš„æ•°æ®åº“ä¸º testdbã€‚ ä½¿ç”¨ exit é€€å‡º root è´¦æˆ·çš„ç™»é™†ï¼Œç„¶åä½¿ç”¨æ–°è´¦æˆ·ç™»é™†ï¼š 123456mysql&gt; exitBye$ mysql -u testuser1 -pEnter password: Welcome to the MySQL monitor. Commands end with ; or \g. ç™»é™†æˆåŠŸåï¼ŒæŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨ï¼š 12345678mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || testdb |+--------------------+2 rows in set (0.00 sec) ç¬¬äºŒç§æ–¹æ³• é€šè¿‡GRANTæˆæƒçš„æ–¹å¼æ–°å¢ç”¨æˆ·ä»¥rootè´¦æˆ·ç™»å½•ï¼š123$ mysql -uroot -p Enter password: Welcome to the MySQL monitor. Commands end with ; or \g. æ–°å¢æ•°æ®åº“ä¸ºæ–°è´¦æˆ·åˆ›å»ºæ•°æ®åº“ testdb2 12mysql&gt; create database testdb2;Query OK, 1 row affected (0.00 sec) æ–°å¢è´¦æˆ·å¹¶è®¾ç½®å¯†ç æ–°å¢è´¦æˆ· testuser2 å¯†ç ä¸º 123456 ç®¡ç† testdb2 æ•°æ®åº“ã€‚ é€šè¿‡ grant all privileges on è¯­å¥æ¥æ“ä½œï¼š 123456789101112131415mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || sys || testdb || testdb2 |+--------------------+6 rows in set (0.00 sec)mysql&gt; grant all privileges on testdb2.* to &apos;testuser2&apos;@&apos;localhost&apos; identified by &apos;123456&apos;;Query OK, 0 rows affected, 1 warning (0.00 sec) grant all è¯­å¥ä¸éœ€è¦ä½¿ç”¨ flush privilege; åˆ·æ–°ç³»ç»Ÿæƒé™è¡¨ï¼Œè¯¥æ“ä½œç«‹å³ç”Ÿæ•ˆã€‚ ä½¿ç”¨æ–°è´¦æˆ· testuser2 ç™»é™†123456789101112131415mysql&gt; exitBye$ mysql -utestuser2 -pEnter password: Welcome to the MySQL monitor. Commands end with ; or \g.mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || testdb2 |+--------------------+2 rows in set (0.00 sec) å°†é»˜è®¤ç¼–ç æ”¹ä¸ºutf8é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLçš„å­—ç¬¦é›†æ˜¯ latin1 ï¼Œå› æ­¤åœ¨å­˜å‚¨ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¹±ç çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå­—ç¬¦é›†ç»Ÿä¸€æ”¹æˆ UTF-8 ã€‚ mysql é»˜è®¤ç¼–ç é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹mysqlé»˜è®¤ç¼–ç ï¼š 123456789101112131415161718192021222324mysql&gt; show variables like &quot;%character%&quot;;show variables like &quot;%collation%&quot;;+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | latin1 || character_set_connection | latin1 || character_set_database | latin1 || character_set_filesystem | binary || character_set_results | latin1 || character_set_server | latin1 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+8 rows in set (0.01 sec)+----------------------+-------------------+| Variable_name | Value |+----------------------+-------------------+| collation_connection | latin1_swedish_ci || collation_database | latin1_swedish_ci || collation_server | latin1_swedish_ci |+----------------------+-------------------+3 rows in set (0.00 sec) æ›´æ”¹é…ç½®æ–‡ä»¶ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ Ubuntu 14.04 ç³»ç»Ÿä¸­ï¼Œmysqlçš„é…ç½®æ–‡ä»¶ç›®å½•ä¸ºï¼š 1/etc/mysql/my.cnf åœ¨ Ubuntu 16.04 ç³»ç»Ÿä¸‹ï¼Œmysqlçš„é…ç½®æ–‡ä»¶ç›®å½•ä¸ºï¼š 123/etc/mysql/my.cnf/etc/mysql/mysql.conf.d/mysqld.cnf æˆ‘å½“å‰çš„ç³»ç»Ÿä¸º Ubuntu16.04 ã€‚å…¶å®åœ¨ ubuntu 16.04 ç³»ç»Ÿä¸­ï¼Œmysqlçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¹Ÿä¸º /etc/mysql/my.cnf ï¼Œåªä¸è¿‡è¿™ä¸ª my.cnf æ˜¯å…¨å±€é…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶å†…éƒ¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é…ç½®ï¼š 123# !includedir /etc/mysql/conf.d/!includedir /etc/mysql/mysql.conf.d/ å…·ä½“çš„é…ç½®æ–‡ä»¶æ˜¯å­˜æ”¾åœ¨ä¸Šé¢ä¸¤ä¸ªç›®å½•ä¸‹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ›´æ”¹ /etc/mysql/my.cnf è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹ /etc/mysql/mysql.conf.d/mysqld.cnf è¿™ä¸ªæ–‡ä»¶ã€‚æˆ–è€…ä¹Ÿå¯ä»¥è‡ªå·±æ–°å¢ä¸€ä¸ªæ‰©å±•åä¸º *.cnf çš„é…ç½®æ–‡ä»¶æ”¾åœ¨ä¸Šé¢åŒ…å«çš„ä¸¤ä¸ªç›®å½•å†…ã€‚ ä»ç½‘ä¸Šæ‰¾åˆ°å„ç§è¯´æ³•çš„ä¿®æ”¹ç¼–ç ä¸ºutf-8çš„æ–¹æ³•ï¼Œç»æµ‹è¯•åéœ€è¦ä¿®æ”¹çš„é…ç½®å¦‚ä¸‹ï¼š 12345678910[client]default-character-set=utf8[mysql]default-character-set=utf8[mysqld]init_connect=&apos;SET NAMES utf8&apos;character-set-server=utf8collation-server=utf8_unicode_ci ç¼–è¾‘ /etc/mysql/my.cnf é…ç½®æ–‡ä»¶ï¼Œä¾æ¬¡æ·»åŠ ä¸Šé¢çš„ç¼–ç è®¾ç½®ã€‚ 12345678910111213141516#[client]default-character-set=utf8[mysql]default-character-set=utf8[mysqld]init_connect=&apos;SET NAMES utf8&apos;character-set-server=utf8collation-server=utf8_unicode_ci!includedir /etc/mysql/conf.d/!includedir /etc/mysql/mysql.conf.d/ ç„¶åé‡å¯ mysql æœåŠ¡ï¼š 1$ service mysql restart å†æ¬¡ç™»å½•mysqlå‘½ä»¤æ¨¡å¼æŸ¥çœ‹é»˜è®¤ç¼–ç ï¼š 123456789101112131415161718192021222324252627$ mysql -uroot -pEnter password: Welcome to the MySQL monitor. Commands end with ; or \g.mysql&gt; show variables like &quot;%character%&quot;;show variables like &quot;%collation%&quot;;+--------------------------+----------------------------+| Variable_name | Value |+--------------------------+----------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+8 rows in set (0.00 sec)+----------------------+-----------------+| Variable_name | Value |+----------------------+-----------------+| collation_connection | utf8_general_ci || collation_database | utf8_unicode_ci || collation_server | utf8_unicode_ci |+----------------------+-----------------+3 rows in set (0.00 sec) å¯è§ï¼Œæˆ‘ä»¬å·²ç»æ›´æ”¹æˆåŠŸäº†ã€‚ Change MySQL default character set to UTF-8 in my.cnf? - Stack Overflow è®©MySQLæœåŠ¡å™¨è¢«è¿œç¨‹è®¿é—®é»˜è®¤æƒ…å†µä¸‹ï¼Œrootè´¦æˆ·åªèƒ½ä» localhost å³æœ¬æœºä¸‹æ¥è®¿é—®mysqlçš„æœåŠ¡ã€‚è€Œåœ¨æ­£å¼ä½¿ç”¨æ—¶ï¼Œmysqlæ•°æ®åº“éƒ½æ˜¯æ”¾åœ¨è¿œç¨‹çš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·ä¹Ÿå°±éœ€è¦æˆ‘ä»¬é€šè¿‡è¿œç¨‹çš„æ–¹å¼èƒ½å¤Ÿè®¿é—®åˆ°mysqlæœåŠ¡ã€‚ å¼€å¯ç»‘å®šç«¯å£ç¼–è¾‘é…ç½®æ–‡ä»¶ /etc/mysql/my.cnf æˆ– /etc/mysql/mysql.conf.d/mysqld.cnf ï¼Œå°†ç»‘å®šåœ°å€è¡Œæ³¨é‡Šæ‰æˆ–è€…ä¿®æ”¹ä¸ºæŒ‡å®šIPï¼š 12#æ³¨é‡Šbind-address# bind-address = 127.0.0.1 æ³¨é‡Šæ‰åˆ™å…è®¸æ‰€æœ‰ipéƒ½èƒ½å¤Ÿè®¿é—®ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æˆ 0.0.0.0 ä¿®æ”¹ä¸ºæŒ‡å®šçš„IPåœ°å€ï¼Œåˆ™åªå…è®¸è¯¥IPç½‘æ®µå¯ä»¥è®¿é—® ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œé‡å¯ mysql æœåŠ¡ç”Ÿæ•ˆï¼š 1$ service mysql restart å¦‚æœè¿™æ—¶é€šè¿‡å¤–ç½‘è¿æ¥mysqlï¼Œåœ¨è¿æ¥æ—¶ä¼šå‡ºç°é”™è¯¯ â€œâ€™Host XXX is not allowed to connect to this MySQL serverâ€™ â€ ï¼Œåˆ™è¿˜éœ€è¦ä¿®æ”¹æ•°æ®åº“ä¸­ç”¨æˆ·çš„è®¿é—®æƒé™ã€‚ ä¿®æ”¹æ•°æ®åº“ä¸­è´¦æˆ·è®¿é—®æƒé™è¿™é‡Œä»¥ root è´¦æˆ·ä¸ºä¾‹æ¥è®¾ç½®è¿œç¨‹è®¿é—®ã€‚ æŸ¥çœ‹rootè´¦æˆ·å¯è®¿é—®æƒé™ä»¥ root è´¦æˆ·ç™»å½•ï¼š 12mysql -u root -pEnter password: &lt;enter password&gt; åˆ‡æ¢åˆ° mysql æ•°æ®åº“ï¼Œå¹¶æŸ¥è¯¢ user è¡¨ä¸­çš„è´¦æˆ·è®¾ç½®ï¼š 1234567891011121314151617mysql&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; select host,user from user;+-----------+------------------+| host | user |+-----------+------------------+| localhost | debian-sys-maint || localhost | mysql.sys || localhost | root || localhost | testuser1 || localhost | testuser2 |+-----------+------------------+5 rows in set (0.00 sec) å¯ä»¥çœ‹åˆ°ï¼Œrootè´¦æˆ·é»˜è®¤ä¸‹ä¸å…è®¸ä»è¿œç¨‹ç™»é™†ï¼Œåªèƒ½ä» localhost æ¥è®¿é—®ï¼Œæˆ‘ä»¬è¿˜è¦ä¸º root è´¦æˆ·æ·»åŠ è®¿é—®æƒé™ã€‚ æ·»åŠ è¿œç¨‹è®¿é—®æˆæƒè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯å°†ä¸Šé¢çš„ mysql æ•°æ®åº“ä¸­çš„ user è¡¨é‡Œçš„ host é¡¹ï¼Œå°† localhost æ”¹ä¸º %ï¼Œ 12mysql&gt; use mysql;mysql&gt; update user set host =&apos;%&apos; where user =&apos;root&apos;; å¦å¤–ä¸€ç§æ˜¯ä¸ºè´¦å· root æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹è®¿é—®æˆæƒã€‚ è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚ é€šè¿‡å‘½ä»¤ GRANT ALL PRIVILEGES ON *.* to root@&#39;%&#39; IDENTIFIED BY &#39;put-your-password&#39; WITH GRANT OPTION; æ¥æ“ä½œã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 123456mysql -u root -pEnter password: &lt;enter password&gt;mysql&gt; GRANT ALL PRIVILEGES ON *.* to root@&apos;%&apos; IDENTIFIED BY &apos;mysql&apos; WITH GRANT OPTION;mysql&gt; FLUSH PRIVILEGES; å†æ¬¡æŸ¥çœ‹ï¼š 123456789101112mysql&gt; select host,user from user;+-----------+------------------+| host | user |+-----------+------------------+| % | root || localhost | debian-sys-maint || localhost | mysql.sys || localhost | root || localhost | testuser1 || localhost | testuser2 |+-----------+------------------+6 rows in set (0.00 sec) ç°åœ¨å†å°è¯•é€šè¿‡å¤–ç½‘æ¥è¿æ¥ mysql æ•°æ®åº“ï¼Œå°±èƒ½è¿æ¥æˆåŠŸäº†ã€‚ æœ¬åœ°å’Œè¿œç¨‹è®¿é—®ä½¿ç”¨ä¸åŒæƒé™æˆ–å¯†ç åœ¨ä¸Šé¢çš„è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œroot è´¦æˆ·æœ‰ä¸¤ä¸ª host é…ç½®é¡¹ï¼Œä¸€ä¸ªæœ¬åœ°çš„ï¼Œä¸€ä¸ªè¿œç¨‹çš„ã€‚å…¶å®æˆ‘ä»¬å¯ä»¥å°†ä¸¤é¡¹è®¾ç½®æˆä¸åŒçš„å¯†ç ï¼Œä»¥é˜²æ­¢æœ¬åœ°æˆ–è¿œç¨‹çš„å¯†ç æ³„éœ²é—®é¢˜ã€‚ä¹Ÿå¯ä»¥åœ¨ grant åè·Ÿè¯¦ç»†çš„æŸ¥è¯¢æ¡ä»¶ select,delete ç­‰ï¼Œä¸ºæœ¬åœ°æˆ–è¿œç¨‹è®¿é—®è®¾ç½®ä¸åŒçš„è®¿é—®æƒé™ã€‚æ¯”å¦‚ï¼š 1mysql&gt; GRANT SELECT,UPDATE,INSERT,DELETE on *.* to root@&apos;%&apos; IDENTIFIED BY &apos;mysql&apos; WITH GRANT OPTION; mysql grant å‘½ä»¤ä¸‰ç§å¸¸ç”¨ - redfox - åšå®¢å›­ mysql Grant è¯­æ³•è¯¦è§£ æ·»åŠ ç‰¹å®šè¿œç¨‹è®¿é—®æƒé™å‡è®¾è´¦æˆ· myuser å¯†ç  mypwd grant all privileges on *.* to &#39;myuser&#39;@&#39;localhost&#39; identified by &#39;mypwd&#39; grant all privileges on *.* to &#39;myuser&#39;@&#39;%&#39; identified by &#39;mypwd&#39; grant all privileges on *.* to &#39;myuser&#39;@&#39;10.22.255.18&#39; identified by &#39;mypwd&#39; è¯´æ˜ï¼š æ·»åŠ ä¸€ä¸ªæœ¬åœ°ç”¨æˆ· myuser ,ä¸€èˆ¬ç”¨äºwebæœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨åœ¨ä¸€èµ·çš„æƒ…å†µ æ·»åŠ ä¸€ä¸ªç”¨æˆ· myuser ,åªè¦èƒ½è¿æ¥æ•°æ®åº“æœåŠ¡å™¨çš„æœºå™¨éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè¿™ä¸ªæ¯”è¾ƒå±é™©ï¼Œä¸€èˆ¬ä¸ç”¨ åœ¨æ•°æ®åº“æœåŠ¡å™¨ä¸Šç»™ 10.22.255.18 æœºå™¨æ·»åŠ ä¸€ä¸ªç”¨æˆ· myuserï¼Œä¸€èˆ¬ç”¨äºwebæœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨åˆ†ç¦»çš„æƒ…å†µ æ³¨æ„ï¼šçœŸæ­£ä½¿ç”¨çš„æ—¶å€™ä¸ä¼šç”¨ grant all PRIVILEGES on *.* ï¼Œè€Œæ˜¯æ ¹æ®å®é™…éœ€è¦è®¾å®šç›¸å…³çš„æƒé™ã€‚ ç‰¹å®šè®¿é—®æƒé™ å¦‚æœæƒ³è®©è´¦æˆ· myuser ä½¿ç”¨ mypwd ä»ä»»ä½•ä¸»æœºè¿æ¥åˆ° mysql æœåŠ¡å™¨ï¼Œæ‰§è¡Œï¼š 1GRANT ALL PRIVILEGES ON *.* to myuser@&apos;%&apos; IDENTIFIED BY &apos;mypwd&apos; WITH GRANT OPTION; å¦‚æœæƒ³è®©è´¦æˆ· myuser ä½¿ç”¨å¯†ç  123456 ä» ipä¸º 123.123.123.123 çš„ä¸»æœºè¿æ¥åˆ° mysql æœåŠ¡å™¨ï¼Œæ‰§è¡Œï¼š 1GRANT ALL PRIVILEGES ON *.* to myuser@&apos;123.123.123.123&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION; å³ â€˜%â€™ è¡¨ç¤ºä»»ä½•ä¸»æœºã€‚ WITH GRANT OPTION æ˜¯å•¥æ„æ€WITH GRANT OPTION è¡¨ç¤ºå…·æœ‰æˆäºˆæƒé™çš„æƒåˆ©ã€‚æ¯”å¦‚ ä¸Šé¢çš„ï¼š 1GRANT ALL PRIVILEGES ON *.* to myuser@&apos;%&apos; IDENTIFIED BY &apos;mypwd&apos; WITH GRANT OPTION; ä¸º root ç”¨æˆ·èµ‹äºˆäº† ALL PRIVILEGES çš„æƒé™ï¼Œé‚£ä¹ˆ root è´¦æˆ·å°±å¯ä»¥ä¸ºå…¶ä»–çš„è´¦æˆ·æ¯”å¦‚ testuser1 è®¾ç½®ä¸åŒçš„æƒé™ã€‚]]></content>
      <tags>
        <tag>Ubuntu</tag>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuç³»ç»Ÿä¸‹å®‰è£…ç»ˆæShell-zsh]]></title>
    <url>%2F2016%2F10%2F05%2Fubuntu-install-zsh%2F</url>
    <content type="text"><![CDATA[æŸ¥çœ‹ç³»ç»Ÿ shellç»ˆç«¯è¾“å…¥ echo $SHELL ï¼Œå¯ä»¥è¾“å‡ºå½“å‰ä½¿ç”¨çš„shellã€‚ ç»ˆç«¯è¾“å…¥ cat /etc/shells ï¼Œå¯ä»¥è¾“å‡ºå½“å‰ç³»ç»Ÿå·²ç»å®‰è£…çš„shellã€‚ å®‰è£… zshå®‰è£… zsh éœ€è¦ git ç¯å¢ƒæ”¯æŒï¼Œè¯·å…ˆç¡®ä¿å·²å®‰è£… git ç¯å¢ƒï¼š 1$ sudo apt-get install git å®‰è£… zsh12$ sudo apt-get update$ sudo apt-get install zsh å®‰è£…å¢å¼ºæ’ä»¶ oh-my-zshå¯ä»¥é€šè¿‡ wget æˆ–è€… curl æ¥å®‰è£…ã€‚ä¸‹é¢çš„å‘½ä»¤æ˜¯åœ¨ Oh My Zsh å®˜ç½‘ä¸­æŸ¥çœ‹åˆ°çš„æœ€æ–°å®‰è£…å‘½ä»¤ï¼Œå»ºè®®ç”¨å®˜ç½‘ä¸­çš„æ¨èå®‰è£…æ–¹æ³•ï¼š 12// wget$ sh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot; 12// curl$ sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤ç§æƒ…å†µã€‚ è¾“å…¥å¯†ç åç«‹å³ç”Ÿæ•ˆå½“æç¤ºåœç•™åœ¨ Password å¤„è¦æ±‚è¾“å…¥å½“å‰è´¦æˆ·çš„å¯†ç æ—¶ï¼Œç›´æ¥è¾“å…¥å¯†ç ï¼Œç­‰å¾…è‡ªåŠ¨é…ç½®å®Œæˆå³å¯ã€‚oh-my-zsh ä¼šç«‹å³ç”Ÿæ•ˆã€‚ 12345678910111213141516171819202122232425262728ubuntu@VM-46-228-ubuntu:~$ sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;Cloning Oh My Zsh...Cloning into &apos;/home/ubuntu/.oh-my-zsh&apos;...remote: Counting objects: 891, done.remote: Compressing objects: 100% (756/756), done.remote: Total 891 (delta 20), reused 708 (delta 7), pack-reused 0Receiving objects: 100% (891/891), 590.35 KiB | 111.00 KiB/s, done.Resolving deltas: 100% (20/20), done.Checking connectivity... done.Looking for an existing zsh config...Using the Oh My Zsh template file and adding it to ~/.zshrcTime to change your default shell to zsh!Password: __ __ ____ / /_ ____ ___ __ __ ____ _____/ /_ / __ \/ __ \ / __ `__ \/ / / / /_ / / ___/ __ \/ /_/ / / / / / / / / / / /_/ / / /_(__ ) / / /\____/_/ /_/ /_/ /_/ /_/\__, / /___/____/_/ /_/ /____/ ....is now installed!Please look over the ~/.zshrc file to select plugins, themes, and options.p.s. Follow us at https://twitter.com/ohmyzsh.p.p.s. Get stickers and t-shirts at https://shop.planetargon.com.âœ ~ å¯ä»¥çœ‹åˆ°å‰é¢çš„æç¤ºç¬¦å·²ç»å˜äº†ã€‚ éœ€è¦é‡å¯ç”Ÿæ•ˆå¦‚æœæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™ç›´æ¥å¿½ç•¥å³å¯ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚ 1234Looking for an existing zsh config...Using the Oh My Zsh template file and adding it to ~/.zshrcTime to change your default shell to zsh!Password: chsh: PAM: Authentication failure å¦‚æœæç¤º Authentication failureï¼Œåˆ™è¿˜éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°†zshæ›´æ”¹ä¸ºé»˜è®¤shell,æ ¹æ®æç¤ºè¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ,é‡æ–°ç™»å½•ç»ˆç«¯æˆ–é‡å¯åç”Ÿæ•ˆï¼š 123456$ chsh -s /bin/zsh//æˆ–:$ chsh -s `which zsh`$ sudo reboot zsh ä¸»é¢˜zshçš„é»˜è®¤é…ç½®é¡¹éƒ½åœ¨ ~/.zshrc æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚é‡Œé¢çš„ZSH_THEME=&quot;robbyrussell&quot; è¡¨ç¤ºå½“å‰zshçš„ä¸»é¢˜ä¸ºrobbyrussell. é…ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é‡å¯ç»ˆç«¯æˆ–æ‰“å¼€æ–°çš„æ ‡ç­¾ï¼Œæˆ–è€…ç”¨ä»¥ä¸‹å‘½ä»¤åˆ·æ–°é…ç½®ï¼š1source ~/.zshrc oh-my-zsh æä¾›äº†æ•°åç§ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç›®å½• ~/.oh-my-zsh/themes ä¸­çœ‹åˆ°ä»–ä»¬ï¼š 1~/.oh-my-zsh/themes å¦‚æœä½ ä¸çŸ¥é“é€‰å“ªä¸ªå¥½ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æˆéšæœºé¡¹ï¼š 1ZSH_THEME=&quot;random&quot; oh-my-zshå®˜æ–¹æä¾›çš„ä¸»é¢˜å¦‚ä¸‹ï¼šThemes Â· robbyrussell/oh-my-zsh Wiki Â· GitHub zsh ä¸‹çš„åå°ç¨‹åºåœ¨ zsh ä¸‹ï¼Œå¦‚æœæœ‰åå°è¿è¡Œçš„ç¨‹åºï¼Œæ­¤æ—¶æ‰§è¡Œ exit ä¼šæç¤ºå¦‚ä¸‹ï¼š 12âœ ~ exitzsh: you have running jobs. åœ¨ä¸€èˆ¬çš„ Bash ä¸‹ï¼Œæˆ‘ä»¬è®¾ç½®åå°è¿è¡Œç¨‹åºç”¨ &amp;: 1$ python cnblog.py &amp; è€Œåœ¨ zsh ä¸‹ï¼Œæˆ‘ä»¬è®¾ç½®åå°è¿è¡Œç¨‹åºåˆ™éœ€è¦ç”¨ &amp;!: 1$ python cnblog.py &amp;! StackOverflowä¸Šçš„æç¤ºï¼š 123Start the program withâ€”dolphin &amp;!The &amp;! (or equivalently, &amp;|) is a zsh-specific shortcut to both background and disown the process, such that exiting the shell will leave it running. è¯¦è§ï¼šbash - Exit zsh, but leave running jobs open? - Stack Overflow ç›¸å…³å‚è€ƒ åœ¨Ubuntuä¸Šå®‰è£…zsh Ubuntu ä¸Šå®‰è£… zsh [Linux] ubuntuå®‰è£…zsh - TangShangWen - SegmentFault oh-my-zsh]]></content>
      <tags>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¸‹è¿›ç¨‹ç®¡ç†Supervisor]]></title>
    <url>%2F2016%2F10%2F04%2Fsupervisor-process-management%2F</url>
    <content type="text"><![CDATA[Supervisor Supervisor,æ˜¯ä¸€ä¸ªè¿›ç¨‹æ§åˆ¶ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯/æœåŠ¡å™¨ç«¯ç³»ç»Ÿå…è®¸ç”¨æˆ·åœ¨UNIX-LIKE æ“ä½œç³»ç»Ÿä¸­å»ç›‘æ§ï¼Œæ§åˆ¶ä¸€äº›è¿›ç¨‹ã€‚Supervisorä½œä¸ºä¸»è¿›ç¨‹ï¼ŒSupervisorä¸‹ç®¡ç†çš„æ—¶ä¸€äº›å­è¿›ç¨‹ï¼Œå½“æŸä¸€ä¸ªå­è¿›ç¨‹å¼‚å¸¸é€€å‡ºæ—¶ï¼ŒSupervisorä¼šç«‹é©¬å¯¹æ­¤åšå¤„ç†ï¼Œé€šå¸¸ä¼šå®ˆæŠ¤è¿›ç¨‹ï¼Œé‡å¯è¯¥è¿›ç¨‹ã€‚ Supervisor æœ‰ä¸¤ä¸ªä¸»è¦çš„ç»„æˆéƒ¨åˆ†ï¼š supervisordï¼Œè¿è¡Œ Supervisor æ—¶ä¼šå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ supervisordï¼Œå®ƒè´Ÿè´£å¯åŠ¨æ‰€ç®¡ç†çš„è¿›ç¨‹ï¼Œå¹¶å°†æ‰€ç®¡ç†çš„è¿›ç¨‹ä½œä¸ºè‡ªå·±çš„å­è¿›ç¨‹æ¥å¯åŠ¨ï¼Œè€Œä¸”å¯ä»¥åœ¨æ‰€ç®¡ç†çš„è¿›ç¨‹å‡ºç°å´©æºƒæ—¶è‡ªåŠ¨é‡å¯ã€‚ supervisorctlï¼Œæ˜¯å‘½ä»¤è¡Œç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡Œ stopã€startã€restart ç­‰å‘½ä»¤ï¼Œæ¥å¯¹è¿™äº›å­è¿›ç¨‹è¿›è¡Œç®¡ç†ã€‚ Supervisor å®‰è£…é€šå¸¸é™¤äº†é€šè¿‡æºç çš„ setup.py çš„æ–¹å¼æ¥å®‰è£…(è¯¦è§å®˜ç½‘æ–‡æ¡£ Supervisor: A Process Control System &mdash; Supervisor 3.3.0 documentation )ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š 12$ sudo apt-get install supervisor$ sudo pip install supervisor ä½†è¿™ä¸¤ç§å®‰è£…æ–¹å¼æ˜¯æœ‰åŒºåˆ«çš„ã€‚ é€šè¿‡ pip çš„æ–¹å¼å®‰è£…åä¸ä¼šå®‰è£…ä¸ºé»˜è®¤æœåŠ¡ï¼Œè¿˜éœ€è¦è‡ªå·±å°†supervisorç¨‹åºè®¾ç½®ä¸ºåå°æœåŠ¡ã€‚è€Œé€šè¿‡ apt-get çš„æ–¹å¼å®‰è£…åå°±é»˜è®¤åˆ›å»ºä¸ºäº†åå°æœåŠ¡ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ service supervisor restart çš„æ–¹å¼æ¥ç®¡ç†ã€‚ å¯è§ï¼špython - supervisor.conf default location - Stack Overflow é…ç½®æ–‡ä»¶supervisorçš„é…ç½®æ–‡ä»¶é€šå¸¸å‘½åä¸º supervisord.confã€‚ é…ç½®æ–‡ä»¶æ£€æµ‹é¡ºåºå¦‚ä¸‹(é»˜è®¤ä¼šä½¿ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ª): $CWD/supervisord.conf $CWD/etc/supervisord.conf /etc/supervisord.conf /etc/supervisor/supervisord.conf (since Supervisor 3.3.0) ../etc/supervisord.conf (Relative to the executable) ../supervisord.conf (Relative to the executable) é€šè¿‡ apt-get install supervisor æ–¹å¼å®‰è£…æ‰§è¡Œ ï¼š 1$ sudo apt-get install supervisor å®‰è£…å®Œæˆåä¼šé»˜è®¤å°† supervisord å¯åŠ¨ä¸ºåå°æœåŠ¡ï¼š 123$ ps -ef|grep supervisorroot 1455 1 0 15:46 ? 00:00:00 /usr/bin/python /usr/bin/supervisord -c /etc/supervisor/supervisord.conftiger 1470 1298 0 15:46 pts/1 00:00:00 grep --color=auto supervisor é€šè¿‡ apt-get å®‰è£…çš„ supervisord ç¨‹åºä½äº /usr/bin/ ç›®å½•ä¸‹ï¼š 123$ sudo whereis supervisord[sudo] password for tiger:supervisord: /usr/bin/supervisord å®‰è£…å®ŒæˆåæŸ¥çœ‹ ls /etc/supervisor/ : 12$ ls /etc/supervisor/conf.d supervisord.conf æˆ‘ä»¬çœ‹åˆ°ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ supervisord.conf é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨ conf.d ç›®å½•ä¸‹åˆ›å»ºè‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ æŸ¥çœ‹æ–‡ä»¶ supervisord.conf å†…å®¹ï¼š 12345678910111213141516171819202122232425262728; supervisor config file[unix_http_server]file=/var/run/supervisor.sock ; (the path to the socket file)chmod=0700 ; sockef file mode (default 0700)[supervisord]logfile=/var/log/supervisor/supervisord.log ; (main log file;default $CWD/supervisord.log)pidfile=/var/run/supervisord.pid ; (supervisord pidfile;default supervisord.pid)childlogdir=/var/log/supervisor ; (&apos;AUTO&apos; child log dir, default $TEMP); the below section must remain in the config file for RPC; (supervisorctl/web interface) to work, additional interfaces may be; added by defining them in separate rpcinterface: sections[rpcinterface:supervisor]supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface[supervisorctl]serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL for a unix socket; The [include] section can just contain the &quot;files&quot; setting. This; setting can list multiple files (separated by whitespace or; newlines). It can also contain wildcards. The filenames are; interpreted as relative to this file. Included files *cannot*; include files themselves.[include]files = /etc/supervisor/conf.d/*.conf è¯¥é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æ˜¯åŒ…å«ç€ conf.d ç›®å½•ä¸‹çš„æ‰€æœ‰ *.conf æ–‡ä»¶çš„ã€‚æˆ‘ä»¬å¯ä»¥å¯¹äºä¸åŒçš„é¡¹ç›®ï¼Œä½¿ç”¨å„è‡ªç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨ /etc/supervisor/conf.d ç›®å½•ä¸‹ã€‚ æˆ‘ä»¬åœ¨ conf.d ç›®å½•ä¸‹ä½¿ç”¨ echo_supervisord_conf å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª hello.conf é…ç½®æ–‡ä»¶(æˆ–è€…ç›´æ¥é€šè¿‡ vim åˆ›å»ºä¸€ä¸ªç©ºçš„ .conf æ–‡ä»¶ä¹Ÿå¯)ï¼š 12$ tiger@localhost:/etc/supervisor/conf.d$ echo_supervisord_conf &gt; hello.conf-bash: Hello.conf: æƒé™ä¸å¤Ÿ å¦‚æœæç¤ºæ²¡æœ‰æƒé™çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š 1$ sudo su - root -c &quot;echo_supervisord_conf &gt; /etc/supervisor/conf.d/hello.conf&quot; æŸ¥çœ‹ç”Ÿæˆçš„ hello.conf : 123456789101112131415161718192021222324252627282930;[program:theprogramname];command=/bin/cat ; the program (relative uses PATH, can take args);process_name=%(program_name)s ; process_name expr (default %(program_name)s);numprocs=1 ; number of processes copies to start (def 1);directory=/tmp ; directory to cwd to before exec (def no cwd);umask=022 ; umask for process (default None);priority=999 ; the relative start priority (default 999);autostart=true ; start at supervisord start (default: true);autorestart=unexpected ; whether/when to restart (default: unexpected);startsecs=1 ; number of secs prog must stay running (def. 1);startretries=3 ; max # of serial start failures (default 3);exitcodes=0,2 ; &apos;expected&apos; exit codes for process (default 0,2);stopsignal=QUIT ; signal used to kill process (default TERM);stopwaitsecs=10 ; max num secs to wait b4 SIGKILL (default 10);stopasgroup=false ; send stop signal to the UNIX process group (default false);killasgroup=false ; SIGKILL the UNIX process group (def false);user=chrism ; setuid to this UNIX account to run the program;redirect_stderr=true ; redirect proc stderr to stdout (default false);stdout_logfile=/a/path ; stdout log path, NONE for none; default AUTO;stdout_logfile_maxbytes=1MB ; max # logfile bytes b4 rotation (default 50MB);stdout_logfile_backups=10 ; # of stdout logfile backups (default 10);stdout_capture_maxbytes=1MB ; number of bytes in &apos;capturemode&apos; (default 0);stdout_events_enabled=false ; emit events on stdout writes (default false);stderr_logfile=/a/path ; stderr log path, NONE for none; default AUTO;stderr_logfile_maxbytes=1MB ; max # logfile bytes b4 rotation (default 50MB);stderr_logfile_backups=10 ; # of stderr logfile backups (default 10);stderr_capture_maxbytes=1MB ; number of bytes in &apos;capturemode&apos; (default 0);stderr_events_enabled=false ; emit events on stderr writes (default false);environment=A=1,B=2 ; process environment additions (def no adds);serverurl=AUTO ; override serverurl computation (childutils) æˆ‘ä»¬éœ€è¦ç®¡ç†çš„ç¨‹åºåªè¦ä¾ç…§ä¸Šé¢çš„è¯´æ˜è¿›è¡Œé…ç½®å³å¯ï¼š å‡å¦‚åœ¨ç›®å½• /home/tiger/py ä¸‹æœ‰ä¸€ä¸ªéœ€è¦åœ¨åå°è¿è¡Œçš„ Python ç¨‹åº hello.py ã€‚æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ /home/tiger/py/logs ä¸‹ã€‚ 123456789101112# coding:utf-8import timedef make_log(): while True: time.sleep(2) with open(&apos;hello.log&apos;,&apos;a&apos;) as f: f.write(&apos;hello_&apos;+time.strftime(&quot;%H:%M:%S&quot;)+&apos;\r&apos;)if __name__ == &apos;__main__&apos;: make_log() æˆ‘ä»¬å‘ä¸Šé¢åˆ›å»ºçš„é…ç½®æ–‡ä»¶ /etc/supervisor/conf.d/hello.conf ä¸­å†™å…¥å¦‚ä¸‹æ•°æ®(å¯æŠŠå·²æœ‰çš„æ•°æ®æ¸…ç©ºï¼Œåˆ†å· ; å¼€å¤´çš„è¡¨ç¤ºæ³¨é‡Šä¿¡æ¯)ï¼š 12345678910[program:hello] ;æœåŠ¡çš„åç§°command=python hello.py ; supervisorå¯åŠ¨å‘½ä»¤directory=/home/tiger/py ; é¡¹ç›®çš„æ–‡ä»¶å¤¹è·¯å¾„user=tiger ; è¿›ç¨‹æ‰§è¡Œçš„ç”¨æˆ·èº«ä»½autostart=true ; æ˜¯å¦è‡ªåŠ¨å¯åŠ¨autorestart=true ; æ˜¯å¦è‡ªåŠ¨é‡å¯startsecs=1 ; è‡ªåŠ¨é‡å¯é—´éš”;logæ—¥å¿—æ–‡ä»¶çš„ä½ç½®stdout_logfile=/home/tiger/py/logs/hellopy.log ; log æ—¥å¿—stderr_logfile=/home/tiger/py/logs/hellopy.err ; é”™è¯¯æ—¥å¿— ä½¿æ–‡ä»¶å…·æœ‰å¯å†™æƒé™: 1$ sudo chmod 777 /etc/supervisor/conf.d/hello.conf é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ supervisorï¼š 1$ sudo supervisord -c /etc/supervisor/supervisord.conf é€šè¿‡ apt-get å®‰è£…çš„ supervisor åœ¨å®‰è£…å®Œæˆåå·²ç»ä½œä¸ºäº†åå°æœåŠ¡å¯åŠ¨äº†ï¼Œä¿®æ”¹äº†é…ç½®æ–‡ä»¶ååªéœ€è¦é‡æ–°åŠ è½½å³å¯ç”Ÿæ•ˆã€‚ é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ä½¿ç”¨å‘½ä»¤ï¼š 1$ sudo supervisorctl reload å…¶ä»–æ“ä½œå‘½ä»¤ï¼š 1234$ sudo supervisorctl -c /etc/supervisor/supervisord.conf status æŸ¥çœ‹ç®¡ç†è¿›ç¨‹çŠ¶æ€$ sudo supervisorctl -c /etc/supervisor/supervisord.conf reload é‡æ–°è½½å…¥é…ç½®é¡¹$ sudo supervisorctl -c /etc/supervisor/supervisord.conf start [all]|[appname] å¯åŠ¨æŒ‡å®š/æ‰€æœ‰ç¨‹åºè¿›ç¨‹$ sudo supervisorctl -c /etc/supervisor/supervisord.conf stop [all]|[appname] å…³é—­æŒ‡å®š/æ‰€æœ‰ç¨‹åºè¿›ç¨‹ æ³¨æ„ï¼š supervisor é»˜è®¤æƒ…å†µä¸‹å¦‚æœä¸æŒ‡å®šè¦æ‰§è¡Œçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¼šæŒ‰ç…§é»˜è®¤çš„é¡ºåºå»æŸ¥è¯¢ç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‰æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªä¸ºå‡†ã€‚æ‰€ä»¥ï¼Œæ‰§è¡Œä»¥ä¸Šä»£ç æ—¶ï¼Œç²¾ç®€çš„ä»£ç ä¸ºï¼š 1$ sudo supervisorctl status å®Œæ•´çš„ä»£ç ä¸ºï¼š 1$ sudo supervisorctl -c /etc/supervisor/supervisord.conf status -c å‚æ•°æŒ‡å®šä½¿ç”¨çš„é…ç½®æ–‡ä»¶ç›®å½• æ›´å¤šå‚æ•°è¯·é€šè¿‡ supervisorctl -h/--help æŸ¥çœ‹ã€‚ æµ‹è¯•æ—¶å‘ç°åœ¨ Ubuntu 16.04 ç³»ç»Ÿä¸‹é€šè¿‡ apt-get æ–¹å¼å®‰è£…çš„ Supervisor 3.3.0 ä¹‹å‰ç‰ˆæœ¬(eg:3.2.0.x) é»˜è®¤ä¸ä¼šæ³¨å†Œä¸ºåå°æœåŠ¡ï¼Œ3.3.0.xåçš„ç‰ˆæœ¬ä¼šé»˜è®¤æ³¨å†Œä¸ºåå°æœåŠ¡ã€‚ å¾…è€ƒè¯ é€šè¿‡ pip install supervisor çš„æ–¹å¼å®‰è£…é€šè¿‡ sudo pip install supervisor å®‰è£…å®Œæˆåä¸ä¼šåœ¨ /etc/ ä¸‹ç”Ÿæˆ supervisor ç›®å½•åŠå…¶ä¸‹çš„æ–‡ä»¶ã€‚åº”ç”¨ç¨‹åºæ˜¯å­˜åœ¨äº /usr/local/bin/ ç›®å½•ä¸­: 12$ ls /usr/local/bin/echo_supervisord_conf pidproxy supervisorctl supervisord å¯è§å®‰è£…æ—¶çš„è„šæœ¬å¦‚ä¸‹ï¼š 1234567............Installing /usr/local/lib/python2.7/dist-packages/supervisor-3.3.0-nspkg.pth Installing echo_supervisord_conf script to /usr/local/bin Installing pidproxy script to /usr/local/bin Installing supervisorctl script to /usr/local/bin Installing supervisord script to /usr/local/bin å¯è§é€šè¿‡ pip å®‰è£…çš„ supervisord ç¨‹åºä½äº /usr/local/bin/ ç›®å½•ä¸‹(æˆ–è€…é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥æ‰¾)ã€‚ 123$ sudo whereis supervisord[sudo] password for tiger:supervisord: /usr/local/bin/supervisord é…ç½®æ–‡ä»¶é€šå¸¸é»˜è®¤é…ç½®æ–‡ä»¶ä½äº /etc/supervisord.confã€‚ é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºé»˜è®¤é…ç½®æ–‡ä»¶ï¼š 1$ echo_supervisord_conf &gt; /etc/supervisord.conf å¦‚æœå‡ºç°æ²¡æœ‰æƒé™çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨è¿™æ¡å‘½ä»¤: 1$ sudo su - root -c &quot;echo_supervisord_conf &gt; /etc/supervisord.conf&quot; é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªå‘éœ€è¦æ³¨æ„ï¼šsupervisord.pid ä»¥åŠ supervisor.sock æ˜¯æ”¾åœ¨ /tmp ç›®å½•ä¸‹ï¼Œä½†æ˜¯ /tmp ç›®å½•æ˜¯å­˜æ”¾ä¸´æ—¶æ–‡ä»¶ï¼Œé‡Œé¢çš„æ–‡ä»¶ä¼šè¢«linuxç³»ç»Ÿåˆ é™¤çš„ï¼Œä¸€æ—¦è¿™äº›æ–‡ä»¶ä¸¢å¤±ï¼Œå°±æ— æ³•å†é€šè¿‡ supervisorctl æ¥æ‰§è¡Œ restart å’Œ stop å‘½ä»¤äº†ï¼Œå°†åªä¼šå¾—åˆ° unix:///tmp/supervisor.sock ä¸å­˜åœ¨çš„é”™è¯¯ã€‚(é€šè¿‡ apt-get æ–¹å¼å®‰è£…çš„é…ç½®æ–‡ä»¶ä¸­ä¸æ˜¯ /tmp è€Œæ˜¯/var/run) 1234567891011121314151617181920212223242526272829303132333435363738394041424344[unix_http_server]file=/tmp/supervisor.sock ; (the path to the socket file);chmod=0700 ; socket file mode (default 0700);chown=nobody:nogroup ; socket file uid:gid owner;username=user ; (default is no username (open server));password=123 ; (default is no password (open server));[inet_http_server] ; inet (TCP) server disabled by default;port=127.0.0.1:9001 ; (ip_address:port specifier, *:port for all iface);username=user ; (default is no username (open server));password=123 ; (default is no password (open server))[supervisord]logfile=/tmp/supervisord.log ; (main log file;default $CWD/supervisord.log)logfile_maxbytes=50MB ; (max main logfile bytes b4 rotation;default 50MB)logfile_backups=10 ; (num of main logfile rotation backups;default 10)loglevel=info ; (log level;default info; others: debug,warn,trace)pidfile=/tmp/supervisord.pid ; (supervisord pidfile;default supervisord.pid)nodaemon=false ; (start in foreground if true;default false)minfds=1024 ; (min. avail startup file descriptors;default 1024)minprocs=200 ; (min. avail process descriptors;default 200);umask=022 ; (process file creation umask;default 022);user=chrism ; (default is current user, required if root);identifier=supervisor ; (supervisord identifier, default is &apos;supervisor&apos;);directory=/tmp ; (default is not to cd during start);nocleanup=true ; (don&apos;t clean up tempfiles at start;default false);childlogdir=/tmp ; (&apos;AUTO&apos; child log dir, default $TEMP);environment=KEY=&quot;value&quot; ; (key value pairs to add to environment);strip_ansi=false ; (strip ansi escape codes in logs; def. false); the below section must remain in the config file for RPC; (supervisorctl/web interface) to work, additional interfaces may be; added by defining them in separate rpcinterface: sections[rpcinterface:supervisor]supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface[supervisorctl]serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL for a unix socket;serverurl=http://127.0.0.1:9001 ; use an http:// url to specify an inet socket;username=chris ; should be same as http_username if set;password=123 ; should be same as http_password if set;prompt=mysupervisor ; cmd line prompt (default &quot;supervisor&quot;)...... å°†é»˜è®¤é…ç½®æ–‡ä»¶ä¸­çš„ä»¥ä¸‹é¡¹è¿›è¡Œä¿®æ”¹ï¼š 123456789101112131415;file=/tmp/supervisor.sock;ä¿®æ”¹ä¸º `/var/run` ç›®å½•file=/var/run/supervisor.sock;logfile=/tmp/supervisord.log;ä¿®æ”¹ä¸º `/var/log` ç›®å½•logfile=/var/log/supervisord.log;pidfile=/tmp/supervisord.pid;ä¿®æ”¹ä¸º `/var/run` ç›®å½•pidfile=/var/run/supervisord.pid;serverurl=unix:///tmp/supervisor.sock;ä¿®æ”¹ä¸º `/var/run` ç›®å½•serverurl=unix:///var/run/supervisor.sock ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯åŠ¨çš„ç¨‹åºé…ç½®é¡¹ï¼š 12345678910[program:hello] ;æœåŠ¡çš„åç§°command=python hello.py ; supervisorå¯åŠ¨å‘½ä»¤directory=/home/tiger/py ; é¡¹ç›®çš„æ–‡ä»¶å¤¹è·¯å¾„user=tiger ; è¿›ç¨‹æ‰§è¡Œçš„ç”¨æˆ·èº«ä»½autostart=true ; æ˜¯å¦è‡ªåŠ¨å¯åŠ¨autorestart=true ; æ˜¯å¦è‡ªåŠ¨é‡å¯startsecs=1 ; è‡ªåŠ¨é‡å¯é—´éš”;logæ—¥å¿—æ–‡ä»¶çš„ä½ç½®stdout_logfile=/home/tiger/py/logs/hellopy.log ; log æ—¥å¿—stderr_logfile=/home/tiger/py/logs/hellopy.err ; é”™è¯¯æ—¥å¿— å¯åŠ¨ supervisordæ‰§è¡Œ supervisord å‘½ä»¤ï¼Œå°†ä¼šå¯åŠ¨ supervisord è¿›ç¨‹ï¼ŒåŒæ—¶æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„è¿›ç¨‹ä¹Ÿä¼šç›¸åº”å¯åŠ¨ã€‚ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å¯åŠ¨: 1$ sudo supervisord -c /etc/supervisord.conf ç¤ºä¾‹æ“ä½œå‘½ä»¤ï¼š 123456789tiger@localhost:~/py$ ps -ef | grep supervisortiger@localhost:~/py$ sudo supervisord -c /etc/supervisord.conftiger@localhost:~/py$ ps -ef | grep supervisorroot 7363 1 0 11:42 ? 00:00:00 /usr/bin/python /usr/local/bin/supervisord -c /etc/supervisord.conftiger@localhost:~/py$ ps -ef | grep hellotiger 7364 7363 0 11:42 ? 00:00:00 python hello.py æˆ‘ä»¬ä½¿ç”¨ supervisord æ¥å¯åŠ¨ç®¡ç†è¿›ç¨‹ï¼Œä¹‹åæ‰€æœ‰çš„æ“ä½œéƒ½ç”¨ supervisorctl æ¥æ§åˆ¶ã€‚ (default /etc/supervisord.conf) supervisorctl å‘½ä»¤ä»‹ç»123456789101112# appname ä¸º [program:x] é‡Œçš„ x$ sudo supervisorctl start [appname]|[all] å¯åŠ¨æŒ‡å®š/æ‰€æœ‰ç¨‹åºè¿›ç¨‹$ sudo supervisorctl stop [appname]|[all] åœæ­¢æŒ‡å®š/æ‰€æœ‰ç¨‹åºè¿›ç¨‹$ sudo supervisorctl status æŸ¥çœ‹ç®¡ç†æ‰€æœ‰è¿›ç¨‹çŠ¶æ€$ sudo supervisorctl status [appname] æŸ¥çœ‹ç®¡ç†æŒ‡å®šè¿›ç¨‹çŠ¶æ€$ sudo supervisorctl reload è½½å…¥æœ€æ–°çš„é…ç½®æ–‡ä»¶ï¼Œåœæ­¢åŸæœ‰è¿›ç¨‹å¹¶æŒ‰æ–°çš„é…ç½®å¯åŠ¨ã€ç®¡ç†æ‰€æœ‰è¿›ç¨‹$ sudo supervisorctl update æ ¹æ®æœ€æ–°çš„é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æ–°é…ç½®æˆ–æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ï¼Œé…ç½®æ²¡æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ä¸ä¼šå—å½±å“è€Œé‡å¯$ sudo supervisorctl restart [appname] é‡å¯æŸä¸ªè¿›ç¨‹$ sudo supervisorctl shutdown å…³é—­æ‰€æœ‰ç®¡ç†è¿›ç¨‹$ sudo supervisorctl start/stop/restart/status groupworker: ç®¡ç†æ‰€æœ‰å±äºåä¸º groupworker è¿™ä¸ªåˆ†ç»„çš„è¿›ç¨‹$ sudo supervisorctl start/stop/restart/status groupworker:name1 ç®¡ç†åˆ†ç»„é‡ŒæŒ‡å®šçš„è¿›ç¨‹ æ³¨æ„ï¼šæ˜¾ç¤ºç”¨ stop åœæ­¢æ‰çš„è¿›ç¨‹ï¼Œç”¨ reload æˆ–è€… update éƒ½ä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚ è¯¥é—®é¢˜å¾…è€ƒè¯ ç¤ºä¾‹æ“ä½œå‘½ä»¤ï¼š 123456tiger@localhost:~/py$ sudo supervisorctl statushello RUNNING pid 7382, uptime 0:01:50tiger@localhost:~/py$ sudo supervisorctl stop hellohello: stoppedtiger@localhost:~/py$ sudo supervisorctl statushello STOPPED Jul 27 11:47 AM å¼€æœºè‡ªåŠ¨å¯åŠ¨ Supervisordé€šè¿‡ pip å®‰è£…çš„ Supervisord é»˜è®¤æƒ…å†µä¸‹å¹¶æ²¡æœ‰è¢«å®‰è£…æˆæœåŠ¡ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®‰è£…è„šæœ¬å°†supervisordè®¾ç½®ä¸ºæœåŠ¡ã€‚ 1234567891011# ä¸‹è½½è„šæœ¬ (éœ€è¦rootæƒé™)$ sudo su - root -c &quot;sudo curl https://gist.githubusercontent.com/howthebodyworks/176149/raw/d60b505a585dda836fadecca8f6b03884153196b/supervisord.sh &gt; /etc/init.d/supervisord&quot;# è®¾ç½®è¯¥è„šæœ¬ä¸ºå¯ä»¥æ‰§è¡Œ$ sudo chmod +x /etc/init.d/supervisord# è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨è¿è¡Œ% sudo update-rc.d supervisord defaults# è¯•ä¸€ä¸‹ï¼Œæ˜¯å¦å·¥ä½œæ­£å¸¸$ sudo service supervisord stop$ sudo service supervisord start# æŸ¥çœ‹supervisordè¿›ç¨‹$ sudo ps -ef| grep supervisor æ³¨æ„ï¼šä¸‹è½½äº† supervisord.sh æ–‡ä»¶åï¼Œè¯·æ ¸å¯¹å¥½é‡Œé¢çš„é…ç½®å‚æ•°å’Œæœ¬åœ°æ–‡ä»¶æ‰€åœ¨ç›®å½•æ˜¯å¦ä¸€è‡´(ä¸»è¦æ˜¯ä»¥ä¸‹éƒ¨åˆ†)ï¼š 12345678910 ...# PATH should only include /usr/* if it runs after the mountnfs.sh scriptPATH=/sbin:/usr/sbin:/bin:/usr/binDESC=&quot;Description of the service&quot;NAME=supervisordDAEMON=/usr/local/bin/supervisordDAEMON_ARGS=&quot;&quot;PIDFILE=/var/run/$NAME.pidSCRIPTNAME=/etc/init.d/$NAME ... è¯¦ç»†å®‰è£…æ–¹æ³•åŠè„šæœ¬æ–‡ä»¶è§ä¸‹é¢ä¸¤ä¸ªé“¾æ¥è¯´æ˜ï¼š python - How to automatically start supervisord on Linux (Ubuntu) - Server Fault an init.d script for supervisord Â· GitHub è¿˜æœ‰ç¬¬äºŒç§æ–¹æ³•å°†supervisoréšç³»ç»Ÿå¯åŠ¨è€Œå¯åŠ¨ï¼ŒLinux åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæ‰§è¡Œ /etc/rc.local é‡Œé¢çš„è„šæœ¬ï¼Œæ‰€ä»¥åªè¦åœ¨è¿™é‡Œæ·»åŠ æ‰§è¡Œå‘½ä»¤å³å¯ï¼š 12345# å¦‚æœæ˜¯ Ubuntu æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆè¿™é‡Œè¦å†™å…¨è·¯å¾„ï¼Œå› ä¸ºæ­¤æ—¶PATHçš„ç¯å¢ƒå˜é‡æœªå¿…è®¾ç½®ï¼‰/usr/local/bin/supervisord -c /etc/supervisord.conf# å¦‚æœæ˜¯ Centos æ·»åŠ ä»¥ä¸‹å†…å®¹/usr/bin/supervisord -c /etc/supervisord.conf æµ‹è¯• supervisor ç®¡ç†çš„è¿›ç¨‹èƒ½è‡ªåŠ¨é‡å¯å°† supervisor ç®¡ç†çš„è¿›ç¨‹ç”¨ kill å‘½ä»¤æ€æ‰ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨é‡å¯ã€‚ 1234567tiger@localhost:~/py$ ps -ef | grep hellotiger 7364 7363 0 11:42 ? 00:00:00 python hello.pytiger 7368 1255 0 11:42 pts/0 00:00:00 grep --color=auto hellotiger@localhost:~/py$ kill 7364tiger@localhost:~/py$ ps -ef | grep hellotiger 7382 7363 2 11:45 ? 00:00:00 python hello.pytiger 7384 1255 0 11:45 pts/0 00:00:00 grep --color=auto hello ä½¿ç”¨ includeåœ¨é…ç½®æ–‡ä»¶çš„æœ€åï¼Œæœ‰ä¸€ä¸ª [include] çš„é…ç½®é¡¹ã€‚æˆ‘ä»¬å¯ä»¥ include æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å°±èƒ½ä¸ºæ¯ä¸ªè¿›ç¨‹æˆ–ç›¸å…³çš„å‡ ä¸ªè¿›ç¨‹çš„é…ç½®å•ç‹¬å†™æˆä¸€ä¸ªæ–‡ä»¶ã€‚ é…ç½®æ–‡ä»¶çš„åç¼€åå¯ä»¥ä¸º .conf æˆ– .iniã€‚ åœ¨ /etc/supervisord.conf æœ«å°¾æ·»åŠ å¦‚ä¸‹ï¼š 12[include]files = /etc/supervisord.d/*.conf æˆ‘ä»¬åœ¨ /home/tiger/py ç›®å½•ä¸‹å†å»ºç«‹ä¸€ä¸ª world.py çš„pythonç¨‹åºæ¥åšæµ‹è¯•ã€‚ ç„¶ååœ¨ /etc ç›®å½•ä¸‹åˆ›å»º supervisord.d ç›®å½•ï¼Œæ·»åŠ ä¸€ä¸ª world.conf é…ç½®æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹é…ç½®ä¿¡æ¯ã€‚ 12345678910[program:world] ;æœåŠ¡çš„åç§°ï¼Œåé¢æ“ä½œä¼šç”¨åˆ°command=python world.py ; supervisorå¯åŠ¨å‘½ä»¤directory=/home/tiger/py ; é¡¹ç›®çš„æ–‡ä»¶å¤¹è·¯å¾„user=tiger ; è¿›ç¨‹æ‰§è¡Œçš„ç”¨æˆ·èº«ä»½autostart=true ; æ˜¯å¦è‡ªåŠ¨å¯åŠ¨autorestart=true ; æ˜¯å¦è‡ªåŠ¨é‡å¯startsecs=1 ; è‡ªåŠ¨é‡å¯é—´éš”;logæ—¥å¿—æ–‡ä»¶çš„ä½ç½®stdout_logfile=/home/tiger/py/logs/worldpy.log ; log æ—¥å¿—stderr_logfile=/home/tiger/py/logs/worldpy.err ; é”™è¯¯æ—¥å¿— ç„¶åé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼š 1$ sudo supervisorctl reload æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š 12345678$ sudo supervisorctl statushello RUNNING pid 1549, uptime 0:00:28world RUNNING pid 1548, uptime 0:00:28$ sudo supervisorctl stop hellohello: stopped$ sudo supervisorctl statushello STOPPED Jul 27 04:53 PMworld RUNNING pid 1573, uptime 0:00:21 è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ä¸åŒçš„é…ç½®æ–‡ä»¶æ¥ç®¡ç†ä¸åŒçš„ç¨‹åºè¿›ç¨‹äº†ã€‚ Supervisor UI ç®¡ç†å°ï¼šåœ¨é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸‹é¢çš„é…ç½®é¡¹ï¼š 1234;[inet_http_server] ; inet (TCP) server disabled by default;port=127.0.0.1:9001 ; (ip_address:port specifier, *:port for all iface);username=user ; (default is no username (open server));password=123 ; (default is no password (open server)) å»é™¤ [inet_http_server] å’Œ port=127.0.0.1:9001 å‰é¢çš„åˆ†å·ï¼Œç„¶åæ‰§è¡Œ sudo supervisorctl reload é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ã€‚ä¹‹ååœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:9001 å°±èƒ½æŸ¥çœ‹åˆ°Webç‰ˆçš„è¿›ç¨‹ç®¡ç†ç•Œé¢äº†ã€‚ æ³¨æ„ï¼šå¦‚æœè®¾ç½®ä¸º port=127.0.0.1:9001ï¼Œåˆ™åªèƒ½åœ¨æœ¬æœºè®¿é—®ï¼›å¦‚æœä¸º port=*:9001 åˆ™å¯ä»¥åœ¨å¤–ç½‘è¿›è¡Œè®¿é—®ã€‚ æ³¨æ„ï¼š;[inet_http_server] è¿™ä¸ªå‰é¢çš„åˆ†å·å¿…é¡»å»æ‰ï¼Œè¦ä¸ç„¶ä¸ç®¡ç”¨ã€‚ Supervisor é›†ç¾¤ç®¡ç†é›†ä¸­è¿›ç¨‹ç®¡ç†ï¼Œå¯åœ¨ä¸€å°æœºå™¨ä¸‹ç®¡ç†å¤šå°æœºå™¨çš„è¿›ç¨‹ã€‚ è¯¦è§ï¼šSupervisoré›†ç¾¤ç®¡ç†å¼€å‘ æ–‡æ¡£ XML-RPC API Documentation &mdash; Supervisor 3.3.0 documentation supervisord çš„ XML-RPC API ä½¿ç”¨è¯´æ˜ - yexiaoxiaobai - SegmentFault Supervisoré›†ç¾¤ç®¡ç†WEB UI (monitor) - WisZhouçš„æƒ³åˆ°å•¥å†™å•¥ - åšå®¢é¢‘é“ - CSDN.NET GitHub - WisZhou/supervisord-monitor: Supervisord Monitoring Tool GitHub - luxbet/supervisorui: Supervisor multi-server dashboard unix:///var/run/supervisor.sock no such fileæŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼šunix:///var/run/supervisor.sock no such file å¯¹äºè¯¥é—®é¢˜ï¼Œæˆ‘çš„æ“ä½œæ˜¯ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š 1$ sudo supervisord unix:///var/run/supervisor.sock no such file #480 æ³¨æ„ï¼šè¢«ç›‘æ§çš„è¿›ç¨‹è¦ä»¥édaemonæ–¹å¼è¿è¡Œè¯¥é—®é¢˜æš‚æœªç ”ç©¶ã€‚ç•¥ã€‚ supervisoræ·±å…¥ç ”ç©¶ä¹‹ å¤šè¿›ç¨‹ç•¥ã€‚ supervisoræ·±å…¥ç ”ç©¶ä¹‹ group åˆ†ç»„ç®¡ç†ç•¥ã€‚ supervisorè°ƒç”¨ virtualenv ç¯å¢ƒä¸­çš„pythoné¡¹ç›®é…ç½® .conf æ–‡ä»¶æ—¶ï¼ŒåŠ ä¸Š environment å‚æ•°ï¼ŒæŒ‡å®š virtualenv çš„ç›®å½•: 123456789command = /home/www/flasky/env/bin/gunicorn -w 2 -b 0.0.0.0:8080 --max-requests 2000 --log-level debug --name %(program_name)s &quot;app:create_app(&apos;development&apos;)&quot;directory = /home/www/flaskyenvironment=PATH=&quot;/home/www/flasky/env/bin&quot;, GEVENT_RESOLVER=&quot;ares&quot;user = rootnumprocs=1autostart=falseautorestart=true...... ç›¸å…³é“¾æ¥ Python è¿›ç¨‹ç®¡ç†å·¥å…· Supervisor ä½¿ç”¨æ•™ç¨‹ - restran - åšå®¢å›­ Python è¿›ç¨‹ç®¡ç†å·¥å…· Supervisor ä½¿ç”¨æ•™ç¨‹ | æ·¡æ°´ç½‘å¿— python - How to automatically start supervisord on Linux (Ubuntu) - Server Fault ubuntuä¸‹supervisorå®‰è£…ä¸ä½¿ç”¨ç¬”è®° - ä¸ºç¨‹åºå‘˜æœåŠ¡ ä½¿ç”¨ supervisor ç®¡ç†è¿›ç¨‹ - ææ—å…‹æ–¯ ä½¿ç”¨Supervisorç®€åŒ–è¿›ç¨‹ç®¡ç†å·¥ä½œ - EverET.org python - supervisor.conf default location - Stack Overflow supervisorçš„é…ç½®æ–‡ä»¶æŸ¥è¯¢ç›®å½• linux åå°è¿›ç¨‹ç®¡ç†åˆ©å™¨supervisor - youxin - åšå®¢å›­ Supervisorä½¿ç”¨æ•™ç¨‹ | Snow Memory â˜† Linuxè¿›ç¨‹ç®¡ç†å·¥å…·supervisorå®‰è£…åŠä½¿ç”¨ | cpper â˜† Supervisor: A Process Control System &mdash; Supervisor 3.3.0 documentation å®˜æ–¹æ–‡æ¡£ How To Install and Manage Supervisor on Ubuntu and Debian VPS | DigitalOcean supervisoråˆä½“éªŒ - ç®€ä¹¦ ä½¿ç”¨ supervisor ç®¡ç†è¿›ç¨‹ - ææ—å…‹æ–¯ æ’ç‰ˆå¥½çœ‹ supervisord éƒ¨ç½² Flask &#8211; Angiris Council å¥½ Supervisoræ‰‹å†Œ - GitBook supervisord éƒ¨ç½² Flask virtualenv wrapper]]></content>
      <tags>
        <tag>Supervisor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Shadowsocksè½»æ¾å®ç°ç§‘å­¦ä¸Šç½‘]]></title>
    <url>%2F2016%2F10%2F02%2Fuse-shadowsocks-to-have-better-internet-experience%2F</url>
    <content type="text"><![CDATA[ç”±äºä¸ªäººå¯¹ç™¾åº¦çš„åŒæ¶ï¼Œå¹³æ—¶ä¸Šç½‘å¾ˆå°‘ç”¨ç™¾åº¦æœç´¢ã€‚è€Œåˆå› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…è¦æƒ³ç”¨Googleæ¥ä¸Šç½‘ç€å®æ˜¯è¦è´¹ä¸€ç¿»å¿ƒæ€çš„ã€‚æ‰€ä»¥ä¹Ÿåªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œç”¨å¾®è½¯çš„Bingæ¥æŸ¥è¯¢ä¸€äº›èµ„æ–™ã€‚ å‰å‡ å¤©åˆšåˆšæŠŠæˆ‘åœ¨é¦™æ¸¯çš„äº‘æœåŠ¡å™¨è¿›è¡Œäº†ç³»ç»Ÿæ›´æ¢ï¼Œä»Windows Serveræ¢æˆäº†Linuxç³»ç»Ÿï¼Œæƒ³èµ·ä¹‹å‰æ›¾çœ‹è¿‡çš„ä½¿ç”¨Shadowsockså®ç°ä»£ç†ä¸Šç½‘çš„æ–‡ç« ï¼Œæ‰€ä»¥å°±æƒ³è¦äº²è‡ªå®ç°ä¸€ä¸‹ã€‚ shadowsocksæ˜¯ä¸€ä¸ªè‘—åçš„è½»é‡çº§socketä»£ç†ï¼ŒåŸå§‹ç‰ˆæœ¬æ˜¯åŸºäºPythonç¼–å†™ï¼Œåæ¥åˆæœ‰äº†Goè¯­è¨€ç‰ˆæœ¬ã€‚ä¸è¿‡è¯¥ç‰ˆæœ¬åœ¨Githubä¸Šçš„æºä»£ç ç”±äºâ€œä½ æ‡‚å¾—â€çš„åŸå› ï¼Œå·²ç»è¢«å¼€å‘è€…åˆ é™¤äº†ã€‚ è¿™é‡Œæˆ‘æ¨èå®‰è£…çš„æ˜¯ shadowsocks-libev ç‰ˆæœ¬ã€‚shadowsocks-libev æ˜¯ä¸€ä¸ª shadowsocks åè®®çš„è½»é‡çº§å®ç°ï¼Œæ˜¯ shadowsocks-android, shadowsocks-ios ä»¥åŠ shadowsocks-openwrt çš„ä¸Šæ¸¸é¡¹ç›®ã€‚å…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š ä½“ç§¯å°å·§ï¼Œé™æ€ç¼–è¯‘å¹¶æ‰“åŒ…ååªæœ‰ 100 KB é«˜å¹¶å‘ï¼ŒåŸºäº libev å®ç°çš„å¼‚æ­¥ I/Oï¼Œä»¥åŠåŸºäºçº¿ç¨‹æ± çš„å¼‚æ­¥ DNSï¼ŒåŒæ—¶è¿æ¥æ•°å¯ä¸Šä¸‡ã€‚ åŸºäºCè¯­è¨€å®ç°ï¼Œå†…å­˜å ç”¨å°ï¼ˆ600kå·¦å³ï¼‰ï¼Œä½ CPU æ¶ˆè€— shadowsocks-libev çš„å®‰è£…æˆ‘çš„äº‘æœåŠ¡å™¨ç³»ç»Ÿä¸º Ubuntu 14.04 TFS é€šå¸¸ shadowsocks-libev ç‰ˆæœ¬æœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œä»æºç å®‰è£…å’Œé€šè¿‡è½¯ä»¶æºæ¥å®‰è£…ã€‚è¿™é‡Œæˆ‘æ¨èä½¿ç”¨æºç å®‰è£…çš„æ–¹å¼ã€‚ ä»æºç å®‰è£… (Ubuntu/Debianç³»ç»Ÿä¸‹)å®‰è£…å¿…é¡»çš„åŒ…12345$ sudo apt-get udpate$ mkdir shadowsocks-libev &amp;&amp; cd shadowsocks-libev$ sudo apt-get install build-essential autoconf libtool libssl-dev gawk debhelper dh-systemd init-system-helpers pkg-config asciidoc xmlto apg libpcre3-dev å®‰è£…è¿‡ç¨‹ä¼šéœ€è¦ä¸€äº›æ—¶é—´ã€‚ é€šè¿‡Gitä¸‹è½½æºç 1$ git clone https://github.com/shadowsocks/shadowsocks-libev.git ç„¶åç”ŸæˆdebåŒ…å¹¶å®‰è£…ï¼Œä¾ç…§ä»¥ä¸‹æ­¥éª¤ä¾æ¬¡æ‰§è¡Œ(å¦‚æœå‡ºé”™è¯·æ£€æŸ¥ç³»ç»Ÿæˆ–è€…ä¹‹å‰çš„æ­¥éª¤)ï¼š 1234567$ cd shadowsocks-libev$ dpkg-buildpackage -b -us -uc -i$ cd ..$ sudo dpkg -i shadowsocks-libev*.deb åœ¨ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ cd .. åï¼Œå¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹ç¼–è¯‘ç”Ÿæˆäº†ä¸‰ä¸ª *.deb æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œçš„æ˜¯ï¼š libshadowsocks-libev-dev_2.5.3-1_amd64.deb libshadowsocks-libev2_2.5.3-1_amd64.deb shadowsocks-libev_2.5.3-1_amd64.deb ä¸Šé¢çš„æ­¥éª¤æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬å°±å·²ç»å®‰è£…æˆåŠŸäº† shadowsocks-libev ã€‚ é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š 12$ sudo service shadowsocks-libev status * shadowsocks-libev is not running é€šè¿‡debåŒ…å®‰è£…çš„æ–¹å¼é»˜è®¤ä¼šå¼€å¯è‡ªå¯ã€‚ ç›´æ¥ä»ä½œè€…æä¾›çš„è½¯ä»¶æºå®‰è£…ï¼ˆUbuntu/Debianï¼‰ç”±äºä½œè€…æ›´æ–°æºç åå¹¶ä¸ä¸€å®šåŠæ—¶æ›´æ–°è¿™äº›é¢„ç¼–è¯‘çš„åŒ…ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯æœ€æ–°ç‰ˆæœ¬ï¼Œä½†æ“ä½œæ­¥éª¤æ¯”è¾ƒç®€å•ã€‚ å…ˆæ·»åŠ GPG Key1$ wget -O- http://shadowsocks.org/debian/1D27208A.gpg | sudo apt-key add - é…ç½®å®‰è£…æºï¼Œåœ¨/etc/apt/sources.listæœ«å°¾æ·»åŠ 12345# Ubuntu 14.04 or above$ deb http://shadowsocks.org/ubuntu trusty main# Debian Wheezy, Ubuntu 12.04 or any distribution with libssl &gt; 1.0.1$ deb http://shadowsocks.org/debian wheezy main æ‰§è¡Œå®‰è£…12$ apt-get update$ apt-get install shadowsocks-libev è¿™é‡Œæˆ‘åœ¨ é…ç½® wget -O- http://shadowsocks.org/debian/1D27208A.gpg | sudo apt-key add - æ—¶æ— æ³•è¿æ¥åˆ° http://shadowsocks.org ç«™ç‚¹ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•æˆ‘å°±æ²¡æœ‰ç»§ç»­æµ‹è¯•ã€‚ shadowsocks-libev ä¸€é”®å®‰è£…å¾…å®Œå–„ï¼Œè¯¦è§ï¼šhttps://github.com/iMeiji/shadowsocks_install/wiki/shadowsocks-libev-%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85 é…ç½®ä¸å¯åŠ¨é…ç½®æ–‡ä»¶shadowsocks-divev ç”Ÿæˆçš„é»˜è®¤é…ç½®æ–‡ä»¶åœ¨ç›®å½• /etc/shadowsocks-libev ä¸‹ï¼Œæ‰¾åˆ° config.json æ–‡ä»¶å¹¶ç¼–è¾‘ï¼š å°†é…ç½®ä¿¡æ¯ï¼š 12345678&#123; &quot;server&quot;:&quot;127.0.0.1&quot;, &quot;server_port&quot;:8388, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;OikIryahoa&quot;, &quot;timeout&quot;:60, &quot;method&quot;:null&#125; ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼š 12345678&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:8388, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;OikIryahoa&quot;, &quot;timeout&quot;:60, &quot;method&quot;:&quot;aes-256-cfb&quot;&#125; å…¶ä¸­ï¼š server ï¼šä¸»æœºåŸŸåæˆ–è€…IPåœ°å€ï¼Œå°½é‡å¡«IP (å¯ä»¥ä¸ºæœåŠ¡å™¨å®é™…çš„IPåœ°å€æˆ– 0.0.0.0 ) server_port ï¼šæœåŠ¡å™¨ç›‘å¬ç«¯å£ local_port: å®¢æˆ·ç«¯è¿æ¥ç«¯å£ password ï¼šå¯†ç  timeout ï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ã€‚è¦é€‚ä¸­ method ï¼šåŠ å¯†æ–¹å¼ é»˜è®¤ä¸ºtable,å…¶ä»–æœ‰rc4,rc4-md5,aes-128-cfb, aes-192-cfb, aes-256-cfb,bf-cfb, camellia-128-cfb, camellia-192-cfb,camellia-256-cfb, cast5-cfb, des-cfb æ³¨æ„ï¼š å¦‚æœå®¢æˆ·ç«¯æœ‰OpenWRTè·¯ç”±å™¨ç­‰è®¾å¤‡ï¼Œæ¨è rc4-md5 ï¼Œæ€§èƒ½æ›´å¥½ï¼›å¦åˆ™å¯ä»¥é€‰ç”¨å®‰å…¨æ€§æ›´å¥½çš„ aes-256-cfb ç­‰ã€‚ server é…ç½®é¡¹è¡¨ç¤ºä¸»æœºçš„åŸŸåæˆ–IPåœ°å€ï¼Œè¿™é‡Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ 127.0.0.1 ä½†ä¸å»ºè®®è®¾ç½®æˆ 127.0.0.1 ï¼Œæµ‹è¯•æ—¶å‘ç°æ— æ³•æ­£ç¡®è¿é€šã€‚ä½ å¯ä»¥è®¾ç½®æˆ 0.0.0.0 æˆ– çœŸå®çš„æœåŠ¡å™¨æ‰€åœ¨çš„IPåœ°å€ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶é‡å¯åç”Ÿæ•ˆã€‚ é»˜è®¤çš„å®¢æˆ·ç«¯çš„IPåœ°å€ä¸º 127.0.0.1 å¯åŠ¨ä¸Šé¢æœ‰æåˆ°ï¼Œé€šè¿‡debåŒ…å®‰è£…åå°±é»˜è®¤å¯åŠ¨äº†ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¥æ§åˆ¶ï¼š 1234$ sudo service shadowsocks-libev start$ sudo service shadowsocks-libev stop$ sudo service shadowsocks-libev status$ sudo service shadowsocks-libev restart å®‰è£…åçš„shadowsocksç¨‹åºåä¸º ss-server ï¼Œç¨‹åºç›®å½•ä¸º /usr/bin/ss-server ã€‚ æŸ¥çœ‹ ss-server çš„å¯åŠ¨ä¿¡æ¯ï¼š 123456$ sudo service shadowsocks-libev status * shadowsocks-libev is not running$ ps ax |grep ss-server40160 ? Ss 0:00 /usr/bin/ss-server -c /etc/shadowsocks-libev/config.json -a root -u -f /var/run/shadowsocks-libev/shadowsocks-libev.pid -u40162 ? S+ 0:00 grep --color=auto ss-server æ³¨æ„å…¶ä¸­æœ‰ -uï¼Œè¡¨ç¤ºä¼šé€šè¿‡udpçš„æ–¹å¼è¿›è¡Œè¿æ¥ã€‚ é€šè¿‡ netstat -lnp å¯ä»¥æŸ¥çœ‹ ss-server ç›‘å¬çš„ç«¯å£ï¼š 12345678910$ netstat -lnp(No info could be read for &quot;-p&quot;: geteuid()=1000 but you should be root.)Active Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program nametcp 0 0 0.0.0.0:8388 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN - tcp6 0 0 :::80 :::* LISTEN - tcp6 0 0 :::22 :::* LISTEN - udp 0 0 0.0.0.0:8388 0.0.0.0:* - å¯ä»¥çœ‹åˆ° ss-server é€šè¿‡ tcp å’Œ udp ä¸¤ç§æ–¹å¼ç›‘å¬äº† 8388 ç«¯å£ã€‚ shadowsocks å®¢æˆ·ç«¯çš„è®¾ç½®shadowsocks é»˜è®¤æ”¯æŒå¤šç§å®¢æˆ·ç«¯ã€‚å¯ä»¥ä» Shadowsocks - Clients ä¸‹è½½å¯¹åº”å¹³å°çš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚ windows å®¢æˆ·ç«¯windowsç”¨æˆ·å¯ä»¥ä» Releases Â· shadowsocks/shadowsocks-windows Â· GitHub ä¸‹è½½å®‰è£…åŒ…ã€‚è§£å‹åå¾—åˆ° Shadowsocks.exe ç¨‹åºã€‚ è¿è¡Œï¼Œé…ç½® æœåŠ¡å™¨åœ°å€ æœåŠ¡å™¨ç«¯å£ å¯†ç  åŠ å¯†æ–¹å¼ å³å¯ã€‚æŒ‰ç…§é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®ï¼Œé»˜è®¤ç›‘å¬å®¢æˆ·ç«¯æ‰€åœ¨æœ¬åœ°ç³»ç»Ÿ 127.0.0.1 çš„ 1080 ç«¯å£ã€‚ æ›´åŠ è¯¦ç»†çš„å†…å®¹å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡ç« ï¼š Shadowsocks Windows ä½¿ç”¨è¯´æ˜ Â· shadowsocks/shadowsocks-windows Wiki Â· GitHub Chrome+SwitchyOmegaå®ç°ç§‘å­¦ä¸Šç½‘å¾…ç»­ã€‚ã€‚ã€‚ shadowsocks-libev çš„å¤šç”¨æˆ·é…ç½®Cè¯­è¨€ç¼–å†™çš„shadowsockså®¢æˆ·ç«¯/æœåŠ¡ç«¯è½¯ä»¶shadowsocks-libevå¹¶ä¸åƒgoç‰ˆæœ¬æˆ–pythonç‰ˆæœ¬çš„shadowsockså®¢æˆ·ç«¯/æœåŠ¡ç«¯è½¯ä»¶é‚£æ ·ç›´æ¥æ”¯æŒå¤šå®ä¾‹é…ç½®ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹å¦‚ä¸‹è¯´æ˜ï¼š please support multi-port config.json Â· Issue #5 shadowsocks-libev ç‰ˆæœ¬é»˜è®¤ä¸æ”¯æŒåœ¨åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ config.json ä¸­ä¸€æ¬¡è®¾ç½®å¤šä¸ªç«¯å£å’Œå¯†ç ï¼Œå¦‚æœæƒ³è¦è®¾ç½®å¤šä¸ªï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å¤šä¸ªé…ç½®æ–‡ä»¶æ¥å®ç°ã€‚ æ–¹å¼ä¸€å…ˆåœæ­¢ ss-server æœåŠ¡ï¼š 12345$ sudo service shadowsocks-libev status * shadowsocks-libev is running$ sudo service shadowsocks-libev stop$ sudo service shadowsocks-libev status * shadowsocks-libev is not running ç„¶åï¼Œæ‹·è´ä¸€ä»½åŸæ¥çš„é…ç½®æ–‡ä»¶ï¼Œè‡ªå®šä¹‰æ–°çš„æ–‡ä»¶åï¼Œåªè¦ä¿è¯æ‰©å±•åä¸º .json å³å¯ï¼Œæˆ‘è¿™é‡Œå‘½åä¸º configuser1.json ï¼š 123$ cd /etc/shadowsocks-libev$ sudo cp config.json configuser1.json$ sudo vim configuser1.json ä¿®æ”¹é…ç½®å‚æ•°ä¸­çš„ç«¯å£å·ï¼Œå¯†ç ç­‰ï¼š 12345678&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:8398, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;OikIrya3oyt&quot;, &quot;timeout&quot;:60, &quot;method&quot;:&quot;aes-256-cfb&quot;&#125; ç„¶åå¯åŠ¨ ss-server æœåŠ¡ï¼š 123$ sudo service shadowsocks-libev start$ sudo service shadowsocks-libev status * shadowsocks-libev is running æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ·»åŠ æ–°çš„é…ç½®æ–‡ä»¶è®¾ç½® ï¼š 1$ setsid ss-server -c /etc/shadowsocks-libev/***.json -u æ³¨æ„å°†å…¶ä¸­çš„ *** æ›¿æ¢ä¸ºä½ çš„é…ç½®æ–‡ä»¶åç§°ã€‚ æ–¹å¼äºŒå¦‚æœä½ å«Œä¸Šé¢çš„â€œåœæ­¢-æ‹·è´å·²æœ‰é…ç½®æ–‡ä»¶-é‡å¯â€æ“ä½œå¤ªéº»çƒ¦ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ–°å»ºä¸€ä¸ªjsoné…ç½®æ–‡ä»¶ï¼Œç„¶åå¡«å…¥å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼š 12345678&#123; &quot;server&quot;:&quot;0.0.0.0&quot;, &quot;server_port&quot;:8398, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;OikIrya3oyt&quot;, &quot;timeout&quot;:60, &quot;method&quot;:&quot;aes-256-cfb&quot;&#125; æ³¨æ„ server_port è¦è®¾ç½®æˆæ–°çš„ç«¯å£å·ã€‚ ç„¶åç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š 1$ setsid ss-server -c /etc/shadowsocks-libev/***.json -u æŸ¥çœ‹å¯åŠ¨ä¿¡æ¯ï¼š 1234$ ps ax |grep ss-server40103 ? Ss 0:00 ss-server -c /etc/shadowsocks-libev/configuser1.json -u40160 ? Ss 0:00 /usr/bin/ss-server -c /etc/shadowsocks-libev/config.json -a root -u -f /var/run/shadowsocks-libev/shadowsocks-libev.pid -u40162 ? S+ 0:00 grep --color=auto ss-server å¯ä»¥çœ‹åˆ°æ¯”ä¹‹å‰å¤šäº†ä¸€æ¡åå°æœåŠ¡ã€‚ é€šè¿‡ netstat -lnp æ¥æŸ¥çœ‹ ss-server æ˜¯å¦ç›‘å¬äº†å¤šä¸ªç«¯å£ï¼š 123456789101112$ netstat -lnp(No info could be read for &quot;-p&quot;: geteuid()=1000 but you should be root.)Active Internet connections (only servers)Proto Recv-Q Send-Q Local Address Foreign Address State PID/Program nametcp 0 0 0.0.0.0:8388 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:8398 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN - tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN - tcp6 0 0 :::80 :::* LISTEN - tcp6 0 0 :::22 :::* LISTEN - udp 0 0 0.0.0.0:8388 0.0.0.0:* - udp 0 0 0.0.0.0:8398 0.0.0.0:* - è¿™æ ·ï¼Œå°±å®ç°äº†ç›‘å¬å¤šä¸ªç«¯å£ï¼Œå®ç°å¤šç”¨æˆ·è¿æ¥äº†ã€‚å¦‚æœæƒ³è¦åœæ­¢æ–°å¢çš„ç›‘å¬ç«¯å£ï¼Œåªéœ€è¦é‡å¯shadowsocksæœåŠ¡å°±åˆæ¢å¤é»˜è®¤ï¼Œåªä¼šç›‘å¬çš„ config.json ä¸­é…ç½®çš„ç«¯å£äº†ã€‚ ç›¸å…³é“¾æ¥ shadowsocks libev â˜† shadowsocks client Shadowsocks Windows ä½¿ç”¨è¯´æ˜]]></content>
      <tags>
        <tag>Shadowsocks</tag>
        <tag>Google</tag>
        <tag>ç§‘å­¦ä¸Šç½‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‡æ–°å®‰è£…Ubuntuç³»ç»Ÿåçš„å¿…è¦è®¾ç½®]]></title>
    <url>%2F2016%2F10%2F01%2Ffirst-install-ubuntu-need-config%2F</url>
    <content type="text"><![CDATA[ä»¥ä¸‹ä¸ºæˆ‘åœ¨é‡è£…Linuxç³»ç»Ÿåè¿›è¡Œçš„ä¸€äº›å¿…è¦çš„æ“ä½œï¼Œç‰¹æ­¤è®°å½•ã€‚ ubuntu 14.04 å‡çº§åˆ° 16.04å¦‚æœç›´æ¥æ‰§è¡Œ # do-release-upgrade å‡çº§å‘½ä»¤ï¼Œä¼šé‡åˆ°ï¼šéœ€è¦çš„ä¾èµ–å…³ç³»æœªå®‰è£… çš„æŠ¥é”™ä¿¡æ¯ï¼š 1The required dependency &apos;apt (&gt;= 1.0.1ubuntu2.13)&apos; is not installed. æˆ‘ä»¬éœ€è¦å…ˆæ›´æ–° apt åˆ° 1.0.1ubuntu2.13 ä»¥ä¸Šæ‰èƒ½è¿›è¡Œå‡çº§æ“ä½œã€‚ é€šè¿‡ä»¥ä¸‹æ“ä½œæ¥æ›´æ–°ï¼š ä¿æŒè½¯ä»¶æºæŒ‡å‘ 14.04(trusty) ä¸å˜ sudo apt-get update &amp;&amp; sudo apt-get upgrade æ­¤æ—¶ apt åº”å·²å‡çº§åˆ° 1.0.1ubuntu2.13ï¼Œå¯ä»¥ç»§ç»­ do-release-upgrade äº†ã€‚ æ€»ç»“éœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¦‚ä¸‹ï¼š 123# sudo apt-get update# sudo apt-get upgrade# sudo do-release-upgrade æ“ä½œå®Œæˆåï¼Œé‡å¯ç³»ç»Ÿå³å¯ï¼š# sudo reboot ã€‚ æ›´æ–°è½¯ä»¶åŒ…åŠå‡çº§ç³»ç»Ÿåˆ°æœ€æ–°çš„å†…æ ¸æ›´æ–°è½¯ä»¶åŒ…åˆšè£…å®Œlinuxç³»ç»Ÿåï¼Œè½¯ä»¶åŠå†…æ ¸ç‰ˆæœ¬éƒ½æ¯”è¾ƒä½ï¼Œéœ€è¦å…ˆæ›´æ–°ä¸€ä¸‹ï¼š åˆšè£…å®Œåç³»ç»Ÿç‰ˆæœ¬ä¸ºï¼š Ubuntu 16.04.1 LTS å› ä¸ºæˆ‘çš„æœåŠ¡å™¨åœ¨é¦™æ¸¯ï¼Œæ‰€ä»¥èƒ½è¿æ¥åˆ°ubuntuå®˜æ–¹çš„è½¯ä»¶æºï¼Œå¦‚æœä½ çš„ç³»ç»Ÿæ˜¯åœ¨å›½å†…ï¼Œå¯èƒ½éœ€è¦æ›´æ–°ä¸€ä¸‹è½¯ä»¶æºï¼Œä»¥å…ä¸‹è½½å¤ªæ…¢æˆ–æ›´æ–°å¤±è´¥ï¼Œè®¾ç½®è½¯ä»¶æºï¼š 1# echo &quot;deb http://cn.archive.ubuntu.com/ubuntu/ trusty main restricted universe multiverse&quot; &gt;&gt; /etc/apt/sources.list å…¶ä»–ç³»ç»Ÿå¯å‚è€ƒ ï¼šUbuntu æºåˆ—è¡¨ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ›´æ–°ï¼š 12# sudo apt-get update# sudo apt-get upgrade æ›´æ–°åçš„ç³»ç»Ÿæ˜¾ç¤ºï¼š 1Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 3.16.0-30-generic x86_64) å‡çº§ç³»ç»Ÿå†…æ ¸å‡çº§å†…æ ¸ç‰ˆæœ¬ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1# sudo apt-get install linux-generic-lts-xenial linux-image-generic-lts-xenial å®‰è£…å®Œæˆåé‡å¯ï¼š 1# sudo reboot ç™»é™†åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå†…æ ¸å·²ç»æ›´æ–°äº†ï¼š 1Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 4.4.0-38-generic x86_64) Ubuntuæ–°å¢æ™®é€šç®¡ç†å‘˜è´¦æˆ·å¹¶è®¾ç½®ç®¡ç†å‘˜æƒé™åœ¨Linuxç³»ç»Ÿä¸‹ï¼Œ$ æ˜¯æ™®é€šç®¡ç†å‘˜å‘½ä»¤æ ‡è¯†ï¼Œ# æ˜¯ç³»ç»Ÿç®¡ç†å‘˜å‘½ä»¤æ ‡è¯† æ›´æ”¹å·²æœ‰ç”¨æˆ·è´¦æˆ·å¯†ç æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ passwd å‘½ä»¤æ¥æ›´æ”¹è´¦æˆ·çš„å‘½ä»¤ï¼Œæ‰§è¡Œåè¾“å…¥ä¸¤æ¬¡æ–°å¯†ç å³å¯ã€‚ä¾‹å¦‚ä¸º root è´¦æˆ·ä¿®æ”¹å¯†ç ï¼š 1$ sudo passwd root æ–°å¢ç”¨æˆ·è´¦æˆ·å¯ä»¥é€šè¿‡ adduser å‘½ä»¤æ¥æ–°å¢è´¦æˆ·ï¼š 1$ sudo adduser username åŒæ ·çš„éœ€è¦è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼Œå…¶ä»–çš„è®¾ç½®é¡¹ç›´æ¥æŒ‰å›è½¦å³å¯ã€‚ æ–°åˆ›å»ºçš„ç”¨æˆ·åªæœ‰æ™®é€šç”¨æˆ·æƒé™ï¼Œå¦‚æœæƒ³è¦å®‰è£…è½¯ä»¶æˆ–æ›´æ–°è½¯ä»¶åŒ…ï¼Œè¿˜éœ€è¦èµ‹äºˆè´¦æˆ·ç®¡ç†å‘˜æƒé™æ‰è¡Œã€‚ ä½¿æ–°å¢ç”¨æˆ·å…·æœ‰ root æƒé™â€“å‘½ä»¤æ³•(ä¸æ¨è)åœ¨ç½‘ä¸ŠæŸ¥çœ‹ä¸ºæ–°å¢ç”¨æˆ·è´¦æˆ·å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ¥æ·»åŠ ç®¡ç†å‘˜æƒé™ï¼Œä½†æˆ‘åœ¨å®é™…æ“ä½œåå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œæ‰€ä»¥è¿™é‡Œæš‚ä¸æ¨èè¯¥æ–¹æ³•ã€‚ 1sudo usermod -G root username è¦æ·»åŠ æ–°ç”¨æˆ·åˆ° sudoï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ usermod å‘½ä»¤ã€‚è¿è¡Œ : 1$sudo usermod -G root username ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·å·²ç»æ˜¯å…¶ä»–ç»„çš„æˆå‘˜ï¼Œä½ éœ€è¦æ·»åŠ  -a è¿™ä¸ªé€‰é¡¹ï¼Œè±¡è¿™æ ·ï¼š 1$sudo usermod -a -G root username è¿™é‡Œæš‚ä½œè®°å½•ï¼Œå¾…ä»¥åæ‰¾åˆ°ä¸ºä½•æ— æ•ˆçš„åŸå› å†æ¥ä¿®æ”¹ã€‚ ä½¿æ–°å¢ç”¨æˆ·å…·æœ‰ root æƒé™â€“ä¿®æ”¹æ–‡ä»¶æ³•(æ¨è)ä½¿ç”¨æ–°åˆ›å»ºçš„ç”¨æˆ·è´¦æˆ·ç™»é™†ã€‚è¿™é‡Œæˆ‘æ–°å»ºçš„ç”¨æˆ·æ˜¯ tiger è´¦æˆ·ã€‚æ‰§è¡Œæ›´æ–°å‘½ä»¤ï¼š 123456789tiger@MyServer:~$ apt-get updateE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)E: Unable to lock directory /var/lib/apt/lists/E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)E: Unable to lock the administration directory (/var/lib/dpkg/), are you root?tiger@MyServer:~$ sudo apt-get update[sudo] password for tiger: tiger is not in the sudoers file. This incident will be reported.tiger@MyServer:~$ æŠ¥é”™ä¿¡æ¯ï¼štiger is not in the sudoers file. This incident will be reported. è¡¨åæˆ‘ä»¬æ–°å»ºçš„è´¦æˆ· tiger åœ¨ sudoers æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰æŒ‡å®šæƒé™ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— æ³•ä»¥ç®¡ç†å‘˜æƒé™æ‰§è¡Œå‘½ä»¤ã€‚ æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š å…ˆåˆ‡æ¢å› root è´¦æˆ·ä¸‹(æ³¨æ„ su - åé¢çš„ - å’Œåé¢çš„è´¦æˆ·åä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼)ï¼š 1tiger@MyServer:~$ su - root ä¸ºæ–‡ä»¶ /etc/sudoers æ·»åŠ å†™æƒé™ï¼Œé»˜è®¤æƒ…å†µä¸‹è¯¥æ–‡ä»¶ä¸ºåªè¯»å±æ€§ã€‚æ‰§è¡Œå‘½ä»¤ï¼š# chmod u+w /etc/sudoers ã€‚ ç„¶åç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™ä¸€è¡Œ : 1root ALL=(ALL:ALL) ALL åœ¨ä¸‹é¢æŒ‰ç…§åŒæ ·çš„æ ¼å¼æ·»åŠ : 1xxx ALL=(ALL:ALL) ALL (è¿™é‡Œçš„xxxæ˜¯ä½ è¦è®¾ç½®çš„ç”¨æˆ·å)ï¼Œç„¶åä¿å­˜é€€å‡ºã€‚ æ’¤é”€æ–‡ä»¶çš„å†™æƒé™ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š# chmod u-w /etc/sudoers ã€‚ å®Œæ•´çš„å‘½ä»¤å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526root@MyCloudServer:/home/tiger# chmod u+w /etc/sudoersroot@MyCloudServer:/home/tiger# vim /etc/sudoersroot@MyCloudServer:/home/tiger# ls -al /etc/sudoers -rw-r----- 1 root root 770 Sep 28 02:15 /etc/sudoersroot@MyCloudServer:/home/tiger# chmod u-w /etc/sudoersroot@MyCloudServer:/home/tiger# su - tigertiger@MyCloudServer:~$ apt-get updateE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)E: Unable to lock directory /var/lib/apt/lists/E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)E: Unable to lock the administration directory (/var/lib/dpkg/), are you root?tiger@MyCloudServer:~$ sudo apt-get updateGet:1 http://security.ubuntu.com trusty-security InRelease [65.9 kB]Ign http://us.archive.ubuntu.com trusty InRelease Get:2 http://us.archive.ubuntu.com trusty-updates InRelease [65.9 kB]Get:3 http://security.ubuntu.com trusty-security/main Sources [120 kB] Get:4 http://us.archive.ubuntu.com trusty-backports InRelease [65.9 kB] Get:5 http://security.ubuntu.com trusty-security/restricted Sources [4,064 B] Hit http://us.archive.ubuntu.com trusty Release.gpg Get:6 http://security.ubuntu.com trusty-security/universe Sources [42.5 kB]Get:7 http://us.archive.ubuntu.com trusty-updates/main Sources [383 kB]Get:8 http://security.ubuntu.com trusty-security/multiverse Sources [2,749 B]...... è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸ºæ–°åˆ›å»ºçš„è´¦æˆ· tiger è®¾ç½®äº†ç®¡ç†å‘˜æƒé™ï¼Œæ‰§è¡Œå‘½ä»¤æ—¶å°±å¯ä»¥é€šè¿‡ sudo æ¥ææƒäº†ã€‚ å‚è€ƒï¼š xx is not in the sudoers file é—®é¢˜è§£å†³ã€è½¬è½½ã€‘ - evasnowind - åšå®¢å›­ UbuntuæŠ€å·§ä¹‹ is not in the sudoers fileè§£å†³æ–¹æ³•_Linuxæ•™ç¨‹_Linuxå…¬ç¤¾-Linuxç³»ç»Ÿé—¨æˆ·ç½‘ç«™ Ubuntu sudo Error:unable to resolve hostä¸ºæ–°å¢ç”¨æˆ·è®¾ç½®äº†ç®¡ç†å‘˜æƒé™åï¼Œæ¯æ¬¡æ‰§è¡Œ $ sudo xxxx å‘½ä»¤æ—¶éƒ½ä¼šå¼¹å‡ºä¸‹é¢ä¸€æ¡ä¿¡æ¯ï¼š 1Ubuntu sudo Error:unable to resolve host è¿™ç§æƒ…å†µæ˜¯ ç³»ç»Ÿçš„ä¸»æœºåå’Œé…ç½®æ–‡ä»¶ä¸­çš„ä¸»æœºåä¸ä¸€è‡´é€ æˆçš„ã€‚ ç¼–è¾‘ /etc/hostname æ›´æ”¹ä¸»æœºå(hostname)ä¸»æœºåæ˜¯åœ¨å‘½ä»¤è¡Œä¸­ tiger@MyServer:~$ @ç¬¦åˆåé¢çš„ã€‚ ç¼–è¾‘ /etc/hosts æ–‡ä»¶ä¸­ï¼š 123127.0.0.1 localhost127.0.1.1 ubuntu æ›´æ”¹ ubuntu ä¸ºä½ çš„ hostname çš„åç§°ã€‚ ç»“æœä¸ºï¼š 1234567127.0.0.1 localhost127.0.1.1 myhostname# The following lines are desirable for IPv6 capable hosts::1 localhost ip6-localhost ip6-loopbackff02::1 ip6-allnodesff02::2 ip6-allrouters ç„¶åé‡å¯ç³»ç»Ÿã€‚sudo reboot ã€‚å¿…éœ€é‡å¯ä¹‹åæ‰æœ‰æ•ˆã€‚ ubuntu ä¸‹ä¿®å¤ä½¿ç”¨sudoå‘½ä»¤åå‡ºç°ä¸»æœºåå­—ä¸èƒ½è§£æçš„é”™è¯¯ï¼šFix Ubuntu sudo Error:unable to resolve host - wzb56çš„èµ„æ–™åº“ - åšå®¢é¢‘é“ - CSDN.NET Ubuntu 14.04 ä¿®æ”¹æ—¶åŒºåœ¨ç³»ç»Ÿä¸‹é€šè¿‡ date å‘½ä»¤æŸ¥çœ‹æ—¶é—´ï¼Œå¯èƒ½ä¼šä¸æœ¬åœ°çš„ä¹‹é—´ä¸ä¸€è‡´ã€‚ æ¯”å¦‚ æˆ‘å½“å‰ç³»ç»Ÿçš„æ—¶é—´ä¸º 2016-10-5 15:53:54 è€Œ æœåŠ¡å™¨çš„æ—¶é—´ä¸º Wed Oct 5 03:58:37 EDT 2016 ã€‚æŒ‰ç†è¯´ï¼ŒLinuxç³»ç»Ÿåœ¨é‡å¯åä¼šè‡ªåŠ¨åŒæ­¥æ—¶é—´çš„ï¼Œè€Œè¿™ç§æƒ…å†µå¯èƒ½æ˜¯æ—¶åŒºä¸ä¸€è‡´çš„åŸå› ã€‚ æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¹¶æŒ‰ç…§æç¤ºé€‰æ‹© â€œAsia/Shanghaiâ€ï¼š 1# sudo dpkg-reconfigure tzdata é€‰æ‹©å®Œæˆåï¼Œä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š 123Current default time zone: &apos;Asia/Shanghai&apos;Local time is now: Wed Oct 5 16:01:12 CST 2016.Universal Time is now: Wed Oct 5 08:01:12 UTC 2016. å†æ¬¡æŸ¥çœ‹æ—¶é—´ï¼š 12tiger@MyServer:~$ dateWed Oct 5 16:02:13 CST 2016 Ubuntu 14.04 ä¿®æ”¹æ—¶åŒº - MyPyçš„ä¸ªäººé¡µé¢ - å¼€æºä¸­å›½ç¤¾åŒº Linux ä¸‹åˆ‡æ¢ç”¨æˆ·su å’Œ su - çš„åŒºåˆ« 12su abcsu - abc æ³¨æ„ï¼Œsu - åœ¨ - å’Œè´¦æˆ·ååé¢è¿˜æœ‰ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚ ï¼ˆæ€»ç»“ï¼‰Linuxä¸‹suä¸su -å‘½ä»¤çš„æœ¬è´¨åŒºåˆ« linux - Why do we use su - and not just su? - Unix &amp; Linux Stack Exchange Ubuntuä¸‹SSHèƒ½è¿æ¥è€ŒSFTPä¸èƒ½è¿æ¥sshèƒ½å¤Ÿè¿æ¥è€Œsftpä¸èƒ½è¿æ¥çš„è§£å†³æ–¹æ³• ç”¨FileZillaä¸€ç›´ä¸èƒ½ç™»å½•è¿œç¨‹çš„æœåŠ¡å™¨ï¼Œsshçš„ç™»å½•å°±OK 1# locate sftp-server locateä¸€ä¸‹ftp-serverï¼Œå‘ç°ç›®å½•è·Ÿé…ç½®æ–‡ä»¶ä¸­çš„ä¸åŒ 1# vi /etc/ssh/sshd_config 1234# Allow client to pass locale environment variablesAcceptEnv LANG LC_*#Subsystem sftp /usr/lib/openssh/sftp-server ä¸Šé¢çš„ locate æŸ¥çœ‹åˆ°çš„åˆ—è¡¨ï¼Œæˆ‘æ›´æ”¹æˆäº†å¦‚ä¸‹çš„è®¾ç½®ï¼š 1234# Allow client to pass locale environment variablesAcceptEnv LANG LC_*Subsystem sftp /usr/lib/sftp-server å³æŠŠå®ƒé»˜è®¤æˆç¬¬äºŒä¸ªæ”¹æˆäº†åˆ—è¡¨ä¸­çš„ç¬¬ä¸€é¡¹ã€‚ ç„¶åé‡å¯sshæœåŠ¡ï¼š 1sudo service ssh restart å†æ¬¡å°è¯•ï¼Œåˆ™èƒ½å¤Ÿæ­£å¸¸è¿æ¥äº†ã€‚]]></content>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Docker+Flaskæ­å»ºå¾®ä¿¡å…¬ä¼—å¹³å°ä¹‹ä¸€]]></title>
    <url>%2F2016%2F09%2F24%2Fdocker-and-flask-build-wechat-public-platform-first%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰ç”³è¯·çš„ä¸ªäººå…¬ä¼—å·åœ¨ç”³è¯·é€šè¿‡åç”¨.NETå¼€å‘äº†ä¸€ç‰ˆæ¯”è¾ƒç®€å•çš„äº¤äº’é€»è¾‘åŠŸèƒ½ï¼Œæœ€è¿‘åœ¨çŸ¥ä¹ä¸­çœ‹åˆ°æœ‰å…³Pythonå¼€å‘å¾®ä¿¡å…¬ä¼—å·çš„æ–‡ç« ï¼Œæ­£å¥½å‰å‡ å¤©ä¹Ÿåœ¨å­¦ä¹ DockeræŠ€æœ¯ï¼Œæ‰€ä»¥å°±æƒ³ç ”ç©¶ä¸€ä¸‹åœ¨Dockerä¸‹å¦‚ä½•ç”¨Flaské…ç½®å¾®ä¿¡å…¬ä¼—å¹³å°çš„å¼€å‘ç¯å¢ƒã€‚ å› ä¸ºæˆ‘çš„å…¬ä¼—å·æ˜¯ ä¸ªäººå·ä¸”æ˜¯æœªè®¤è¯ çš„ï¼Œå¯è·å¾—çš„æƒé™æœ‰é™ï¼Œæ‰€ä»¥ç›®å‰æˆ‘åªåšäº†æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ç›¸å…³çš„åŠŸèƒ½ï¼Œæ›´å¤šåŠŸèƒ½åæœŸå†è€ƒè™‘åŠ å…¥ã€‚ ä¸‹é¢æµ‹è¯•Demoæ˜¯ç”³è¯·çš„å¾®ä¿¡å…¬ä¼—å¹³å°çš„æµ‹è¯•å·æ¥å¼€å‘çš„ã€‚ ç¯å¢ƒé…ç½® ä¸»ç³»ç»Ÿ ä¸º Win10 å®¿ä¸»æœº ä¸º åœ¨ Win10 ä¸‹çš„ Hyper-V è™šæ‹Ÿæœºä¸­å®‰è£…çš„ Ubuntu 14.04 LTS ç³»ç»Ÿ å®¿ä¸»æœºipåœ°å€ä¸º http://192.168.137.219/ æµ‹è¯•Dockerå®¹å™¨ ä¸ºåœ¨ å®¿ä¸»æœº ä¸‹å®‰è£…çš„ Ubuntu 14.04 LTS ç³»ç»Ÿ ä½¿ç”¨çš„è½¯ä»¶æ˜¯ Sublime Text å’Œ Xshell 4 ã€FileZilla Pythonç¯å¢ƒä¸º 2.7.12 è¿™é‡Œæä¸€ç‚¹ï¼Œå¦‚æœä½ ä¸çŸ¥å¦‚ä½•é…ç½®Dockerç¯å¢ƒï¼Œæˆ–ä»æœªæ¥è§¦è¿‡DockeræŠ€æœ¯ï¼Œåœ¨æˆ‘ä¹‹åçš„æ–‡ç« ä¸­æˆ‘ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œæ¬¢è¿å…³æ³¨ã€‚ å®‰è£…æµç¨‹é…ç½® Flask è¿è¡Œç¯å¢ƒåœ¨ å®¿ä¸»æœºä¸­ï¼Œå½“å‰çš„è´¦æˆ·ä¸º tigerã€‚åœ¨ä¸»ç›®å½•ä¸‹åˆ›å»º xweixin ç›®å½•ï¼Œæ·»åŠ çš„ Flask ç¨‹åºä¸º app.py æ–‡ä»¶ã€‚ å¯åŠ¨ä¸€ä¸ªå‰å°è¿è¡Œçš„å®¹å™¨ï¼Œå°†å®¿ä¸»æœºç›®å½• xweixin æ˜ å°„åˆ°å®¹å™¨çš„ weixin ç›®å½•ï¼š 1docker run -it --name weixin01 -p 80:80 -v /home/tiger/xweixin:/weixin ubuntu /bin/bash æŸ¥çœ‹å®¹å™¨ä¸­ä¸»ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ weixin ç›®å½•ï¼ŒåŠè¯¥ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ app.py æ–‡ä»¶ï¼š 12$ ls ****** weixin æ³¨æ„ï¼š ä¸‹é¢çš„æ“ä½œä¸»è¦åœ¨ æµ‹è¯•Dockerå®¹å™¨ ä¸­è¿›è¡Œï¼Œå› ä¸ºåœ¨Dockerä¸­é»˜è®¤æ˜¯ root è´¦æˆ·ï¼Œæ‰€ä»¥ä¸‹é¢çš„å‘½ä»¤å‰é¢éƒ½æ²¡æœ‰åŠ  sudo ã€‚ è®¾ç½®å®‰è£…æºï¼š 1$ echo &quot;deb http://archive.ubuntu.com/ubuntu/ precise universe&quot; &gt;&gt; /etc/apt/sources.list æ›´æ–°ï¼Œå®‰è£…python ï¼š 123$ apt-get update$ apt-get install python -y # é»˜è®¤å®‰è£…çš„æ˜¯ 2.7.12 å®‰è£… virtualenv : (ç”±äºæ˜¯åœ¨å®¹å™¨å†…æ“ä½œï¼Œåªç”¨æ¥æ­å»ºFlaskçš„è¿è¡Œç¯å¢ƒï¼Œæ‰€ä»¥å¯ä»¥ä¸å®‰è£…è™šæ‹Ÿç¯å¢ƒ) 1$ apt-get install python-virtualenv å®‰è£… pip ï¼š 1$ apt-get install python-pip -y å®‰è£… flask: 1$ pip install Flask å®‰è£… vim ï¼š(ä¸»è¦ç”¨äºæŸ¥çœ‹) 1$ apt-get install vim æ€»ç»“ä¸Šé¢çš„æ“ä½œï¼šä» Win10 ç³»ç»Ÿåˆ›å»º flask ç¨‹åº app.py åï¼Œé€šè¿‡ SFTP ä¼ è¾“åˆ° å®¿ä¸»è®¡ç®—æœºçš„ /home/tiger/xweixin ç›®å½•ä¸‹ï¼Œè¯¥ç›®å½•ç›´æ¥æ˜ å°„åˆ°äº†å®¹å™¨çš„ /weixin ç›®å½•ã€‚ app.py å†…å®¹ ï¼š 123456789from flask import Flaskapp = Flask(__name__)@app.route(&apos;/&apos;)def hello_world(): return &apos;Hello World!&apos;if __name__ == &apos;__main__&apos;: app.run(host=&apos;0.0.0.0&apos;,port=80,debug=True) åœ¨å®¹å™¨ä¸­æ‰§è¡Œ python app.py è¿è¡Œã€‚ åœ¨ ä¸»ç³»ç»ŸWin10 ä¸‹è®¿é—® å®¿ä¸»æœº çš„ipåœ°å€ http://192.168.137.219/ï¼Œçœ‹åˆ°è¾“å‡º Hello World! è¯´æ˜Flaské…ç½®æˆåŠŸã€‚ ä½¿ç”¨ ngrok å®ç°å¤–ç½‘è®¿é—®ngrok.exe ç¨‹åºå¯ä»¥ä» ngrok - download ä¸‹è½½ã€‚ åœ¨ ä¸»ç³»ç»ŸWin10 ä¸‹ä½¿ç”¨ CMD å‘½ä»¤è¿è¡Œ ngrok å·¥å…·ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1&gt; ngrok http 192.168.137.219:80 åé¢çš„ ipåœ°å€ä¸è¦å¸¦ http:// , ç«¯å£å·ä¸è¦ä¸¢ã€‚ å¯ä»¥çœ‹åˆ° ngrok ç”Ÿæˆäº†ä¸€ä¸ª å¤–ç½‘å¯ä»¥è®¿é—®åˆ°çš„åœ°å€ http://c62f4a09.ngrok.io/ ,åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œçœ‹åˆ°è¾“å‡º Hello World! è¯´æ˜å¯ä»¥å®ç°å¤–ç½‘è®¿é—®äº†ã€‚ æ­å»ºå¾®ä¿¡å…¬ä¼—å¹³å°å¤„ç†é€»è¾‘å‡†å¤‡å·¥ä½œç”±äº ngrok æ¯æ¬¡é‡æ–°å¯åŠ¨å°±ä¼šé‡æ–°åˆ†é…ä¸€ä¸ªæ–°çš„åŸŸååœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¯åŠ¨ngrokä¹‹åï¼Œå°±ä¸éœ€è¦å†å»ç®¡å®ƒäº†ã€‚Flaskä¸­å¯ç”¨äº† debug=True çš„é€‰é¡¹åï¼Œæ¯æ¬¡æ›´æ–°æ–‡ä»¶ app.py éƒ½ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½(é™¤éç¨‹åºæŠ¥é”™å¯¼è‡´å¼‚å¸¸é€€å‡º)ï¼Œæ‰€ä»¥è¿™æ ·ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦è´Ÿè´£ä¿®æ”¹ app.py æ”¹å®Œäº†ä¸Šä¼ åˆ°å®¿ä¸»æœºï¼Œç›´æ¥åˆ·æ–°å³å¯ï¼Œä¸éœ€è¦å†è¿›è¡Œé‡å¯ngrokï¼Œé‡æ–°æ‰§è¡Œ python app.pyå¯åŠ¨ç¨‹åºç­‰æ“ä½œï¼Œéå¸¸æ–¹ä¾¿ã€‚ ä¿®æ”¹ app.py çš„æ¡†æ¶ï¼Œå‡è®¾ç½‘ç«™çš„äºŒçº§ç›®å½• /weixin æ¥å®ç°æˆ‘ä»¬çš„å¾®ä¿¡å…¬ä¼—å¹³å°çš„æ¥å£æ“ä½œã€‚ 123456789101112131415161718# coding:utf-8&quot;&quot;&quot;å¾®ä¿¡å…¬ä¼—å¹³å°&quot;&quot;&quot;from flask import Flaskapp = Flask(__name__)@app.route(&apos;/&apos;)def hello_world(): return &apos;Hello World!&apos;# å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£@app.route(&apos;/weixin&apos;)def weixin_interface(): return &quot;è¿™æ˜¯å¾®ä¿¡æ¥å£&quot;if __name__ == &apos;__main__&apos;: app.run(host=&apos;0.0.0.0&apos;,port=80,debug=True) é€šè¿‡ ngrok åˆ†é…çš„åŸŸåä¸º http://d0dd1f96.ngrok.io/weixin ,è¯¥åŸŸåç”¨äºä¹‹åå¡«å…¥ å¾®ä¿¡å…¬ä¼—å¹³å° çš„æ¥å£é…ç½®çš„URLå¤„(æ­¤æ—¶å¦‚æœå°è¯•æ·»åŠ ï¼Œåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é¡µé¢ä¸€ç›´ä¼šæŠ¥é…ç½®é”™è¯¯çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨ç‚¹å‡»ç¡®å®šåå¾®ä¿¡ä¼šå‘æˆ‘ä»¬çš„æœåŠ¡å™¨å‘é€éªŒè¯æ¶ˆæ¯ï¼Œåªæœ‰éªŒè¯é€šè¿‡åæ‰èƒ½ä¿å­˜)ã€‚ å¤„ç†é€»è¾‘åœ¨ Flask ä¸­é€šè¿‡ä¸åŒçš„ method å¤„ç†å¾®ä¿¡çš„éªŒè¯è¯·æ±‚å’Œäº¤äº’è¯·æ±‚12345678# å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£@app.route(&apos;/weixin&apos;,methods=[&apos;GET&apos;,&apos;POST&apos;])def weixin_interface(): # return &quot;è¿™æ˜¯å¾®ä¿¡æ¥å£&quot; if request.method==&apos;GET&apos;: # å¤„ç†éªŒè¯ else: # å¤„ç†é€»è¾‘äº¤äº’ è®¾ç½®å¾®ä¿¡éªŒè¯è¯·æ±‚ - éªŒè¯æ¶ˆæ¯çš„ç¡®æ¥è‡ªå¾®ä¿¡æœåŠ¡å™¨ä¿®æ”¹ weixin_interface ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546....çœç•¥....from flask import Flaskfrom flask import requestimport hashlibimport time# é…ç½®å‚æ•°X_TOKEN=&apos;leafney&apos; #è¿™é‡Œæ”¹å†™ä½ åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é‡Œè¾“å…¥çš„token....çœç•¥....# å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£@app.route(&apos;/weixin&apos;,methods=[&apos;GET&apos;,&apos;POST&apos;])def weixin_interface(): # return &quot;è¿™æ˜¯å¾®ä¿¡æ¥å£&quot; if request.method==&apos;GET&apos;: # å¤„ç†éªŒè¯ # æ¥æ”¶å‚æ•° wx_signature=request.args.get(&apos;signature&apos;) wx_timestamp=request.args.get(&apos;timestamp&apos;) wx_nonce=request.args.get(&apos;nonce&apos;) wx_echostr=request.args.get(&apos;echostr&apos;) # è‡ªå·±çš„token wx_token=X_TOKEN # å­—å…¸åºæ’åº w_list=[wx_token,wx_timestamp,wx_nonce] w_list.sort() # sha1åŠ å¯†ç®—æ³• w_sha1=hashlib.sha1() map(w_sha1.update,w_list) w_hashcode=w_sha1.hexdigest() # å¦‚æœæ˜¯æ¥è‡ªå¾®ä¿¡çš„è¯·æ±‚ï¼Œåˆ™è¿”å›echostr if w_hashcode == wx_signature: return wx_echostr else: # å¤„ç†é€»è¾‘äº¤äº’ pass å› ä¸ºæˆ‘ç”¨çš„æ˜¯å¾®ä¿¡çš„æµ‹è¯•å·æ¥è¿›è¡Œé…ç½®ï¼Œå°†ç¨‹åºä¸Šä¼ å¹¶å¯åŠ¨ä¹‹åï¼Œåœ¨ â€œæµ‹è¯•å·é…ç½®â€ é¡µé¢ä¸­çš„ â€œæ¥å£é…ç½®ä¿¡æ¯â€ å¤„ å¡«å…¥ URL å’Œ Token ç„¶åç‚¹å‡» â€œç¡®å®šâ€ ã€‚ å¦‚æœç¨‹åºæ¥å…¥æˆåŠŸï¼Œä¼šæç¤º â€œé…ç½®æˆåŠŸâ€ ï¼Œå¦åˆ™å¯ä»¥åœ¨ä¹‹å‰é…ç½®çš„ æµ‹è¯•Dockerå®¹å™¨ ä¸‹æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯ï¼Œæ¥è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ã€‚ å®ç°ä¸šåŠ¡é€»è¾‘â€‹å½“æ™®é€šå¾®ä¿¡ç”¨æˆ·å‘å…¬ä¼—è´¦å·å‘æ¶ˆæ¯æ—¶ï¼Œå¾®ä¿¡æœåŠ¡å™¨å°†POSTæ¶ˆæ¯çš„XMLæ•°æ®åŒ…åˆ°å¼€å‘è€…å¡«å†™çš„URLä¸Šã€‚ æ¥æ”¶æ¶ˆæ¯å†…å®¹ï¼Œåœ¨ Flask ä¸­å¯ä»¥ä½¿ç”¨ request.data æ¥è·å–ï¼š 1xml_data=request.data æ ¹æ®å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘æ–‡æ¡£çš„è¯´æ˜ æ¥æ”¶æ™®é€šæ¶ˆæ¯ - å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£ æˆ‘ä»¬å¯ä»¥é€šè¿‡ MsgType å‚æ•°æ¥åŒºåˆ†æ¥æ”¶çš„æ¶ˆæ¯çš„ç±»å‹ï¼Œ ä¾‹å¦‚æ–‡æœ¬æ¶ˆæ¯çš„æ•°æ®åŒ…å¦‚ä¸‹ï¼š 12345678&lt;xml&gt;&lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;/ToUserName&gt;&lt;FromUserName&gt;&lt;![CDATA[fromUser]]&gt;&lt;/FromUserName&gt; &lt;CreateTime&gt;1348831860&lt;/CreateTime&gt;&lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;&lt;Content&gt;&lt;![CDATA[this is a test]]&gt;&lt;/Content&gt;&lt;MsgId&gt;1234567890123456&lt;/MsgId&gt;&lt;/xml&gt; ToUserName è¡¨ç¤ºæ¶ˆæ¯çš„æ¥æ”¶è€… FromUserName è¡¨ç¤ºæ¶ˆæ¯çš„å‘é€è€… CreateTime è¡¨ç¤ºæ¶ˆæ¯åˆ›å»ºçš„æ—¶é—´æˆ³ MsgType è¡¨ç¤ºæ¶ˆæ¯çš„ç±»å‹ Content è¡¨ç¤ºæ¶ˆæ¯çš„å†…å®¹ MsgId è¡¨ç¤ºæ¶ˆæ¯çš„idï¼Œå¯ä»¥ç”¨æ¥å¯¹æ¶ˆæ¯æ’é‡ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ lxml æ¥è§£æxmlæ–‡æ¡£ï¼Œè·å–ç›¸åº”çš„å‚æ•°å€¼ã€‚ æ·»åŠ å¼•ç”¨ï¼š 12import lxmlfrom lxml import etree è§£æå¾—åˆ°æ‰€éœ€çš„å‚æ•°ï¼š 1234567wx_xml=etree.fromstring(xml_data) # è¿›è¡Œxmlè§£æprint(etree.tostring(wx_xml,pretty_print=True)) # è·å–è¯·æ±‚å†…å®¹# è·å–è¯·æ±‚å‚æ•°wx_msgType=wx_xml.find(&apos;MsgType&apos;).textwx_fromUser=wx_xml.find(&apos;FromUserName&apos;).text # å¾®ä¿¡å…¬ä¼—å·wx_toUser=wx_xml.find(&apos;ToUserName&apos;).text # ç”¨æˆ· åœ¨å‘å¾®ä¿¡æœåŠ¡å™¨å›å¤æ¶ˆæ¯æ—¶ï¼Œä¹Ÿè¦æŒ‰ç…§å¾®ä¿¡çš„è§„å®šæ¥è¿”å›ç‰¹å®šXMLç»“æ„çš„æ•°æ®ï¼Œè¯¦ç»†å¯è§ è¢«åŠ¨å›å¤ç”¨æˆ·æ¶ˆæ¯ - å¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘è€…æ–‡æ¡£ ï¼Œæ¯”å¦‚å›å¤æ–‡æœ¬æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹ï¼š 1234567&lt;xml&gt;&lt;ToUserName&gt;&lt;![CDATA[toUser]]&gt;&lt;/ToUserName&gt;&lt;FromUserName&gt;&lt;![CDATA[fromUser]]&gt;&lt;/FromUserName&gt;&lt;CreateTime&gt;12345678&lt;/CreateTime&gt;&lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt;&lt;Content&gt;&lt;![CDATA[ä½ å¥½]]&gt;&lt;/Content&gt;&lt;/xml&gt; åœ¨å‘å¾®ä¿¡ç«¯å›å¤æ¶ˆæ¯æ—¶ï¼ŒToUserName å’Œ FromUserName æˆ‘ä»¬å¯ä»¥ä»æ¥æ”¶æ—¶çš„æ¶ˆæ¯å†…å®¹ä¸­æ¥å¾—åˆ°ï¼Œåªéœ€è¦æŠŠæ¥æ”¶è€…å’Œå‘é€è€…çš„è§’è‰²äº’æ¢ä¸€ä¸‹å³å¯ï¼ŒContent ä¸ºæˆ‘ä»¬è¦å›å¤çš„å†…å®¹ã€‚ è¯¦ç»†çš„å¤„ç†ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021# æ ¹æ®è¯·æ±‚ç±»å‹æ¥è¿”å›ä¸åŒçš„å¤„ç†ç»“æœif wx_msgType == &apos;text&apos;: # æ–‡æœ¬æ¶ˆæ¯ # è·å–æ–‡æœ¬æ¶ˆæ¯å†…å®¹ wx_content=wx_xml.find(&apos;Content&apos;).text content=wx_content.encode(&apos;utf-8&apos;) print(content) if content == &apos;å¤©æ°”&apos;: # return &apos;åŒ—äº¬å¤©æ°”æŒºå¥½çš„ï¼&apos; # æ³¨æ„å›å¤æ¶ˆæ¯æ—¶ï¼Œæ¥æ”¶è€…å’Œå‘é€è€…çš„ä½ç½®è¦äº’æ¢ä¸€ä¸‹ return TextReply(wx_fromUser,wx_toUser,u&apos;åŒ—äº¬å¤©æ°”æŒºå¥½çš„ï¼&apos;).render() else: return TextReply(wx_fromUser,wx_toUser,wx_content).render()elif wx_msgType == &apos;image&apos;: return &apos;success&apos;else: return &apos;success&apos; æ¶ˆæ¯æ¨¡æ¿ï¼š 123456789101112131415161718192021class TextReply(object): &quot;&quot;&quot;å›å¤æ–‡æœ¬æ¶ˆæ¯&quot;&quot;&quot; TEMPLATE=u&quot;&quot;&quot; &lt;xml&gt; &lt;ToUserName&gt;&lt;![CDATA[&#123;target&#125;]]&gt;&lt;/ToUserName&gt; &lt;FromUserName&gt;&lt;![CDATA[&#123;source&#125;]]&gt;&lt;/FromUserName&gt; &lt;CreateTime&gt;&#123;time&#125;&lt;/CreateTime&gt; &lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt; &lt;Content&gt;&lt;![CDATA[&#123;content&#125;]]&gt;&lt;/Content&gt; &lt;/xml&gt; &quot;&quot;&quot; def __init__(self, target,source,content): self.target=target self.source=source self.content=content self.time=int(time.time()) def render(self): return TextReply.TEMPLATE.format(target=self.target,source=self.source,time=self.time,content=self.content) è‡³æ­¤ï¼Œæ¥æ”¶å›å¤æ–‡æœ¬æ¶ˆæ¯çš„åŠŸèƒ½æˆ‘ä»¬å°±åšå¥½äº†ï¼Œä¸Šä¼ åˆ° å®¿ä¸»æœº çš„ xweixin ç›®å½•ä¸‹å³å¯ã€‚ åœ¨è¿è¡Œä»£ç ä¹‹å‰ï¼Œå…ˆè¦å®‰è£…ä¾èµ–åŒ… lxml ,ä¸ç„¶ä¼šæŠ¥ No module named lxml çš„é”™è¯¯ã€‚ å®‰è£… lxmlå…ˆå®‰è£… lxml çš„ä¾èµ–åŒ…ï¼š 1$ apt-get install python-dev libxml2-dev libxslt1-dev zlib1g-dev å†å®‰è£… lxml : 1$ pip install lxml å®Œæ•´çš„ä»£ç å®ç°app.py (ä¸»ç¨‹åº) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788# coding:utf-8&quot;&quot;&quot;å¾®ä¿¡å…¬ä¼—å¹³å°&quot;&quot;&quot;from flask import Flaskfrom flask import requestimport hashlibimport lxmlfrom lxml import etreeimport time # æ¶ˆæ¯è¿”å›æ¨¡æ¿from reply import TextReply# é…ç½®å‚æ•°X_TOKEN=&apos;leafney&apos; #è¿™é‡Œæ”¹å†™ä½ åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é‡Œè¾“å…¥çš„tokenapp = Flask(__name__)@app.route(&apos;/&apos;)def hello_world(): return &apos;Hello World!&apos;# å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£@app.route(&apos;/weixin&apos;,methods=[&apos;GET&apos;,&apos;POST&apos;])def weixin_interface(): # return &quot;è¿™æ˜¯å¾®ä¿¡æ¥å£&quot; if request.method==&apos;GET&apos;: # å¤„ç†éªŒè¯ # æ¥æ”¶å‚æ•° wx_signature=request.args.get(&apos;signature&apos;) wx_timestamp=request.args.get(&apos;timestamp&apos;) wx_nonce=request.args.get(&apos;nonce&apos;) wx_echostr=request.args.get(&apos;echostr&apos;) # è‡ªå·±çš„token wx_token=X_TOKEN # å­—å…¸åºæ’åº w_list=[wx_token,wx_timestamp,wx_nonce] w_list.sort() # sha1åŠ å¯†ç®—æ³• w_sha1=hashlib.sha1() map(w_sha1.update,w_list) w_hashcode=w_sha1.hexdigest() # å¦‚æœæ˜¯æ¥è‡ªå¾®ä¿¡çš„è¯·æ±‚ï¼Œåˆ™è¿”å›echostr if w_hashcode == wx_signature: return wx_echostr else: # å¤„ç†é€»è¾‘äº¤äº’ xml_data=request.data # è·å¾—postæ¥çš„æ•°æ® wx_xml=etree.fromstring(xml_data) # è¿›è¡Œxmlè§£æ # print(etree.tostring(wx_xml,pretty_print=True)) # è·å–è¯·æ±‚å†…å®¹ # è·å–è¯·æ±‚å‚æ•° wx_msgType=wx_xml.find(&apos;MsgType&apos;).text wx_fromUser=wx_xml.find(&apos;FromUserName&apos;).text # å¾®ä¿¡å…¬ä¼—å· wx_toUser=wx_xml.find(&apos;ToUserName&apos;).text # ç”¨æˆ· # æ ¹æ®è¯·æ±‚ç±»å‹æ¥è¿”å›ä¸åŒçš„å¤„ç†ç»“æœ if wx_msgType == &apos;text&apos;: # æ–‡æœ¬æ¶ˆæ¯ # è·å–æ–‡æœ¬æ¶ˆæ¯å†…å®¹ wx_content=wx_xml.find(&apos;Content&apos;).text content=wx_content.encode(&apos;utf-8&apos;) print(content) if content == &apos;å¤©æ°”&apos;: # return &apos;åŒ—äº¬å¤©æ°”æŒºå¥½çš„ï¼&apos; # æ³¨æ„å›å¤æ¶ˆæ¯æ—¶ï¼Œæ¥æ”¶è€…å’Œå‘é€è€…çš„ä½ç½®è¦äº’æ¢ä¸€ä¸‹ return TextReply(wx_fromUser,wx_toUser,u&apos;åŒ—äº¬å¤©æ°”æŒºå¥½çš„ï¼&apos;).render() else: return TextReply(wx_fromUser,wx_toUser,wx_content).render() elif wx_msgType == &apos;image&apos;: return &apos;success&apos; else: return &apos;success&apos;if __name__ == &apos;__main__&apos;: app.run(host=&apos;0.0.0.0&apos;,port=80,debug=True) reply.py (æ¶ˆæ¯æ¨¡æ¿) 123456789101112131415161718192021222324252627# coding:utf-8&quot;&quot;&quot;å¾®ä¿¡å…¬ä¼—å¹³å° æ¶ˆæ¯å›å¤æ¨¡æ¿&quot;&quot;&quot;import timeclass TextReply(object): &quot;&quot;&quot;å›å¤æ–‡æœ¬æ¶ˆæ¯&quot;&quot;&quot; TEMPLATE=u&quot;&quot;&quot; &lt;xml&gt; &lt;ToUserName&gt;&lt;![CDATA[&#123;target&#125;]]&gt;&lt;/ToUserName&gt; &lt;FromUserName&gt;&lt;![CDATA[&#123;source&#125;]]&gt;&lt;/FromUserName&gt; &lt;CreateTime&gt;&#123;time&#125;&lt;/CreateTime&gt; &lt;MsgType&gt;&lt;![CDATA[text]]&gt;&lt;/MsgType&gt; &lt;Content&gt;&lt;![CDATA[&#123;content&#125;]]&gt;&lt;/Content&gt; &lt;/xml&gt; &quot;&quot;&quot; def __init__(self, target,source,content): self.target=target self.source=source self.content=content self.time=int(time.time()) def render(self): return TextReply.TEMPLATE.format(target=self.target,source=self.source,time=self.time,content=self.content) æœªå®Œå¾…ç»­è‡³æ­¤ï¼Œä¸Šé¢æˆ‘ä»¬å°±å®ç°äº†æœ€åŸºæœ¬çš„å¾®ä¿¡å…¬ä¼—å·çš„éªŒè¯å’Œç®€å•æ–‡æœ¬æ¶ˆæ¯çš„æ¥æ”¶å’Œå›å¤åŠŸèƒ½ã€‚ ä¹‹åæˆ‘ä¼šä»‹ç»å¦‚ä½•æ¥å¤„ç†å¤æ‚çš„æ¶ˆæ¯å†…å®¹ï¼Œå›¾ç‰‡ã€è¯­éŸ³ã€å›¾æ–‡ç­‰ç­‰ã€‚ç„¶åé€šè¿‡ä¸€äº›æœ‰è¶£çš„å°åŠŸèƒ½æ¥è®©æˆ‘ä»¬è¿™å³ä½¿æ²¡æœ‰ç‰¹æ®Šæƒé™çš„å…¬ä¼—å·ä¹Ÿèƒ½ç©å¾—æ›´æœ‰æ„æ€ï¼Œæ¬¢è¿å…³æ³¨ï¼ PublishTime: 2016-9-24 22:35:16]]></content>
      <categories>
        <category>å¾®ä¿¡å…¬ä¼—å¹³å°</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Python</tag>
        <tag>Flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github]]></title>
    <url>%2F2016%2F09%2F24%2Fusing-ssh-key-connection-github%2F</url>
    <content type="text"><![CDATA[æ¯æ¬¡å‘GitHubç­¾å…¥ä»£ç æ—¶ï¼Œéƒ½è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè®©äººæ„Ÿè§‰éå¸¸éº»çƒ¦ã€‚å¦‚æœä½¿ç”¨SSHï¼Œé€šè¿‡å¯†é’¥çš„æ–¹å¼æ¥è¿æ¥GitHubï¼Œæ¯æ¬¡æäº¤ä»£ç å°±å¯ä»¥äº«å—ä¸ç”¨è¾“å…¥å¯†ç çš„å¿«æ„Ÿäº†ï¼ ä¸‹é¢æˆ‘ä¸»è¦ä»‹ç»åœ¨Windowsä¸‹å¦‚ä½•é€šè¿‡ SSHå¯†é’¥ æ¥è¿æ¥GitHubã€‚ å¼•ç”³ Linuxä¸‹ï¼šLinuxä¸‹ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github Windowsä¸‹ï¼šä½¿ç”¨SSHå¯†é’¥è¿æ¥Github ç¬¬ä¸€æ­¥ æŸ¥çœ‹æ˜¯å¦å·²ç»å­˜åœ¨SSHç§˜é’¥(keys)å³é”®æ‰“å¼€ Git Bash ,å¹¶è¿è¡Œï¼š 1$ cd ~/.ssh å¦‚æœæç¤ºå¦‚ä¸‹ä¿¡æ¯ä¸º No such file or directoryï¼Œåˆ™è¯´æ˜ä¸å­˜åœ¨SSHç§˜é’¥ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥ç¬¬ä¸‰æ­¥ã€‚ 12$ cd ~/.sshsh.exe&quot;: cd: /c/Users/Xue/.ssh: No such file or directory å¦‚æœæ— æç¤ºä¿¡æ¯ï¼Œè¿›å…¥ .ssh ç›®å½•æ‰§è¡Œ ls å‘½ä»¤ï¼Œå¯æŸ¥çœ‹æœ¬æœºå·²ç»å­˜åœ¨çš„SSHçš„å…¬é’¥å’Œç§é’¥ã€‚ ç¬¬äºŒæ­¥ åˆ›å»ºæ–°çš„SSHå¯†é’¥(keys)è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 12$ cd ~ # ä¿è¯å½“å‰è·¯å¾„åœ¨ `~` ä¸‹ï¼Œå³ `C:/Users/ç”¨æˆ·å` ç›®å½•$ ssh-keygen -t rsa -C &quot;your_email@example.com&quot; # è¿™å°†æ ¹æ®ä½ æä¾›çš„é‚®ç®±åœ°å€ï¼Œåˆ›å»ºä¸€å¯¹å¯†é’¥ æç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š 12345678910111213141516171819202122$ ssh-keygen -t rsa -C &quot;your_email@example.com&quot;Generating public/private rsa key pair.Enter file in which to save the key (/c/Users/ç”¨æˆ·å/.ssh/id_rsa): # ç›´æ¥å›è½¦ï¼Œåˆ™å°†å¯†é’¥æŒ‰é»˜è®¤è·¯å¾„åŠæ–‡ä»¶åè¿›è¡Œå­˜å‚¨ã€‚æ­¤æ—¶ä¹Ÿå¯ä»¥è¾“å…¥ç‰¹å®šçš„æ–‡ä»¶åCreated directory &apos;/c/Users/ç”¨æˆ·å/.ssh&apos;.Enter passphrase (empty for no passphrase): # æ ¹æ®æç¤ºï¼Œä½ éœ€è¦è¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç ã€‚å¯ä»¥ä¸å¡«ï¼Œè®¾ç½®ä¸ºç©ºå€¼ï¼Œç›´æ¥å›è½¦Enter same passphrase again:Your identification has been saved in /c/Users/ç”¨æˆ·å/.ssh/id_rsa.Your public key has been saved in /c/Users/ç”¨æˆ·å/.ssh/id_rsa.pub.The key fingerprint is:6d:40:da:xx:xx:xx:xx:b8:60:4a:bd:61:5f:c5:d6:db your_email@example.comThe key&apos;s randomart image is:+--[ RSA 2048]----+| . .=oo. || . * .=.*o . || . + =oo+.. o || . ..o. o . E || . S o || . || || || |+-----------------+ ç„¶ååœ¨ç›®å½• ~/.ssh ä¸‹ï¼Œå°±æ–°åˆ›å»ºäº†ä¸¤ä¸ªæ–‡ä»¶ï¼š 123$ cd ~/.ssh$ lsid_rsa id_rsa.pub ç¬¬ä¸‰æ­¥ åœ¨GitHubè´¦æˆ·ä¸­æ·»åŠ ä½ çš„å…¬é’¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°†å…¬é’¥çš„å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ä¸­(æˆ–ç›´æ¥æ‰“å¼€è¯¥æ–‡ä»¶è¿›è¡Œå¤åˆ¶æ“ä½œ)ï¼š 1clip &lt; ~/.ssh/id_rsa.pub ç™»é™†Githubç½‘ç«™ï¼Œé€‰æ‹© Settings â€“&gt; SSH and GPG keys èœå•ï¼Œç‚¹å‡» New SSH key æŒ‰é’®ã€‚ç²˜è´´ä½ çš„å¯†é’¥åˆ° Key è¾“å…¥æ¡†ä¸­å¹¶è®¾ç½® Title ä¿¡æ¯ï¼Œç‚¹å‡» Add SSH key æŒ‰é’®å®Œæˆã€‚ è‡³æ­¤ï¼Œæ·»åŠ å®Œæ¯•ã€‚ ç¬¬å››æ­¥ è¿æ¥æµ‹è¯•å…ˆä¿è¯æœ¬åœ° Git å·²è®¾ç½®å¥½gitè´¦æˆ·çš„ ç”¨æˆ·å å’Œ é‚®ç®± ä¿¡æ¯ï¼š 12$ git config --global user.name &quot;your_username&quot; # è®¾ç½®ç”¨æˆ·å$ git config --global user.email &quot;your_email@example.com&quot; # è®¾ç½®é‚®ç®±åœ°å€ æµ‹è¯•SSH keys æ˜¯å¦è®¾ç½®æˆåŠŸï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ ssh -T git@github.com æç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š 12345678$ ssh -T git@github.comThe authenticity of host &apos;github.com (192.30.253.113)&apos; can&apos;t be established.RSA key fingerprint is 16:27:xx:xx:xx:xx:xx:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)? yes # ç¡®è®¤ä½ æ˜¯å¦ç»§ç»­è¿æ¥ï¼Œè¾“å…¥yesWarning: Permanently added &apos;github.com,192.30.253.113&apos; (RSA) to the list of known hosts.Hi xxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access. # å‡ºç°è¿™å¥è¯ï¼Œè¯´æ˜è®¾ç½®æˆåŠŸ å½“æç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼Œè¯´æ˜è¿é€šGithubæˆåŠŸï¼š 12Hi xxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access. ç¬¬äº”æ­¥ å°†æœ¬åœ°é¡¹ç›®é€šè¿‡ SSH push åˆ° GitHubåœ¨githubæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå¦‚ test_ssh ã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123456789101112131415## åˆ›å»ºç›®å½•$ mkdir test$ cd test## åˆå§‹åŒ–gitä»“åº“$ git init## åˆ›å»ºreadme.mdæ–‡ä»¶$ echo &quot;this is a test ssh keys&quot; &gt; README.md## æäº¤åˆ°æœ¬åœ°## æäº¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶$ git add .## æäº¤è®°å½•è¯´æ˜$ git commit -m &quot;add readme.md&quot;## æäº¤åˆ°github$ git remote add origin git@github.com:your_github_name/test_ssh.git$ git push -u origin master åˆ·æ–° test_ssh ä»“åº“ï¼Œå°±èƒ½çœ‹åˆ°æäº¤çš„æ–‡ä»¶äº†ã€‚ å¦‚æœæ˜¯æœ¬åœ°å·²ç»å­˜åœ¨çš„gité¡¹ç›®ï¼Œåªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š 123## æäº¤åˆ°github$ git remote add origin git@github.com:your_github_name/test_ssh.git$ git push -u origin master ç›¸å…³å‚è€ƒæ–‡ç«  ä½¿ç”¨SSHå¯†é’¥è¿æ¥Githubã€å›¾æ–‡æ•™ç¨‹ã€‘ - è½©æ«é˜ â€“ å‰ç«¯å¼€å‘ | webå‰ç«¯æŠ€æœ¯åšå®¢]]></content>
      <tags>
        <tag>GitHub</tag>
        <tag>SSH</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨GitHubæ­å»ºHexoé™æ€åšå®¢]]></title>
    <url>%2F2016%2F09%2F24%2Fuse-github-to-build-hexo-static-blog%2F</url>
    <content type="text"><![CDATA[è¯´æ˜ä¹‹å‰ä¸€ç›´åœ¨ç”¨è‡ªå·±åˆ›å»ºçš„.Netç½‘ç«™æ¥å†™åšå®¢æ–‡ç« ï¼Œåªæœ‰ç®€å•çš„CRUDçš„åŠŸèƒ½ï¼Œæ•°æ®ä¹Ÿæ˜¯ä»æ•°æ®åº“ä¸­ç›´æ¥æŸ¥è¯¢çš„ã€‚è‡ªä»æ¥è§¦äº†markdownä¹‹åï¼Œæ¸æ¸ä¹ æƒ¯äº†ç”¨markdownæ¥è®°å½•è‡ªå·±åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œå­¦åˆ°çš„æ–°çŸ¥è¯†ã€‚ä½†ç”±äºä¹‹å‰åšå®¢ä¸­æ˜¯é€šè¿‡ç™¾åº¦çš„ ueditor ç¼–è¾‘å™¨æ¥ç¼–è¾‘æ–‡ç« ï¼Œä¸èƒ½ç›´æ¥å¤„ç†markdownï¼Œæ‰€ä»¥åæ¥å°±ä¸€ç›´è€ƒè™‘æœ‰æ²¡æœ‰å…¶ä»–çš„æ–¹æ³•æ¥æ›´æ–¹ä¾¿çš„ç®¡ç†å’Œå‘å¸ƒåšå®¢ã€‚ è‡ªä»å‘ç°äº† Hexoï¼Œä¸å¾—ä¸è¯´è¿™ä¸å°±æ˜¯æˆ‘ä¸€ç›´æƒ³è¦æ‰¾çš„åšå®¢å·¥å…·å—ï¼Ÿ é™æ€åšå®¢çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š ä¸ç”¨æ•°æ®åº“ è®¿é—®é€Ÿåº¦å¿« æ”¯æŒmarkdownï¼Œæ›´åŠ æ³¨é‡åšå®¢å†…å®¹ è€Œä¸”éƒ¨ç½²åˆ° GitHub ä¸Šï¼Œæˆ‘ä»¬è¿˜ä¸éœ€è¦å»é…ç½®æœåŠ¡å™¨ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ ä¸‹é¢è¯¦ç»†è®°å½•æˆ‘è¿™ä¸ªåšå®¢çš„æ­å»ºéƒ¨ç½²æµç¨‹ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æœ‰éœ€è¦çš„æœ‹å‹ä»¬ï¼ æ­å»ºæµç¨‹å¼€å§‹å‰ä¿è¯å·²å®‰è£…ï¼š Node.js Linux ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š $ curl https://raw.github.com/creationix/nvm/master/install.sh | sh $ nvm install stable Windows ä¸‹å¯ä»¥ä» Node.js Download å¤„é€‰æ‹© Windows Installer ä¸‹è½½msiå®‰è£…åŒ… Git Linux(Ubuntu) ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å®‰è£…ï¼š $ sudo apt-get install git-core Windows ä¸‹å¯ä»¥ä» Git Download å¤„ä¸‹è½½ Git for Windows å®‰è£…åŒ… å®‰è£…Hexoé€‰æ‹©ä¸€ä¸ªç”¨æ¥åˆ›å»ºåšå®¢çš„ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹ä½¿ç”¨ CMD å‘½ä»¤è¡Œçª—å£ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ Cmder æ¥ä»£æ›¿Windowsä¸Šé»˜è®¤çš„å‘½ä»¤è¡Œã€‚ é€šè¿‡ npm å‘½ä»¤æ‰§è¡Œï¼š 1&gt; npm install -g hexo-cli å»ºç«™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ 123&gt; hexo init &lt;folder&gt;&gt; cd &lt;folder&gt;&gt; npm install è¿™é‡Œå‡è®¾æˆ‘è¦åˆ›å»ºçš„åšå®¢æ‰€åœ¨ç›®å½•åä¸º xblog ,åˆ™å‘½ä»¤ä¸ºï¼š 123&gt; hexo init xblog&gt; cd xblog&gt; npm install ç”Ÿæˆé™æ€é¡µ1&gt; hexo g è¯¥å‘½ä»¤çš„å®Œæ•´æ ¼å¼ä¸º: hexo generate å¯åŠ¨æœåŠ¡1&gt; hexo s è¯¥å‘½ä»¤çš„å®Œæ•´æ ¼å¼ä¸ºï¼š hexo server hexoé»˜è®¤ä½¿ç”¨ 4000 ç«¯å£è¿›è¡Œé¢„è§ˆï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨æ‰“å¼€ http://localhost:4000/ æŸ¥çœ‹ã€‚å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥ç”¨ hexo s -p 5000 æŒ‡å®šç«¯å£å·ä¸º 5000 æˆ–è€…å…¶ä»–æœªè¢«å ç”¨çš„ç«¯å£ã€‚ä½¿ç”¨ Ctrl+C æ¥åœæ­¢é¢„è§ˆã€‚ æŸ¥çœ‹Hexoç‰ˆæœ¬å¯ä»¥é€šè¿‡å‘½ä»¤ hexo -v æŸ¥çœ‹å½“å‰hexoçš„ç‰ˆæœ¬ä¿¡æ¯ï¼š 12345678910111213&gt; hexo -vhexo: 3.2.2hexo-cli: 1.0.2os: Windows_NT 10.0.10586 win32 x64http_parser: 2.5.2node: 4.4.0v8: 4.5.103.35uv: 1.8.0zlib: 1.2.8ares: 1.10.1-DEVicu: 56.1modules: 46openssl: 1.0.2g Hexoé…ç½®æ›´æ¢ä¸»é¢˜ themeä»¥ä¸»é¢˜ NexT ä¸ºä¾‹ï¼Œé¦–å…ˆä¸‹è½½è¯¥ä¸»é¢˜ï¼š 12&gt; cd your-hexo-site (æˆ‘è¿™é‡Œæ˜¯ `cd xblog`)&gt; git clone https://github.com/iissnan/hexo-theme-next themes/next åœ¨ç«™ç‚¹ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ‰“å¼€ _config.ymlï¼Œæ‰¾åˆ° theme å­—æ®µï¼Œå°† theme: landscape æ”¹ä¸º theme: next ï¼Œç„¶åå†æ¬¡æ‰§è¡Œ hexo g æ¥é‡æ–°ç”Ÿæˆã€‚ ä¸»é¢˜è®¾ç½®å…³äºä¸»é¢˜çš„é…ç½®å¯ç›´æ¥å‚è€ƒNexTå®˜ç½‘çš„é…ç½®æµç¨‹ å¼€å§‹ä½¿ç”¨-NexT ï¼Œè¿™é‡Œæˆ‘ä¼šæŠŠè‡ªå·±åœ¨é…ç½®æ—¶çš„æ“ä½œç®€å•è®°å½•ï¼Œä»…ä¾›å¤§å®¶å‚è€ƒã€‚ åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚ å…¶ä¸­ï¼Œä¸€ä»½ä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„é…ç½®ï¼›å¦ä¸€ä»½ä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚ ä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œåœ¨ä»¥ä¸‹è¯´æ˜ä¸­ï¼Œå°†å‰è€…ç§°ä¸º ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ åè€…ç§°ä¸º ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚ é€‰æ‹©Schemeå€ŸåŠ©äº Schemeï¼ŒNexT æä¾›äº†å¤šç§ä¸åŒçš„å¤–è§‚ã€‚ç›®å‰ NexT æ”¯æŒä¸‰ç§ Scheme ï¼š Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§ç‰ä¼¼çš„æ¸…æ–° Scheme çš„åˆ‡æ¢é€šè¿‡æ›´æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ ï¼Œæœç´¢ scheme å…³é”®å­—ã€‚ ä½ ä¼šçœ‹åˆ°æœ‰ä¸‰è¡Œ scheme çš„é…ç½®ï¼Œå°†ä½ éœ€è¦å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š # å»æ‰å³å¯ã€‚ 123#scheme: Muse#scheme: Mistscheme: Pisces è®¾ç½® è¯­è¨€ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ å°† language è®¾ç½®æˆä½ æ‰€éœ€è¦çš„è¯­è¨€ã€‚è¿™é‡Œæˆ‘é€‰æ‹©äº†ç®€ä½“ä¸­æ–‡ï¼Œé…ç½®å¦‚ä¸‹ï¼š 1language: zh-Hans è®¾ç½® èœå•èœå•å³æ˜¯ä½ çš„å¯¼èˆªèœå•ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®èœå•é¡¹çš„ æ˜¾ç¤ºåç§°å’Œ é“¾æ¥ ä»¥åŠ èœå•é¡¹å¯¹åº”çš„å›¾æ ‡ ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­æ¥ä¿®æ”¹ï¼Œå¯¹åº”çš„å­—æ®µæ˜¯ menu ã€‚æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š 123456menu: home: / # ä¸»é¡µ categories: /categories # åˆ†ç±»é¡µ tags: /tags # æ ‡ç­¾é¡µ archives: /archives # å½’æ¡£é¡µ about: /about # å…³äºé¡µé¢ èœå•é¡¹çš„æ˜¾ç¤ºæ–‡æœ¬æ”¾ç½®åœ¨ NexT ä¸»é¢˜ç›®å½•ä¸‹çš„ languages/{language}.yml ï¼ˆ{language} ä¸ºä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ï¼‰ã€‚ èœå•é¡¹çš„å›¾æ ‡ï¼Œå¯¹åº”çš„å­—æ®µæ˜¯ menu_iconsã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ enable æ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±çš„é“¾æ¥ï¼Œåªè¦æŠŠä¸Šé¢çš„ åç§°-é“¾æ¥-å›¾æ ‡ ä¸‰è€…å¯¹åº”å¥½å³å¯ã€‚ è¯·æ³¨æ„é”®å€¼ï¼ˆå¦‚ homeï¼‰çš„å¤§å°å†™è¦ä¸¥æ ¼åŒ¹é… è®¾ç½® å¤´åƒç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ æ–°å¢å­—æ®µ avatarï¼Œ å€¼è®¾ç½®æˆå¤´åƒçš„é“¾æ¥åœ°å€ã€‚ æˆ‘ä»¬å¯ä»¥å°†è‡ªå·±çš„å¤´åƒå›¾ç‰‡æ–‡ä»¶ä¸Šä¼ åˆ°ä¸»é¢˜ç›®å½•ä¸‹çš„ source/uploads/ ç›®å½•ä¸‹(æ–°å»ºuploadsç›®å½•è‹¥ä¸å­˜åœ¨) æˆ– source/images/ ç›®å½•ä¸‹ã€‚å®Œæ•´çš„ç›®å½•å°±æ˜¯ your-hexo-site\themes\next\source\images\ ä¸‹ã€‚ ç„¶åå°† avatar å­—æ®µé…ç½®å¦‚ä¸‹ï¼š 12# avatar ä¸ªäººå¤´åƒavatar: /images/avatar.jpg æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç½‘ç»œä¸Šçš„å¤´åƒæ¥è¿›è¡Œè®¾ç½®ï¼š 1avatar: http://example.com/avatar.png è®¾ç½® ä½œè€…æ˜µç§°åŠç«™ç‚¹æè¿°ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ è®¾ç½® author ä¸ºä½ çš„æ˜µç§°ã€‚ ç¼–è¾‘ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œ è®¾ç½® description å­—æ®µä¸ºä½ çš„ç«™ç‚¹æè¿°ã€‚ è®¾ç½®ä»£ç é«˜äº®ä¸»é¢˜NexTå…±æä¾›äº†5æ¬¾ä¸»é¢˜å¯ä»¥é€‰æ‹©ï¼Œé»˜è®¤ä½¿ç”¨ç™½è‰²çš„ normal ä¸»é¢˜ã€‚ normalï¼Œnightï¼Œ night blueï¼Œ night brightï¼Œ night eighties åœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­æ‰¾åˆ° highlight_theme å­—æ®µï¼Œæ›´æ”¹å³å¯ã€‚ 1highlight_theme: night eighties å¼€å¯æ‰“èµåŠŸèƒ½NexTå¯ä»¥æ”¯æŒå¾®ä¿¡æ‰“èµå’Œæ”¯ä»˜å®æ‰“èµï¼Œåœ¨ ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­æ·»åŠ å¦‚ä¸‹å­—æ®µå³å¯ï¼š 1234# æ‰“èµåŠŸèƒ½reward_comment: åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼wechatpay: /images/wechat-reward-image.jpgalipay: /images/alipay-reward-image.jpg å¾®ä¿¡ä¸ªäººæ”¶æ¬¾äºŒç»´ç å¯ä»¥ä»å¾®ä¿¡APPå³ä¸Šè§’â€œ+â€å¤„ï¼Œé€‰æ‹© æ”¶ä»˜æ¬¾ â€“ æˆ‘è¦æ”¶æ¬¾ â€“ é•¿æŒ‰äºŒç»´ç  æ¥è·å–ã€‚æ”¯ä»˜å®ä¸ªäººæ”¶æ¬¾äºŒç»´ç å¯ä»¥ä»æ”¯ä»˜å®APPçš„å³ä¸Šè§’â€œ+â€å¤„ï¼Œé€‰æ‹© æˆ‘çš„äºŒç»´ç /æ”¶æ¬¾ æ¥è·å–ã€‚ äºŒç»´ç å›¾ç‰‡å¯ä»¥å’Œå¤´åƒä¸€æ ·ä¿å­˜åœ¨ source/images/ ç›®å½•ä¸‹ã€‚ ä¸»é¢˜æ ç›®è®¾ç½®åœ¨ä¸Šé¢è®¾ç½®å¯¼èˆªèœå•æ—¶æˆ‘ä»¬å·²ç»æ·»åŠ äº†å¯¼èˆªèœå•: categories å’Œ tags ï¼Œä½†åœ¨é¢„è§ˆæ—¶ä¼šç›´æ¥æŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰åˆ›å»ºè¿™ä¸¤ä¸ªåˆ†ç±»é¡µé¢ã€‚ æ·»åŠ ã€Œæ ‡ç­¾ã€é¡µé¢ã€Œæ ‡ç­¾ã€é¡µé¢å°†å±•ç¤ºç«™ç‚¹çš„æ‰€æœ‰æ ‡ç­¾ï¼Œè‹¥ä½ çš„æ‰€æœ‰æ–‡ç« éƒ½æœªåŒ…å«æ ‡ç­¾ï¼Œæ­¤é¡µé¢å°†æ˜¯ç©ºçš„ã€‚ è¿™é‡Œå…ˆè¯¦ç»†ä»‹ç»ä¸¤ä¸ªå‘½ä»¤ï¼š 123&gt; hexo n about&gt; hexo n page about hexo n çš„å®Œæ•´æ ¼å¼ä¸º hexo new ï¼Œæ‰€ä»¥ä¸Šé¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥å†™æˆï¼š 123&gt; hexo new about&gt; hexo new page about ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼š hexo new xxxx è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ç« é¡µé¢ã€‚åœ¨Hexoä¸­, ä½ å†™çš„åšå®¢æ–‡ç« ä¼šé»˜è®¤å­˜å‚¨åœ¨ your-hexo-site/source/_posts ä¸‹ã€‚æ¯”å¦‚ä¸Šé¢çš„å‘½ä»¤ hexo new about æˆ‘ä»¬å°±åœ¨ your-hexo-site\source\_posts ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ª about.md çš„æ–‡ä»¶ã€‚ hexo new page xxxx è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†ç±»ä¸»é¡µé¢ã€‚æ¯”å¦‚ä¸Šé¢çš„å‘½ä»¤ hexo new page about æˆ‘ä»¬å°±åœ¨ your-hexo-site\source\ ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªåä¸º about çš„ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º index.md çš„æ–‡ä»¶ã€‚ åœ¨å‘½ä»¤è¡Œçª—å£ä¸‹ï¼Œå®šä½åˆ° Hexo ç«™ç‚¹ç›®å½•ä¸‹ã€‚ä½¿ç”¨ hexo new page æ–°å»ºä¸€ä¸ªåˆ†ç±»ä¸»é¡µé¢ï¼Œå‘½åä¸º tags ï¼š 12&gt; cd your-hexo-site&gt; hexo new page tags ç„¶åæ‰“å¼€ your-hexo-site\source\tags ç›®å½•ä¸‹çš„ index.md æ–‡ä»¶ï¼Œå°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º tags ï¼Œä¸»é¢˜å°†è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºæ ‡ç­¾äº‘ã€‚ 12345---title: æ ‡ç­¾date: 2016-09-24 01:05:02type: &quot;tags&quot;--- æ³¨æ„ï¼šå¦‚æœæœ‰å¯ç”¨ å¤šè¯´ æˆ–è€… Disqus è¯„è®ºï¼Œé¡µé¢ä¹Ÿä¼šå¸¦æœ‰è¯„è®ºã€‚ è‹¥éœ€è¦å…³é—­çš„è¯ï¼Œè¯·æ·»åŠ å­—æ®µ comments å¹¶å°†å€¼è®¾ç½®ä¸º false ï¼Œå¦‚ï¼š 123456---title: æ ‡ç­¾date: 2016-09-24 01:05:02type: &quot;tags&quot;comments: false--- é‚£ä¹ˆæˆ‘ä»¬åœ¨æ–°åˆ›å»ºçš„æ–‡ç« é¡µé¢ä¸­è¦å¦‚ä½•æ¥æ˜¾ç¤ºæ ‡ç­¾å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥åœ¨æ–‡ç« é¡µé¢ä¸­é€šè¿‡æ·»åŠ  tags æ ‡è®°æ¥è®¾ç½®æ–‡ç« è¦æ˜¾ç¤ºçš„æ ‡ç­¾ã€‚ Hexo ä¸­æœ‰ Front-matter è¿™ä¸ªæ¦‚å¿µï¼Œæ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ --- åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ã€‚ Front-matter æ”¯æŒ â€œæ•°ç»„â€ æ–¹å¼æˆ– â€œyamlâ€ æ–¹å¼æ¥è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š 123title: hexo indexdate: 2016-09-24 01:05:02tags: [github,html5,css3] 123456title: hexo indexdate: 2016-09-24 01:05:02tags: - github- html5- css3 æ·»åŠ ã€Œåˆ†ç±»ã€é¡µé¢ã€Œåˆ†ç±»ã€é¡µé¢å°†å±•ç¤ºç«™ç‚¹çš„æ‰€æœ‰åˆ†ç±»ï¼Œè‹¥ä½ çš„æ‰€æœ‰æ–‡ç« éƒ½æœªåŒ…å«åˆ†ç±»ï¼Œæ­¤é¡µé¢å°†æ˜¯ç©ºçš„ã€‚ å’Œä¸Šé¢é…ç½® tags çš„æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤ hexo new page xxxx æ¥åˆ›å»ºï¼š 12&gt; cd your-hexo-site&gt; hexo new page categories è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å‘½ä»¤ä¸­çš„åç§° tags å’Œ categories æ˜¯åœ¨ä¹‹å‰é…ç½®å¯¼èˆªèœå•æ—¶åœ¨ menu å­—æ®µä¸‹æŒ‡å®šçš„åç§°ï¼Œå¤§å°å†™ä¸èƒ½é”™ã€‚ ç›¸åº”çš„é¡µé¢ç±»å‹è®¾ç½®å¦‚ä¸‹ï¼š 123456---title: åˆ†ç±»date: 2016-09-24 01:08:49type: &quot;categories&quot;comments: false--- åŒæ ·çš„ï¼Œåœ¨æ–‡ç« é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ categories å­—æ®µæ¥ä¸ºæ–‡ç« æŒ‡å®šæ‰€å±çš„åˆ†ç±»ï¼š 1234---title: åˆ†ç±»æµ‹è¯•æ–‡ç« categories: Testing--- å…³äº Hexo ä¸‹çš„æ–‡ç« é¡µé¢ä¸Šé¢å·²ç»æåˆ°è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ hexo n xxxx æˆ– hexo new xxxx æ¥åˆ›å»ºæ–°çš„æ–‡ç« é¡µé¢ï¼Œé»˜è®¤ä¼šä¿å­˜åœ¨ your-hexo-site\source\_posts ç›®å½•ä¸‹ã€‚ ä¸€èˆ¬çš„æ–‡ç« é¡µé¢å¤´éƒ¨çš„ Front-matter æ ¼å¼å¦‚ä¸‹ï¼š 12345678910111213---title: hexo next # æ–‡ç« æ ‡é¢˜date: 2016-09-24 01:08:49 # æ–‡ç« å‘å¸ƒæ—¥æœŸtags: [github,html5]tags: - github - html5 # tags æ–‡ç« çš„æ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡æ•°ç»„æ–¹å¼æˆ–yamlæ–¹å¼æŒ‡å®šcategories: å‰ç«¯ # æ–‡ç« æ‰€å±åˆ†ç±»description: è¿™é‡Œæ˜¯æ–‡ç« æè¿°ï¼Œå¤§æ¦‚140ä¸ªå­—å·¦å³ # æ–‡ç« æè¿°---ä¸‹é¢æ˜¯æ–‡ç« æ­£æ–‡ ... éœ€è¦æ³¨æ„çš„æ˜¯ å†’å·åé¢ä¸å†…å®¹ç›´æ¥è¦æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘ç”Ÿæˆ æ­£æ–‡ä¸ Front-matter ä¹‹é—´è¦æœ‰ä¸€ä¸ªç©ºè¡Œ ä¸ºæ–‡ç« æ·»åŠ æè¿°æ–‡å­—é™¤äº†æŒ‡å®š description ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ­£æ–‡ä¸­é€šè¿‡æ·»åŠ  &lt;!--more--&gt; æ ‡ç­¾åˆ†éš”å†…å®¹ å¸¸è§é—®é¢˜ ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¶æ³¨æ„YAMLè¯­æ³•ï¼Œå‚æ•°å†’å·:åä¸€å®šè¦ç•™ä¸€ç©ºæ ¼ ä¸­æ–‡ä¹±ç è¯·ä¿®æ”¹æ–‡ä»¶ç¼–ç æ ¼å¼ä¸ºUTF-8 ymlæ–‡ä»¶ä¸­æ‰€æœ‰æœ‰ç©ºæ ¼çš„å­—æ®µéƒ½ç”¨åŒå¼•å·æ‹¬èµ·æ¥ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°å»ºæ–‡ç« çš„æ–‡ä»¶åå’Œæ ‡é¢˜åæ˜¯ç›¸åŒçš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœæ–‡ä»¶åæ˜¯ä¸­æ–‡ï¼Œé‚£ä¹ˆç”Ÿæˆçš„é“¾æ¥åé¢ä¼šè‡ªåŠ¨æ·»åŠ æœ«å°¾æ–œæ  http://localhost:4000/2016/09/xxxxxxx/ å¦‚æœæ‰‹åŠ¨å»æ‰è¯¥æ–œæ  / ä¼šç›´æ¥æŠ¥é”™ã€‚æ‰€ä»¥æ¨èæ–‡ä»¶åæœ€å¥½ç”¨ è‹±æ–‡ æ¥å†™ï¼Œæ–‡ç« å†…çš„æ ‡é¢˜å¯ä»¥æ”¹æˆä¸­æ–‡ã€‚ å¦å¤–ï¼Œæ–‡ç« æ–‡ä»¶åä¸­æ–‡æœ«å°¾æ–œæ  çš„é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡é…ç½® Nginx æ¥è§£å†³ã€‚(è¿™é‡Œæš‚ä¸è®¨è®ºè¯¥æ–¹æ³•) Hexo ä¸­å¸¸ç”¨å‘½ä»¤123456hexo generate (hexo g) # ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæ–°çš„å«åšpublicçš„æ–‡ä»¶å¤¹hexo server (hexo s) # å¯åŠ¨æœ¬åœ°webæœåŠ¡ï¼Œç”¨äºåšå®¢çš„é¢„è§ˆhexo deploy (hexo d) # éƒ¨ç½²æ’­å®¢åˆ°è¿œç«¯ï¼ˆæ¯”å¦‚github, herokuç­‰å¹³å°ï¼‰hexo new &quot;postName&quot; # æ–°å»ºæ–‡ç« hexo new page &quot;pageName&quot; # æ–°å»ºé¡µé¢hexo clean # æ¸…ç†publicæ–‡ä»¶å¤¹ ç®€å†™å½¢å¼ï¼š 123456hexo n == hexo newhexo g == hexo generatehexo s == hexo serverhexo d == hexo deployhexo d -g # ç”Ÿæˆéƒ¨ç½²hexo s -g # ç”Ÿæˆé¢„è§ˆ å°† Hexo éƒ¨ç½²åˆ° Githubåˆ° GitHub æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®åä¸ºï¼šä½ çš„ç”¨æˆ·å.github.io å¿…é¡»ä¸ºè¿™ä¸ªåå­— Hexo ç›®å‰æ²¡æœ‰è‡ªå¸¦ Git éƒ¨ç½²æ¨¡å—ï¼Œéœ€æ‰‹åŠ¨å®‰è£…: 1&gt; npm install hexo-deployer-git --save ç„¶åï¼Œåœ¨ ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.yml ä¸­è®¾ç½® deploy å­—æ®µï¼š 1234deploy: type: git repository: git@github.com:ä½ çš„å¸å·/ä½ çš„å¸å·.github.io.git #ä¾‹å¦‚æˆ‘çš„ï¼šrepository: git@github.com:Leafney/Leafney.github.io.git branch: master æ³¨æ„ï¼šè¿™ä¸ªrespositoryçš„åœ°å€ä½ åœ¨GitHubåˆ›å»ºåŒåä»“åº“åï¼Œä¼šåœ¨é¡µé¢ä¸­ç»™å‡ºï¼Œç›´æ¥å¤åˆ¶å³å¯ã€‚å¦å¤–ï¼Œbranch è¦è®¾ç½®ä¸º master åˆ†æ”¯ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦æ³¨æ„ä½ æœ¬åœ°çš„ Git å·²ç»é€šè¿‡ SSH å’Œä½ çš„ GitHub è¿æ¥èµ·æ¥äº†ã€‚ å¦‚ä½•é€šè¿‡SSHè¿æ¥GitHubå¯ä»¥æŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  ä½¿ç”¨SSHå¯†é’¥è¿æ¥Github æ¥è¿›è¡Œè®¾ç½®ã€‚ ç„¶åæ‰§è¡Œå‘½ä»¤ï¼š 123456&gt; hexo clean # å…ˆæ¸…ç†publicæ–‡ä»¶å¤¹&gt; hexo g # ç”Ÿæˆ&gt; hexo d # éƒ¨ç½²# æˆ–é€šè¿‡ä¸‹é¢ä¸€æ¡å‘½ä»¤ç›´æ¥ç”Ÿæˆå¹¶éƒ¨ç½²&gt; hexo g -d æ‰§è¡Œå®Œæˆä¹‹åä¼šåœ¨ä½ çš„åšå®¢æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š.deploy_gitï¼Œ è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè‡ªåŠ¨è¢«å‘å¸ƒåˆ°ä½ çš„ GitHub ä¸Šï¼Œé¡µé¢æ–‡ä»¶åœ¨ master åˆ†æ”¯ä¸‹ã€‚ ç„¶åæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ä½ çš„ GitHub pages çš„åœ°å€ xxxxx.github.io å³å¯ã€‚ PublishTime: 2016-9-24 14:06:00]]></content>
      <categories>
        <category>Hexoåšå®¢æ­å»º</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2016%2F09%2F24%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Hello Firends! ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´ 2016-9-24 1:45:58 ,é…é…¿äº†å¾ˆä¹…çš„ä¸ªäººåšå®¢Hexoç‰ˆç»ˆäºè¦å‘å¸ƒä¸Šçº¿äº†ï¼æ­¤å¤„åº”è¯¥æœ‰æŒå£°ï¼ï¼ï¼ ä¹‹å‰å†™åšå®¢ä¸€ç›´ç”¨çš„è‡ªå·±æ­å»ºçš„.netç‰ˆçš„ç½‘ç«™ï¼Œåªæœ‰ç®€å•çš„CRUDçš„åŠŸèƒ½ï¼Œå½“æ—¶åªæ˜¯è€ƒè™‘ç”¨æ¥ä½œä¸ºè‡ªå·±çš„ä¸€ä¸ªå¯ä»¥è®°äº‹çš„åœ°æ–¹ï¼Œè®°ä¸‹è‡ªå·±åœ¨å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œå­¦åˆ°çš„æ–°çŸ¥è¯†ç­‰ç­‰ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘è¦å»å†™ä¸€äº›æŠ€æœ¯ç±»çš„æ–‡ç« ï¼Œå»åˆ†äº«ã€‚æ¯•ç«Ÿè‡ªå·±çš„èƒ½åŠ›è¿˜æ˜¯æœ‰é™çš„ã€‚ éšç€æ¥è§¦è¶Šæ¥è¶Šå¤šçš„å¼€æºé¡¹ç›®ï¼Œé€æ¸æ„è¯†åˆ°â€œåˆ†äº«â€ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚æ‰€ä»¥å†³å®šæŠŠè‡ªå·±å¹³æ—¶å­¦åˆ°çš„çŸ¥è¯†ã€æŠ€å·§ç­‰è®°å½•äºæ­¤ï¼Œä»¥ä¾¿èƒ½å¸®åŠ©åˆ°é‡åˆ°ç›¸å…³é—®é¢˜çš„å¼€å‘æœ‹å‹ä»¬ã€‚ åšå®¢ä¸­çš„æ–‡ç« ä¼šæ¶‰åŠ.Net ã€Python ã€Golangã€Linuxã€å‰ç«¯ç­‰ç›¸å…³æ–¹é¢ï¼ŒåŸºæœ¬å±äºå…¨æ ˆï¼Œä¹Ÿä¼šæ¶‰åŠåˆ°ä¸€äº›å‰æ²¿çš„æŠ€æœ¯ã€‚ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼]]></content>
  </entry>
  <entry>
    <title><![CDATA[Nginxåˆçº§å…¥é—¨]]></title>
    <url>%2F2016%2F07%2F03%2Fnginx-introduction%2F</url>
    <content type="text"><![CDATA[å®‰è£… 1$ sudo apt-get install nginx åœ¨Ubuntuä¸‹å®‰è£…åçš„æ–‡ä»¶ç»“æ„ï¼š æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½åœ¨ /etc/nginx/ ä¸‹ nginx.conf ä¸ºä¸»é…ç½®æ–‡ä»¶ sites-available/default ä¸ºé»˜è®¤é…ç½®æ–‡ä»¶ ç¨‹åºæ–‡ä»¶åœ¨ /usr/sbin/nginx ä¸‹ æ—¥å¿—æ”¾åœ¨äº† /var/log/nginx ä¸‹ å¯åŠ¨è„šæœ¬ /etc/init.d/nginx é»˜è®¤çš„è™šæ‹Ÿä¸»æœºçš„ç›®å½•è®¾ç½®åœ¨äº† /var/www/ ä¸‹ï¼ˆå‚è€ƒé»˜è®¤é…ç½®æ–‡ä»¶ï¼‰ åœ¨ nginx.conf é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯çœ‹åˆ°ä¸‹é¢ä¸¤è¡Œï¼š 12include /etc/nginx/conf.d/*.conf;include /etc/nginx/sites-enabled/*; ç½‘ä¸Šæ‰¾åˆ°çš„è‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è®¾ç½®æ–¹æ³•ä¸ºï¼š æˆ‘ä»¬å¯ä»¥åœ¨ /etc/nginx/sites-available ç›®å½•ä¸‹æ·»åŠ è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œç„¶åä¸ºè¯¥æ–‡ä»¶åˆ›å»ºè½¯é“¾æ¥åˆ° /etc/nginx/sites-enabled ç›®å½•ä¸­ã€‚ ä¹Ÿå¯ä»¥åœ¨ /etc/nginx/conf.d ç›®å½•ä¸‹åˆ›å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶å¹¶ä»¥ .conf ä¸ºæ‰©å±•åã€‚ nginx çš„å¯åŠ¨ æš‚åœ é‡å¯ å¯åŠ¨ sudo /etc/init.d/nginx start æš‚åœ sudo /etc/init.d/nginx stop é‡å¯ sudo /etc/init.d/nginx restart nginx åŸºæœ¬çš„é…ç½®æ–‡ä»¶å†™æ³•ï¼š 123456789101112sever &#123; listen 8080; server_name _; root /home/tiger/myweb/site; index index.html; location / &#123; try_files $uri $uri/ =404; &#125;&#125; ç¤ºä¾‹æ–‡ä»¶ web.conf ,æ‰€åœ¨ç›®å½•ä¸º /etc/nginx/conf.d : 12345678910111213141516171819202122232425sever &#123; listen 8081; server_name _; root /home/tiger/myweb/site2; index index.html aaa.html; location / &#123; try_files $uri $uri/ =404; &#125;&#125;server &#123; listen 8082; server_name _; # è®¿é—® localhost error_page 404 /404.html; # æŒ‡å®š404é”™è¯¯é¡µ root /home/tiger/myweb/site2/aaa; index abc.html; location / &#123; allow all; &#125;&#125; æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶ï¼š 1234$ ls /home/tiger/myweb/site2aaa aaa.html$ ls /home/tiger/myweb/site2/aaa404.html abc.html]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Scrapyçˆ¬è™«åˆæ¢]]></title>
    <url>%2F2016%2F06%2F27%2Fscrapy-introduction%2F</url>
    <content type="text"><![CDATA[Scrapy æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„é«˜å±‚æ¬¡çš„å±å¹•æŠ“å–å’Œç½‘é¡µçˆ¬è™«æ¡†æ¶ï¼Œçˆ¬å–ç½‘ç«™ï¼Œä»ç½‘ç«™é¡µé¢å¾—åˆ°ç»“æ„åŒ–çš„æ•°æ®ï¼Œå®ƒæœ‰ç€å¹¿æ³›çš„ç”¨é€”ï¼Œä»æ•°æ®æŒ–æ˜åˆ°ç›‘æµ‹å’Œè‡ªåŠ¨æµ‹è¯•ï¼ŒScrapyå®Œå…¨ç”¨Pythonå®ç°ï¼Œå®Œå…¨å¼€æºï¼Œä»£ç æ‰˜ç®¡åœ¨Githubä¸Šï¼Œå¯è¿è¡Œåœ¨Linuxï¼ŒWindowsï¼ŒMacå’ŒBSDå¹³å°ä¸Šï¼ŒåŸºäºTwistedçš„å¼‚æ­¥ç½‘ç»œåº“æ¥å¤„ç†ç½‘ç»œé€šè®¯ï¼Œç”¨æˆ·åªéœ€è¦å®šåˆ¶å¼€å‘å‡ ä¸ªæ¨¡å—å°±å¯ä»¥è½»æ¾çš„å®ç°ä¸€ä¸ªçˆ¬è™«ï¼Œç”¨æ¥æŠ“å–ç½‘é¡µå†…å®¹ä»¥åŠå„ç§å›¾ç‰‡ã€‚ å®‰è£…Scrapy1$ sudo pip install Scrapy scrapyä¾èµ– lxml ,è¯·ä¿è¯å·²ç»å®‰è£…äº† lxml åº“ã€‚ åˆ›å»ºåˆå§‹åŒ–é¡¹ç›®æ¡†æ¶ è¿™é‡Œä»¥æŠ“å– http://www.cnbeta.com/topics/9.htm é¡µé¢ä¸­çš„æ–‡ç« æ ‡é¢˜å’Œç®€ä»‹ä¸ºä¾‹ï¼Œåˆ›å»ºé¡¹ç›®åç§°ä¸º cnbetaSpider ã€‚ 1$ scrapy startproject cnbetaSpider è¯¥å‘½ä»¤å°†ä¼šåˆ›å»ºåŒ…å«ä¸‹åˆ—å†…å®¹çš„ cnbetaSpider ç›®å½•: 12345678910cnbetaSpider/ scrapy.cfg cnbetaSpider/ __init__.py items.py pipelines.py settings.py spiders/ __init__.py ... è¿™äº›æ–‡ä»¶åˆ†åˆ«æ˜¯: scrapy.cfg : é¡¹ç›®çš„é…ç½®æ–‡ä»¶ cnbetaSpider/ : è¯¥é¡¹ç›®çš„pythonæ¨¡å—ã€‚ä¹‹åæ‚¨å°†åœ¨æ­¤åŠ å…¥ä»£ç ã€‚ cnbetaSpider/items.py : é¡¹ç›®ä¸­çš„itemæ–‡ä»¶. cnbetaSpider/pipelines.py : é¡¹ç›®ä¸­çš„pipelinesæ–‡ä»¶. cnbetaSpider/settings.py : é¡¹ç›®çš„è®¾ç½®æ–‡ä»¶. cnbetaSpider/spiders/ : æ”¾ç½®spiderä»£ç çš„ç›®å½•. å®šä¹‰ItemItem æ˜¯ä¿å­˜çˆ¬å–åˆ°çš„æ•°æ®çš„å®¹å™¨ã€‚æˆ‘ä»¬éœ€è¦ä»ç½‘é¡µä¸­æå– æ–‡ç« çš„æ ‡é¢˜ï¼Œé“¾æ¥ï¼Œæè¿°ï¼Œå¯¹æ­¤ï¼Œåœ¨ item ä¸­å®šä¹‰ç›¸åº”çš„å­—æ®µã€‚ç¼–è¾‘ cnbetaSpider ç›®å½•ä¸­çš„ items.py æ–‡ä»¶: 123456789import scrapyclass CnbetaspiderItem(scrapy.Item): # define the fields for your item here like: # name = scrapy.Field() title=scrapy.Field() link=scrapy.Field() desc=scrapy.Field() pass åˆ›å»ºSpiderSpider æ˜¯ç”¨æˆ·ç¼–å†™ç”¨äºä»å•ä¸ªç½‘ç«™(æˆ–è€…ä¸€äº›ç½‘ç«™)çˆ¬å–æ•°æ®çš„ç±»ã€‚å…¶åŒ…å«äº†ä¸€ä¸ªç”¨äºä¸‹è½½çš„åˆå§‹URLï¼Œå¦‚ä½•è·Ÿè¿›ç½‘é¡µä¸­çš„é“¾æ¥ä»¥åŠå¦‚ä½•åˆ†æé¡µé¢ä¸­çš„å†…å®¹ï¼Œ æå–ç”Ÿæˆ item çš„æ–¹æ³•ã€‚ ä¸ºäº†åˆ›å»ºä¸€ä¸ª Spider ï¼Œæ‚¨å¿…é¡»ç»§æ‰¿ scrapy.Spider ç±»ï¼Œ ä¸”å®šä¹‰ä»¥ä¸‹ä¸‰ä¸ªå±æ€§: name æŒ‡å®šSpiderçš„åç§°ï¼Œå”¯ä¸€ start_urls åŒ…å«äº†Spideråœ¨å¯åŠ¨æ—¶è¿›è¡Œçˆ¬å–çš„urlåˆ—è¡¨ parse() æ¥æ”¶å®Œæˆä¸‹è½½åç”Ÿæˆçš„ Response å¯¹è±¡ï¼Œè¯¥æ–¹æ³•è´Ÿè´£è§£æè¿”å›çš„æ•°æ®ï¼Œæå–æ•°æ®(ç”Ÿæˆitem)ä»¥åŠç”Ÿæˆéœ€è¦è¿›ä¸€æ­¥å¤„ç†çš„URLçš„ Request å¯¹è±¡ã€‚ åœ¨ç›®å½• cnbetaSpider/spiders ä¸‹åˆ›å»ºæ–‡ä»¶ cnbetaspider.py: 12345678910111213141516# coding:utf-8import scrapyclass cnbetaSpider(scrapy.Spider): &quot;&quot;&quot;docstring for cnbetaSpider&quot;&quot;&quot; name=&quot;cnbeta&quot; allowed_domains=[&quot;cnbeta.com&quot;] start_urls=[ &quot;http://www.cnbeta.com/topics/9.htm&quot; ] def parse(self,response): filename=response.url.split(&quot;/&quot;)[-2] with open(filename,&apos;wb&apos;) as f: f.write(response.body) çˆ¬å–è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤å¯åŠ¨spider: 1234$ lscnbetaSpider scrapy.cfg# æ‰§è¡Œå‘½ä»¤$ scrapy crawl cnbeta ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º cnbetaspider.py ä¸­çš„ name å±æ€§å€¼ã€‚ æ‰§è¡Œå®Œæˆåå¯åœ¨å½“å‰ç›®å½•ä¸‹çœ‹åˆ°ç”Ÿæˆçš„æ–‡ä»¶ topics,é‡Œé¢ä¿å­˜çš„è·å–åˆ°çš„ç½‘é¡µçš„å†…å®¹ã€‚ æå–Scrapyä½¿ç”¨äº†ä¸€ç§åŸºäº XPath å’Œ CSS è¡¨è¾¾å¼æœºåˆ¶: Scrapy Selectors ã€‚è¯¦è§ï¼šé€‰æ‹©å™¨(Selectors) &mdash; Scrapy 0.24.1 æ–‡æ¡£ é€‰æ‹©å™¨æ–¹æ³•( .xpath() or .css() ) ä¸ºäº†æå–çœŸå®çš„åŸæ–‡æ•°æ®ï¼Œä½ éœ€è¦è°ƒç”¨ .extract() æ–¹æ³•ï¼š 12&gt;&gt;&gt; response.xpath(&apos;//title/text()&apos;).extract()[u&apos;Example website&apos;] è¿™é‡Œç»™å‡ºXPathè¡¨è¾¾å¼çš„ä¾‹å­åŠå¯¹åº”çš„å«ä¹‰: /html/head/title : é€‰æ‹©HTMLæ–‡æ¡£ä¸­ &lt;head&gt; æ ‡ç­¾å†…çš„ &lt;title&gt; å…ƒç´  /html/head/title/text() : é€‰æ‹©ä¸Šé¢æåˆ°çš„ &lt;title&gt; å…ƒç´ çš„æ–‡å­— //td : é€‰æ‹©æ‰€æœ‰çš„ &lt;td&gt; å…ƒç´  //div[@class=&quot;mine&quot;] : é€‰æ‹©æ‰€æœ‰å…·æœ‰ class=&quot;mine&quot; å±æ€§çš„ div å…ƒç´  Selectoræœ‰å››ä¸ªåŸºæœ¬çš„æ–¹æ³•: xpath() : ä¼ å…¥xpathè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨ ã€‚ css() : ä¼ å…¥CSSè¡¨è¾¾å¼ï¼Œè¿”å›è¯¥è¡¨è¾¾å¼æ‰€å¯¹åº”çš„æ‰€æœ‰èŠ‚ç‚¹çš„selector liståˆ—è¡¨. extract() : åºåˆ—åŒ–è¯¥èŠ‚ç‚¹ä¸ºunicodeå­—ç¬¦ä¸²å¹¶è¿”å›listã€‚ re() : æ ¹æ®ä¼ å…¥çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹æ•°æ®è¿›è¡Œæå–ï¼Œè¿”å›unicodeå­—ç¬¦ä¸²liståˆ—è¡¨ã€‚ åˆ†æç½‘é¡µ http://www.cnbeta.com/topics/9.htm ä¸­çš„æ–‡ç« ï¼š æ–‡ç« åˆ—è¡¨åœ¨ item å…ƒç´ ï¼š 1//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;] æ ‡é¢˜ï¼š 1xpath(&apos;//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;]/*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/text()&apos;).extract() é“¾æ¥ï¼š 1xpath(&apos;//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;]/*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/@href&apos;).extract() æè¿°ï¼š 1xpath(&apos;//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;]/*[@class=&quot;hd&quot;]/*[@class=&quot;newsinfo&quot;]/p/text()&apos;).extract() ä¿®æ”¹æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ cnbetaspider.py ä¸­çš„ parse() æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213141516import scrapyclass cnbetaSpider(scrapy.Spider): &quot;&quot;&quot;docstring for cnbetaSpider&quot;&quot;&quot; name=&quot;cnbeta&quot; allowed_domains=[&quot;cnbeta.com&quot;] start_urls=[ &quot;http://www.cnbeta.com/topics/9.htm&quot; ] def parse(self,response): for sel in response.xpath(&apos;//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;]&apos;): title=sel.xpath(&apos;*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/text()&apos;).extract() link=sel.xpath(&apos;*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/@href&apos;).extract() desc=sel.xpath(&apos;*[@class=&quot;hd&quot;]/*[@class=&quot;newsinfo&quot;]/p/text()&apos;).extract() print(title,link,desc) å†æ¬¡æ‰§è¡Œï¼Œèƒ½çœ‹åˆ°çˆ¬å–åˆ°çš„ç½‘ç«™ä¿¡æ¯è¢«æˆåŠŸè¾“å‡º: 1$ scapy crawl cnbeta ç»“æœå°†ä¹‹å‰è®¾ç½®çš„ Item å¯¹è±¡å¼•å…¥ï¼Œä½¿ç”¨æ ‡å‡†çš„å­—å…¸è¯­æ³•æ¥ä¿æŒè·å–åˆ°çš„æ¯ä¸ªå­—æ®µçš„å€¼ã€‚æœ€ç»ˆçš„ä»£ç ä¸ºï¼š 123456789101112131415161718192021222324# coding:utf-8import scrapyfrom cnbetaSpider.items import CnbetaspiderItemclass cnbetaSpider(scrapy.Spider): &quot;&quot;&quot;docstring for cnbetaSpider&quot;&quot;&quot; name=&quot;cnbeta&quot; allowed_domains=[&quot;cnbeta.com&quot;] start_urls=[ &quot;http://www.cnbeta.com/topics/9.htm&quot; ] def parse(self,response): items=[] for sel in response.xpath(&apos;//*[@class=&quot;all_news_wildlist&quot;]/div[@class=&quot;items&quot;]/div[@class=&quot;item&quot;]&apos;): item=CnbetaspiderItem() item[&apos;title&apos;]=sel.xpath(&apos;*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/text()&apos;).extract() item[&apos;link&apos;]=sel.xpath(&apos;*[@class=&quot;hd&quot;]/div[@class=&quot;title&quot;]/a/@href&apos;).extract() item[&apos;desc&apos;]=sel.xpath(&apos;*[@class=&quot;hd&quot;]/*[@class=&quot;newsinfo&quot;]/p/text()&apos;).extract() # yield item items.append(item) return items å¦‚æœæƒ³æŠŠå¾—åˆ°çš„ç»“æœä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ï¼š 1$ scrapy crawl cnbeta &gt; abc.html è¿™æ ·å°±æŠŠç»“æœä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹çš„ abc.html ä¸­äº†ã€‚ Scrapyçˆ¬è™«è¿è¡Œæ—¶æŠ¥é”™ â€œForbidden by robots.txtâ€è§£å†³è¯¥é—®é¢˜åªéœ€è¦å°† settings.py æ–‡ä»¶ä¸­çš„ ROBOTSTXT_OBEY å€¼æ”¹ä¸º False å³å¯ã€‚ 1ROBOTSTXT_OBEY = False ç›¸å…³é“¾æ¥ Scrapy 0.25 æ–‡æ¡£ &mdash; Scrapy 0.24.1 æ–‡æ¡£ Scrapy 1.0 æ–‡æ¡£(æœªå®Œæˆ,åªæ›´æ–°äº†introéƒ¨åˆ†,è¯·è°¨æ…å‚è€ƒ) &mdash; Scrapy 1.0.5 æ–‡æ¡£ ä½¿ç”¨ScrapyæŠ“å–æ•°æ® çˆ¬è™«å‡ºç°Forbidden by robots.txt - èœé¸¡çè®²- åšå®¢é¢‘é“ - CSDN.NET Scrapyç”¨Cookieå®ç°æ¨¡æ‹Ÿç™»å½• - ç®€ä¹¦]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>æ•°æ®æŠ“å–</tag>
        <tag>Python</tag>
        <tag>Scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ†å¸ƒå¼æœç´¢å¼•æ“ElasticSearchåˆæ¢]]></title>
    <url>%2F2016%2F06%2F20%2Fdistributed-search-engine-elasticsearch%2F</url>
    <content type="text"><![CDATA[ElasticSearchæ˜¯ä¸€ä¸ªåŸºäºLuceneæ„å»ºçš„å¼€æºï¼Œåˆ†å¸ƒå¼ï¼ŒRESTfulæœç´¢å¼•æ“ã€‚ ä»»åŠ¡ç‚¹ åœ¨Ubuntuä¸‹å®‰è£… åœ¨Windowsä¸‹å®‰è£… ä½¿ç”¨Restful APIå®ç°æœç´¢å¼•æ“çš„CURDæ“ä½œ åœ¨Pythonç½‘ç«™Flaskä¸‹ä½¿ç”¨ElasticSearchå®ç°æ–‡ç« æœç´¢ ElasticSearchçš„Pythonè¿æ¥å™¨ï¼šPyes å®‰è£…Java (JVM) versionedit Elasticsearch is built using Java, and requires at least Java 7 in order to run. Only Oracleâ€™s Java and the OpenJDK are supported. The same JVM version should be used on all Elasticsearch nodes and clients.We recommend installing the Java 8 update 20 or later, or Java 7 update 55 or later. Previous versions of Java 7 are known to have bugs that can cause index corruption and data loss. Elasticsearch will refuse to start if a known-bad version of Java is used.The version of Java to use can be configured by setting the JAVA_HOME environment variable. Linux(Ubuntu)ä¸‹å®‰è£…Installing the oracle JDK1234sudo add-apt-repository ppa:webupd8team/javasudo apt-get updatesudo apt-get install oracle-java8-installerjava -version RPM based distributions123sudo /bin/systemctl daemon-reloadsudo /bin/systemctl enable elasticsearch.servicesudo /bin/systemctl start elasticsearch.service Windowsä¸‹å®‰è£…ä»ç½‘ç«™ ä¸‹è½½windowsä¸‹çš„msiå®‰è£…åŒ…ï¼Œåœ¨cmdå‘½ä»¤è¡Œè¿›å…¥å®‰è£…ç›®å½•ï¼Œå†è¿›å…¥ bin ç›®å½•ï¼Œè¿è¡Œ elasticsearch.bat ã€‚ Ubuntuä¸‹é…ç½®ElasticSearchç¯å¢ƒå®å½•å®‰è£…Javaç¯å¢ƒç”±äºElasticSearchçš„è¿è¡Œéœ€è¦Javaç¯å¢ƒçš„æ”¯æŒï¼Œå…ˆå®‰è£…javaç¯å¢ƒã€‚ç”±äºUbuntuç³»ç»Ÿä¸­ç”±äºæˆæƒé—®é¢˜ï¼Œé»˜è®¤åªå®‰è£…äº†OpenJDKçš„åŒ…ï¼Œé€šè¿‡javaå’Œjavacå¯ä»¥çœ‹åˆ°ï¼š1234567* default-jdk* ecj* gcj-4.9-jdk* openjdk-8-jdk-headless* gcj-4.8-jdk* gcj-5-jdk* openjdk-9-jdk æ ¹æ®ElasticSearchå®˜æ–¹æ¨èå®‰è£…æ–¹æ³•ï¼š 1234sudo add-apt-repository ppa:webupd8team/javasudo apt-get updatesudo apt-get install oracle-java8-installerjava -version å¦‚æœå‡ºç°å¦‚ä¸‹æç¤ºä¿¡æ¯ï¼Œå¹¶æœ‰è¿›åº¦æ¡æ˜¾ç¤ºï¼Œåˆ™è¯´æ˜è¿è¡Œé¡ºåˆ©å¹¶æ­£åœ¨ä¸‹è½½æ‰€éœ€æ–‡ä»¶ï¼š 1234567891011HTTP request sent, awaiting response... 200 OKLength: 181367942 (173M) [application/x-gzip]Saving to: â€˜jdk-8u91-linux-x64.tar.gzâ€™ 0K ........ ........ ........ ........ ........ ........ 1% 566K 5m8s 3072K ........ ........ ........ ........ ........ ........ 3% 1.15M 3m44s 6144K ........ ........ ........ ........ ........ ........ 5% 1.10M 3m16s 9216K ........ ........ ........ ........ ........ ........ 6% 1002K 3m5s 12288K ........ ........ ........ ........ ........ ........ 8% 715K 3m11s 15360K ........ ........ ........ ........ ........ ........ 10% 624K 3m18s 18432K ........ ........ ........ ........ ........ ........ 12% 417K 3m40s å¦åˆ™å¯èƒ½ç”±äºç½‘ç»œåŸå› æˆ–å…¶ä»–é—®é¢˜ï¼Œä¼šä¸­æ–­ä¸‹è½½æˆ–æŠ¥é”™ã€‚ é”™è¯¯ä¸€ï¼šå®‰è£…æ—¶å‡ºç°é”™è¯¯ï¼š12345678sha256sum mismatch jdk-8u91-linux-x64.tar.gzOracle JDK 8 is NOT installed.dpkg: å¤„ç†è½¯ä»¶åŒ… oracle-java8-installer (--configure)æ—¶å‡ºé”™ï¼š å­è¿›ç¨‹ å·²å®‰è£… post-installation è„šæœ¬ è¿”å›é”™è¯¯çŠ¶æ€ 1æ­£åœ¨è®¾ç½® gsfonts-x11 (0.24) ...åœ¨å¤„ç†æ—¶æœ‰é”™è¯¯å‘ç”Ÿï¼š oracle-java8-installerE: Sub-process /usr/bin/dpkg returned an error code (1) å¯ä»¥ç”¨è¯¥æ–‡ç« ä¸­ä»‹ç»çš„æ–¹æ³•è§£å†³ï¼Œäº²æµ‹æœ‰æ•ˆï¼šhttp://www.miaoqiyuan.cn/p/ubuntu-e-sub-process-dpkg-returned-an-error-code é”™è¯¯äºŒï¼šæ ¹æ®ä¸Šé¢çš„æ–¹æ³•æ‰§è¡Œå®Œå‘½ä»¤åï¼Œæ‰§è¡Œ java -version æ—¶åªä¼šæ˜¾ç¤ºä¸‹åˆ—è¾“å‡ºä¿¡æ¯ï¼š 123456789tiger@vbox:~$ java -versionç¨‹åº &apos;java&apos; å·²åŒ…å«åœ¨ä¸‹åˆ—è½¯ä»¶åŒ…ä¸­ï¼š * default-jre * gcj-4.9-jre-headless * gcj-5-jre-headless * openjdk-8-jre-headless * gcj-4.8-jre-headless * openjdk-9-jre-headlessè¯·å°è¯•ï¼šsudo apt install &lt;é€‰å®šçš„è½¯ä»¶åŒ…&gt; å³ä½¿æ˜¯é‡å¤æ‰§è¡Œä¸Šé¢çš„å®‰è£…æ–¹æ³•ï¼Œç»“æœä»æ˜¯å¦‚æ­¤ï¼š 123456789101112tiger@vbox:~$ sudo apt-get install oracle-java8-installeræ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘ æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ oracle-java8-installer å·²ç»æ˜¯æœ€æ–°ç‰ˆ (8u92+8u91arm-2~really8u91~webupd8~0)ã€‚å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 196 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚tiger@vbox:~$ sudo apt-get install oracle-java8-set-defaultæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘ æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ oracle-java8-set-default å·²ç»æ˜¯æœ€æ–°ç‰ˆ (8u92+8u91arm-2~really8u91~webupd8~0)ã€‚å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 196 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚ æ ¹æœ¬é—®é¢˜æ˜¯ä»€ä¹ˆ è½¬åˆ°ç›®å½•/usr/lib/jvm/ ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º java-8-oracle çš„ç›®å½•ï¼Œä½†æŸ¥çœ‹è¯¥ç›®å½•å´å‘ç°é‡Œé¢æ˜¯ç©ºçš„ã€‚æ‰€ä»¥è™½ç„¶æç¤ºæ˜¯å®‰è£…æˆåŠŸäº†ï¼Œä½†å´æ²¡æœ‰å¯æ‰§è¡Œçš„æ–‡ä»¶ï¼Œå¯èƒ½æ˜¯åœ¨ä¸‹è½½æ–‡ä»¶æ—¶å‡ºé”™äº†ã€‚ ç”±äºç›´æ¥å®‰è£…é”™è¯¯ï¼Œä¸‹é¢å°è¯•æ‰‹åŠ¨è¿›è¡Œå®‰è£…ã€‚ ä»€ä¹ˆæƒ…å†µä¸‹è¡¨ç¤ºå®‰è£…æˆåŠŸï¼Œä»€ä¹ˆæƒ…å†µä¸‹è¡¨ç¤ºå®‰è£…å¤±è´¥é€šè¿‡ java -version æ¥æŸ¥çœ‹ å¦‚æœè¾“å‡ºå¦‚ä¸‹ï¼Œåˆ™è¯´æ˜ Orancel JDK å®‰è£…å¤±è´¥ï¼š 12345678root@ubuntu:~# java -versionThe program &apos;java&apos; can be found in the following packages: * default-jre * gcj-4.8-jre-headless * openjdk-7-jre-headless * gcj-4.6-jre-headless * openjdk-6-jre-headlessTry: apt-get install &lt;selected package&gt; å¦‚æœè¾“å‡ºå¦‚ä¸‹ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼š 1234tiger@vbox:/usr/lib/jvm$ java -versionjava version &quot;1.8.0_91&quot;Java(TM) SE Runtime Environment (build 1.8.0_91-b14)Java HotSpot(TM) 64-Bit Server VM (build 25.91-b14, mixed mode) Ubuntuä¸‹æ‰‹åŠ¨å®‰è£…JDK åˆ°Oracleå®˜ç½‘ä¸‹è½½å¯¹åº”å½“å‰ç³»ç»Ÿçš„jdkç‰ˆæœ¬ Java SE Development Kit 8 Downloads ï¼š 123456// ä¸‹è½½å¯¹åº”ç‰ˆæœ¬jdkå‹ç¼©åŒ…ï¼Œè¿™é‡Œé€‰æ‹© `Linux64`wget http://download.oracle.com/otn-pub/java/jdk/8u91-b14/jdk-8u91-linux-x64.tar.gz// ç­‰å¾…ä¸‹è½½å®Œæˆåï¼Œæ‰§è¡Œï¼štar zxvf jdk-8u91-linux-x64.tar.gz// æŸ¥çœ‹ `ls`jdk1.8.0_91 jdk-8u91-linux-x64.tar.gz å°†è§£å‹åçš„ç›®å½• jdk1.8.0_91 å¤åˆ¶åˆ° /usr/lib/jvm ç›®å½•é‡Œï¼Œ1sudo cp -r jdk1.8.0_91/ /usr/lib/jvm é…ç½®ç¯å¢ƒå˜é‡ï¼š 1sudo vim /etc/profile åœ¨æ–‡ä»¶çš„æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š(æ³¨æ„å¯¹åº”è‡ªå·±çš„ç›®å½•è·¯å¾„å’Œjdkçš„ç‰ˆæœ¬å·) 1234JAVA_HOME=/usr/lib/jvm/jdk1.8.0_91export JRE_HOME=/usr/lib/jvm/jdk1.8.0_91/jreexport CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATHexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH ä¿®æ”¹å®Œåï¼Œæ‰§è¡Œ :wq é€€å‡ºvim ï¼Œä½¿ç”¨sourceåˆ·æ–°ä¸€ä¸‹ï¼š 1source /etc/profile ç„¶åæ‰§è¡Œï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849java -version//çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯è¡¨ç¤ºå®‰è£…æˆåŠŸï¼štiger@vbox:/usr/lib/jvm$ java -versionjava version &quot;1.8.0_91&quot;Java(TM) SE Runtime Environment (build 1.8.0_91-b14)Java HotSpot(TM) 64-Bit Server VM (build 25.91-b14, mixed mode)//æ‰§è¡Œ `java`tiger@vbox:/usr/lib/jvm$ javaç”¨æ³•: java [-options] class [args...] (æ‰§è¡Œç±») æˆ– java [-options] -jar jarfile [args...] (æ‰§è¡Œ jar æ–‡ä»¶)å…¶ä¸­é€‰é¡¹åŒ…æ‹¬: -d32 ä½¿ç”¨ 32 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -d64 ä½¿ç”¨ 64 ä½æ•°æ®æ¨¡å‹ (å¦‚æœå¯ç”¨) -server é€‰æ‹© &quot;server&quot; VM é»˜è®¤ VM æ˜¯ server. -cp &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; -classpath &lt;ç›®å½•å’Œ zip/jar æ–‡ä»¶çš„ç±»æœç´¢è·¯å¾„&gt; ç”¨ : åˆ†éš”çš„ç›®å½•, JAR æ¡£æ¡ˆ å’Œ ZIP æ¡£æ¡ˆåˆ—è¡¨, ç”¨äºæœç´¢ç±»æ–‡ä»¶ã€‚ -D&lt;åç§°&gt;=&lt;å€¼&gt; è®¾ç½®ç³»ç»Ÿå±æ€§ -verbose:[class|gc|jni] å¯ç”¨è¯¦ç»†è¾“å‡º -version è¾“å‡ºäº§å“ç‰ˆæœ¬å¹¶é€€å‡º........//æ‰§è¡Œ `javac`tiger@vbox:/usr/lib/jvm$ javacç”¨æ³•: javac &lt;options&gt; &lt;source files&gt;å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬: -g ç”Ÿæˆæ‰€æœ‰è°ƒè¯•ä¿¡æ¯ -g:none ä¸ç”Ÿæˆä»»ä½•è°ƒè¯•ä¿¡æ¯ -g:&#123;lines,vars,source&#125; åªç”ŸæˆæŸäº›è°ƒè¯•ä¿¡æ¯ -nowarn ä¸ç”Ÿæˆä»»ä½•è­¦å‘Š -verbose è¾“å‡ºæœ‰å…³ç¼–è¯‘å™¨æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„æ¶ˆæ¯ -deprecation è¾“å‡ºä½¿ç”¨å·²è¿‡æ—¶çš„ API çš„æºä½ç½® -classpath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -cp &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -sourcepath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾è¾“å…¥æºæ–‡ä»¶çš„ä½ç½® -bootclasspath &lt;è·¯å¾„&gt; è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®.... .... ä¸‹é¢çš„æ­¥éª¤æœªæµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒ å¦‚æœåˆ°è¿™ä¸€æ­¥ï¼Œä»»ç„¶ä¸æˆåŠŸçš„è¯ï¼Œåˆ™å±äºæ‰‹åŠ¨é…ç½®é»˜è®¤çš„JDKç‰ˆæœ¬ï¼š 1234567891011sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/java/bin/java 300 sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java/bin/javac 300 sudo update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/java/bin/jar 300 sudo update-alternatives --install /usr/bin/javah javah /usr/lib/jvm/java/bin/javah 300 sudo update-alternatives --install /usr/bin/javap javap /usr/lib/jvm/java/bin/javap 300 //ç„¶åæ‰§è¡Œsudo update-alternatives --config java// åœ¨é€šè¿‡ java -version æ¥åˆ¤æ–­java -version å‚è€ƒ ï¼š Running as a Service on Linux | Elasticsearch Reference [2.3] | Elastic ubuntu 13.04 å®‰è£… JDK - plinx - åšå®¢å›­ åœ¨ Ubuntu ç³»ç»Ÿä¸Šå®‰è£… Oracle Java 8 | åŠç“¶ å®‰è£…ElasticSearchä¸‹è½½æœ€æ–°å®‰è£…åŒ…ï¼š ä» download Elasticsearch free ä¸‹è½½Linuxçš„å®‰è£…åŒ…ï¼š1234// ä¸‹è½½$ wget -c https://download.elastic.co/elasticsearch/release/org/elasticsearch/distribution/zip/elasticsearch/2.3.3/elasticsearch-2.3.3.zip// è§£å‹å®‰è£…unzip elasticsearch-2.3.3.zip è¿›å…¥è§£å‹åå¾—åˆ°çš„ç›®å½• elasticsearch-2.3.3 ï¼Œå‚è€ƒå®˜ç½‘å®‰è£…æ•™ç¨‹ Setup æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è¿è¡Œ:1$ bin/elasticsearch å¦‚æœä¸Šä¸€æ­¥çš„javaç¯å¢ƒæ²¡æœ‰å®‰è£…æˆåŠŸï¼Œæ‰§è¡Œè¯¥å‘½ä»¤ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 1Could not find any executable java binary. Please install java in your PATH or set JAVA_HOME å¦‚æœæ²¡æœ‰å‡ºç°é”™è¯¯ï¼Œæç¤ºä¿¡æ¯ä¸­è¾“å‡º å¦‚ [INFO] ..... ç­‰ä¿¡æ¯ï¼Œè¯´æ˜è¿è¡ŒæˆåŠŸã€‚ å†æ–°å¼€ä¸€ä¸ªå‘½ä»¤è¡Œç»ˆç«¯ï¼Œæ‰§è¡Œï¼š 1234567891011121314tiger@vbox:~$ curl http://localhost:9200/&#123; &quot;name&quot; : &quot;Rune&quot;, &quot;cluster_name&quot; : &quot;elasticsearch&quot;, &quot;version&quot; : &#123; &quot;number&quot; : &quot;2.3.3&quot;, &quot;build_hash&quot; : &quot;218bdf10790eef486ff2c41a3df5cfa32dadcfde&quot;, &quot;build_timestamp&quot; : &quot;2016-05-17T15:40:04Z&quot;, &quot;build_snapshot&quot; : false, &quot;lucene_version&quot; : &quot;5.5.0&quot; &#125;, &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125;tiger@vbox:~$ å‡ºç°ä¸Šé¢çš„æç¤ºåˆ™è¯´æ˜ElasticSearchå®‰è£…æˆåŠŸã€‚ ElasticSearch - kid551 - åšå®¢å›­ é»˜è®¤æƒ…å†µä¸‹ Elasticsearch çš„ RESTful æœåŠ¡åªæœ‰æœ¬æœºæ‰èƒ½è®¿é—®ã€‚ä¹Ÿå°±æ˜¯è¯´æ— æ³•ä»ä¸»æœºè®¿é—®è™šæ‹Ÿæœºä¸­çš„æœåŠ¡ã€‚ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œå¯ä»¥ä¿®æ”¹ /config/elasticsarch.yml æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹ä¸¤è¡Œï¼š 12network.bind_host: &quot;0.0.0.0&quot;network.publish_host: _non_loopback:ipv4_ ä½†çº¿ä¸Šç¯å¢ƒåˆ‡å¿Œä¸è¦è¿™æ ·é…ç½®ï¼Œå¦åˆ™ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ä¿®æ”¹ä½ çš„æ•°æ®ã€‚ å®‰è£… IK Analysis å¤„ç†ä¸­æ–‡æœç´¢Elasticsearch è‡ªå¸¦çš„åˆ†è¯å™¨ä¼šç²—æš´åœ°æŠŠæ¯ä¸ªæ±‰å­—ç›´æ¥åˆ†å¼€ï¼Œæ²¡æœ‰æ ¹æ®è¯åº“æ¥åˆ†è¯ã€‚ä¸ºäº†å¤„ç†ä¸­æ–‡æœç´¢ï¼Œè¿˜éœ€è¦å®‰è£…ä¸­æ–‡åˆ†è¯æ’ä»¶ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ elasticsearch-analysis-ikï¼Œæ”¯æŒè‡ªå®šä¹‰è¯åº“ã€‚ é¦–å…ˆï¼Œä¸‹è½½ä¸ Elasticsearch åŒ¹é…çš„ elasticsearch-analysis-ik æ’ä»¶ï¼š{2.3.3â€“1.9.3} 12345678// ä»github ä¸‹è½½å†…å®¹git clone https://github.com/medcl/elasticsearch-analysis-ik.gitcd elasticsearch-analysis-ik// è¿›å…¥æŒ‡å®šçš„ tag v1.9.3git checkout v1.9.3// å½“å‰ç›®å½•lsconfig LICENSE.txt pom.xml README.md src è¦ç¼–è¯‘ elasticsearch-analysis-ik ,éœ€è¦å®‰è£… Apache Maven å·¥å…·ï¼š 12345sudo apt-get updatesudo apt-get install maven//æŸ¥çœ‹æ˜¯å¦æ­£ç¡®å®‰è£…mvn -v æ‰§è¡Œç¼–è¯‘ï¼š 12345// å½“å‰ç›®å½•lsconfig LICENSE.txt pom.xml README.md src// ç¼–è¯‘mvn package ç­‰å¾…ç›´åˆ°å‡ºç°å¦‚ä¸‹æç¤ºæ—¶ï¼Œè¡¨ç¤ºç¼–è¯‘æˆåŠŸï¼š 1234567891011[INFO] ------------------------------------------------------------------------[INFO] BUILD SUCCESS[INFO] ------------------------------------------------------------------------[INFO] Total time: 7:43.935s[INFO] Finished at: Sun Jun 19 18:36:59 CST 2016[INFO] Final Memory: 15M/56M[INFO] ------------------------------------------------------------------------//æŸ¥çœ‹ç›®å½•lsconfig LICENSE.txt pom.xml README.md src target å‘ç°ä¼šå¤šå‡ºäº†ä¸€ä¸ª target ç›®å½•ï¼Œcopy and unzip ç›®å½•ä¸‹çš„æ–‡ä»¶ target/releases/elasticsearch-analysis-ik-{version}.zip åˆ° ä¸Šé¢å®‰è£…çš„ elasticsearch/plugins/ik ç›®å½•ä¸­ï¼Œéœ€è¦æ–°å»º ik ç›®å½•ï¼š 12345// target ç›®å½•$ pwdelasticsearch-analysis-ik/target/releases$ ls elasticsearch-analysis-ik-1.9.3.zip åœ¨ elasticsearch-2.3.3/plugins/ ä¸‹æ–°å»ºç›®å½•ik : 1234$ ls /elastic/elasticsearch-2.3.3/plugins$ mkdir /elastic/elasticsearch-2.3.3/plugins/ik$ ls /elastic/elasticsearch-2.3.3/pluginsik å°†ä¸Šé¢ç¼–è¯‘å®Œæˆçš„ elasticsearch-analysis-ik-1.9.3.zip æ‹·è´åˆ° ik ç›®å½•å¹¶è§£å‹ï¼š 1234567891011$ cp elasticsearch-analysis-ik-1.9.3.zip ~/elastic/elasticsearch-2.3.3/plugins/ik$ ls /elastic/elasticsearch-2.3.3/plugins/ikelasticsearch-analysis-ik-1.9.3.zip// è§£å‹$ unzip elasticsearch-analysis-ik-1.9.3.zip// å¾—åˆ°å¦‚ä¸‹å†…å®¹ï¼š$ lscommons-codec-1.9.jar elasticsearch-analysis-ik-1.9.3.zipcommons-logging-1.2.jar httpclient-4.4.1.jarconfig httpcore-4.4.1.jarelasticsearch-analysis-ik-1.9.3.jar plugin-descriptor.properties æ³¨æ„ï¼šä¸Šé¢çš„æ“ä½œç›®å½•è¯·æ ¹æ®ä¸ªäººçš„ç›®å½•å’Œæ‰€ä¸‹è½½çš„ç‰ˆæœ¬å·è¿›è¡Œä¿®æ”¹ å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„ç¼–è¯‘æ­¥éª¤å¤ªç¹çï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨githubé¡µé¢çš„releaseä¸­ä¸‹è½½å·²ç»ç¼–è¯‘å¥½çš„zipæ–‡ä»¶ï¼Œç›´æ¥è§£å‹åˆ° ik ç›®å½•ä¸‹å³å¯ï¼š 123wget -c https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v1.9.3/elasticsearch-analysis-ik-1.9.3.zipunzip elasticsearch-analysis-ik-1.9.3.zip é‡å¯ elasticsearch æœåŠ¡å³å¯ã€‚ å¦‚æœçœ‹åˆ°ç±»ä¼¼äºä¸‹é¢çš„ä¿¡æ¯ï¼Œè¯´æ˜ IK Analysis æ’ä»¶å·²ç»è£…å¥½äº†: 1plugins [analysis-ik] å¦‚ä½•ä»¥root è´¦æˆ·è¿è¡ŒelasticSearché»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticSearchä¸å…è®¸ä»¥rootè´¦æˆ·è¿è¡Œï¼Œä¼šæŠ¥ don&#39;t run elasticsearch as root. é”™è¯¯ã€‚ä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼ºåˆ¶è®©å…¶ä»¥ root è´¦æˆ·æ¥è¿è¡Œï¼š 1bin/elasticsearch -Des.insecure.allow.root=true é…ç½®åŒä¹‰è¯ (è¯¥éƒ¨åˆ†å¾…æµ‹è¯•)Elasticsearch è‡ªå¸¦ä¸€ä¸ªåä¸º synonym çš„åŒä¹‰è¯ filterã€‚ä¸ºäº†èƒ½è®© IK å’Œ synonym åŒæ—¶å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ–°çš„ analyzerï¼Œç”¨ IK åš tokenizerï¼Œsynonym åš filterã€‚å¬ä¸Šå»å¾ˆå¤æ‚ï¼Œå®é™…ä¸Šè¦åšçš„åªæ˜¯åŠ ä¸€æ®µé…ç½®ã€‚ æ‰“å¼€ ~/elasticsearch-2.3.3/config/elasticsearch.yml æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®ï¼š 123456789101112131415index: analysis: analyzer: ik_syno: type: custom tokenizer: ik_max_word filter: [my_synonym_filter] ik_syno_smart: type: custom tokenizer: ik_smart filter: [my_synonym_filter] filter: my_synonym_filter: type: synonym synonyms_path: analysis/synonym.txt ä»¥ä¸Šé…ç½®å®šä¹‰äº† ik_syno å’Œ ik_syno_smart è¿™ä¸¤ä¸ªæ–°çš„ analyzerï¼Œåˆ†åˆ«å¯¹åº” IK çš„ ik_max_word å’Œ ik_smart ä¸¤ç§åˆ†è¯ç­–ç•¥ã€‚æ ¹æ® IK çš„æ–‡æ¡£ï¼ŒäºŒè€…åŒºåˆ«å¦‚ä¸‹ï¼š ik_max_wordï¼šä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼Œä¾‹å¦‚ã€Œä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œã€ä¼šè¢«æ‹†åˆ†ä¸ºã€Œä¸­åäººæ°‘å…±å’Œå›½ã€ä¸­åäººæ°‘ã€ä¸­åã€åäººã€äººæ°‘å…±å’Œå›½ã€äººæ°‘ã€äººã€æ°‘ã€å…±å’Œå›½ã€å…±å’Œã€å’Œã€å›½å›½ã€å›½æ­Œã€ï¼Œä¼šç©·å°½å„ç§å¯èƒ½çš„ç»„åˆï¼› ik_smartï¼šä¼šå°†æ–‡æœ¬åšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼Œä¾‹å¦‚ã€Œä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œã€ä¼šè¢«æ‹†åˆ†ä¸ºã€Œä¸­åäººæ°‘å…±å’Œå›½ã€å›½æ­Œã€ï¼› ik_syno å’Œ ik_syno_smart éƒ½ä¼šä½¿ç”¨ synonym filter å®ç°åŒä¹‰è¯è½¬æ¢ã€‚ä¸ºäº†æ–¹ä¾¿åç»­æµ‹è¯•ï¼Œå»ºè®®åˆ›å»º ~/elasticsearch-2.3.3/config/analysis/synonym.txt æ–‡ä»¶ï¼Œè¾“å…¥ä¸€äº›åŒä¹‰è¯å¹¶å­˜ä¸º utf-8 æ ¼å¼ã€‚ä¾‹å¦‚ï¼š 123ua,user-agent,userAgentjs,javascriptinternet explore=&gt;ie ç”¨Restful api æµ‹è¯•æœç´¢(1) æŸ¥çœ‹é›†ç¾¤å¥åº·ä¿¡æ¯ï¼š 1$ curl -X GET http://localhost:9200/_cat/health?v è¿”å›ç»“æœä¸ºï¼š 12epoch timestamp cluster status node.total node.data shards pri relo init unassign pending_tasks max_task_wait_time active_shards_percent 1466352115 00:01:55 elasticsearch green 1 1 0 0 0 0 0 0 - 100.0% è¿”å›ç»“æœçš„ä¸»è¦å­—æ®µæ„ä¹‰ï¼š clusterï¼šé›†ç¾¤åï¼Œæ˜¯åœ¨ESçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„cluster.nameçš„å€¼ã€‚ statusï¼šé›†ç¾¤çŠ¶æ€ã€‚é›†ç¾¤å…±æœ‰greenã€yellowæˆ–redä¸­çš„ä¸‰ç§çŠ¶æ€ã€‚greenä»£è¡¨ä¸€åˆ‡æ­£å¸¸ï¼ˆé›†ç¾¤åŠŸèƒ½é½å…¨ï¼‰ï¼Œyellowæ„å‘³ç€æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å¯ç”¨çš„ï¼Œä½†æ˜¯æŸäº›å¤åˆ¶æ²¡æœ‰è¢«åˆ†é…ï¼ˆé›†ç¾¤åŠŸèƒ½é½å…¨ï¼‰ï¼Œredåˆ™ä»£è¡¨å› ä¸ºæŸäº›åŸå› ï¼ŒæŸäº›æ•°æ®ä¸å¯ç”¨ã€‚å¦‚æœæ˜¯redçŠ¶æ€ï¼Œåˆ™è¦å¼•èµ·é«˜åº¦æ³¨æ„ï¼Œæ•°æ®å¾ˆæœ‰å¯èƒ½å·²ç»ä¸¢å¤±ã€‚ node.totalï¼šé›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ•°ã€‚ node.dataï¼šé›†ç¾¤ä¸­çš„æ•°æ®èŠ‚ç‚¹æ•°ã€‚ shardsï¼šé›†ç¾¤ä¸­æ€»çš„åˆ†ç‰‡æ•°é‡ã€‚ priï¼šä¸»åˆ†ç‰‡æ•°é‡ï¼Œè‹±æ–‡å…¨ç§°ä¸ºprivateã€‚ reloï¼šå¤åˆ¶åˆ†ç‰‡æ€»æ•°ã€‚ unassignï¼šæœªæŒ‡å®šçš„åˆ†ç‰‡æ•°é‡ï¼Œæ˜¯åº”æœ‰åˆ†ç‰‡æ•°å’Œç°æœ‰çš„åˆ†ç‰‡æ•°çš„å·®å€¼ï¼ˆåŒ…æ‹¬ä¸»åˆ†ç‰‡å’Œå¤åˆ¶åˆ†ç‰‡ï¼‰ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¯·æ±‚ä¸­æ·»åŠ helpå‚æ•°æ¥æŸ¥çœ‹æ¯ä¸ªæ“ä½œè¿”å›ç»“æœå­—æ®µçš„æ„ä¹‰ã€‚ 1$ curl -X GET http://localhost:9200/_cat/health?help 1234567891011121314epoch | t,time | seconds since 1970-01-01 00:00:00 timestamp | ts,hms,hhmmss | time in HH:MM:SS cluster | cl | cluster name status | st | health status node.total | nt,nodeTotal | total number of nodes node.data | nd,nodeData | number of nodes that can store datashards | t,sh,shards.total,shardsTotal | total number of shards pri | p,shards.primary,shardsPrimary | number of primary shards relo | r,shards.relocating,shardsRelocating | number of relocating nodes init | i,shards.initializing,shardsInitializing | number of initializing nodes unassign | u,shards.unassigned,shardsUnassigned | number of unassigned shards pending_tasks | pt,pendingTasks | number of pending tasks max_task_wait_time | mtwt,maxTaskWaitTime | wait time of longest task pending active_shards_percent | asp,activeShardsPercent | active number of shards in percent æœ‰äº†è¿™ä¸ªä¸œä¸œï¼Œå°±å¯ä»¥å‡å°‘çœ‹æ–‡æ¡£çš„æ—¶é—´ã€‚ESä¸­è®¸å¤šAPIéƒ½å¯ä»¥æ·»åŠ helpå‚æ•°æ¥æ˜¾ç¤ºå­—æ®µå«ä¹‰ï¼Œå“ªäº›å¯ä»¥è¿™ä¹ˆåšå‘¢ï¼Ÿæ¯ä¸ªAPIéƒ½è¯•è¯•å°±çŸ¥é“äº†ã€‚ å½“ç„¶ï¼Œå¦‚æœä½ è§‰å¾—è¿”å›çš„ä¸œè¥¿å¤ªå¤šï¼Œçœ‹ç€çœ¼çƒ¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥äººä¸ºåœ°æŒ‡å®šè¿”å›çš„å­—æ®µã€‚ 1elasticsearch green 0 (2) æŸ¥çœ‹é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ 1tiger@vbox:~$ curl -XGET http://localhost:9200/_cat/nodes?v è¿”å›èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯å¦‚ä¸‹ï¼š 123host ip heap.percent ram.percent load node.role master name 10.0.2.15 10.0.2.15 9 90 0.15 d * Bullseye tiger@vbox:~$ (3) æŸ¥çœ‹é›†ç¾¤ä¸­çš„ç´¢å¼•ä¿¡æ¯ 123tiger@vbox:~$ curl -XGET http://localhost:9200/_cat/indices?vhealth status index pri rep docs.count docs.deleted store.size pri.store.size yellow open twitter 5 1 1 0 4.1kb 4.1kb ç´¢å¼•ï¼ˆIndexï¼‰ç›¸å…³APIéœ€è¦ä¸€ä¸ªç´¢å¼• index å’Œ type (1) åˆ›å»ºä¸€ä¸ªæ–°çš„ç´¢å¼• ä½¿ç”¨è‡ªå®šä¹‰idç´¢å¼•æ–‡æ¡£ ä½¿ç”¨PUTè¯·æ±‚åˆ›å»ºä¸€ä¸ªç´¢å¼•ä¸ºtwitterç±»å‹ä¸ºtweetçš„æ–‡æ¡£ã€‚å…¶æ–‡æ¡£ç¼–å·ä¸º1ï¼Œæ–‡æ¡£å†…å®¹åŒ…å«titleå’Œcontent : 1234tiger@tiger-vbox:~$ curl -XPUT &apos;http://localhost:9200/twitter/tweet/1?pretty&apos; -d &apos;&#123; &quot;title&quot;:&quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µæŠ€æœ¯ï¼Œå€¼å¾—å›½äº§æ‰‹æœºå»å­¦ä¹ å—&quot;, &quot;content&quot;:&quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µå™¨ä¸ºåœ†è¡Œé€ å‹&quot;&#125;&apos; è¿”å›ä¿¡æ¯ 123456789101112&#123; &quot;_index&quot; : &quot;twitter&quot;, &quot;_type&quot; : &quot;tweet&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_version&quot; : 1, &quot;_shards&quot; : &#123; &quot;total&quot; : 2, &quot;successful&quot; : 1, &quot;failed&quot; : 0 &#125;, &quot;created&quot; : true&#125; å†æ·»åŠ ä¸€ç¯‡ï¼š 1234$ curl -XPUT &apos;http://localhost:9200/twitter/tweet/2?pretty&apos; -d &apos;&#123; &quot;title&quot;:&quot;èŒƒå†°å†°ç€èŠ±è£™äº®ç›¸é’å²›ï¼Œä¾§é¢œç²¾è‡´&quot;, &quot;content&quot;:&quot;6æœˆ19æ—¥ï¼ŒèŒƒå†°å†°ç°èº«é’å²›æŸæ´»åŠ¨ï¼Œä¸€èº«èŠ±è£™ç”œç¾äº®ç›¸ï¼Œç²¾è‡´ä¾§é¢œç§’æ€è²æ—ã€‚&quot;&#125;&apos; è¿”å›ç»“æœï¼š 12345678910111213tiger@vbox:~$ curl -XPUT &apos;http://localhost:9200/twitter/tweet/2?pretty&apos; -d &apos;&#123;&quot;title&quot;:&quot;èŒƒå†°å†°ç€èŠ±è£™äº®ç›¸é’å²›ï¼Œä¾§é¢œç²¾è‡´&quot;,&quot;content&quot;:&quot;6æœˆ19æ—¥ï¼ŒèŒƒå†° å†°ç°èº«é’å²›æŸæ´»åŠ¨ï¼Œä¸€èº«èŠ±è£™ç”œç¾äº®ç›¸ï¼Œç²¾è‡´ä¾§é¢œç§’æ€è²æ—ã€‚&quot;&#125;&apos;&#123; &quot;_index&quot; : &quot;twitter&quot;, &quot;_type&quot; : &quot;tweet&quot;, &quot;_id&quot; : &quot;2&quot;, &quot;_version&quot; : 2, &quot;_shards&quot; : &#123; &quot;total&quot; : 2, &quot;successful&quot; : 1, &quot;failed&quot; : 0 &#125;, &quot;created&quot; : false&#125; æŸ¥çœ‹æ‰€æœ‰æ–‡ç« ï¼š 1$ curl -XGET &apos;http://localhost:9200/twitter/tweet/_search?pretty=true&apos; -d &apos;&#123;&quot;query&quot;:&#123;&quot;match_all&quot;:&#123;&#125;&#125;&#125;&apos; è¿”å›ç»“æœï¼š 1234567891011121314151617181920212223242526272829303132&#123; &quot;took&quot; : 147, &quot;timed_out&quot; : false, &quot;_shards&quot; : &#123; &quot;total&quot; : 5, &quot;successful&quot; : 5, &quot;failed&quot; : 0 &#125;, &quot;hits&quot; : &#123; &quot;total&quot; : 2, &quot;max_score&quot; : 1.0, &quot;hits&quot; : [ &#123; &quot;_index&quot; : &quot;twitter&quot;, &quot;_type&quot; : &quot;tweet&quot;, &quot;_id&quot; : &quot;2&quot;, &quot;_score&quot; : 1.0, &quot;_source&quot; : &#123; &quot;title&quot; : &quot;èŒƒå†°å†°ç€èŠ±è£™äº®ç›¸é’å²›ï¼Œä¾§é¢œç²¾è‡´&quot;, &quot;content&quot; : &quot;6æœˆ19æ—¥ï¼ŒèŒƒå†°å†°ç°èº«é’å²›æŸæ´»åŠ¨ï¼Œä¸€èº«èŠ±è£™ç”œç¾äº®ç›¸ï¼Œç²¾è‡´ä¾§é¢œç§’æ€è²æ—ã€‚&quot; &#125; &#125;, &#123; &quot;_index&quot; : &quot;twitter&quot;, &quot;_type&quot; : &quot;tweet&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_score&quot; : 1.0, &quot;_source&quot; : &#123; &quot;title&quot; : &quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µæŠ€æœ¯ï¼Œå€¼å¾—å›½äº§æ‰‹æœºå»å­¦ä¹ å—&quot;, &quot;content&quot; : &quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µå™¨ä¸ºåœ†è¡Œé€ å‹&quot; &#125; &#125; ] &#125;&#125; è¿™æ ·ä¼šæŠŠåˆšæ‰æ·»åŠ çš„æ–‡ç« éƒ½åˆ—å‡ºæ¥ã€‚ æœç´¢å…³é”®è¯â€œæ— çº¿â€ï¼š 1tiger@vbox:~$ curl -XGET &quot;http://localhost:9200/twitter/tweet/_search?pretty=true&quot; -d &apos;&#123;&quot;query&quot;:&#123;&quot;query_string&quot;:&#123;&quot;query&quot;:&quot;æ— çº¿&quot;&#125;&#125;&#125;&apos; 1234567891011121314151617181920212223&#123; &quot;took&quot; : 49, &quot;timed_out&quot; : false, &quot;_shards&quot; : &#123; &quot;total&quot; : 5, &quot;successful&quot; : 5, &quot;failed&quot; : 0 &#125;, &quot;hits&quot; : &#123; &quot;total&quot; : 1, &quot;max_score&quot; : 0.0958915, &quot;hits&quot; : [ &#123; &quot;_index&quot; : &quot;twitter&quot;, &quot;_type&quot; : &quot;tweet&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_score&quot; : 0.0958915, &quot;_source&quot; : &#123; &quot;title&quot; : &quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µæŠ€æœ¯ï¼Œå€¼å¾—å›½äº§æ‰‹æœºå»å­¦ä¹ å—&quot;, &quot;content&quot; : &quot;ä¸‰æ˜Ÿæ— çº¿å……ç”µå™¨ä¸ºåœ†è¡Œé€ å‹&quot; &#125; &#125; ] &#125;&#125; æ£€æŸ¥ikçš„åˆ‡è¯æ•ˆæœï¼Œå¯ä»¥æ‰§è¡Œï¼š 1tiger@tiger-vbox:~$ curl &apos;http://localhost:9200/twitter/_analyze?analyzer=ik_max_word&amp;pretty=true&apos; -d &apos;&#123;&quot;text&quot;:&quot;ä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œ&quot;&#125;&apos; è¿”å›ç»“æœï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;ä¸­åäººæ°‘å…±å’Œå›½&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;ä¸­åäººæ°‘&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 4, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;ä¸­å&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;åäºº&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;äººæ°‘å…±å’Œå›½&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;äººæ°‘&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 4, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;å…±å’Œå›½&quot;, &quot;start_offset&quot; : 4, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 6 &#125;, &#123; &quot;token&quot; : &quot;å…±å’Œ&quot;, &quot;start_offset&quot; : 4, &quot;end_offset&quot; : 6, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 7 &#125;, &#123; &quot;token&quot; : &quot;å›½&quot;, &quot;start_offset&quot; : 6, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 8 &#125;, &#123; &quot;token&quot; : &quot;å›½æ­Œ&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 9, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 9 &#125; ]&#125; è¯´æ˜ä¸€ä¸‹pretty å‚æ•°å°±æ˜¯è®©è¿”å›çš„jsonæœ‰æ¢è¡Œå’Œç¼©è¿›ï¼Œå®¹æ˜“é˜…è¯»ï¼Œè°ƒè¯•æ—¶å¯ä»¥åŠ ä¸Šï¼Œå¼€å‘åˆ°ç¨‹åºé‡Œå°±å¯ä»¥å»æ‰äº†ã€‚ ç›¸å…³é“¾æ¥ä¾èµ–åŒ… GitHub - medcl/elasticsearch-analysis-ik: The IK Analysis plugin integrates Lucene IK analyzer into elasticsearch, support customized dictionary. Linuxä¸‹å®‰è£… ä½¿ç”¨ Elasticsearch å®ç°åšå®¢ç«™å†…æœç´¢ | JerryQu çš„å°ç«™ â˜† æ•™ä½ æˆä¸ºå…¨æ ˆå·¥ç¨‹å¸ˆ(Full Stack Developer) äºŒåå››-ES(elasticsearch)æœç´¢å¼•æ“å®‰è£…å’Œä½¿ç”¨ - SharEDITor - å…³æ³¨å¤§æ•°æ®æŠ€æœ¯ Running as a Service on Linux | Elasticsearch Reference [2.3] | Elastic The Elastic Stack Download Â· Get Started in Minutes | Elastic Windowsä¸‹å®‰è£… windowsä¸‹å®‰è£…elasticsearch-1.7.1 | æ•™ç¨‹ç½‘ Running as a Service on Windows | Elasticsearch Reference [2.3] | Elastic Windowsä¸‹å®‰è£…Mavenå‚è€ƒ Restful Api Python Elasticsearch api - letong - åšå®¢å›­ ElasticSearchæ•™ç¨‹ï¼ˆ4ï¼‰â€”â€”ElasticSearchåŸºäºRESTçš„CRUD API - ä¸ºç¨‹åºå‘˜æœåŠ¡ å®æ—¶æœç´¢å¼•æ“Elasticsearchï¼ˆ2ï¼‰â€”â€”Rest APIçš„ä½¿ç”¨ - HinyLoverçš„ä¸“æ  - åšå®¢é¢‘é“ - CSDN.NET Document APIs | Elasticsearch Reference [2.3] | Elastic elasticsearch rest api å¿«é€Ÿä¸Šæ‰‹ Â· Issue #5 Â· sxyx2008/elasticsearch Â· GitHub æ–‡æ¡£ Elasticsearch - éšç¬”åˆ†ç±» - xingoo - åšå®¢å›­ ä½¿ç”¨Pythonè¿›è¡ŒElasticsearchæ•°æ®ç´¢å¼• | Silent River å®‰è£…å’Œä½¿ç”¨ Elasticsearch | vpsee.com å®æ—¶æœç´¢å¼•æ“Elasticsearchï¼ˆ1ï¼‰â€”â€”åŸºç¡€æ¦‚å¿µã€å®‰è£…å’Œè¿è¡Œ - HinyLoverçš„ä¸“æ  - åšå®¢é¢‘é“ - CSDN.NET â˜† Introduction | Elasticsearchæƒå¨æŒ‡å—ï¼ˆä¸­æ–‡ç‰ˆï¼‰ â˜† AAAAAAA https://github.com/medcl/elasticsearch-analysis-ik http://blog.csdn.net/xialei199023/article/details/48085125 http://blog.csdn.net/xialei199023/article/details/48227247 https://github.com/elastic/elasticsearch https://www.elastic.co/guide/en/elasticsearch/reference/current/docs.html https://github.com/sxyx2008/elasticsearch/issues/5 http://www.shareditor.com/blogshow/?blogId=36]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonæ“ä½œSQLServeræ•°æ®åº“]]></title>
    <url>%2F2016%2F06%2F20%2Fpython-connect-sqlserver%2F</url>
    <content type="text"><![CDATA[pymssqlPythonæ“ä½œSQLServeréœ€è¦ä½¿ç”¨ pymssql æ¨¡å— Windowsç³»ç»Ÿä¸‹çš„Pythonç±»åº“æ–‡ä»¶ *.whlæ–‡ä»¶ï¼Œéœ€è¦ç”¨ pip install *.whl çš„æ–¹å¼æ¥å®‰è£…ã€‚ ä¸‹è½½pymssql2.7 library ï¼špythonlibs ç¬¬ä¸€æ¬¡ä¸‹è½½äº† pymssql-2.1.2-cp27-cp27m-win_amd64.whl æ–‡ä»¶ï¼Œå®‰è£…æ—¶æŠ¥é”™ï¼Œæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š 12Î» pip install pymssql-2.1.2-cp27-cp27m-win_amd64.whlpymssql-2.1.2-cp27-cp27m-win_amd64.whl is not a supported wheel on this platform. å³ä½¿æˆåŠŸå®‰è£…äº† pymssqlï¼Œä½†æ˜¯ import pymssql è¿˜æ˜¯ä¼šæŠ¥é”™ 12import pymssqlImportError: DLL load failed: æ‰¾ä¸åˆ°æŒ‡å®šçš„æ¨¡å—ã€‚ æ‰€ä»¥åˆå†æ¬¡ä¸‹è½½äº† pymssql-1.0.3-cp27-none-win32.whl æ–‡ä»¶ï¼Œå†æ¬¡å®‰è£…æˆåŠŸã€‚å…·ä½“åŸå› å¯èƒ½å’Œæ“ä½œç³»ç»Ÿæˆ–pythonç‰ˆæœ¬æœ‰å…³ï¼Œå…·ä½“å¾…æ·±å…¥ç ”ç©¶ã€‚ Demo1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# coding:utf-8&quot;&quot;&quot;http://www.pymssql.org/en/stable/http://www.lfd.uci.edu/~gohlke/pythonlibs/#pymssql pymssql-1.0.3-cp27-none-win32.whl # åªæœ‰è¿™ä¸ªæ‰èƒ½åœ¨windowsä¸‹æ‰§è¡Œpymssql-2.1.2-cp27-cp27m-win_amd64.whl # è¿™ä¸ªä¸èƒ½æ‰§è¡Œå®‰è£… whlæ–‡ä»¶ æ‰§è¡Œ `pip install *.whl`å¼‚å¸¸ï¼šä¸èƒ½ç”¨ DB-Library (å¦‚ ISQL)æˆ– ODBC 3.7 æˆ–æ›´æ—©ç‰ˆæœ¬å°† ntext æ•°æ®æˆ–ä»…ä½¿ç”¨ Unicode æ’åºè§„åˆ™çš„ Unicode æ•°æ®å‘é€åˆ°å®¢ æˆ·ç«¯ã€‚è¿™ä¸ªé—®é¢˜æ˜¯æ•°æ®åº“ä¸­å­—æ®µä¸ºntextç±»å‹ï¼Œè¿™ç§ç±»å‹ç›®å‰çš„c-libraryä¸æ”¯æŒï¼Œéœ€è¦è½¬ä¸ºnvcharæˆ–textç±»å‹æ‰å¯ä»¥ã€‚1. å»ºè®®ï¼šå°†ntextä¿®æ”¹ä¸ºnvarcharæˆ–text.2. æ—¢ç„¶ä¸æ”¯æŒntextä½†æ”¯æŒtextï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨è¾“å‡ºæ—¶å°†ntextè½¬æ¢ä¸ºtextå°±å¥½äº† `SELECT cast ( field_name AS TEXT ) AS field_name``select convert(varchar(50),guid) as guid, convert(text,content) as content from news`&quot;&quot;&quot;import pymssqlclass MSSQL: def __init__(self,host,user,pwd,db): self.host=host self.user=user self.pwd=pwd self.db=db def __GetConnect(self): if not self.db: raise(NameError,&quot;æ²¡æœ‰è®¾ç½®æ•°æ®åº“ä¿¡æ¯&quot;) self.conn=pymssql.connect(host=self.host,user=self.user,password=self.pwd,database=self.db,charset=&quot;utf-8&quot;) cur=self.conn.cursor() if not cur: raise(NameError,&quot;è¿æ¥æ•°æ®åº“å¤±è´¥&quot;) else: return cur def ExecQuery(self,sql): cur=self.__GetConnect() cur.execute(sql.encode(&quot;utf-8&quot;)) resList=cur.fetchall() # æŸ¥è¯¢å®Œæ¯•åå…³é—­è¿æ¥ self.conn.close() return resList def ExecNonQuery(self,sql): cur=self.__GetConnect() cur.execute(sql.encode(&quot;utf-8&quot;)) self.conn.commit() self.conn.close()if __name__==&quot;__main__&quot;: ms=MSSQL(host=&quot;Test-FPC\sqlexpress&quot;,user=&quot;sa&quot;,pwd=&quot;1&quot;,db=&quot;its&quot;) resList=ms.ExecQuery(&quot;select * from [SchemeCategory] where IsShow=1&quot;) for i in resList: print(i[&quot;Name&quot;]) é”™è¯¯å¤„ç†åœ¨æ“ä½œæ˜¯æŠ¥å‡ºäº†å¦‚ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š ä¸èƒ½ç”¨ DB-Library (å¦‚ ISQL)æˆ– ODBC 3.7 æˆ–æ›´æ—©ç‰ˆæœ¬å°† ntext æ•°æ®æˆ–ä»…ä½¿ç”¨ Unicode æ’åºè§„åˆ™çš„ Unicode æ•°æ®å‘é€åˆ°å®¢ æˆ·ç«¯ã€‚ è¿™ä¸ªé—®é¢˜æ˜¯æ•°æ®åº“ä¸­å­—æ®µä¸ºntextç±»å‹ï¼Œè¿™ç§ç±»å‹ç›®å‰çš„ c-library ä¸æ”¯æŒï¼Œéœ€è¦è½¬ä¸º nvchar æˆ– text ç±»å‹æ‰å¯ä»¥ã€‚ å»ºè®®ï¼šå°†ntextä¿®æ”¹ä¸ºnvarcharæˆ–text. æ—¢ç„¶ä¸æ”¯æŒntextä½†æ”¯æŒtextï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨è¾“å‡ºæ—¶å°†ntextè½¬æ¢ä¸ºtextå°±å¥½äº† 12SELECT cast ( field_name AS TEXT ) AS field_nameselect convert(varchar(50),guid) as guid, convert(text,content) as content from news ä½¿ç”¨å¦ä¸€ä¸ªç±»åº“ pyodbc æ¥æ“ä½œï¼Œæœªé‡åˆ°è¯¥é—®é¢˜ã€‚ ç›¸å…³é“¾æ¥Pythonæ“ä½œSQLServerç¤ºä¾‹ | å¤§çˆ±åˆ©ç”¨pythonç®€åŒ–sql serveræ•°æ®å¯¼å…¥å¯¼å‡º - qianlifeng - åšå®¢å›­ python ä½¿ç”¨pymssqlè¿æ¥sql serveræ•°æ®åº“ - Hello World! pymssql &mdash; pymssql 2.2.0.dev documentationFreeTDS &mdash; pymssql 2.2.0.dev documentationGitHub - pymssql/pymssql: Official home for the pymssql source code.FreeTDS.orgPython Extension Packages for Windows - Christoph Gohlke pyodbcSQL Server ODBC drivers {SQL Server} - released with SQL Server 2000 {SQL Native Client} - released with SQL Server 2005 (also known as version 9.0) {SQL Server Native Client 10.0} - released with SQL Server 2008 {SQL Server Native Client 11.0} - released with SQL Server 2012 [sqlservertests]connection-string=DRIVER={SQL Server};SERVER=localhost;UID=uid;PWD=pwd;DATABASE=db The connection string above will use the 2000/2005 driver, even if SQL Server 2008is installed: 2000: DRIVER={SQL Server} 2005: DRIVER={SQL Server} 2008: DRIVER={SQL Server Native Client 10.0} connection strings1DRIVER=&#123;SQL Server Native Client 11.0&#125;;SERVER=test;DATABASE=test;UID=user;PWD=password in Python: 1conn = pyodbc.connect(r&apos;DRIVER=&#123;SQL Server Native Client 11.0&#125;;SERVER=test;DATABASE=test;UID=user;PWD=password&apos;) è¿æ¥å­—ç¬¦ä¸²çš„ä¸¤ç§å†™æ³•å­—ç¬¦ä¸²æ–¹å¼123connSqlServer = pyodbc.connect(&apos;DRIVER=&#123;SQL Server Native Client 10.0&#125;;SERVER=192.106.0.102\instance1;DATABASE=master;UID=sql2008;PWD=password123&apos;)connSqlServer = pyodbc.connect(&apos;DRIVER=&#123;SQL Server Native Client 10.0&#125;;SERVER=192.106.0.102,1443;DATABASE=master;UID=sql2008;PWD=password123&apos;) å…³é”®å­—æ–¹å¼123456789connSqlServer = pyodbc.connect(driver=&apos;&#123;SQL Server Native Client 10.0&#125;&apos;, server=&apos;192.106.0.102\instance1&apos;, database=&apos;master&apos;, uid=&apos;sql2008&apos;,pwd=&apos;password123&apos;)connSqlServer = pyodbc.connect(driver=&apos;&#123;SQL Server Native Client 10.0&#125;&apos;, server=&apos;192.106.0.102,1443&apos;, database=&apos;master&apos;, uid=&apos;sql2008&apos;,pwd=&apos;password123&apos;) è¯¦è§ï¼šsql - python pyodbc : how to connect to a specific instance - Stack Overflow æˆ‘çš„å†™æ³•ç¬¬ä¸€ç§æ–¹å¼123456789101112131415def __init__(self,driver,server,db,uid,pwd): self.driver=&quot;&#123;&#123;&#123;0&#125;&#125;&#125;&quot;.format(driver) # ä¸¤ä¸ª&#123;è¡¨ç¤ºä¸€ä¸ª self.server=server self.db=db self.uid=uid self.pwd=pwddef __GetConnect(self): if not self.db: raise(NameError,&quot;æ²¡æœ‰è®¾ç½®æ•°æ®åº“ä¿¡æ¯&quot;) # r&apos;DRIVER=&#123;SQL Server Native Client 11.0&#125;;SERVER=test;DATABASE=test;UID=user;PWD=password&apos; self.conn=pyodbc.connect(driver=self.driver,server=self.server,database=self.db,uid=self.uid,pwd=self.pwd)ms=MSSQLODBC(driver=&quot;SQL Server&quot;,server=&quot;Test-FPC\sqlexpress&quot;,db=&quot;its&quot;,uid=&quot;sa&quot;,pwd=&quot;1&quot;) ç¬¬äºŒç§æ–¹å¼1self.conn = pyodbc.connect(&apos;DRIVER=&#123;SQL Server&#125;;SERVER=Test-FPC\sqlexpress;PORT=1433;DATABASE=its;UID=sa;PWD=1&apos;) pyodbc Connecting to SQL Server from Windows Â· mkleehammer/pyodbc Wiki Â· GitHub sql - python pyodbc : how to connect to a specific instance - Stack Overflow Demo12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849# coding:utf-8&quot;&quot;&quot;&quot;&quot;&quot;import pyodbcclass MSSQLODBC: def __init__(self,driver,server,db,uid,pwd): self.driver=&quot;&#123;&#123;&#123;0&#125;&#125;&#125;&quot;.format(driver) # ä¸¤ä¸ª&#123;è¡¨ç¤ºä¸€ä¸ª self.server=server self.db=db self.uid=uid self.pwd=pwd def __GetConnect(self): if not self.db: raise(NameError,&quot;æ²¡æœ‰è®¾ç½®æ•°æ®åº“ä¿¡æ¯&quot;) # r&apos;DRIVER=&#123;SQL Server Native Client 11.0&#125;;SERVER=test;DATABASE=test;UID=user;PWD=password&apos; self.conn=pyodbc.connect(driver=self.driver,server=self.server,database=self.db,uid=self.uid,pwd=self.pwd) # self.conn = pyodbc.connect(&apos;DRIVER=&#123;SQL Server&#125;;SERVER=Test-FPC\sqlexpress;PORT=1433;DATABASE=its;UID=sa;PWD=1&apos;) cur=self.conn.cursor() if not cur: raise(NameError,&quot;è¿æ¥æ•°æ®åº“å¤±è´¥&quot;) else: return cur def ExecQuery(self,sql): cur=self.__GetConnect() cur.execute(sql.encode(&quot;utf-8&quot;)) resList=cur.fetchall() # æŸ¥è¯¢å®Œæ¯•åå…³é—­è¿æ¥ self.conn.close() return resList def ExecNonQuery(self,sql): cur=self.__GetConnect() cur.execute(sql.encode(&quot;utf-8&quot;)) self.conn.commit() self.conn.close()if __name__==&quot;__main__&quot;: ms=MSSQLODBC(driver=&quot;SQL Server&quot;,server=&quot;Test-FPC\sqlexpress&quot;,db=&quot;its&quot;,uid=&quot;sa&quot;,pwd=&quot;1&quot;) resList=ms.ExecQuery(&quot;select top 10 * from [MallProductItem]&quot;) for m in resList: print(m[4])]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C#è„±ç¦»IronPythonä¸­æ‰§è¡Œpythonè„šæœ¬]]></title>
    <url>%2F2016%2F06%2F10%2Fcsharp-call-python-without-ironpython-environment%2F</url>
    <content type="text"><![CDATA[ç»™å®¢æˆ·å®‰è£…ç¨‹åºæ—¶é™¤äº†å®‰è£… .net framework è¿˜è¦å®‰è£… IronPython ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆéº»çƒ¦ï¼Ÿ ä¸Šé¢è¿™ä¸€åˆ‡éƒ½å¼±çˆ†äº†ï¼Œä¸‹é¢æˆ‘æ¥ä»‹ç»ä¸€ç§ä¸å®‰è£… IronPython åªéœ€è¦å¼•å…¥å‡ ä¸ª IronPython çš„ dll å°±å¯ä»¥åœ¨c#ä¸­æ‰§è¡Œ python è„šæœ¬çš„æ–¹æ³•ã€‚ 1ï¼šå¼•å…¥IronPythonä¸­çš„å‡ ä¸ªdll * `IronPython.dll` * `IronPython.Modules.dll` * `Microsoft.Dynamic.dll` * `Microsoft.Scripting.dll` * `Microsoft.Scripting.Metadata.dll` 2ï¼šè¿›å…¥IronPythonçš„Libæ–‡ä»¶å¤¹ï¼ŒæŠŠLibä¸­çš„å†…å®¹æ‰“åŒ…æˆzipï¼Œåå­—ä»»æ„æ—¢å¯ã€‚æ‰“åŒ…å¥½åæ”¾åˆ°c#é¡¹ç›®ä¸‹æˆ‘æŠŠå®ƒæ”¾åˆ°äº†å’Œpyæ–‡ä»¶åŒä¸€ä¸ªç›®å½•ä¸­ 3ï¼šå¾ˆå…³é”®çš„ä¸€æ­¥ï¼Œç¨‹åºåˆå§‹åŒ–æ—¶æ‰§è¡Œä¸‹æ®µä»£ç  12345678ScriptEngine engine = Python.CreateEngine(); ScriptScope scope = engine.CreateScope(); ScriptSource source = engine.CreateScriptSourceFromString( @&quot;import sys&quot; &quot;\n&quot; @&quot;sys.path.append(&quot;&quot;.\scripts\pythonlib.zip&quot;&quot;)&quot; &quot;\n&quot; @&quot;sys.path.append(&quot;&quot;.\scripts&quot;&quot;)&quot; &quot;\n&quot;); source.Execute(scope); å°†zipæ–‡ä»¶åŠ å…¥pythonåº“è·¯å¾„ã€‚è¿™æ ·èƒ½ä¿è¯pyè„šæœ¬å¯ä»¥æ­£ç¡®æœç´¢åˆ°pythonåº“çš„ä½ç½®ã€‚ 4ï¼šå°½æƒ…äº«ç”¨è„šæœ¬è¯­è¨€å¸¦æ¥çš„ä¾¿åˆ©å§ã€‚ä¸ºå…¶ä»–äººå®‰è£…ç¨‹åºæ—¶ä¹Ÿä¸ç”¨å®‰è£…è®¨åŒçš„IronPythonç¯å¢ƒäº†ã€‚ é“¾æ¥ C#è„±ç¦»IronPythonä¸­æ‰§è¡Œpythonè„šæœ¬-gsbhzh çš„ä¸ªäººç©ºé—´ - å¼€æºä¸­å›½ç¤¾åŒº]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ASP.NET</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[O2Oåœ°å›¾åº”ç”¨ä¹‹åˆ¤æ–­ç”¨æˆ·è®¢å•åœ°å€æ˜¯å¦åœ¨æœåŠ¡èŒƒå›´å†…]]></title>
    <url>%2F2016%2F05%2F18%2Fwhether-user-order-address-is-within-service-range%2F</url>
    <content type="text"><![CDATA[éœ€æ±‚åˆ†æåœ¨o2oé¡¹ç›®ä¸­ï¼Œç»å¸¸è¦ç”¨åˆ°åœ¨ç”¨æˆ·ä¸‹å•æ—¶åˆ¤æ–­ç”¨æˆ·æ‰€å¡«åœ°å€çš„åæ ‡ç‚¹æ˜¯å¦åœ¨æœåŠ¡èŒƒå›´å†…çš„æƒ…å†µï¼Œè¿™é‡Œå‚è€ƒç½‘ä¸Šçš„å®ç°æ–¹å¼ï¼Œç”¨C#æ¥å®ç°ï¼Œç»æµ‹è¯•åæœ‰æ•ˆï¼Œç‰¹æ­¤è®°å½•ã€‚ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114public class MapHelper &#123; /// &lt;summary&gt; /// åˆ¤æ–­ä¸€ä¸ªåæ ‡ç‚¹åœ¨å¤šè¾¹å½¢åæ ‡ç‚¹çš„å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ /// &lt;/summary&gt; /// &lt;param name=&quot;point&quot;&gt;è¦åˆ¤æ–­çš„åæ ‡ç‚¹&lt;/param&gt; /// &lt;param name=&quot;pts&quot;&gt;å¤šè¾¹å½¢åæ ‡ç‚¹é›†åˆ&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public static bool IsPointInPolygon(Point point, List&lt;Point&gt; pts) &#123; int N = pts.Count; //å¦‚æœç‚¹ä½äºå¤šè¾¹å½¢çš„é¡¶ç‚¹æˆ–è¾¹ä¸Šï¼Œä¹Ÿç®—åšç‚¹åœ¨å¤šè¾¹å½¢å†…ï¼Œç›´æ¥è¿”å›true bool boundOrVertex = true; //ç»è¿‡ç‚¹çš„æ¬¡æ•° int intersectCount = 0; double precision = 2e-10; Point p1, p2; Point p = point;//å½“å‰ç‚¹ p1 = pts[0]; for (int i = 1; i &lt;= N; i++) &#123; //å¦‚æœç‚¹åœ¨å¤šè¾¹å½¢ä¸Š if (p.Equals(p1)) &#123; return boundOrVertex; &#125; p2 = pts[(i % N)]; if (p.Lng&lt;Math.Min(p1.Lng,p2.Lng)||p.Lng&gt;Math.Max(p1.Lng,p2.Lng)) &#123; p1 = p2; continue; &#125; if (p.Lng&gt;Math.Min(p1.Lng,p2.Lng)&amp;&amp;p.Lng&lt;Math.Max(p1.Lng,p2.Lng)) &#123; if (p.Lat&lt;=Math.Max(p1.Lat,p2.Lat)) &#123; if (p1.Lng==p2.Lng&amp;&amp;p.Lat&gt;=Math.Min(p1.Lat,p2.Lat)) &#123; return boundOrVertex; &#125; if (p1.Lat==p2.Lat) &#123; if (p1.Lat==p.Lat) &#123; return boundOrVertex; &#125; else &#123; intersectCount++; &#125; &#125; else &#123; double xinters = (p.Lng - p1.Lng) * (p2.Lat - p1.Lat) / (p2.Lng - p1.Lng) + p1.Lat; if (Math.Abs(p.Lat-xinters)&lt;precision) &#123; return boundOrVertex; &#125; if (p.Lat&lt;xinters) &#123; intersectCount++; &#125; &#125; &#125; &#125; else &#123; if (p.Lng==p2.Lng&amp;&amp;p.Lat&lt;=p2.Lat) &#123; Point p3 = pts[(i+1)%N]; if (p.Lng&gt;=Math.Min(p1.Lng,p3.Lng)&amp;&amp;p.Lng&lt;=Math.Max(p1.Lng,p3.Lng)) &#123; intersectCount++; &#125; else &#123; intersectCount += 2; &#125; &#125; &#125; p1 = p2; &#125; if (intersectCount%2==0) &#123; //å¶æ•°åœ¨å¤šè¾¹å½¢å¤– return false; &#125; else &#123; //å¥‡æ•°åœ¨å¤šè¾¹å½¢å†… return true; &#125; &#125; &#125; public class Point &#123; /// &lt;summary&gt; /// ç»åº¦ /// &lt;/summary&gt; public double Lng &#123; get; set; &#125; /// &lt;summary&gt; /// çº¬åº¦ /// &lt;/summary&gt; public double Lat &#123; get; set; &#125; &#125; æµ‹è¯•è¿™é‡Œæˆ‘ç”¨é«˜å¾·åœ°å›¾æ ‡å‡ºäº†åŒ—äº¬äº”ç¯èŒƒå›´çš„åæ ‡ç‚¹é›†åˆï¼Œç„¶åéšæ„é€‰æ‹©ä¸€ä¸ªåæ ‡ç‚¹æ¥è¿›è¡Œåˆ¤æ–­ï¼š åæ ‡ç‚¹å¯ä»¥ç”¨è¿™ä¸ªå·¥å…·æ¥è·å–ï¼šé«˜å¾·åœ°å›¾API äº”ç¯èŒƒå›´ï¼š é¦™æ³‰æ¡¥ 116.222208,39.992436 ç®­äº­æ¡¥ 116.327147,40.02046 ä¸Šæ¸…æ¡¥ 116.353948,40.02299 é¡¾å®¶åº„æ¡¥ 116.44128,40.020526 ä¸œåŒ—äº”ç¯ 116.48441,40.013624 å¹³æˆ¿æ¡¥ 116.541101,39.942393 ä¸œå—äº”ç¯ 116.549202,39.851595 æ—§å®«æ–°æ¡¥ 116.43082,39.785968 ç‹¼åˆä¸œæ¡¥ 116.296044,39.777442 å®›å¹³æ¡¥ 116.225062,39.845517 è¡™é—¨å£æ¡¥ 116.211308,39.894396 è¥¿äº”ç¯ 116.212595,39.944705 éšæœºåæ ‡ï¼š æ—èƒæ¡¥åœ°é“ç«™ 116.37297,40.021857 æœ›äº¬è¥¿å›­å››åŒº 116.47086,39.99648 è§‚éŸ³ç¦…å¯º 116.533811,39.880533 ä¿ç‹å›½é™… 116.299713,39.772619 èŠ³å›­é‡Œå°åŒº 116.416336,39.78394 æ¶¦æ«é”¦å°šå°åŒº 116.429039,39.790535 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Program&#123; static void Main(string[] args) &#123; var Plist = new List&lt;Point&gt; &#123; new Point &#123;Lng=116.222208,Lat= 39.992436&#125;, new Point &#123;Lng=116.327147,Lat= 40.02046&#125;, new Point &#123;Lng=116.353948,Lat= 40.02299&#125;, new Point &#123;Lng=116.44128,Lat= 40.020526&#125;, new Point &#123;Lng=116.48441,Lat=40.013624 &#125;, new Point &#123;Lng=116.541101,Lat= 39.942393&#125;, new Point &#123;Lng=116.549202,Lat= 39.851595&#125;, new Point &#123;Lng=116.43082,Lat=39.785968&#125;, new Point &#123;Lng=116.296044,Lat=39.777442 &#125;, new Point &#123;Lng=116.225062,Lat=39.845517 &#125;, new Point &#123;Lng=116.211308,Lat= 39.894396&#125;, new Point &#123;Lng=116.212595,Lat=39.944705&#125; &#125;; //var p = new Point &#123; Lng = 116.37297, Lat = 40.021857 &#125;; //æ—èƒæ¡¥åœ°é“ç«™ å†… //var p = new Point &#123; Lng = 116.47086, Lat = 39.99648 &#125;; //æœ›äº¬è¥¿å›­å››åŒº å†… //var p = new Point &#123; Lng = 116.533811, Lat = 39.880533 &#125;; //è§‚éŸ³ç¦…å¯º å†… //var p = new Point &#123; Lng = 116.299713, Lat = 39.772619 &#125;; //ä¿ç‹å›½é™… å¤– //var p = new Point &#123; Lng = 116.416336, Lat = 39.78394 &#125;; //èŠ³å›­é‡Œå°åŒº å¤– var p = new Point &#123; Lng = 116.429039, Lat = 39.790535 &#125;; //æ¶¦æ«é”¦å°šå°åŒº å†… bool isin = MapHelper.IsPointInPolygon(p, Plist); if (isin) &#123; Console.WriteLine(&quot;éšæœºç‚¹åœ¨äº”ç¯èŒƒå›´å†…ï¼Œå¯ä»¥æ´¾å•&quot;); &#125; else &#123; Console.WriteLine(&quot;éšæœºç‚¹ä¸åœ¨äº”ç¯èŒƒå›´å†…&quot;); &#125; Console.ReadKey(); &#125;&#125; æ€»ç»“ åŒ—äº¬çš„äº”ç¯èŒƒå›´æ¯•ç«Ÿä¸æ˜¯ä¸€ä¸ªè§„åˆ™çš„å¤šè¾¹å½¢ï¼Œå¯ä»¥å°½é‡é€‰æ‹©æœ‰æ ‡å¿—æ€§çš„åæ ‡ç‚¹æ¥è§„èŒƒå¤šè¾¹å½¢ å‚è€ƒè‡ªï¼šç™¾åº¦åœ°å›¾â€”â€”åˆ¤æ–­ç”¨æˆ·æ˜¯å¦åœ¨é…é€èŒƒå›´å†…è§£å†³æ–¹æ¡ˆ - aheizi - åšå®¢å›­]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ASP.NET</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonä¸­æ—¶é—´æ ¼å¼è½¬æ¢]]></title>
    <url>%2F2016%2F05%2F17%2Ftime-format-conversion-in-python%2F</url>
    <content type="text"><![CDATA[1234YYYY-MM-DDTHH:MM:SS+HH:MM2016-04-05T13:31:00+08:002014-09-18T10:42:16.126Z 123$ time = &apos;2012-03-01T00:05:55+00:00&apos;$ datetime.strptime(time, &quot;%Y-%m-%dT%H:%M:%S+00:00&quot;)# =&gt; datetime.datetime(2012, 3, 1, 0, 5, 55) strftime() ç”¨äºæ—¶é—´æ ¼å¼è½¬æ¢strptime() ç”¨äºå­—ç¬¦ä¸²æ ¼å¼è½¬æ¢ ä»£ç æ®µ123456789101112131415161718192021222324# å°†UTCæ—¶é—´è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´# 2016-04-04T23:58:00+08:00def _utc_datetime(value): # valueä¸ºä¼ å…¥çš„å€¼ä¸ºUTCæ—¶é—´ï¼Œå¦‚ï¼š2016-04-04T23:58:00+08:00 format=&apos;%Y-%m-%d %H:%M:%S&apos; utc_format=&apos;%Y-%m-%dT%H:%M:%S+08:00&apos; local= datetime.strptime(value,utc_format) dt= datetime.strftime(local,format) return dt&apos;&apos;&apos;å°†unixæ—¶é—´æˆ³è½¬ä¸ºæ ‡å‡†æ—¶é—´æ ¼å¼&apos;&apos;&apos;def _timestamp_datetime(value): format = &apos;%Y-%m-%d %H:%M:%S&apos; # valueä¸ºä¼ å…¥çš„å€¼ä¸ºæ—¶é—´æˆ³(æ•´å½¢)ï¼Œå¦‚ï¼š1332888820 value = time.localtime(value) ## ç»è¿‡localtimeè½¬æ¢åå˜æˆ ## time.struct_time(tm_year=2012, tm_mon=3, tm_mday=28, tm_hour=6, tm_min=53, tm_sec=40, tm_wday=2, tm_yday=88, tm_isdst=0) # æœ€åå†ç»è¿‡strftimeå‡½æ•°è½¬æ¢ä¸ºæ­£å¸¸æ—¥æœŸæ ¼å¼ã€‚ dt = time.strftime(format, value) return dt ç›¸å…³é“¾æ¥ ç­”æ¡ˆè§è¿™é‡Œï¼šConvert UTC time to python datetime - Stack Overflow datetime - [ Python 3é›¶èµ·ç‚¹æ•™ç¨‹ ] - çœ‹äº‘ Pythonä¸­Timestampã€Datetimeå’ŒUTCæ—¶é—´ç›¸äº’è½¬åŒ–çš„æ–¹æ³• - OPEN å¼€å‘ç»éªŒåº“ SQLite æ—¥æœŸç±»å‹(è½¬) - æ·±æµ·çš„å°é±¼å„¿ - åšå®¢å›­ pythonæœ¬åœ°æ—¶é—´ä¸UTCæ—¶é—´è½¬æ¢ä¸¶Sourceæ–°æµªåšå®¢ Pythonå°†UTCæ—¶é—´è½¬åŒ–ä¸ºLocalæ—¶é—´ - é™é¾ - åšå®¢é¢‘é“ - CSDN.NET pythonæ—¶é—´å¤„ç†ä¹‹datetime - ç å†œè€æ¯•çš„å­¦ä¹ ç¬”è®° - åšå®¢é¢‘é“ - CSDN.NET Python æ—¶é—´æˆ³å’Œæ—¥æœŸç›¸äº’è½¬æ¢ - ææ—å…‹æ–¯ â˜† Pythonä¸­Timestampã€Datetimeå’ŒUTCæ—¶é—´ç›¸äº’è½¬åŒ–çš„æ–¹æ³•_python_ThinkSAAS]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonæ—¶é—´å·®]]></title>
    <url>%2F2016%2F05%2F17%2Ftime-difference-in-python%2F</url>
    <content type="text"><![CDATA[datetime.timedeltadatetime.timedeltaå¯¹è±¡ä»£è¡¨ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„çš„æ—¶é—´å·®ï¼Œä¸¤ä¸ªdateæˆ–datetimeå¯¹è±¡ç›¸å‡æ—¶å¯ä»¥è¿”å›ä¸€ä¸ªtimedeltaå¯¹è±¡ã€‚ æ„é€ å‡½æ•°: 1class datetime.timedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]]) æ‰€æœ‰å‚æ•°å¯é€‰ï¼Œä¸”é»˜è®¤éƒ½æ˜¯0ï¼Œå‚æ•°çš„å€¼å¯ä»¥æ˜¯æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œæ­£æ•°æˆ–è´Ÿæ•°ã€‚ timedelta å¯ä»¥å’Œ dateï¼Œdatetime å¯¹è±¡è¿›è¡ŒåŠ å‡æ“ä½œ timedelta.total_seconds() ç”¨äºè®¡ç®—ç§’æ•°ã€‚ å½“å‰çš„æ—¶é—´ä¸ŠåŠ ä¸€å¤©æˆ–ä¸€å¹´å‡ä¸€å¤©ç­‰æ“ä½œ1234567891011#!/usr/bin/env python # -*- coding:utf-8 -*- from datetime import datetime,timedelta now = datetime.now() yestoday = now - timedelta(days=1) tommorow = now + timedelta(days=1) next_year = now + timedelta(days = 365) ç›¸å…³é“¾æ¥ Pythonä¸­æ—¶é—´çš„å¤„ç†ä¹‹â€”â€”timedeltaç¯‡ - Goodspeed - åšå®¢å›­]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuä¸‹é…ç½®Flaskè¿è¡Œç¯å¢ƒ]]></title>
    <url>%2F2016%2F05%2F09%2Fconfiguring-flask-running-environment-under-ubuntu%2F</url>
    <content type="text"><![CDATA[Virtualenv + Flask + Gunicorn + Supervisor + Nginx é…ç½®å‡è®¾æˆ‘æ‰€åœ¨çš„å½“å‰è´¦æˆ·åä¸º tiger ã€‚ å‡†å¤‡pythonç¯å¢ƒ123$ sudo apt-get udpate// å®‰è£…python å’Œ pip (å¦‚æœå·²ç»å®‰è£…å¯ä»¥å¿½ç•¥)$ sudo apt-get install python-dev python-pip -y åˆ›å»ºvirtualenvè™šæ‹Ÿç¯å¢ƒVirtualenvå¯ä»¥ä¸ºæ¯ä¸ªPythonåº”ç”¨åˆ›å»ºç‹¬ç«‹çš„å¼€å‘ç¯å¢ƒï¼Œä½¿ä»–ä»¬äº’ä¸å½±å“ï¼ŒVirtualenvèƒ½å¤Ÿåšåˆ°ï¼š åœ¨æ²¡æœ‰æƒé™çš„æƒ…å†µä¸‹å®‰è£…æ–°å¥—ä»¶ ä¸åŒåº”ç”¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¥—ä»¶ç‰ˆæœ¬ å¥—ä»¶å‡çº§ä¸å½±å“å…¶ä»–åº”ç”¨ 12//å®‰è£…æˆ–é€šè¿‡æ‰§è¡Œï¼š$ sudo pip install virtualenv æˆ‘é€šå¸¸åˆ›å»ºä¸€ä¸ªåŒ…å« venv æ–‡ä»¶å¤¹çš„é¡¹ç›®æ–‡ä»¶å¤¹: 123456$ mkdir myproject$ cd myproject$ virtualenv venvNew python executable in venv/bin/python2Also creating executable in venv/bin/pythonInstalling setuptools, pip...done. ç°åœ¨ï¼Œæ¯æ¬¡éœ€è¦ä½¿ç”¨é¡¹ç›®æ—¶ï¼Œå¿…é¡»å…ˆæ¿€æ´»ç›¸åº”çš„ç¯å¢ƒã€‚ 123456$ ls-- venv$ . venv/bin/activate//ç»“æœï¼š(venv)tiger@VirtualBox:~/xbox/myflask$ ä½ ç°åœ¨è¿›å…¥ä½ çš„ virtualenv ï¼ˆæ³¨æ„æŸ¥çœ‹ä½ çš„ shell æç¤ºç¬¦å·²ç»æ”¹å˜äº†ï¼‰ã€‚ å®‰è£…Flaskç°åœ¨å¯ä»¥å¼€å§‹åœ¨ä½ çš„ virtualenv ä¸­å®‰è£… Flask äº†: 123456789$ pip install Flask//ç»“æœï¼š(venv)tiger@VirtualBox:~/xbox/myflask$ pip install FlaskDownloading/unpacking Flask Downloading Flask-0.10.1.tar.gz (544kB): 544kB downloaded ...... Successfully installed Flask Werkzeug Jinja2 itsdangerous MarkupSafeCleaning up... å‡ ç§’é’Ÿåå°±å®‰è£…å¥½äº†ã€‚ é€€å‡ºè™šæ‹Ÿç¯å¢ƒå¯é€šè¿‡deactivateé€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š 12(venv)tiger@VirtualBox:~/xbox/myflask$ deactivatetiger@VirtualBox:~/xbox/myflask$ å…·ä½“å¯è¯¦è§ï¼šFlask-å®‰è£… å¯åŠ¨falskåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª hello.py çš„æ–‡ä»¶ï¼š 123(venv) $ vim hello.py(venv) $ lsvenv hello.py åˆ›å»ºä¸€ä¸ªç®€å•çš„Flaskç¨‹åºï¼š 123456789from flask import Flaskapp = Flask(__name__)@app.route(&apos;/&apos;)def hello_world(): return &apos;Hello World!&apos;if __name__ == &apos;__main__&apos;: app.run() ä¿®æ”¹hello.py çš„æƒé™ï¼š 1(venv) $ chmod a+x hello.py å¯åŠ¨ flask: 1(venv) $ python hello.py æ­¤æ—¶ï¼Œç”¨æµè§ˆå™¨è®¿é—® http://127.0.0.1:5000 å°±èƒ½çœ‹åˆ°ç½‘é¡µæ˜¾ç¤º hello worldã€‚ é…ç½®GunicornGunicornæ˜¯ç”¨äºéƒ¨ç½²WSGIåº”ç”¨çš„ï¼Œä»»ä½•æ”¯æŒWSGIçš„éƒ½å¯ä»¥ï¼Œè™½è¯´ç›´æ¥æ‰§è¡Œ python hello.py è¿™æ ·ç½‘ç«™ä¹Ÿèƒ½è·‘èµ·æ¥ï¼Œä½†é‚£æ˜¯æ–¹ä¾¿å¼€å‘è€Œå·²ï¼Œåœ¨çº¿ä¸Šç¯å¢ƒï¼Œè¿˜æ˜¯éœ€è¦æ›´é«˜æ•ˆçš„ç»„ä»¶æ¥åšã€‚ å®‰è£…1(venv)$ pip install gunicorn ç„¶åå¯ä»¥æ‰§è¡Œï¼š 1234567891011gunicorn -w 4 -b 127.0.0.1:8000 hello:app//ç»“æœï¼š(venv) $ gunicorn -w 4 -b 127.0.0.1:8000 hello:app[2016-05-08 16:07:36 +0000] [1337] [INFO] Starting gunicorn 19.4.5[2016-05-08 16:07:36 +0000] [1337] [INFO] Listening at: http://127.0.0.1:8000 (1337)[2016-05-08 16:07:36 +0000] [1337] [INFO] Using worker: sync[2016-05-08 16:07:36 +0000] [1342] [INFO] Booting worker with pid: 1342[2016-05-08 16:07:36 +0000] [1343] [INFO] Booting worker with pid: 1343[2016-05-08 16:07:36 +0000] [1344] [INFO] Booting worker with pid: 1344[2016-05-08 16:07:36 +0000] [1345] [INFO] Booting worker with pid: 1345 â€œhelloâ€ is the name of the file (without extension). And â€œappâ€ is the name of the Flask object. è¿™é‡Œ â€œhelloâ€ æ˜¯pythonæ–‡ä»¶çš„åç§°(ä¸åŒ…å«æ‰©å±•å)ï¼Œå†’å·åé¢çš„â€appâ€ æ˜¯flaskç¨‹åºä¸­app = Flask(__name__)åˆ›å»ºçš„è¿™ä¸ªFlaskå¯¹è±¡çš„åç§°ã€‚ è¿™é‡Œæˆ‘ä»¬ç”¨äº† 8000 çš„ç«¯å£è¿›è¡Œè®¿é—®ï¼ŒåŸå…ˆçš„ 5000 å¹¶æ²¡æœ‰å¯ç”¨ã€‚ -wè¡¨ç¤ºå¼€å¯å¤šå°‘ä¸ª workerï¼Œ-b è¡¨ç¤º gunicorn å¼€å‘çš„è®¿é—®åœ°å€ æƒ³è¦ç»“æŸ gunicorn åªéœ€æ‰§è¡Œ pkill gunicorn : 123456789(venv) $ pkill gunicorn//ç»“æœï¼š[2016-05-08 16:09:28 +0000] [1337] [INFO] Handling signal: term[2016-05-08 16:09:28 +0000] [1344] [INFO] Worker exiting (pid: 1344)[2016-05-08 16:09:28 +0000] [1342] [INFO] Worker exiting (pid: 1342)[2016-05-08 16:09:28 +0000] [1343] [INFO] Worker exiting (pid: 1343)[2016-05-08 16:09:28 +0000] [1345] [INFO] Worker exiting (pid: 1345)[2016-05-08 16:09:29 +0000] [1337] [INFO] Shutting down: Master æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ä¸­æ¥è®¾ç½®ï¼Œæ–°å¢é…ç½®æ–‡ä»¶ gunicorn.confï¼š 1234567(venv) $ ls-- hello.py hello.pyc venv(venv) $ vim gunicorn.conf//å†™å…¥ä¸‹åˆ—å†…å®¹ï¼šworkers=4bind=&apos;127.0.0.1:8000&apos; ä¸Šé¢ä½¿ç”¨pkill gunicornçš„æ–¹å¼æ¥åœæ­¢è¿›ç¨‹ï¼Œå¤ªè¿‡äºç¹çï¼Œå› æ­¤å‡ºç°äº†å¦å¤–ä¸€ä¸ªç¥å™¨â€”supervisorï¼Œä¸€ä¸ªä¸“é—¨ç”¨æ¥ç®¡ç†è¿›ç¨‹çš„å·¥å…·ï¼Œè¿˜å¯ä»¥ç®¡ç†ç³»ç»Ÿçš„å·¥å…·è¿›ç¨‹ã€‚ SupervisorSupervisor æ˜¯ç”¨Pythonå®ç°çš„ä¸€æ¬¾éå¸¸å®ç”¨çš„è¿›ç¨‹ç®¡ç†å·¥å…·ã€‚ å®‰è£…supervisor1(venv) $ pip install supervisor å¸¸ç”¨æ“ä½œ123456## å¯åŠ¨æœåŠ¡$ sudo service supervisor start## åœæ­¢æœåŠ¡$ sudo service supervisor stop## ä¹Ÿå¯ä»¥ç›´æ¥ kill pid$ ps -A | grep supervisor ç”Ÿæˆsupervisoré»˜è®¤é…ç½®æ–‡ä»¶123456(venv) $ echo_supervisord_conf &gt; supervisor.conf## æ·»åŠ ä¸€ä¸ª`logs`ç›®å½•ï¼Œç”¨æ¥åé¢å­˜æ”¾æ—¥å¿—ï¼š(venv) $ mkdir logs(venv) $ lsgunicorn.conf hello.py hello.pyc logs supervisor.conf venv ä¿®æ”¹supervisoré…ç½®æ–‡ä»¶ï¼Œæ·»åŠ gunicornè¿›ç¨‹ç®¡ç†1(venv) $ vim supervisor.conf åœ¨ supervisor.conf é…ç½®æ–‡ä»¶åº•éƒ¨æ·»åŠ ï¼š(å‡è®¾æˆ‘çš„å·¥ä½œç›®å½•ä¸ºï¼š /home/tiger/myflask/myproject/ ) 12345678910##æ–‡ä»¶å†…å®¹[program:hello] ## æœåŠ¡çš„åç§°ï¼Œåé¢æ“ä½œä¼šç”¨åˆ°command=/home/tiger/myflask/myproject/venv/bin/gunicorn hello:app -c /home/tiger/myflask/myproject/gunicorn.conf ; supervisorå¯åŠ¨å‘½ä»¤directory=/home/tiger/myflask/myproject ; é¡¹ç›®çš„æ–‡ä»¶å¤¹è·¯å¾„user=tigerautostart=true ; æ˜¯å¦è‡ªåŠ¨å¯åŠ¨autorestart=true ; æ˜¯å¦è‡ªåŠ¨é‡å¯##logæ–‡ä»¶çš„ä½ç½®stdout_logfile=/home/tiger/myflask/myproject/logs/gunicorn_supervisor.log ; log æ—¥å¿—stderr_logfile=/home/tiger/myflask/myproject/logs/gunicorn_supervisor.err ; é”™è¯¯æ—¥å¿— supervisorçš„åŸºæœ¬ä½¿ç”¨å‘½ä»¤ 12345supervisord -c supervisor.conf é€šè¿‡é…ç½®æ–‡ä»¶å¯åŠ¨supervisorsupervisorctl -c supervisor.conf status æŸ¥çœ‹supervisorçš„çŠ¶æ€supervisorctl -c supervisor.conf reload é‡æ–°è½½å…¥ é…ç½®æ–‡ä»¶supervisorctl -c supervisor.conf start [all]|[appname] å¯åŠ¨æŒ‡å®š/æ‰€æœ‰ supervisorç®¡ç†çš„ç¨‹åºè¿›ç¨‹supervisorctl -c supervisor.conf stop [all]|[appname] å…³é—­æŒ‡å®š/æ‰€æœ‰ supervisorç®¡ç†çš„ç¨‹åºè¿›ç¨‹ æ·»åŠ å®Œä¸Šé¢çš„å†…å®¹åï¼Œä¿å­˜é€€å‡ºã€‚æ‰§è¡Œæ“ä½œï¼š å½“å‰ç›®å½•ï¼š 12(venv) $ ls-- gunicorn.conf hello.py hello.pyc logs supervisor.conf venv é€šè¿‡é…ç½®æ–‡ä»¶ å¯åŠ¨ supervisor : 1(venv) $ supervisord -c supervisor.conf æŸ¥çœ‹ supervisor çš„çŠ¶æ€ï¼š 12(venv) $ supervisorctl -c supervisor.conf status-- hello RUNNING pid 1550, uptime 0:04:08 åœæ­¢ è®¾ç½®çš„ æœåŠ¡ hello ï¼š 12(venv) $ supervisorctl -c supervisor.conf stop hello -- hello: stopped å†æ¬¡æŸ¥çœ‹ æœåŠ¡ hello çš„çŠ¶æ€ ï¼š 12(venv) $ supervisorctl -c supervisor.conf status-- hello STOPPED May 08 05:23 PM è‡ªåŠ¨å¯åŠ¨ï¼š é‚£ä¹ˆï¼Œå¦‚æœæƒ³å¼€æœºæ—¶è‡ªåŠ¨å¯åŠ¨æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œå¦‚æœæœºå™¨é‡å¯äº†ï¼Œé‚£WEBæœåŠ¡å°±æ–­äº†ã€‚å…¶å®å‘¢ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œåªè¦åœ¨ /etc/rc.d/rc.local ä¸­åŠ å…¥ä¸€å¥å°±å¯ä»¥äº†ï¼š 1supervisord -c /home/tiger/myflask/myproject/supervisor.conf æœ‰äº†Gunicornã€Supervisorï¼Œæœ¬åœ°çš„ç¯å¢ƒçš„ç®—æ˜¯æ­å¥½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦è®©VPSä¸Šçš„ç½‘ç«™ä»å¤–ç½‘å¯ä»¥è®¿é—®ï¼Œè¿™æ—¶å€™éœ€è¦Nginxã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœ¬æœºä¸Šé€šè¿‡http://127.0.0.1:8000 çš„æ–¹å¼æ¥è®¿é—®çš„ï¼Œä½†åœ¨å¤–ç½‘ä¸Šæ˜¯æ— æ³•è®¿é—®åˆ°çš„ã€‚ é…ç½®Nginxåœ¨å®‰è£…Nginxä¹‹å‰ï¼Œè¦å…ˆé€€å‡ºä¸Šé¢æ­¥éª¤ä¸­æ“ä½œæ‰€åœ¨çš„venvç¯å¢ƒï¼Œæ‰§è¡Œï¼š 1(venv) $ deactivate å®‰è£…nginx1$ sudo apt-get install nginx å®‰è£…å®Œæˆåè®¿é—®localhostå¯ä»¥çœ‹åˆ° Welcome to nginx on Ubuntu! çš„é¡µé¢ã€‚ nginx çš„é»˜è®¤ç½‘ç«™ç›®å½• /usr/share/nginx/html å¸¸ç”¨é…ç½®å‘½ä»¤1234567##å¯åŠ¨æœåŠ¡$ sudo service nginx start##é‡å¯å’Œæš‚åœæœåŠ¡$ sudo service nginx restart$ sudo service nginx stop##æŸ¥çœ‹çŠ¶æ€$ sudo service nginx status æˆ–ä¸‹é¢çš„å‘½ä»¤ï¼š 1234$ sudo /etc/init.d/nginx start$ sudo /etc/init.d/nginx stop$ sudo /etc/init.d/nginx restart$ sudo /etc/init.d/nginx status Nginxçš„é…ç½®æ–‡ä»¶å’ŒSupervisorç±»ä¼¼ï¼Œä¸åŒçš„ç¨‹åºå¯ä»¥åˆ†åˆ«é…ç½®ï¼Œç„¶åè¢«æ€»é…ç½®æ–‡ä»¶includeï¼š 123456789101112131415161718192021222324## Nginxçš„ä¸»é…ç½®æ–‡ä»¶åœ°å€/etc/nginx/nginx.conf## æ–°å»ºå•ç‹¬çš„é…ç½®æ–‡ä»¶## åœ¨conf.dç›®å½•ä¸‹$ sudo vim /etc/nginx/conf.d/helloweb.conf## ç„¶åå†™å…¥ä¸‹åˆ—å†…å®¹ï¼šserver &#123; listen 80; //ç«¯å£ server_name 192.168.1.144; //è®¿é—®åŸŸå root /home/tiger/myflack/myproject; access_log /home/tiger/myflask/myproject/logs/nginx_access.log; error_log /home/tiger/myflask/myproject/logs/nginx_error.log; location / &#123; proxy_set_header X-Forward-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_redirect off; if (!-f $request_filename) &#123; proxy_pass http://127.0.0.1:8000; //è¿™é‡Œæ˜¯flaskçš„gunicornç«¯å£ break; &#125; &#125;&#125; ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„æœ€ç®€é…ç½®ï¼š 12345678910server &#123; listen 80; server_name _; # _è¡¨ç¤º localhost root /home/tiger/myflack/myproject; # hello.py æ–‡ä»¶æ‰€åœ¨çš„ç›®å½• location / &#123; proxy_pass http://127.0.0.1:8000; //è¿™é‡Œæ˜¯flaskçš„gunicornç«¯å£ &#125;&#125; é…ç½®å®Œæˆä¹‹åï¼Œsudo service nginx restart é‡å¯ä¸€ä¸‹æœåŠ¡ã€‚ ç°åœ¨ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://127.0.0.1 å³å¯æ­£å¸¸è®¿é—®ã€‚ æ€»ç»“ Flaskåº”ç”¨çš„åŸºæœ¬éƒ¨ç½²ä¾èµ–åŒ…æ‹¬ä¸€ä¸ªåº”ç”¨å®¹å™¨ï¼ˆæ¯”å¦‚Gunicornï¼‰å’Œä¸€ä¸ªåå‘ä»£ç†ï¼ˆæ¯”å¦‚Nginxï¼‰ã€‚ Gunicornåº”è¯¥é€€å±…Nginxå¹•åå¹¶ç›‘å¬127.0.0.1ï¼ˆå†…éƒ¨è¯·æ±‚ï¼‰è€Œé0.0.0.0ï¼ˆå¤–éƒ¨è¯·æ±‚ï¼‰ã€‚ ä»æœ‰ç–‘é—®çš„åœ°æ–¹ï¼šåœ¨è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…çš„supervisor å¹¶éæ˜¯å…¨å±€çš„ï¼Œç»æµ‹è¯• kill æ‰ supervisor è¿›ç¨‹åä¹Ÿä¸ä¼šè‡ªåŠ¨é‡å¯ï¼Œæˆ–å¦‚ä½•éšç³»ç»Ÿå¯åŠ¨ï¼Ÿè¯¥é—®é¢˜å¾…è¿›ä¸€æ­¥æµ‹è¯• ç›¸å…³é“¾æ¥ virtualenv &mdash; virtualenv 1.7.1.2.post1 documentation GitHub - defshine/flaskblog: Learn python and flask,just a tony blog system Gunicorn - Python WSGI HTTP Server for UNIX å®‰è£… Flask 0.10 documentation Flask + Gunicorn + Nginx éƒ¨ç½² - Ray Liang - åšå®¢å›­ é˜¿é‡Œäº‘ECSä¸Šç¯å¢ƒæ­å»º(virtualenv+flask+gunicorn+supervisor+nginx) - è©ææœ¬æ— æ ‘ - åšå®¢å›­ é˜¿é‡Œäº‘éƒ¨ç½² Flask + WSGI + Nginx è¯¦è§£ - Ray Liang - åšå®¢å›­ Supervisor ç®¡ç†åå°å®ˆæŠ¤è¿›ç¨‹ python web éƒ¨ç½²ï¼šnginx + gunicorn + supervisor + flask éƒ¨ç½²ç¬”è®° - ç®€ä¹¦ VPSç¯å¢ƒæ­å»ºè¯¦è§£ (Virtualenv+Gunicorn+Supervisor+Nginx) | BeiYuu.com åŸºäº Flask å®ç° RESTful API | Rossâ€™s Page Ubuntu 14.04 ç³»ç»ŸåŸºäº Gunicorn å’Œ Nginx éƒ¨ç½² Flask åº”ç”¨ | Rossâ€™s Page Flask+Nginx+Gunicorn+Redis+Mysqlæ­å»ºä¸€ä¸ªå°ç«™ | Alex&#039;s Blog How to Run Flask Applications with Nginx Using Gunicorn &#8211; Onur GÃ¼zel * dnsmasqé…ç½®åŸŸåé‡å®šå‘å’Œdnsç¼“å­˜ | Alex&#039;s Blog åœ¨é˜¿é‡Œäº‘CentOS7ä¸­é…ç½®åŸºäºNginx+Supervisor+Gunicornçš„Flaské¡¹ç›® - simpleapples virtualenv ç¯å¢ƒä¸‹ Django + Nginx + Gunicorn+ Supervisor æ­å»º Python Web éƒ¨ç½² | Flaskä¹‹æ—… CentOS 6 ä¸‹ä½¿ç”¨ Nginxï¼ŒGunicorn ä»¥åŠ Supervisor éƒ¨ç½² Flask åº”ç”¨ - æœé¡ºå¸†çš„ä¸ªäººåšå®¢ åœ¨ Ubuntu ä¸­ Nginx,Gunicorn éƒ¨ç½² Flask | autarch * é˜¿é‡Œäº‘Python+Flaskç¯å¢ƒæ­å»º]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Netdata-Linuxä¸‹æ€§èƒ½ç›‘è§†å·¥å…·]]></title>
    <url>%2F2016%2F05%2F06%2Flinux-performance-monitoring-tool-netdata%2F</url>
    <content type="text"><![CDATA[ç¼–è¯‘ä¾èµ–12# Debian/Ubuntu$ sudo apt-get install zlib1g-dev gcc make git autoconf autogen automake pkg-config Install netdata123456# download it - the directory &apos;netdata.git&apos; will be created$ git clone https://github.com/firehol/netdata.git --depth=1cd netdata# build it./netdata-installer.sh ä¸€æ—¦ç¼–è¯‘å®‰è£…å®Œæ¯•ï¼Œnetdata å°†æ‰§è¡Œ /usr/sbin/netdata å¯åŠ¨ daemon ç¨‹åºï¼Œå¹¶ç›‘å¬æœ¬æœºçš„ 19999 ç«¯å£ã€‚ ç›´æ¥è®¿é—®ï¼š127.0.0.1:19999 å³å¯æ‰“å¼€ç›‘æ§ç•Œé¢ã€‚ é“¾æ¥ å®˜æ–¹å®‰è£…æ•™ç¨‹ï¼šInstallation Â· firehol/netdata Wiki Â· GitHub GitHub - firehol/netdata: Real-time performance monitoring, done right! netdataï¼šå®æ—¶ç›‘è§† Linux ç³»ç»Ÿæ€§èƒ½]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[cURL-å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·]]></title>
    <url>%2F2016%2F05%2F04%2Flinux-curl%2F</url>
    <content type="text"><![CDATA[cURLæ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œç”¨æ˜¯å‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œç„¶åå¾—åˆ°å’Œæå–æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨â€æ ‡å‡†è¾“å‡ºâ€ï¼ˆstdoutï¼‰ä¸Šé¢ã€‚ Linuxä¸‹å®‰è£…cURL1$ sudo apt-get install -y curl Windowsä¸‹å®‰è£…cURL Windowsä¸‹é»˜è®¤æ²¡æœ‰cURLå‘½ä»¤ï¼Œéœ€è¦å®‰è£…åæ‰èƒ½ä½¿ç”¨ åˆ°ç½‘å€ curl download ä¸‹è½½curlå®‰è£…åŒ…ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯ curl-7.33.0-win64-ssl-sspi.zip 2013-10-16 04:24 698K ã€‚ è§£å‹å®‰è£…åŒ…ï¼Œåªæœ‰ä¸€ä¸ªcurl.exeæ–‡ä»¶ï¼Œåœ¨ curl.exe æ‰€åœ¨ç›®å½•ä¸‹æ‰“å¼€ cmd å‘½ä»¤è¡Œçª—å£ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ curl å‘½ä»¤äº†ã€‚ ä¸ºäº†è®© curl æ”¯æŒè®¿é—® https çš„ç½‘å€ï¼Œéœ€è¦ä¸‹è½½ OpenSSL ,åˆ° Win32OpenSSL ä¸‹è½½ Win32 OpenSSL v1.0.1t Light æ–‡ä»¶ã€‚ ä¸Šé¢çš„ 2ã€3ã€4 æ­¥ï¼Œå¦‚æœä½ è§‰å¾—å¤ªéº»çƒ¦çš„è¯ï¼Œä¹Ÿå¯ä»¥åˆ° cURL - Download ä¸‹è½½ Win64 x86_64 7zip 7.49.0 binary SSL SSH Viktor SzakÃ¡ts è¿™ä¸€é¡¹ï¼Œä¸‹è½½åå‹ç¼©åŒ…é‡Œçš„binç›®å½•ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼šcurl.exeï¼Œcurl-ca-bundle.crtï¼Œlibcurl.dllï¼Œé‡Œé¢è‡ªå¸¦äº†SSLçš„è¯ä¹¦æ–‡ä»¶ã€‚ cURLå¸¸ç”¨å‘½ä»¤æ•´ç†æ ¼å¼ï¼š curl [å‚æ•°] [URLåœ°å€] å‚æ•°ä»‹ç» ç¼©å†™ å®Œæ•´å‘½ä»¤ ç¤ºä¾‹ é‡Šæ„ -A --user-agent &lt;agent string&gt; demo æŒ‡å®šUser-Agentçš„å€¼ -b --cookie &lt;name=data/file&gt; demo cookieå­—ç¬¦ä¸²æˆ–æ–‡ä»¶è¯»å–ä½ç½®ï¼Œä½¿ç”¨optionæ¥æŠŠä¸Šæ¬¡çš„cookieä¿¡æ¯è¿½åŠ åˆ°http requesté‡Œé¢å» -c --cookie-jar &lt;file name&gt; demo æ“ä½œç»“æŸåæŠŠcookieå†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ -C --continue-at &lt;offset&gt; demo æ–­ç‚¹ç»­ä¼  -d --data &lt;data&gt; demo HTTP POSTæ–¹å¼ä¼ é€æ•°æ® application/x-www-url-encoded -D --dump-header &lt;file&gt; demo å°†è¯·æ±‚è¿”å›çš„å“åº”ä¿¡æ¯ä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ -e --referer &lt;URL&gt; demo æŒ‡å®šå¼•ç”¨åœ°å€ï¼Œè¡¨ç¤ºä»å“ªé‡Œè·³è½¬è¿‡æ¥çš„ -E --cert &lt;certificate[:password]&gt; -F --form &lt;name=content&gt; demo HTTP è¡¨å•æ–¹å¼æäº¤æ•°æ® multipart/form-data -G --get ä½¿ç”¨GETæ–¹å¼è¯·æ±‚ï¼Œå¹¶å°†å‚æ•°æ‹¼æ¥åœ¨URLçš„?åé¢ -H --header &lt;header&gt; demo æŒ‡å®šè¯·æ±‚å¤´å‚æ•° -I --head demo ä»…è¿”å›å¤´éƒ¨ä¿¡æ¯ï¼Œä½¿ç”¨HEADè¯·æ±‚ -L --location demo æ‰§è¡Œé‡å®šå‘æ“ä½œ 3xx --limit-rate &lt;speed&gt; é™åˆ¶æœ€å¤§ä¼ è¾“ç‡ -m --max-time &lt;seconds&gt; æŒ‡å®šå¤„ç†çš„æœ€å¤§æ—¶é•¿ --max-filesize &lt;bytes&gt; æŒ‡å®šè¦ä¸‹è½½çš„æ–‡ä»¶çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœè¶…è¿‡byteså€¼ï¼Œä¸‹è½½å¹¶ä¸å¼€å§‹ã€è¿”å›é€€å‡ºç 63 -o --output &lt;file&gt; demo å°†æ–‡ä»¶ä¿å­˜ä¸ºå‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶åçš„æ–‡ä»¶ä¸­ &gt; &gt; ç­‰åŒäº-o,å¯¹è¾“å‡ºè¿›è¡Œè½¬å‘è¾“å‡º -O --remote-name demo ä½¿ç”¨URLä¸­é»˜è®¤çš„æ–‡ä»¶åä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ° -r --range &lt;range&gt; demo æ£€ç´¢æ¥è‡ªHTTP/1.1æˆ–FTPæœåŠ¡å™¨å­—èŠ‚èŒƒå›´;åˆ†å—ä¸‹è½½ -s --silent demo å‡å°‘è¾“å‡ºä¿¡æ¯,æ¯”å¦‚è¿›åº¦æ˜¾ç¤ºæˆ–é”™è¯¯ä¿¡æ¯ --ssl ä½¿ç”¨SSL/TLSæ–¹å¼åˆ›å»ºè¿æ¥è¯·æ±‚ -T --upload-file &lt;file&gt; demo ä½¿ç”¨PUTæ–¹æ³•ä¸Šä¼ ï¼Œ-Tå‚æ•°æŒ‡å®šä¸Šä¼ æ–‡ä»¶ -u --user &lt;user:password&gt; demo è®¾ç½®æœåŠ¡å™¨çš„ç”¨æˆ·å’Œå¯†ç  -v --verbose demo å°å†™çš„vå‚æ•°ï¼Œç”¨äºæ‰“å°æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬å‘é€çš„è¯·æ±‚ä¿¡æ¯ï¼Œè¿™åœ¨è°ƒè¯•è„šæœ¬æ˜¯ç‰¹åˆ«æœ‰ç”¨ --trace demo æŸ¥çœ‹æ›´è¯¦ç»†çš„é€šä¿¡è¿‡ç¨‹ --trace-ascii demo æŸ¥çœ‹æ›´è¯¦ç»†çš„é€šä¿¡è¿‡ç¨‹ -w --write-out &lt;format&gt; demo -x --proxy &lt;[protocol://][user:password@]proxyhost[:port]&gt; demo æŒ‡å®šä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£ï¼Œç«¯å£é»˜è®¤ä¸º1080 -X --request &lt;command&gt; demo æŒ‡å®šGET,HEAD,POST,PUT,DELETEç­‰è¯·æ±‚åè®® -h --help ä½¿ç”¨å¸®åŠ© -V --version ç‰ˆæœ¬ä¿¡æ¯ --retry &lt;num&gt; æŒ‡å®šé‡è¯•æ¬¡æ•° ç¤ºä¾‹ -A æŒ‡å®šUser-Agentçš„å€¼ Back To Top1$ curl -A &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)&quot; -o page.html http://www.www.baidu.com -b ä½¿ç”¨cookieæ–‡ä»¶(å½“å‰ç›®å½•ä¸‹çš„cookie.txtæ–‡ä»¶) Back To Top 1234// æŒ‡å®š cookieä¿¡æ¯ è®¿é—®$ curl -b &quot;name=data&quot; http://www.baidu.com// ä½¿ç”¨ æœ¬åœ°æ–‡ä»¶ä¸­çš„cookieä¿¡æ¯ è®¿é—®$ curl -b cookie.txt http://www.xxxx.com/api -c å°†è¯·æ±‚å¾—åˆ°çš„cookieä¿¡æ¯ä¿å­˜åˆ°æœ¬åœ°çš„ cookie.txtæ–‡ä»¶ä¸­ Back To Top 1$ curl -c cookie.txt http://www.alibaba.com -C é€‰é¡¹å¯å¯¹å¤§æ–‡ä»¶ä½¿ç”¨æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ Back To Top 123456// å½“æ–‡ä»¶åœ¨ä¸‹è½½å®Œæˆä¹‹å‰ç»“æŸè¯¥è¿›ç¨‹$ curl -O http://www.xxx.com/gettext.html// ############# 20.1%// é€šè¿‡æ·»åŠ -Cé€‰é¡¹ç»§ç»­å¯¹è¯¥æ–‡ä»¶è¿›è¡Œä¸‹è½½ï¼Œå·²ç»ä¸‹è½½è¿‡çš„æ–‡ä»¶ä¸ä¼šè¢«é‡æ–°ä¸‹è½½$ curl -C -O http://www.xxx.com/gettext.html// ############# 20.1% -d é€šè¿‡ application/x-www-url-encoded æ–¹å¼å‘é€POSTè¯·æ±‚ï¼Œ-då‚æ•°ä»¥name=valueçš„æ–¹å¼æŒ‡å®šå‚æ•°å†…å®¹ Back To Top 1234//å¤šä¸ªå‚æ•°ç”¨&amp;è¿æ¥$ curl -d &quot;q=hello&amp;param2=test&quot; http://www.google.com //å¤šä¸ªå‚æ•°åˆ†åˆ«æŒ‡å®š $ curl -d &quot;action=del&quot; -d &quot;id=12&quot; http://localhost/action.php æ³¨æ„ï¼š-d åé¢post çš„å‚æ•°å¿…é¡»ç”¨åŒå¼•å·&quot;è€Œä¸æ˜¯å•å¼•å·&#39;æ‹¬èµ·æ¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ -D å°†è¯·æ±‚è¿”å›çš„å“åº”ä¿¡æ¯ä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ Back To Top 1$ curl -D cookie.txt http://www.alibaba.com æ³¨æ„ï¼š-c ä»…åŒ…å«å“åº”å¤´ä¸­çš„cookieä¿¡æ¯ -D åŒ…å«å“åº”å¤´ä¸­çš„æ‰€æœ‰å“åº”ä¿¡æ¯ -e è®¾ç½®Refererå¼•ç”¨åœ°å€ Back To Top 1$ curl -e http://localhost http://www.XXXX.com/wp-login.php -F é€šè¿‡ multipart/form-data æ–¹å¼å‘é€POSTè¯·æ±‚ï¼Œ-Få‚æ•°ä»¥name=valueçš„æ–¹å¼æŒ‡å®šå‚æ•°å†…å®¹ï¼›å¦‚æœå€¼æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨name=@fileçš„æ–¹å¼æ¥æŒ‡å®š;éœ€è¦æŒ‡å®šä¸Šä¼ æ–‡ä»¶ç±»å‹æ—¶ï¼Œç”¨type=æ¥æŒ‡å®š Back To Top 123$ curl -F &quot;action=upload&quot; -F &quot;filename=@file.tar.gz&quot; http://localhost/action.php//å¦‚æœé€šè¿‡ä»£ç†ï¼Œä¸Šè¿°å‘½ä»¤å¯èƒ½ä¼šè¢«ä»£ç†æ‹’ç»ï¼Œéœ€è¦æŒ‡å®šä¸Šä¼ æ–‡ä»¶çš„MIMEç±»å‹ï¼š$ curl -x proxy.com:8080 -F &quot;action=upload&quot; -F &quot;filename=@file.tar.gz; type=application/octet-stream&quot; http://localhost/action.php -H æŒ‡å®šè¯·æ±‚å¤´å‚æ•° Back To Top 1$ curl -H &quot;Content-Type:application/json&quot; http://example.com -I ä»…è¿”å›å¤´éƒ¨ä¿¡æ¯ï¼Œä½¿ç”¨HEADè¯·æ±‚ Back To Top 1$ curl -I http://www.baidu.com æ³¨æ„ï¼šä½¿ç”¨-Iæ—¶ï¼Œæ¥å£éœ€è¦æ”¯æŒMethod=HEADè¯·æ±‚ï¼Œå¦åˆ™ä¼šè¿”å›405 Method Not Allowed -L æ‰§è¡Œé‡å®šå‘æ“ä½œ Back To Top 1$ curl -L www.baidu.com -o å°†æ–‡ä»¶ä¿å­˜ä¸ºå‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶åçš„æ–‡ä»¶ä¸­ Back To Top 1234// å°†ç™¾åº¦é¦–é¡µå†…å®¹æŠ“åˆ° home.html ä¸­$ curl -o home.html http://baidu.com// ç¬¦å·`&gt;`å’Œ`-o`æ•ˆæœç›¸åŒ$ curl &gt; home.html http://baidu.com -O ä½¿ç”¨URLä¸­é»˜è®¤çš„æ–‡ä»¶åä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ° Back To Top 12//å°†å†…å®¹ä¿å­˜åˆ° gettext.html ä¸­$ curl -O http://www.xxx.com/gettext.html -r åˆ†æ®µä¸‹è½½ Back To Top 1234//è·å–å‰100å­—èŠ‚çš„æ•°æ®$ curl -r 0-99 http://www.get.this///è·å–æœ€å500å­—èŠ‚çš„æ•°æ®$ curl -r -500 http://www.get.this/ -s å‡å°‘è¾“å‡ºä¿¡æ¯ Back To Top 1$ curl -s http://www.get.this/ -T æŒ‡å®šä¸Šä¼ æ–‡ä»¶è·¯å¾„ï¼›å¯ä»¥ä¸€ä¸ª-Tå¯¹åº”ä¸€æ¡Urlæ¥è¡¨ç¤ºå°†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°æŒ‡å®šçš„Url;æˆ–è€…åŒæ—¶å‘ä¸€æ¡Urlä¸Šä¼ å¤šä¸ªæ–‡ä»¶ Back To Top 1234// ftp ä¸Šä¼ $ curl -T test.sql ftp://ç”¨æˆ·å:å¯†ç @ip:port/demo/curtain/bbstudy_files///åŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶$ curl -T &quot;&#123;file1,file2&#125;&quot; http://www.example.com -u è®¾ç½®æœåŠ¡å™¨çš„ç”¨æˆ·å’Œå¯†ç  Back To Top 12$ curl -u ç”¨æˆ·å:å¯†ç  http://www.example.com$ curl -u ç”¨æˆ·å:å¯†ç  -O http://www.XXXX.com/demo/curtain/bbstudy_files/style.css -v ç”¨äºæ‰“å°æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æ˜¾ç¤ºä¸€æ¬¡httpé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç«¯å£è¿æ¥å’Œhttp requestå¤´ä¿¡æ¯ Back To Top 1$ curl -v www.baidu.com --trace æŸ¥çœ‹æ›´è¯¦ç»†çš„é€šä¿¡è¿‡ç¨‹ Back To Top 123$ curl --trace output.txt www.baidu.com//æˆ–$ curl --trace-ascii output.txt www.baidu.com -w è·å–æŒ‡å®šè¾“å‡ºå†…å®¹ Back To Top 1$ curl -m 10 -w &apos;%&#123;http_code&#125;\n&apos; http://wyh.life/ -so /dev/null -x æŒ‡å®šä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£ Back To Top 1$ curl -u &lt;user&gt;:&lt;passwd&gt; -x &lt;proxy&gt;:&lt;port&gt; http://www.get.this/ -X -Xå‚æ•°å¯ä»¥æ”¯æŒå…¶ä»–åŠ¨è¯ Back To Top 12$ curl -X POST www.example.com$ curl -X DELETE www.example.com ç›¸å…³é“¾æ¥ curlç½‘ç«™å¼€å‘æŒ‡å— - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— CURLå¸¸ç”¨å‘½ä»¤ - å¼ è´º - åšå®¢å›­ Curlä½¿ç”¨ - ç®€ä¹¦ linux curl - ç®€ä¹¦ æå‡å¼€å‘æ•ˆç‡å°å·¥å…·ä¹‹-curl - ç®€ä¹¦ curlå‘½ä»¤å¸¸ç”¨æ“ä½œ - webå¼€å‘ - SegmentFault cURLå¤‡å¿˜ - è„¸æ»šé”®ç›˜æ•™â„¢ - SegmentFault Curlä½¿ç”¨ Â· Issue #42 Â· dongjun111111/blog Â· GitHub curl - zheng-jiâ€™s Wiki help123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181$ curl --helpUsage: curl [options...] &lt;url&gt;Options: (H) means HTTP/HTTPS only, (F) means FTP only --anyauth Pick &quot;any&quot; authentication method (H) -a, --append Append to target file when uploading (F/SFTP) --basic Use HTTP Basic Authentication (H) --cacert FILE CA certificate to verify peer against (SSL) --capath DIR CA directory to verify peer against (SSL) -E, --cert CERT[:PASSWD] Client certificate file and password (SSL) --cert-status Verify the status of the server certificate (SSL) --cert-type TYPE Certificate file type (DER/PEM/ENG) (SSL) --ciphers LIST SSL ciphers to use (SSL) --compressed Request compressed response (using deflate or gzip) -K, --config FILE Read config from FILE --connect-timeout SECONDS Maximum time allowed for connection -C, --continue-at OFFSET Resumed transfer OFFSET -b, --cookie STRING/FILE Read cookies from STRING/FILE (H) -c, --cookie-jar FILE Write cookies to FILE after operation (H) --create-dirs Create necessary local directory hierarchy --crlf Convert LF to CRLF in upload --crlfile FILE Get a CRL list in PEM format from the given file -d, --data DATA HTTP POST data (H) --data-raw DATA HTTP POST data, &apos;@&apos; allowed (H) --data-ascii DATA HTTP POST ASCII data (H) --data-binary DATA HTTP POST binary data (H) --data-urlencode DATA HTTP POST data url encoded (H) --delegation STRING GSS-API delegation permission --digest Use HTTP Digest Authentication (H) --disable-eprt Inhibit using EPRT or LPRT (F) --disable-epsv Inhibit using EPSV (F) --dns-servers DNS server addrs to use: 1.1.1.1;2.2.2.2 --dns-interface Interface to use for DNS requests --dns-ipv4-addr IPv4 address to use for DNS requests, dot notation --dns-ipv6-addr IPv6 address to use for DNS requests, dot notation -D, --dump-header FILE Write the headers to FILE --egd-file FILE EGD socket path for random data (SSL) --engine ENGINE Crypto engine (use &quot;--engine list&quot; for list) (SSL) -f, --fail Fail silently (no output at all) on HTTP errors (H) --false-start Enable TLS False Start. -F, --form CONTENT Specify HTTP multipart POST data (H) --form-string STRING Specify HTTP multipart POST data (H) --ftp-account DATA Account data string (F) --ftp-alternative-to-user COMMAND String to replace &quot;USER [name]&quot; (F) --ftp-create-dirs Create the remote dirs if not present (F) --ftp-method [MULTICWD/NOCWD/SINGLECWD] Control CWD usage (F) --ftp-pasv Use PASV/EPSV instead of PORT (F) -P, --ftp-port ADR Use PORT with given address instead of PASV (F) --ftp-skip-pasv-ip Skip the IP address for PASV (F) --ftp-pret Send PRET before PASV (for drftpd) (F) --ftp-ssl-ccc Send CCC after authenticating (F) --ftp-ssl-ccc-mode ACTIVE/PASSIVE Set CCC mode (F) --ftp-ssl-control Require SSL/TLS for FTP login, clear for transfer (F) -G, --get Send the -d data with a HTTP GET (H) -g, --globoff Disable URL sequences and ranges using &#123;&#125; and [] -H, --header LINE Pass custom header LINE to server (H) -I, --head Show document info only -h, --help This help text --hostpubmd5 MD5 Hex-encoded MD5 string of the host public key. (SSH) -0, --http1.0 Use HTTP 1.0 (H) --http1.1 Use HTTP 1.1 (H) --http2 Use HTTP 2 (H) --ignore-content-length Ignore the HTTP Content-Length header -i, --include Include protocol headers in the output (H/F) -k, --insecure Allow connections to SSL sites without certs (H) --interface INTERFACE Use network INTERFACE (or address) -4, --ipv4 Resolve name to IPv4 address -6, --ipv6 Resolve name to IPv6 address -j, --junk-session-cookies Ignore session cookies read from file (H) --keepalive-time SECONDS Wait SECONDS between keepalive probes --key KEY Private key file name (SSL/SSH) --key-type TYPE Private key file type (DER/PEM/ENG) (SSL) --krb LEVEL Enable Kerberos with security LEVEL (F) --libcurl FILE Dump libcurl equivalent code of this command line --limit-rate RATE Limit transfer speed to RATE -l, --list-only List only mode (F/POP3) --local-port RANGE Force use of RANGE for local port numbers -L, --location Follow redirects (H) --location-trusted Like &apos;--location&apos;, and send auth to other hosts (H) --login-options OPTIONS Server login options (IMAP, POP3, SMTP) -M, --manual Display the full manual --mail-from FROM Mail from this address (SMTP) --mail-rcpt TO Mail to this/these addresses (SMTP) --mail-auth AUTH Originator address of the original email (SMTP) --max-filesize BYTES Maximum file size to download (H/F) --max-redirs NUM Maximum number of redirects allowed (H) -m, --max-time SECONDS Maximum time allowed for the transfer --metalink Process given URLs as metalink XML file --negotiate Use HTTP Negotiate (SPNEGO) authentication (H) -n, --netrc Must read .netrc for user name and password --netrc-optional Use either .netrc or URL; overrides -n --netrc-file FILE Specify FILE for netrc -:, --next Allows the following URL to use a separate set of options --no-alpn Disable the ALPN TLS extension (H) -N, --no-buffer Disable buffering of the output stream --no-keepalive Disable keepalive use on the connection --no-npn Disable the NPN TLS extension (H) --no-sessionid Disable SSL session-ID reusing (SSL) --noproxy List of hosts which do not use proxy --ntlm Use HTTP NTLM authentication (H) --oauth2-bearer TOKEN OAuth 2 Bearer Token (IMAP, POP3, SMTP) -o, --output FILE Write to FILE instead of stdout --pass PASS Pass phrase for the private key (SSL/SSH) --path-as-is Do not squash .. sequences in URL path --pinnedpubkey FILE/HASHES Public key to verify peer against (SSL) --post301 Do not switch to GET after following a 301 redirect (H) --post302 Do not switch to GET after following a 302 redirect (H) --post303 Do not switch to GET after following a 303 redirect (H) -#, --progress-bar Display transfer progress as a progress bar --proto PROTOCOLS Enable/disable PROTOCOLS --proto-default PROTOCOL Use PROTOCOL for any URL missing a scheme --proto-redir PROTOCOLS Enable/disable PROTOCOLS on redirect -x, --proxy [PROTOCOL://]HOST[:PORT] Use proxy on given port --proxy-anyauth Pick &quot;any&quot; proxy authentication method (H) --proxy-basic Use Basic authentication on the proxy (H) --proxy-digest Use Digest authentication on the proxy (H) --proxy-negotiate Use HTTP Negotiate (SPNEGO) authentication on the proxy (H) --proxy-ntlm Use NTLM authentication on the proxy (H) --proxy-service-name NAME SPNEGO proxy service name --service-name NAME SPNEGO service name -U, --proxy-user USER[:PASSWORD] Proxy user and password --proxy1.0 HOST[:PORT] Use HTTP/1.0 proxy on given port -p, --proxytunnel Operate through a HTTP proxy tunnel (using CONNECT) --pubkey KEY Public key file name (SSH) -Q, --quote CMD Send command(s) to server before transfer (F/SFTP) --random-file FILE File for reading random data from (SSL) -r, --range RANGE Retrieve only the bytes within RANGE --raw Do HTTP &quot;raw&quot;; no transfer decoding (H) -e, --referer Referer URL (H) -J, --remote-header-name Use the header-provided filename (H) -O, --remote-name Write output to a file named as the remote file --remote-name-all Use the remote file name for all URLs -R, --remote-time Set the remote file&apos;s time on the local output -X, --request COMMAND Specify request command to use --resolve HOST:PORT:ADDRESS Force resolve of HOST:PORT to ADDRESS --retry NUM Retry request NUM times if transient problems occur --retry-delay SECONDS Wait SECONDS between retries --retry-max-time SECONDS Retry only within this period --sasl-ir Enable initial response in SASL authentication -S, --show-error Show error. With -s, make curl show errors when they occur -s, --silent Silent mode (don&apos;t output anything) --socks4 HOST[:PORT] SOCKS4 proxy on given host + port --socks4a HOST[:PORT] SOCKS4a proxy on given host + port --socks5 HOST[:PORT] SOCKS5 proxy on given host + port --socks5-hostname HOST[:PORT] SOCKS5 proxy, pass host name to proxy --socks5-gssapi-service NAME SOCKS5 proxy service name for GSS-API --socks5-gssapi-nec Compatibility with NEC SOCKS5 server -Y, --speed-limit RATE Stop transfers below RATE for &apos;speed-time&apos; secs -y, --speed-time SECONDS Trigger &apos;speed-limit&apos; abort after SECONDS (default: 30) --ssl Try SSL/TLS (FTP, IMAP, POP3, SMTP) --ssl-reqd Require SSL/TLS (FTP, IMAP, POP3, SMTP) -2, --sslv2 Use SSLv2 (SSL) -3, --sslv3 Use SSLv3 (SSL) --ssl-allow-beast Allow security flaw to improve interop (SSL) --ssl-no-revoke Disable cert revocation checks (WinSSL) --stderr FILE Where to redirect stderr (use &quot;-&quot; for stdout) --tcp-nodelay Use the TCP_NODELAY option -t, --telnet-option OPT=VAL Set telnet option --tftp-blksize VALUE Set TFTP BLKSIZE option (must be &gt;512) -z, --time-cond TIME Transfer based on a time condition -1, --tlsv1 Use &gt;= TLSv1 (SSL) --tlsv1.0 Use TLSv1.0 (SSL) --tlsv1.1 Use TLSv1.1 (SSL) --tlsv1.2 Use TLSv1.2 (SSL) --trace FILE Write a debug trace to FILE --trace-ascii FILE Like --trace, but without hex output --trace-time Add time stamps to trace/verbose output --tr-encoding Request compressed transfer encoding (H) -T, --upload-file FILE Transfer FILE to destination --url URL URL to work with -B, --use-ascii Use ASCII/text transfer -u, --user USER[:PASSWORD] Server user and password --tlsuser USER TLS username --tlspassword STRING TLS password --tlsauthtype STRING TLS authentication type (default: SRP) --unix-socket FILE Connect through this Unix domain socket -A, --user-agent STRING Send User-Agent STRING to server (H) -v, --verbose Make the operation more talkative -V, --version Show version number and quit -w, --write-out FORMAT Use output FORMAT after completion --xattr Store metadata in extended file attributes -q Disable .curlrc (must be first parameter)]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MVCå’ŒWebAPIå¦‚ä½•ä»Filterå‘Actionä¸­ä¼ é€’æ•°æ®]]></title>
    <url>%2F2016%2F04%2F17%2Ftransfer-data-from-filter-to-action%2F</url>
    <content type="text"><![CDATA[MVCå’ŒWebAPIå¦‚ä½•ä»Filterå‘Actionä¸­ä¼ é€’æ•°æ® éœ€æ±‚æœ€è¿‘åœ¨ç­–åˆ’å®ç°MVCé¡¹ç›®ä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„åŠŸèƒ½æ—¶ï¼Œè€ƒè™‘ç”¨MVCä¸­çš„Filterè¿‡æ»¤å™¨æ¥å…ˆä»urlé“¾æ¥ä¸­è·å–ä¼ é€’è¿‡æ¥çš„tokenï¼Œåœ¨Filterä¸­é€šè¿‡tokenè·å–ç”¨æˆ·çš„ä¿¡æ¯åï¼Œå¦‚æœç”¨æˆ·ä¿¡æ¯æ­£ç¡®ï¼Œåˆ™ä¼ é€’åˆ°Controllerçš„Actionä¸­è¿›è¡Œç”¨æˆ·æ•°æ®çš„æ“ä½œã€‚ é‚£ä¹ˆï¼Œè¦å¦‚ä½•ä»Filterä¸­å‘Actionä¸­ä¼ é€’æ•°æ®å‘¢ï¼Ÿ how to pass data from filter to controller? æ³¨æ„ï¼šä¸‹é¢æ‰€æåˆ°çš„Filteréƒ½æŒ‡å®ç°ActionFilterAttributeçš„è¿‡æ»¤å™¨ MVCä¸­ ä»Filterè¿‡æ»¤å™¨å‘Actionä¸­ä¼ é€’æ•°æ®æ–¹æ³•ä¸€ é€šè¿‡ RouteData æ¥ä¼ å€¼12345//èµ‹å€¼ï¼šfilterContext.RouteData.Values.Add(&quot;Tname&quot;,UName);//è·å–ï¼š var nm = RouteData.Values[&quot;Tname&quot;]; æµ‹è¯•é€šè¿‡ã€‚ è¯¦è§ï¼š ASP.NET MVC Pass object from Custom Action Filter to Action - Stack Overflow æ–¹æ³•äºŒ é€šè¿‡ ActionParameters æ¥ä¼ å€¼å¦ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ ActionParameters æ¥è®¾ç½®ï¼Œä½†åœ¨Actionä¸­æ˜¯é€šè¿‡æ·»åŠ å‚æ•°è·å–å€¼çš„ï¼š 1234//èµ‹å€¼ï¼š filterContext.ActionParameters.Add(&quot;number&quot;, Id);//è·å–ï¼š public ActionResult Index(int number, Person person) è¯¦è§ï¼š Manipulating Action Method Parameters - Youâ€™ve Been Haacked é€šè¿‡æµ‹è¯•ï¼Œå‘ç°è¿™ç§æ–¹æ³•å¯ä»¥éšè—çœŸå®çš„Actionæ–¹æ³•ï¼š æ¯”å¦‚ï¼šè¯·æ±‚çš„é“¾æ¥æ˜¯ http://localhost:47760/home/show?id=3&amp;name=abcè€Œå®é™…çš„Actionä¸ºï¼š 1public ActionResult Show(string aaa)&#123;&#125; é‚£ä¹ˆå¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ª ActionFilterAttribute è¿‡æ»¤å™¨ï¼Œå¹¶è®¾ç½®ï¼š 12this.Uname=getquerystring.name;filterContext.ActionParameters[&quot;aaa&quot;] = UName; è¿™æ ·è™½ç„¶urlä¸­è¯·æ±‚çš„å‚æ•°æ—¶idå’Œnameï¼Œè€Œå®é™…è¯·æ±‚å‚æ•°æ˜¯aaaï¼› è€Œå®é™…çš„è¯·æ±‚é“¾æ¥ http://localhost:47760/home/show?aaa=haha ä¹Ÿæ˜¯å¯ä»¥è®¿é—®çš„ã€‚ æ–¹æ³•ä¸‰ é€šè¿‡ HttpContext.Items æ¥ä¼ å€¼1234//Filterä¸­èµ‹å€¼ï¼š filterContext.HttpContext.Items[&quot;tname&quot;] = UName+&quot;2324&quot;;//Actionä¸­å–å€¼ï¼š var nm= HttpContext.Items[&quot;tname&quot;]; æµ‹è¯•é€šè¿‡ã€‚ é€šè¿‡æµ‹è¯•å‘ç°å¥½åƒè¿™ç§æ–¹å¼æ¯”è¾ƒåˆé€‚ã€‚å› ä¸ºï¼šå¯çœ‹åˆ°Itemsçš„è§£é‡Šä¸ºï¼š åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–ä¸€ä¸ªé”®/å€¼é›†åˆï¼Œè¯¥é›†åˆåœ¨ HTTP è¯·æ±‚è¿‡ç¨‹ä¸­å¯ä»¥ç”¨äºåœ¨æ¨¡å—ä¸å¤„ç†ç¨‹åºä¹‹é—´ç»„ç»‡å’Œå…±äº«æ•°æ®ã€‚ è¯¦è§ï¼š asp.net mvc - Accessing Action Filter&#39;s data in Controller Action - Stack Overflow WebAPIä¸­ä»Filterå‘Actionä¸­ä¼ é€’æ•°æ®å¦‚ä½•ä»Filterå‘Actionä¸­ä¼ é€’æ•°æ®ï¼Ÿ æ–¹æ³•ä¸€ é€šè¿‡ Request.Properties æ¥ä¼ å€¼1234//Filterä¸­èµ‹å€¼ï¼š actionContext.Request.Properties[&quot;id&quot;] =&quot;134&quot;;//Actionä¸­è·å–ï¼š var id= Request.Properties[&quot;id&quot;]; æˆ–ï¼š 123456//èµ‹å€¼: actionContext.Request.Properties.Add(&quot;mykey&quot;, myObject);//è·å–ï¼š object myObject;Request.Properties.TryGetValue(&quot;mykey&quot;, out myObject);//cast to MyType æµ‹è¯•é€šè¿‡ã€‚ è¯¦è§ï¼š asp.net web api - WebApi: how to pass state from filter to controller? - Stack Overflow asp.net web api - Pass an object from ActionFilter.OnActionExecuting() to an ApiController - Stack Overflow æ€»ç»“MVC ç”¨ : 1filterContext.HttpContext.Items[UnitOfWorkRequestKey] = UnitOfWork; Web API ç”¨ : 1actionContext.Request.Properties[UnitOfWorkRequestKey] = UnitOfWork; è¯¦è§ï¼š c# - Web API Action Filter - Controller.TempData equivalent? - Stack Overflow]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ASP.NET</tag>
        <tag>RestfulApi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Web APIä¸­è·¯ç”±ä¸­åŠ äº†actionåå…¶ä»–getã€postå¼€å¤´çš„æ–¹æ³•å¦‚ä½•ç›´æ¥è®¿é—®]]></title>
    <url>%2F2016%2F04%2F17%2Fwebapi-action-url-extend%2F</url>
    <content type="text"><![CDATA[éœ€æ±‚é€šå¸¸æˆ‘ä»¬åœ¨è®¿é—®Web APIæ¥å£æ—¶ï¼Œé»˜è®¤è‡ªå¸¦çš„Actionæ–¹æ³•ä¸ºä»¥ä¸‹è¿™äº›ï¼š 12345public IEnumerable&lt;string&gt; Get()public string Get(int id)public void Post([FromBody]string value)public void Put(int id, [FromBody]string value)public void Delete(int id) é»˜è®¤çš„è·¯ç”±è¡¨è§„åˆ™ä¸ºï¼š WebApiConfig.csæ–‡ä»¶ 12345config.Routes.MapHttpRoute( name: &quot;DefaultApi&quot;, routeTemplate: &quot;api/&#123;controller&#125;/&#123;id&#125;&quot;, defaults: new &#123; id = RouteParameter.Optional &#125;); åŒ¹é…çš„Urlä¸ºï¼š åŠ¨ä½œ HTTPæ–¹æ³• ç›¸å¯¹è·¯å¾„ è·å–å…¨éƒ¨ GET /api/products æŒ‡å®š id è·å– GET /api/products/id æ·»åŠ  POST /api/products æ›´æ–° PUT /api/products/id åˆ é™¤ DELETE /api/products/id ç‰¹æ®Šéœ€æ±‚æˆ‘ä»¬åœ¨åŒä¸€ä¸ª Controller ä¸­ï¼Œæœ‰æ—¶å€™å¯èƒ½éœ€è¦å®šä¹‰å¤šä¸ªç›¸åŒ Method çš„ Action æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š 123public string Get(int id)public string GetList(string name)public string GetPeople(int id) é‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±è¦å†æ·»åŠ ä¸€ä¸ª Route è·¯ç”±è§„åˆ™ï¼Œæ·»åŠ ä¸€ä¸ª {action} çš„å ä½ç¬¦ï¼š 12345 config.Routes.MapHttpRoute( name: &quot;DefaultApiAction&quot;, routeTemplate: &quot;api/&#123;controller&#125;/&#123;action&#125;/&#123;id&#125;&quot;, defaults: new &#123; id = RouteParameter.Optional &#125;); ä½†è¿™æ ·æˆ‘ä»¬å°±ä¸èƒ½å†ç”¨ä¹‹å‰çš„é‚£ç§æ–¹å¼æ¥ç›´æ¥è®¿é—®é»˜è®¤çš„Getæˆ–Postç­‰æ–¹æ³•äº†ï¼Œæ¯ä¸ªUrlé“¾æ¥éƒ½è¦åŠ ä¸Šactionåç§°ï¼š 123/api/products/get/api/products/getlist/api/products/post è¿™æ ·çš„è¯æˆ‘ä»¬å°±è§‰å¾—åè€Œæ›´éº»çƒ¦äº†ã€‚ è§£å†³æ–¹æ³•é‚£æ˜¯ä¸æ˜¯æœ‰ä¸€ç§ä»€ä¹ˆæ ·çš„æ–¹æ³•èƒ½è®©æˆ‘ä»¬åœ¨æ·»åŠ å¤šä¸ªç›¸åŒç±»å‹çš„è¯·æ±‚æ–¹æ³•æ—¶ï¼Œæ—¢èƒ½ç›´æ¥è®¿é—®é»˜è®¤çš„æ–¹æ³•ï¼Œåˆèƒ½é€šè¿‡æ·»åŠ actionåç§°æ¥è®¿é—®è‡ªå®šä¹‰æ·»åŠ çš„æ–¹æ³•å‘¢ï¼Ÿ å…¶å®ï¼Œæˆ‘ä»¬åªè¦ä¿®æ”¹è·¯ç”±è§„åˆ™å¦‚ä¸‹å³å¯ï¼š 1234567891011121314151617181920using System.Net.Http;using System.Web.Http.Routing; //å¯ç”¨çš„è·¯ç”±è¡¨ config.Routes.MapHttpRoute(&quot;DefaultApiWithId&quot;, &quot;api/&#123;controller&#125;/&#123;id&#125;&quot;, new &#123; id = RouteParameter.Optional &#125;, new &#123; id = @&quot;\d+&quot; &#125;); config.Routes.MapHttpRoute(&quot;DefaultApiWithAction&quot;, &quot;api/&#123;controller&#125;/&#123;action&#125;&quot;); config.Routes.MapHttpRoute(&quot;DefaultApiGet&quot;, &quot;Api/&#123;controller&#125;&quot;, new &#123; action = &quot;Get&quot; &#125;, new &#123; httpMethod = new HttpMethodConstraint(HttpMethod.Get) &#125;); config.Routes.MapHttpRoute(&quot;DefaultApiPost&quot;, &quot;Api/&#123;controller&#125;&quot;, new &#123; action = &quot;Post&quot; &#125;, new &#123; httpMethod = new HttpMethodConstraint(HttpMethod.Post) &#125;); è¯¦ç»†è¯´æ˜è§ï¼šwcf web api - Single controller with multiple GET methods in ASP.NET Web API - Stack Overflow å†å•°å—¦ä¸€å¥å¦‚æœåŒä¸€ç§è¯·æ±‚æ–¹å¼ä¸‹ï¼Œæœ‰å¤šä¸ªåŒç±»å‹çš„æ–¹æ³•ï¼Œä¼šè¯·æ±‚é»˜è®¤çŠ¶æ€ä¸‹çš„é‚£ä¸ªï¼šæ¯”å¦‚ getæ–¹æ³•ï¼š 12public string Get()public string GetTop() å¦‚æœè¯·æ±‚ï¼šhttp://localhost:47760/api/productåˆ™è®¿é—®åˆ°çš„æ˜¯Get()æ–¹æ³•ï¼Œå³ä½¿åœ¨é¡ºåºä¸ŠGetTop()æ’åœ¨Get()æ–¹æ³•å‰é¢ã€‚]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ASP.NET</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxä¸‹çš„è®¡åˆ’ä»»åŠ¡-Crontab]]></title>
    <url>%2F2016%2F03%2F28%2Fthe-plan-task-in-linux-cronlib%2F</url>
    <content type="text"><![CDATA[Crontab ç”¨äºè®¾ç½®å‘¨æœŸæ€§è¢«æ‰§è¡Œçš„ä»»åŠ¡çš„å·¥å…· æ£€æŸ¥cronæœåŠ¡æ£€æŸ¥crontabå·¥å…·æ˜¯å¦å®‰è£… 1$ crontab -l æ£€æŸ¥crondæœåŠ¡æ˜¯å¯åŠ¨ 1$service crond status æ³¨æ„: åœ¨Ubuntuç³»ç»Ÿä¸‹,æŸ¥çœ‹crontabæœåŠ¡æ˜¯: service cron status å®‰è£…cron12$ sudo apt-get install vixie-cron$ sudo apt-get install crontabs å¦‚æœåœ¨è¾“å…¥crontab -lä¹‹å,æç¤ºâ€no crontab for rootâ€œçš„ä¿¡æ¯,åˆ™è¯´æ˜ç³»ç»Ÿä¸­æ²¡æœ‰è®¾ç½®crontab,éœ€è¦å…ˆè¿›è¡Œè®¾ç½®. crontabæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾ä½ è¦è¿è¡Œçš„å‘½ä»¤ã€‚ æ‰§è¡Œå‘½ä»¤crontab -e,ä¼šæç¤º:1234no crontab for root - using an empty oneSelect an editor. ......... è¿™æ ·çš„æç¤º,ç„¶åé€‰æ‹©ä¸€ä¸ªç¼–è¾‘å™¨(è¿™é‡Œæˆ‘é€‰ vim:tiny)å³å¯.ç„¶åä¼šè¿›å…¥crontabç¼–è¾‘é¡µé¢,åœ¨ç¼–è¾‘é¡µé¢ä¸­ç›´æ¥è¾“å…¥shift+:,ç„¶åè¾“å…¥wqä¿å­˜,ä¸€ä¸ªæ–°çš„crontabå°±ç”Ÿæˆäº†.ç„¶åå†æ‰§è¡Œcrontab -l å°±èƒ½çœ‹åˆ°åˆšåˆšç¼–è¾‘è¿‡çš„crontabæ–‡ä»¶äº†. å‚è€ƒ:Linuxæç¤ºno crontab for rootçš„è§£å†³åŠæ³•Ubuntuä¸‹crontabå‘½ä»¤çš„ç”¨æ³• å®ä¾‹æ‰§è¡Œcrontab -eæ‰“å¼€crontabæ–‡ä»¶ å†™å…¥ä»¥ä¸‹å‘½ä»¤: 1*/1 * * * * date &gt;&gt; /tmp/log.txt è¡¨ç¤º:æ¯åˆ†é’Ÿå°†å½“å‰æ—¶é—´å†™å…¥åˆ°tmpç›®å½•ä¸‹çš„log.txtæ–‡ä»¶ä¸­ æŸ¥çœ‹log.txtæ–‡ä»¶,æ‰§è¡Œå‘½ä»¤: 1$ tail -f /tmp/log.txt è¡¨ç¤ºæŸ¥çœ‹log.txtæ–‡ä»¶çš„æœ€åå‡ è¡Œ æŸ¥çœ‹crontabæœåŠ¡è¿è¡ŒçŠ¶æ€: 1$ service cron status crontab é…ç½®æ–‡ä»¶çš„æ ¼å¼1* * * * * COMMAND 1* åˆ†é’Ÿ 0~59 2* å°æ—¶ 0~23 3* æ—¥æœŸ 1~31 4* æœˆä»½ 1~12 5* æ˜ŸæœŸ 1-7 (0æˆ–è€…7è¡¨ç¤ºæ˜ŸæœŸå¤©) æ¡ˆä¾‹ æ¯æ™š 21:30é‡å¯apache 130 21 * * * service httpd restart æ¯æœˆ 1 10 22æ—¥çš„4:45é‡å¯apache 145 4 1,10,22 * * service httpd restart æ¯æœˆ1åˆ°10æ—¥çš„4:45é‡å¯apache 145 4 1-10 * * service httpd restart ç”¨-è¡¨ç¤ºé—´éš” æ¯éš”2åˆ†é’Ÿé‡å¯ApacheæœåŠ¡ 12*/2 * * * * service httpd restart //å¶æ•°åˆ†é’Ÿå†…1-59/2 * * * * service httpd restart //å¥‡æ•°åˆ†é’Ÿå†… æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´,æ¯éš”ä¸€å°æ—¶é‡å¯apache 10 23-7/1 * * * * service httpd retart æ¯å¤©18ç‚¹åˆ°23ç‚¹ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯apache 120-59/30 18-23 * * * service httpd restart0,30 18-23 * * * service httpd restart æ€»ç»“ * è¡¨ç¤ºä»»ä½•æ—¶é—´éƒ½åŒ¹é… å¯ä»¥ç”¨ A,B,C è¡¨ç¤ºAæˆ–è€…Bæˆ–è€…Cæ—¶æ‰§è¡Œå‘½ä»¤ å¯ä»¥ç”¨ A-B è¡¨ç¤ºAåˆ°Bä¹‹é—´æ—¶æ‰§è¡Œå‘½ä»¤ å¯ä»¥ç”¨ */A è¡¨ç¤ºæ¯Aåˆ†é’Ÿ(å°æ—¶ç­‰)æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ æ³¨æ„ ç¬¬ä¸‰å’Œç¬¬äº”ä¸ªåŸŸä¹‹é—´æ˜¯â€æˆ–â€çš„å…³ç³»:å››æœˆçš„ç¬¬ä¸€ä¸ªæ˜ŸæœŸå¤©æ—©æ™¨1æ—¶59åˆ†è¿è¡Œa.sh159 1 1-7 4 * test `date + \%w` -eq &amp;&amp; /root/a.sh Crontabæ ¼å¼ minute hour day month week command å…¶ä¸­ï¼š minuteï¼šè¡¨ç¤ºåˆ†é’Ÿï¼Œå¯ä»¥æ˜¯ä»0åˆ°59ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ hourï¼šè¡¨ç¤ºå°æ—¶ï¼Œå¯ä»¥æ˜¯ä»0åˆ°23ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ dayï¼šè¡¨ç¤ºæ—¥æœŸï¼Œå¯ä»¥æ˜¯ä»1åˆ°31ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ monthï¼šè¡¨ç¤ºæœˆä»½ï¼Œå¯ä»¥æ˜¯ä»1åˆ°12ä¹‹é—´çš„ä»»ä½•æ•´æ•°ã€‚ weekï¼šè¡¨ç¤ºæ˜ŸæœŸå‡ ï¼Œå¯ä»¥æ˜¯ä»0åˆ°7ä¹‹é—´çš„ä»»ä½•æ•´æ•°ï¼Œè¿™é‡Œçš„0æˆ–7ä»£è¡¨æ˜ŸæœŸæ—¥ã€‚ commandï¼šè¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±ç¼–å†™çš„è„šæœ¬æ–‡ä»¶ã€‚ åœ¨ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š æ˜Ÿå·ï¼ˆ*ï¼‰ï¼šä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚monthå­—æ®µå¦‚æœæ˜¯æ˜Ÿå·ï¼Œåˆ™è¡¨ç¤ºåœ¨æ»¡è¶³å…¶å®ƒå­—æ®µçš„åˆ¶çº¦æ¡ä»¶åæ¯æœˆéƒ½æ‰§è¡Œè¯¥å‘½ä»¤æ“ä½œã€‚ é€—å·ï¼ˆ,ï¼‰ï¼šå¯ä»¥ç”¨é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œä¾‹å¦‚ï¼Œâ€œ1,2,5,7,8,9â€ ä¸­æ ï¼ˆ-ï¼‰ï¼šå¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œä¾‹å¦‚â€œ2-6â€è¡¨ç¤ºâ€œ2,3,4,5,6â€ æ­£æ–œçº¿ï¼ˆ/ï¼‰ï¼šå¯ä»¥ç”¨æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œä¾‹å¦‚â€œ0-23/2â€è¡¨ç¤ºæ¯ä¸¤å°æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚åŒæ—¶æ­£æ–œçº¿å¯ä»¥å’Œæ˜Ÿå·ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚*/10ï¼Œå¦‚æœç”¨åœ¨minuteå­—æ®µï¼Œè¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚ Crontabå®šæ—¶è°ƒç”¨Pythonè„šæœ¬ æŒ‡å®špythonè„šæœ¬æ–‡ä»¶ä¸­çš„å¤´ä¿¡æ¯ #!/bin/sh ç›¸å…³é“¾æ¥ æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ï¼ˆ50ï¼‰ï¼šcrontabå‘½ä»¤ - peida - åšå®¢å›­ crontabå‘½ä»¤_Linux crontab å‘½ä»¤ç”¨æ³•è¯¦è§£ï¼šæäº¤å’Œç®¡ç†ç”¨æˆ·çš„éœ€è¦å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡ crontab ä¸­ python è„šæœ¬æ‰§è¡Œå¤±è´¥çš„è§£å†³æ–¹æ³• | CoCoçš„å°é»‘å±‹]]></content>
      <categories>
        <category>å¼€å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Crontab</tag>
      </tags>
  </entry>
</search>
